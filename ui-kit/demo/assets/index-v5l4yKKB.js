import{h as e,T as t,S as n,i as r,j as s,k as a,R as l,l as c,m as o}from"./defaultButtonsProps-CTS3EVUl.js";import{r as i,U as d,h as u,W as f,C as p,N as h,V as m,e as y,p as b,bD as x}from"./index-DEKOHtjL.js";var g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},v=function(e,t){return i.createElement(d,u({},e,{ref:t,icon:g}))},w=i.forwardRef(v),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},K=function(e,t){return i.createElement(d,u({},e,{ref:t,icon:E}))},O=i.forwardRef(K);function j(e){const{dropPosition:t,dropLevelOffset:n,prefixCls:r,indent:s,direction:a="ltr"}=e,l="ltr"===a?"left":"right",c="ltr"===a?"right":"left",o={[l]:-n*s+4,[c]:0};switch(t){case-1:o.top=-3;break;case 1:o.bottom=-3;break;default:o.bottom=-3,o[l]=s+4}return f.createElement("div",{style:o,className:`${r}-drop-indicator`})}const N=f.forwardRef(((r,s)=>{var a;const{getPrefixCls:l,direction:c,virtual:o,tree:i}=f.useContext(p),{prefixCls:d,className:u,showIcon:b=!1,showLine:x,switcherIcon:g,switcherLoadingIcon:v,blockNode:w=!1,children:E,checkable:K=!1,selectable:N=!0,draggable:k,motion:C,style:I}=r,S=l("tree",d),z=l(),L=null!=C?C:Object.assign(Object.assign({},h(z)),{motionAppear:!1}),P=Object.assign(Object.assign({},r),{checkable:K,selectable:N,showIcon:b,motion:L,blockNode:w,showLine:Boolean(x),dropIndicatorRender:j}),[H,R,M]=e(S),[,$]=m(),A=$.paddingXS/2+((null===(a=$.Tree)||void 0===a?void 0:a.titleHeight)||$.controlHeightSM),D=f.useMemo((()=>{if(!k)return!1;let e={};switch(typeof k){case"function":e.nodeDraggable=k;break;case"object":e=Object.assign({},k)}return!1!==e.icon&&(e.icon=e.icon||f.createElement(O,null)),e}),[k]);return H(f.createElement(t,Object.assign({itemHeight:A,ref:s,virtual:o},P,{style:Object.assign(Object.assign({},null==i?void 0:i.style),I),prefixCls:S,className:y({[`${S}-icon-hide`]:!b,[`${S}-block-node`]:w,[`${S}-unselectable`]:!N,[`${S}-rtl`]:"rtl"===c},null==i?void 0:i.className,u,R,M),direction:c,checkable:K?f.createElement("span",{className:`${S}-checkbox-inner`}):K,selectable:N,switcherIcon:e=>f.createElement(n,{prefixCls:S,switcherIcon:g,switcherLoadingIcon:v,treeNodeProps:e,showLine:x}),draggable:D}),E))}));function k(e,t,n){const{key:r,children:s}=n;e.forEach((function(e){const a=e[r],l=e[s];!1!==t(a,e)&&k(l||[],t,n)}))}function C(e){let{treeData:t,expandedKeys:n,startKey:s,endKey:a,fieldNames:l}=e;const c=[];let o=0;if(s&&s===a)return[s];if(!s||!a)return[];return k(t,(e=>{if(2===o)return!1;if(function(e){return e===s||e===a}(e)){if(c.push(e),0===o)o=1;else if(1===o)return o=2,!1}else 1===o&&c.push(e);return n.includes(e)}),r(l)),c}function I(e,t,n){const s=b(t),a=[];return k(e,((e,t)=>{const n=s.indexOf(e);return-1!==n&&(a.push(t),s.splice(n,1)),!!s.length}),r(n)),a}var S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};function z(e){const{isLeaf:t,expanded:n}=e;return t?i.createElement(l,null):n?i.createElement(w,null):i.createElement(x,null)}function L(e){let{treeData:t,children:n}=e;return t||c(n)}const P=(e,t)=>{var{defaultExpandAll:n,defaultExpandParent:r,defaultExpandedKeys:l}=e,c=S(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const o=i.useRef(null),d=i.useRef(null),[u,f]=i.useState(c.selectedKeys||c.defaultSelectedKeys||[]),[h,m]=i.useState((()=>(()=>{const{keyEntities:e}=s(L(c));let t;return t=n?Object.keys(e):r?a(c.expandedKeys||l||[],e):c.expandedKeys||l||[],t})()));i.useEffect((()=>{"selectedKeys"in c&&f(c.selectedKeys)}),[c.selectedKeys]),i.useEffect((()=>{"expandedKeys"in c&&m(c.expandedKeys)}),[c.expandedKeys]);const{getPrefixCls:x,direction:g}=i.useContext(p),{prefixCls:v,className:w,showIcon:E=!0,expandAction:K="click"}=c,O=S(c,["prefixCls","className","showIcon","expandAction"]),j=x("tree",v),k=y(`${j}-directory`,{[`${j}-directory-rtl`]:"rtl"===g},w);return i.createElement(N,Object.assign({icon:z,ref:t,blockNode:!0},O,{showIcon:E,expandAction:K,prefixCls:j,className:k,expandedKeys:h,selectedKeys:u,onSelect:(e,t)=>{var n;const{multiple:r,fieldNames:s}=c,{node:a,nativeEvent:l}=t,{key:i=""}=a,u=L(c),p=Object.assign(Object.assign({},t),{selected:!0}),m=(null==l?void 0:l.ctrlKey)||(null==l?void 0:l.metaKey),y=null==l?void 0:l.shiftKey;let x;r&&m?(x=e,o.current=i,d.current=x,p.selectedNodes=I(u,x,s)):r&&y?(x=Array.from(new Set([].concat(b(d.current||[]),b(C({treeData:u,expandedKeys:h,startKey:i,endKey:o.current,fieldNames:s}))))),p.selectedNodes=I(u,x,s)):(x=[i],o.current=i,d.current=x,p.selectedNodes=I(u,x,s)),null===(n=c.onSelect)||void 0===n||n.call(c,x,p),"selectedKeys"in c||f(x)},onExpand:(e,t)=>{var n;return"expandedKeys"in c||m(e),null===(n=c.onExpand)||void 0===n?void 0:n.call(c,e,t)}}))},H=i.forwardRef(P),R=N;R.DirectoryTree=H,R.TreeNode=o;export{w as R,R as T};
