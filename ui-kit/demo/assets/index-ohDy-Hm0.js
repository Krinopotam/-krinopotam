import{j as V,r as M}from"./index-D4bHa_3o.js";var D=t=>{let e=t;for(;e=e.parentElement;){const s=getComputedStyle(e,null).getPropertyValue("overflow-y");if(e===document.body)return window;if(s==="auto"||s==="scroll"||s==="overlay")return e}return window},R=t=>t.firstChild?t.firstChild.offsetParent===t:!0,N=(t,e)=>{let s=t,n=0;R(e)||(n+=t.offsetTop-e.offsetTop,e=t.offsetParent,n+=-t.offsetTop);do n+=s.offsetTop,s=s.offsetParent;while(s&&s!==e);return n},z=t=>{let e=t.parentElement;for(;e&&getComputedStyle(e,null).getPropertyValue("display")==="contents";)e=e.parentElement;return e||window},S=null;typeof CSS<"u"&&CSS.supports&&(CSS.supports("position","sticky")?S="sticky":CSS.supports("position","-webkit-sticky")&&(S="-webkit-sticky"));var H=!1;try{const t=Object.defineProperty({},"passive",{get(){H={passive:!0}}}),e=()=>{};window.addEventListener("testPassive",e,t),window.removeEventListener("testPassive",e,t)}catch{}var L=t=>{const{el:e,onChange:s,unsubs:n,measure:i}=t;if(e===window){const l=()=>({top:0,left:0,height:window.innerHeight,width:window.innerWidth}),r=i(l()),p=()=>{Object.assign(r,i(l())),s()};return window.addEventListener("resize",p,H),n.push(()=>window.removeEventListener("resize",p)),r}else{const l=i(e.getBoundingClientRect()),r=()=>{Object.assign(l,i(e.getBoundingClientRect())),s()},p=new ResizeObserver(r);return p.observe(e),n.push(()=>p.disconnect()),l}},I=t=>{const e=getComputedStyle(t,null),s=parseInt(e.getPropertyValue("padding-top"),10),n=parseInt(e.getPropertyValue("padding-bottom"),10);return{top:s,bottom:n}},A=(t,e,s)=>{const{bottom:n,offsetBottom:i,offsetTop:l}=s,r=D(t);let p=!1;const C=()=>{p||requestAnimationFrame(()=>{const o=k();if(o!==d)m(o);else if(o===1&&!n){const{height:f}=w,{height:a}=P;t.style.top=`${f-a-i}px`}else if(o===2){const{height:f,offsetTop:a}=w,{height:h,naturalTop:c}=b,{height:v}=P,u=Math.max(0,a+g+f-(c+v+i));if(n){const y=Math.max(0,h-v-u);t.style.bottom=`${y}px`}else t.style.top=`${u}px`}p=!1}),p=!0};let g=r===window?window.scrollY:r.scrollTop;const $=o=>{const{offsetTop:f,height:a}=w,{naturalTop:h}=b,{height:c}=P;return o+f+a>=h+c+x+i},k=()=>{const{height:o}=w,{height:f}=P;return f+l+i<=o?3:$(g)?1:2},j=r!==window&&R(r),w=L({el:r,onChange:C,unsubs:e,measure:({height:o,top:f})=>({height:o,offsetTop:j?f:0})}),T=z(t),O=T===window?{top:0,bottom:0}:I(T),b=L({el:T,onChange:C,unsubs:e,measure:({height:o})=>({height:o-O.top-O.bottom,naturalTop:T===window?0:N(T,r)+O.top+w.offsetTop})}),P=L({el:t,onChange:C,unsubs:e,measure:({height:o})=>({height:o})});let x=0,d=k();const m=o=>{const f=d;if(d=o,f===2&&(x=-1),o===3){t.style.position=S,n?t.style.bottom=`${i}px`:t.style.top=`${l}px`;return}const{height:a,offsetTop:h}=w,{height:c,naturalTop:v}=b,{height:u}=P;if(o===2)if(t.style.position="relative",x=f===0?Math.max(0,h+g-v+l):Math.max(0,h+g+a-(v+u+i)),n){const y=Math.max(0,c-u-x);t.style.bottom=`${y}px`}else t.style.top=`${x}px`;else t.style.position=S,o===1?n?t.style.bottom=`${i}px`:t.style.top=`${a-u-i}px`:n?t.style.bottom=`${a-u-i}px`:t.style.top=`${l}px`};m(d);const B=o=>{if(o===g)return;const f=o-g;if(g=o,d===3)return;const{offsetTop:a,height:h}=w,{naturalTop:c,height:v}=b,{height:u}=P;if(f>0)if(d===0){if(o+a+l>c){const y=Math.max(0,a+g-c+l);o+a+h<=c+u+y+i?m(2):m(1)}}else d===2&&$(o)&&m(1);else if(d===1){if(a+o+h<c+v+i){const y=Math.max(0,a+g+h-(c+u+i));a+o+l>=c+y?m(2):m(0)}}else d===2&&a+o+l<c+x&&m(0)},E=r===window?()=>B(window.scrollY):()=>B(r.scrollTop);r.addEventListener("scroll",E,H),r.addEventListener("mousewheel",E,H),e.push(()=>r.removeEventListener("scroll",E),()=>r.removeEventListener("mousewheel",E))},q=({offsetTop:t=0,offsetBottom:e=0,bottom:s=!1}={})=>{const[n,i]=M.useState(null);return M.useEffect(()=>{if(!n||!S)return;const l=[];return A(n,l,{offsetBottom:e,offsetTop:t,bottom:s}),()=>{l.forEach(r=>r())}},[n,e,t,s]),i},F=t=>{const{offsetTop:e,offsetBottom:s,bottom:n,children:i,className:l,style:r}=t,p=q({offsetTop:e,offsetBottom:s,bottom:n});return V.jsx("div",{className:l,style:r,ref:p,children:i})},_=F;export{_ as s};
