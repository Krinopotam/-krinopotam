import{bL as e,r as t,i as n,p as r,s as o,b as a,v as l,f as s,y as i,bG as u,d as c,a9 as d,K as p,h as f,u as h,z as v,A as g,B as m,C as y,V as b,ai as S,m as C,e as x,F as w,o as N,L as R,k as I,ab as E,bv as k,j as D,t as F,c as P,g as O}from"./index-7nZFAa1C.js";import{B as M}from"./baseField-DesneoB5.js";import{s as j,D as L}from"./dFormModal-C9vmBgI4.js";import{j as T,m as V,a as A,B as K,l as G,f as H,u as W,t as $,e as _,d as z,c as B,P as U}from"./buttonsRow-CbJpBlrJ.js";import{n as Q,j as q,U as X,T as J,p as Y,q as Z,r as ee,S as te,o as ne}from"./defaultButtonsProps-SW37Xp2d.js";import{u as re,a as oe,b as ae,c as le,d as se,e as ie,f as ue,n as ce,g as de,h as pe,i as fe,j as he,k as ve,l as ge,m as me,o as ye,p as be,q as Se,r as Ce,s as xe,t as we,v as Ne,w as Re,x as Ie,y as Ee,z as ke,A as De,B as Fe,C as Pe,D as Oe,E as Me,F as je,G as Le,H as Te,I as Ve,J as Ae,K as Ke,L as Ge,M as He,N as We}from"./useApiGetGroupsOnly-DeGEwJRd.js";import{S as $e}from"./messageBox-DbI9dXeH.js";import{c as _e,d as ze,B as Be,u as Ue,a as Qe,D as qe,m as Xe}from"./useShowArrow-sYLatXS7.js";import{c as Je,d as Ye,e as Ze}from"./index-B4aTtR1L.js";import{u as et}from"./useIcons-DuQM9ftC.js";import{a as tt,u as nt,c as rt}from"./isArray-Dr27fI6O.js";var ot=function(e){return!e||e.disabled||e.disableCheckbox||!1===e.checkable},at=function(e){return null==e};var lt=function(){return null},st=["children","value"];function it(e){return o(e).map((function(e){if(!t.isValidElement(e)||!e.type)return null;var r=e,o=r.key,l=r.props,s=l.children,i=l.value,u=a(l,st),c=n({key:o,value:i},u),d=it(s);return d.length&&(c.children=d),c})).filter((function(e){return e}))}function ut(e){if(!e)return e;var t=n({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return l(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function ct(e){var n=t.useRef();n.current=e;var r=t.useCallback((function(){return n.current.apply(n,arguments)}),[]);return r}function dt(e,r,o){return t.useMemo((function(){if(e){if(o){var t=n({id:"id",pId:"pId",rootPId:null},"object"===i(o)?o:{});return function(e,t){var r=t.id,o=t.pId,a=t.rootPId,l=new Map,s=[];return e.forEach((function(e){var t=e[r],o=n(n({},e),{},{key:e.key||t});l.set(t,o)})),l.forEach((function(e){var t=e[o],n=l.get(t);n?(n.children=n.children||[],n.children.push(e)):t!==a&&null!==a||s.push(e)})),s}(e,t)}return e}return it(r)}),[r,o,e])}var pt=t.createContext(null),ft=t.createContext(null),ht={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},vt=function(n,o){var a=_e(),l=a.prefixCls,s=a.multiple,i=a.searchValue,h=a.toggleOpen,v=a.open,g=a.notFoundContent,m=t.useContext(ft),y=m.virtual,b=m.listHeight,S=m.listItemHeight,C=m.listItemScrollOffset,x=m.treeData,w=m.fieldNames,N=m.onSelect,R=m.dropdownMatchSelectWidth,I=m.treeExpandAction,E=m.treeTitleRender,k=m.onPopupScroll,D=m.leftMaxCount,F=m.leafCountOnly,P=m.valueEntities,O=t.useContext(pt),M=O.checkable,j=O.checkedKeys,L=O.halfCheckedKeys,T=O.treeExpandedKeys,V=O.treeDefaultExpandAll,A=O.treeDefaultExpandedKeys,K=O.onTreeExpand,G=O.treeIcon,H=O.showTreeIcon,W=O.switcherIcon,$=O.treeLine,_=O.treeNodeFilterProp,z=O.loadData,B=O.treeLoadedKeys,U=O.treeMotion,Q=O.onTreeLoad,q=O.keyEntities,Y=t.useRef(),Z=u((function(){return x}),[v,x],(function(e,t){return t[0]&&e[1]!==t[1]})),ee=t.useMemo((function(){return M?{checked:j,halfChecked:L}:null}),[M,j,L]);t.useEffect((function(){var e;v&&!s&&j.length&&(null===(e=Y.current)||void 0===e||e.scrollTo({key:j[0]}))}),[v]);var te=function(e){e.preventDefault()},ne=function(e,t){var n=t.node;M&&ot(n)||(N(n.key,{selected:!j.includes(n.key)}),s||h(!1))},re=t.useState(A),oe=c(re,2),ae=oe[0],le=oe[1],se=t.useState(null),ie=c(se,2),ue=ie[0],ce=ie[1],de=t.useMemo((function(){return T?r(T):i?ue:ae}),[ae,ue,T,i]),pe=String(i).toLowerCase(),fe=function(e){return!!pe&&String(e[_]).toLowerCase().includes(pe)};t.useEffect((function(){i&&ce(function(e,t){var n=[];return function e(r){r.forEach((function(r){var o=r[t.children];o&&(n.push(r[t.value]),e(o))}))}(e),n}(x,w))}),[i]);var he=t.useState((function(){return new Map})),ve=c(he,2),ge=ve[0],me=ve[1];t.useEffect((function(){D&&me(new Map)}),[D]);var ye=d((function(e){var t=e[w.value];return!j.includes(t)&&(null!==D&&(D<=0||!(!F||!D)&&function(e){var t=e[w.value];if(!ge.has(t)){var n=P.get(t);if(0===(n.children||[]).length)ge.set(t,!1);else{var r=n.children.filter((function(e){return!e.node.disabled&&!e.node.disableCheckbox&&!j.includes(e.node[w.value])})).length;ge.set(t,r>D)}}return ge.get(t)}(e)))})),be=function t(n){var r,o=function(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=e(t))||n){r&&(t=r);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,s=!0,i=!1;return{s:function(){r=r.call(t)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,l=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw l}}}}(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!a.disabled&&!1!==a.selectable){if(!i)return a;if(fe(a))return a;if(a[w.children]){var l=t(a[w.children]);if(l)return l}}}}catch(s){o.e(s)}finally{o.f()}return null},Se=t.useState(null),Ce=c(Se,2),xe=Ce[0],we=Ce[1],Ne=q[xe];t.useEffect((function(){if(v){var e,t=null;t=s||!j.length||i?(e=be(Z))?e[w.value]:null:j[0],we(t)}}),[v,i]),t.useImperativeHandle(o,(function(){var e;return{scrollTo:null===(e=Y.current)||void 0===e?void 0:e.scrollTo,onKeyDown:function(e){var t;switch(e.which){case p.UP:case p.DOWN:case p.LEFT:case p.RIGHT:null===(t=Y.current)||void 0===t||t.onKeyDown(e);break;case p.ENTER:if(Ne){var n=ye(Ne.node),r=(null==Ne?void 0:Ne.node)||{},o=r.selectable,a=r.value,l=r.disabled;!1===o||l||n||ne(0,{node:{key:xe},selected:!j.includes(a)})}break;case p.ESC:h(!1)}},onKeyUp:function(){}}}));var Re=u((function(){return!i}),[i,T||ae],(function(e,t){var n=c(e,1)[0],r=c(t,2),o=r[0],a=r[1];return n!==o&&!(!o&&!a)}))?z:null;if(0===Z.length)return t.createElement("div",{role:"listbox",className:"".concat(l,"-empty"),onMouseDown:te},g);var Ie={fieldNames:w};return B&&(Ie.loadedKeys=B),de&&(Ie.expandedKeys=de),t.createElement("div",{onMouseDown:te},Ne&&v&&t.createElement("span",{style:ht,"aria-live":"assertive"},Ne.node.value),t.createElement(X.Provider,{value:{nodeDisabled:ye}},t.createElement(J,f({ref:Y,focusable:!1,prefixCls:"".concat(l,"-tree"),treeData:Z,height:b,itemHeight:S,itemScrollOffset:C,virtual:!1!==y&&!1!==R,multiple:s,icon:G,showIcon:H,switcherIcon:W,showLine:$,loadData:Re,motion:U,activeKey:xe,checkable:M,checkStrictly:!0,checkedKeys:ee,selectedKeys:M?[]:j,defaultExpandAll:V,titleRender:E},Ie,{onActiveChange:we,onSelect:ne,onCheck:ne,onExpand:function(e){le(e),ce(e),K&&K(e)},onLoad:Q,filterTreeNode:fe,expandAction:I,onScroll:k}))))},gt=t.forwardRef(vt),mt="SHOW_ALL",yt="SHOW_PARENT",bt="SHOW_CHILD";function St(e,t,n,r){var o=new Set(e);return t===bt?e.filter((function(e){var t=n[e];return!(t&&t.children&&t.children.some((function(e){var t=e.node;return o.has(t[r.value])}))&&t.children.every((function(e){var t=e.node;return ot(t)||o.has(t[r.value])})))})):t===yt?e.filter((function(e){var t=n[e],r=t?t.parent:null;return!r||ot(r.node)||!o.has(r.key)})):e}var Ct=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","maxCount","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];var xt=t.forwardRef((function(e,o){var u,d,p=e.id,v=e.prefixCls,g=void 0===v?"rc-tree-select":v,m=e.value,y=e.defaultValue,b=e.onChange,S=e.onSelect,C=e.onDeselect,x=e.searchValue,w=e.inputValue,N=e.onSearch,R=e.autoClearSearchValue,I=void 0===R||R,E=e.filterTreeNode,k=e.treeNodeFilterProp,D=void 0===k?"value":k,F=e.showCheckedStrategy,P=e.treeNodeLabelProp,O=e.multiple,M=e.treeCheckable,j=e.treeCheckStrictly,L=e.labelInValue,T=e.maxCount,V=e.fieldNames,A=e.treeDataSimpleMode,K=e.treeData,G=e.children,H=e.loadData,W=e.treeLoadedKeys,$=e.onTreeLoad,_=e.treeDefaultExpandAll,z=e.treeExpandedKeys,B=e.treeDefaultExpandedKeys,U=e.onTreeExpand,X=e.treeExpandAction,J=e.virtual,Y=e.listHeight,Z=void 0===Y?200:Y,ee=e.listItemHeight,te=void 0===ee?20:ee,ne=e.listItemScrollOffset,re=void 0===ne?0:ne,oe=e.onDropdownVisibleChange,ae=e.dropdownMatchSelectWidth,le=void 0===ae||ae,se=e.treeLine,ie=e.treeIcon,ue=e.showTreeIcon,ce=e.switcherIcon,de=e.treeMotion,pe=e.treeTitleRender,fe=e.onPopupScroll,he=a(e,Ct),ve=ze(p),ge=M&&!j,me=M||j,ye=j||L,be=me||O,Se=h(y,{value:m}),Ce=c(Se,2),xe=Ce[0],we=Ce[1],Ne=t.useMemo((function(){return M?F||bt:mt}),[F,M]),Re=t.useMemo((function(){return function(e){var t=e||{},n=t.label,r=t.value;return{_title:n?[n]:["title","label"],value:r||"value",key:r||"value",children:t.children||"children"}}(V)}),[JSON.stringify(V)]),Ie=h("",{value:void 0!==x?x:w,postState:function(e){return e||""}}),Ee=c(Ie,2),ke=Ee[0],De=Ee[1],Fe=dt(K,G,A),Pe=function(e,r){return t.useMemo((function(){return q(e,{fieldNames:r,initWrapper:function(e){return n(n({},e),{},{valueEntities:new Map})},processEntity:function(e,t){var n=e.node[r.value];t.valueEntities.set(n,e)}})}),[e,r])}(Fe,Re),Oe=Pe.keyEntities,Me=Pe.valueEntities,je=t.useCallback((function(e){var t=[],n=[];return e.forEach((function(e){Me.has(e)?n.push(e):t.push(e)})),{missingRawValues:t,existRawValues:n}}),[Me]),Le=function(e,r,o){var a=o.fieldNames,l=o.treeNodeFilterProp,i=o.filterTreeNode,u=a.children;return t.useMemo((function(){if(!r||!1===i)return e;var t="function"==typeof i?i:function(e,t){return String(t[l]).toUpperCase().includes(r.toUpperCase())};return function e(o){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.reduce((function(o,l){var i=l[u],c=a||t(r,ut(l)),d=e(i||[],c);return(c||d.length)&&o.push(n(n({},l),{},s({isLeaf:void 0},u,d))),o}),[])}(e)}),[e,r,u,l,i])}(Fe,ke,{fieldNames:Re,treeNodeFilterProp:D,filterTreeNode:E}),Te=t.useCallback((function(e){if(e){if(P)return e[P];for(var t=Re._title,n=0;n<t.length;n+=1){var r=e[t[n]];if(void 0!==r)return r}}}),[Re,P]),Ve=t.useCallback((function(e){var t=function(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}(e);return t.map((function(e){return function(e){return!e||"object"!==i(e)}(e)?{value:e}:e}))}),[]),Ae=t.useCallback((function(e){return Ve(e).map((function(e){var t,n,r=e.label,o=e.value,a=e.halfChecked,l=Me.get(o);if(l)r=pe?pe(l.node):null!==(n=r)&&void 0!==n?n:Te(l.node),t=l.node.disabled;else if(void 0===r){r=Ve(xe).find((function(e){return e.value===o})).label}return{label:r,value:o,halfChecked:a,disabled:t}}))}),[Me,Te,Ve,xe]),Ke=t.useMemo((function(){return Ve(null===xe?[]:xe)}),[Ve,xe]),Ge=t.useMemo((function(){var e=[],t=[];return Ke.forEach((function(n){n.halfChecked?t.push(n):e.push(n)})),[e,t]}),[Ke]),He=c(Ge,2),We=He[0],$e=He[1],_e=t.useMemo((function(){return We.map((function(e){return e.value}))}),[We]),Ue=function(e,n,o,a){return t.useMemo((function(){var t=function(e){return e.map((function(e){return e.value}))},l=t(e),s=t(n),i=l.filter((function(e){return!a[e]})),u=l,c=s;if(o){var d=Q(l,!0,a);u=d.checkedKeys,c=d.halfCheckedKeys}return[Array.from(new Set([].concat(r(i),r(u)))),c]}),[e,n,o,a])}(We,$e,ge,Oe),Qe=c(Ue,2),qe=Qe[0],Xe=Qe[1],Je=t.useMemo((function(){var e=St(qe,Ne,Oe,Re).map((function(e){var t,n;return null!==(t=null===(n=Oe[e])||void 0===n||null===(n=n.node)||void 0===n?void 0:n[Re.value])&&void 0!==t?t:e})).map((function(e){var t=We.find((function(t){return t.value===e})),n=L?null==t?void 0:t.label:null==pe?void 0:pe(t);return{value:e,label:n}})),t=Ae(e),r=t[0];return!be&&r&&at(r.value)&&at(r.label)?[]:t.map((function(e){var t;return n(n({},e),{},{label:null!==(t=e.label)&&void 0!==t?t:e.value})}))}),[Re,be,qe,We,Ae,Ne,Oe]),Ye=(u=Je,d=t.useRef({valueLabels:new Map}),t.useMemo((function(){var e=d.current.valueLabels,t=new Map,r=u.map((function(r){var o=r.value,a=r.label,l=null!=a?a:e.get(o);return t.set(o,l),n(n({},r),{},{label:l})}));return d.current.valueLabels=t,[r]}),[u])),Ze=c(Ye,1)[0],et=t.useMemo((function(){return!be||"SHOW_CHILD"!==Ne&&!j&&M?null:T}),[T,be,j,Ne,M]),tt=ct((function(e,n,o){var a=St(e,Ne,Oe,Re);if(!(et&&a.length>et)){var s=Ae(e);if(we(s),I&&De(""),b){var i=e;ge&&(i=a.map((function(e){var t=Me.get(e);return t?t.node[Re.value]:e})));var u=n||{triggerValue:void 0,selected:void 0},c=u.triggerValue,d=u.selected,p=i;if(j){var f=$e.filter((function(e){return!i.includes(e.value)}));p=[].concat(r(p),r(f))}var h=Ae(p),v={preValue:We,triggerValue:c},g=!0;(j||"selection"===o&&!d)&&(g=!1),function(e,n,r,o,a,s){var i=null,u=null;function c(){u||(u=[],function e(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.map((function(o,c){var d="".concat(a,"-").concat(c),p=o[s.value],f=r.includes(p),h=e(o[s.children]||[],d,f),v=t.createElement(lt,o,h.map((function(e){return e.node})));if(n===p&&(i=v),f){var g={pos:d,node:v,children:h};return l||u.push(g),g}return null})).filter((function(e){return e}))}(o),u.sort((function(e,t){var n=e.node.props.value,o=t.node.props.value;return r.indexOf(n)-r.indexOf(o)})))}Object.defineProperty(e,"triggerNode",{get:function(){return l(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),c(),i}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return l(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),c(),a?u:u.map((function(e){return e.node}))}})}(v,c,e,Fe,g,Re),me?v.checked=d:v.selected=d;var m=ye?h:h.map((function(e){return e.value}));b(be?m:m[0],ye?null:h.map((function(e){return e.label})),v)}}})),nt=t.useCallback((function(e,t){var n,o=t.selected,a=t.source,l=Oe[e],s=null==l?void 0:l.node,i=null!==(n=null==s?void 0:s[Re.value])&&void 0!==n?n:e;if(be){var u=o?[].concat(r(_e),[i]):qe.filter((function(e){return e!==i}));if(ge){var c,d=je(u),p=d.missingRawValues,f=d.existRawValues.map((function(e){return Me.get(e).key}));if(o)c=Q(f,!0,Oe).checkedKeys;else c=Q(f,{halfCheckedKeys:Xe},Oe).checkedKeys;u=[].concat(r(p),r(c.map((function(e){return Oe[e].node[Re.value]}))))}tt(u,{selected:o,triggerValue:i},a||"option")}else tt([i],{selected:!0,triggerValue:i},"option");o||!be?null==S||S(i,ut(s)):null==C||C(i,ut(s))}),[je,Me,Oe,Re,be,_e,tt,ge,S,C,qe,Xe,T]),rt=t.useCallback((function(e){if(oe){var t={};Object.defineProperty(t,"documentClickClose",{get:function(){return l(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),oe(e,t)}}),[oe]),ot=ct((function(e,t){var n=e.map((function(e){return e.value}));"clear"!==t.type?t.values.length&&nt(t.values[0].value,{selected:!1,source:"selection"}):tt(n,{},"selection")})),st=t.useMemo((function(){return{virtual:J,dropdownMatchSelectWidth:le,listHeight:Z,listItemHeight:te,listItemScrollOffset:re,treeData:Le,fieldNames:Re,onSelect:nt,treeExpandAction:X,treeTitleRender:pe,onPopupScroll:fe,leftMaxCount:void 0===T?null:T-Ze.length,leafCountOnly:"SHOW_CHILD"===Ne&&!j&&!!M,valueEntities:Me}}),[J,le,Z,te,re,Le,Re,nt,X,pe,fe,T,Ze.length,Ne,j,M,Me]),it=t.useMemo((function(){return{checkable:me,loadData:H,treeLoadedKeys:W,onTreeLoad:$,checkedKeys:qe,halfCheckedKeys:Xe,treeDefaultExpandAll:_,treeExpandedKeys:z,treeDefaultExpandedKeys:B,onTreeExpand:U,treeIcon:ie,treeMotion:de,showTreeIcon:ue,switcherIcon:ce,treeLine:se,treeNodeFilterProp:D,keyEntities:Oe}}),[me,H,W,$,qe,Xe,_,z,B,U,ie,de,ue,ce,se,D,Oe]);return t.createElement(ft.Provider,{value:st},t.createElement(pt.Provider,{value:it},t.createElement(Be,f({ref:o},he,{id:ve,prefixCls:g,mode:be?"multiple":void 0,displayValues:Ze,onDisplayValuesChange:ot,searchValue:ke,onSearch:function(e){De(e),null==N||N(e)},OptionList:gt,emptyOptions:!Fe.length,onDropdownVisibleChange:rt,dropdownMatchSelectWidth:le}))))}));xt.TreeNode=lt,xt.SHOW_ALL=mt,xt.SHOW_PARENT=yt,xt.SHOW_CHILD=bt;const wt=e=>{const{componentCls:t,treePrefixCls:n,colorBgElevated:r}=e,o=`.${n}`;return[{[`${t}-dropdown`]:[{padding:`${m(e.paddingXS)} ${m(e.calc(e.paddingXS).div(2).equal())}`},Z(n,g(e,{colorBgContainer:r})),{[o]:{borderRadius:0,[`${o}-list-holder-inner`]:{alignItems:"stretch",[`${o}-treenode`]:{[`${o}-node-content-wrapper`]:{flex:"auto"}}}}},ee(`${n}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${o}-switcher${o}-switcher_close`]:{[`${o}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};const Nt=(e,n)=>{var r;const{prefixCls:o,size:a,disabled:l,bordered:s=!0,className:i,rootClassName:u,treeCheckable:c,multiple:d,listHeight:p=256,listItemHeight:f,placement:h,notFoundContent:m,switcherIcon:D,treeLine:F,getPopupContainer:P,popupClassName:O,dropdownClassName:M,treeIcon:j=!1,transitionName:L,choiceTransitionName:T="",status:V,treeExpandAction:A,builtinPlacements:K,dropdownMatchSelectWidth:G,popupMatchSelectWidth:H,allowClear:W,variant:$,dropdownStyle:_,tagRender:z,maxCount:B,showCheckedStrategy:U,treeCheckStrictly:Q}=e,q=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender","maxCount","showCheckedStrategy","treeCheckStrictly"]),{getPopupContainer:X,getPrefixCls:J,renderEmpty:Z,direction:ee,virtual:ne,popupMatchSelectWidth:re,popupOverflow:oe}=t.useContext(y),[,ae]=b(),le=null!=f?f:(null==ae?void 0:ae.controlHeightSM)+(null==ae?void 0:ae.paddingXXS),se=J(),ie=J("select",o),ue=J("select-tree",o),ce=J("tree-select",o),{compactSize:de,compactItemClassnames:pe}=S(ie,ee),fe=C(ie),he=C(ce),[ve,ge,me]=Ue(ie,fe),[ye]=function(e,t,n){return v("TreeSelect",(e=>{const n=g(e,{treePrefixCls:t});return[wt(n)]}),Y)(e,n)}(ce,ue,he),[be,Se]=Je("treeSelect",$,s),Ce=x(O||M,`${ce}-dropdown`,{[`${ce}-dropdown-rtl`]:"rtl"===ee},u,me,fe,he,ge),xe=!(!c&&!d),we=t.useMemo((()=>{if(!B||("SHOW_ALL"!==U||Q)&&"SHOW_PARENT"!==U)return B}),[B,U,Q]),Ne=Qe(e.suffixIcon,e.showArrow),Re=null!==(r=null!=H?H:G)&&void 0!==r?r:re,{status:Ie,hasFeedback:Ee,isFormItemInput:ke,feedbackIcon:De}=t.useContext(w),Fe=Ze(Ie,V),{suffixIcon:Pe,removeIcon:Oe,clearIcon:Me}=et(Object.assign(Object.assign({},q),{multiple:xe,showSuffixIcon:Ne,hasFeedback:Ee,feedbackIcon:De,prefixCls:ie,componentName:"TreeSelect"})),je=!0===W?{clearIcon:Me}:W;let Le;Le=void 0!==m?m:(null==Z?void 0:Z("Select"))||t.createElement(qe,{componentName:"Select"});const Te=N(q,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),Ve=t.useMemo((()=>void 0!==h?h:"rtl"===ee?"bottomRight":"bottomLeft"),[h,ee]),Ae=R((e=>{var t;return null!==(t=null!=a?a:de)&&void 0!==t?t:e})),Ke=t.useContext(I),Ge=null!=l?l:Ke,He=x(!o&&ce,{[`${ie}-lg`]:"large"===Ae,[`${ie}-sm`]:"small"===Ae,[`${ie}-rtl`]:"rtl"===ee,[`${ie}-${be}`]:Se,[`${ie}-in-form-item`]:ke},Ye(ie,Fe,Ee),pe,i,u,me,fe,he,ge),[We]=E("SelectLike",null==_?void 0:_.zIndex);return ve(ye(t.createElement(xt,Object.assign({virtual:ne,disabled:Ge},Te,{dropdownMatchSelectWidth:Re,builtinPlacements:Xe(K,oe),ref:n,prefixCls:ie,className:He,listHeight:p,listItemHeight:le,treeCheckable:c?t.createElement("span",{className:`${ie}-tree-checkbox-inner`}):c,treeLine:!!F,suffixIcon:Pe,multiple:xe,placement:Ve,removeIcon:Oe,allowClear:je,switcherIcon:e=>t.createElement(te,{prefixCls:ue,switcherIcon:D,treeNodeProps:e,showLine:F}),showTreeIcon:j,notFoundContent:Le,getPopupContainer:P||X,treeMotion:null,dropdownClassName:Ce,dropdownStyle:Object.assign(Object.assign({},_),{zIndex:We}),choiceTransitionName:k(se,"",T),transitionName:k(se,"slide-up",L),treeExpandAction:A,tagRender:xe?z:void 0,maxCount:we,showCheckedStrategy:U,treeCheckStrictly:Q}))))},Rt=t.forwardRef(Nt),It=T(Rt,"dropdownAlign",(e=>N(e,["visible"])));Rt.TreeNode=lt,Rt.SHOW_ALL=mt,Rt.SHOW_PARENT=yt,Rt.SHOW_CHILD=bt,Rt._InternalPanelDoNotUseOrYouWillBeFired=It;const Et=t.createContext(void 0),kt=({children:e})=>{const n=t.useRef(!1),r=t.useRef(!1),o=t.useMemo((()=>({ctrlPressedRef:n,dialogOpenedRef:r})),[n]);return D.jsx(Et.Provider,{value:o,children:e})},Dt=(e,n,r)=>{const{dialogOpenedRef:o}=t.useContext(Et);return t.useMemo((()=>{const t=r?null==n?void 0:n.editGroupFormProps:null==n?void 0:n.editFormProps;if(!t)return;const a={...t};n.language&&!a.language&&(a.language=n.language);const l=null==t?void 0:t.onSubmitSuccess;a.onSubmitSuccess=(t,r,o,a,s)=>{var i;if(null==l||l(t,r,o,a,s),s.isPrevented())return;const u=a.model.getFormMode(),c=e.getFieldNames(),d={...r,...o};let p;if(p=d[c.parent]?null==(i=d[c.parent])?void 0:i[c.key]:null===d[c.parent]?void 0:e.getActiveNodeKey(),"create"===u||"clone"===u)d[c.key]||(d[c.key]=ne()),e.addNode(d,p,"insideBottom",{ensureVisible:!0,select:!!n.selectNewNode,sortNodes:n.sortOnChange});else if("update"===u){e.updateNode(d,p,{ensureVisible:!0,sortNodes:n.sortOnChange});const t=e.getValues();e.setValues(Ft(t,d,c))}};const s=null==t?void 0:t.onOpen;a.onOpen=(e,t,n,r)=>{const a=null==s?void 0:s(e,t,n,r);return r.isPrevented()||(o.current=!0),a};const i=null==t?void 0:t.onClosed;return a.onClosed=(e,t)=>{null==i||i(e,t),t.isPrevented()||(o.current=!1)},a}),[r,null==n?void 0:n.editFormProps,null==n?void 0:n.editGroupFormProps,n.language,n.selectNewNode,n.sortOnChange,e,o])},Ft=(e,t,n)=>{if(!e)return null;const r=[];for(const o of e)o.value===t[n.key]?r.push({value:o.value}):r.push(o);return r},Pt=()=>{const[,e]=t.useState({});return t.useCallback((()=>{e({})}),[e])},Ot=e=>({...e}),Mt=({treeApi:e,treeProps:n})=>{const r=((e,n)=>{const{dialogOpenedRef:r}=t.useContext(Et);e.getButtonsApi().refreshButtons=Pt();const o=e.getFieldNames(),a=e.getActiveNode(!0),l=!!(null==a?void 0:a.isLeaf)||!(!n.groupsMode||(null==a?void 0:a[o.isGroup])),s=n.buttons,i=n.buttonsSize??"small",u=n.buttonsPosition??"right",c=re(n),d=oe(e,n,l),p=ae(e,n,l),f=le(e,n,a,Ot,l),h=se(e,n,a,Ot,l),v=ie(e,n,a,Ot,l),g=ue(e,n,a,l,(()=>{r.current=!0}),(()=>{r.current=!1}));return t.useMemo((()=>{const e=V({headerLabel:c,view:f,create:d,createGroup:p,clone:h,update:v,delete:g},s);for(const t in e){const n=e[t];n&&"headerLabel"!==t&&"hotkey"!==n.type&&(n.size=n.size??i,n.position=n.position??u,n.checkDisabled&&(n.disabled=!a),n.checkHidden&&(n.hidden=!a))}return e}),[c,f,d,p,h,v,g,s,i,u,a])})(e,n),{token:{colorBorderSecondary:o}}=F.useToken();return t.useMemo((()=>r?D.jsx(A,{buttons:r,apiRef:e.getButtonsApi(),style:{padding:"0 4px 6px 4px",borderBottom:`1px solid ${o}`,...n.buttonsRowStyle},styles:n.buttonsRowStyles,context:e,iconsOnly:!1!==n.buttonsIconsOnly}):null),[r,o,e,n.buttonsIconsOnly,n.buttonsRowStyle,n.buttonsRowStyles])},jt=({api:e})=>{const t=e.getFetchError(),n=e.getIsFetching(),r=e.getMinSymbols(),o=e.isDataPlainList();return r?D.jsx(Lt,{minSymbols:r,plainList:o}):n?D.jsx(Tt,{plainList:o}):t?D.jsx(Vt,{error:t,plainList:o}):D.jsx(D.Fragment,{})},Lt=({minSymbols:e,plainList:t})=>D.jsxs("div",{style:{paddingLeft:t?"8px":"30px",fontSize:"12px"},children:["Введите как минимум ",e," симв."]}),Tt=({plainList:e})=>D.jsxs("div",{style:{paddingLeft:e?"8px":"30px",fontSize:"12px"},children:[D.jsx($e,{size:"small"})," загрузка..."]}),Vt=({error:e,plainList:t})=>D.jsx("div",{role:"alert",style:{paddingLeft:t?"8px":"30px",fontSize:"12px",color:"#ff4d4f"},children:e}),At=({api:e})=>{const t=e.getIsFetching(),n=e.getFetchError(),r=e.getMinSymbols(),o=e.isDataPlainList();return r||t||n?D.jsx(D.Fragment,{}):D.jsx("div",{style:{paddingLeft:o?"8px":"30px",fontSize:"12px"},children:e.t("dataNotFound")})},Kt=({api:e,children:t})=>{const n=e.isDataPlainList(),r=e.getProps();return D.jsx("div",{className:n?"tree-select-plain":void 0,children:r.editFormProps||r.editGroupFormProps?D.jsx(Gt,{api:e,children:t}):D.jsxs(D.Fragment,{children:[t,D.jsx(jt,{api:e})]})})},Gt=({api:e,children:t})=>{const n=e.getProps();return D.jsxs(K,{style:{display:"flex",flexDirection:"column",...n.buttonsRowWrapperStyle},keepFocus:!1,children:[D.jsx(Mt,{treeApi:e,treeProps:n}),t,D.jsx(jt,{api:e})]})},Ht=({api:e,children:n})=>{const r=e.getProps(),o=t.useContext(ft);return o&&(r.titleRender?o.treeTitleRender=r.titleRender:o.treeTitleRender=void 0),r.dropdownRender?r.dropdownRender(n):D.jsx(Kt,{api:e,children:n})},Wt=({api:e,allProps:n,treeSelectProps:r})=>{const{ctrlPressedRef:o,dialogOpenedRef:a}=t.useContext(Et);_t(o);const l=Dt(e,n,!1),s=Dt(e,n,!0),i=(e=>t.useMemo((()=>({maxHeight:400,overflow:"auto",...e})),[e]))(n.dropdownStyle),u=Bt({api:e}),c=zt(e),d=Yt(e.getFieldNames()),p=e.getExpandedKeys(),f=Zt(e),h=Ut(e),v=Qt(e),g=qt(e,o,a),m=Xt(e),y=Jt(e);return D.jsxs(D.Fragment,{children:[D.jsx(Rt,{ref:e.treeSelectRef,treeNodeFilterProp:d.label,notFoundContent:D.jsx(At,{api:e}),...r,labelInValue:!0,treeTitleRender:n.selectedRender,dropdownRender:n.readOnly?$t:u,showSearch:!n.readOnly&&!1!==n.showSearch,allowClear:!n.readOnly&&!1!==n.allowClear,fieldNames:d,treeData:e.getDataSet(),value:c,disabled:n.disabled,treeDefaultExpandAll:n.defaultExpandAll,treeDefaultExpandedKeys:n.defaultExpandedKeys,treeExpandedKeys:p,open:e.getIsOpen(),dropdownStyle:i,filterTreeNode:y,onTreeExpand:f,onClear:h,onChange:v,onDropdownVisibleChange:g,onSearch:m}),!n.disabled&&l?D.jsx(L,{...l,apiRef:e.getEditFormApi()}):null,!n.disabled&&s?D.jsx(L,{...s,apiRef:e.getEditGroupFormApi()}):null]})},$t=()=>D.jsx(D.Fragment,{}),_t=e=>{G("keydown",(t=>{"Control"===t.key&&(e.current=!0)})),G("keyup",(t=>{"Control"===t.key&&(e.current=!1)}))},zt=e=>{const t=e.getValues();return e.getProps().multiple?t??void 0:(null==t?void 0:t[0])??void 0},Bt=({api:e})=>t.useCallback((t=>D.jsx(Ht,{api:e,children:t})),[e]),Ut=e=>()=>{var t;e.setValues(null);const n=e.getProps();null==(t=n.onClear)||t.call(n)},Qt=e=>t=>{var n;const r=t;e.setValues(r??null);const o=e.getProps(),a=r?e.getSelectedKeys(r)??[]:[],l=r?e.getSelectedNodes(void 0,r)??[]:[];null==(n=o.onChange)||n.call(o,t,a,l)},qt=(e,t,n)=>r=>{var o;const a=e.getProps();a.readOnly?e.setIsOpen(!1):(t.current||n.current?e.setIsOpen(!0):e.setIsOpen(r),!r||"onUse"!==a.fetchMode&&"onUseForce"!==a.fetchMode||e.fetchData(),null==(o=a.onDropdownVisibleChange)||o.call(a,r))},Xt=e=>t=>{var n;e.fetchData(t,!0);const r=e.getProps();null==(n=r.onSearch)||n.call(r,t)},Jt=e=>{const t=(e=>{const t=e.getFieldNames().title;return(e,n)=>!(!n||"string"!=typeof n[t])&&n[t].toLowerCase().indexOf(e.toLowerCase())>=0})(e);return(n,r)=>{if(!e.getIsAllFetched())return!0;const o=e.getProps();return o.filterTreeNode?"function"==typeof o.filterTreeNode?o.filterTreeNode(n,r):o.filterTreeNode:t(n,r)}},Yt=e=>({value:e.key,label:e.title,children:e.children}),Zt=e=>t=>{var n;const r=e.getProps();e.setExpandedKeys(t),null==(n=r.onTreeExpand)||n.call(r,t)},en=e=>()=>e,tn=e=>t=>{e(t)},nn=e=>()=>e,rn=e=>t=>{e(t)},on=e=>()=>e,an=e=>()=>e,ln=e=>()=>e,sn=e=>t=>{e(t)},un=e=>()=>e,cn=e=>t=>{e(t)};var dn,pn;const fn=O(function(){if(pn)return dn;pn=1;var e=/^\s+|\s+$/g,t=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,o=parseInt,a="object"==typeof P&&P&&P.Object===Object&&P,l="object"==typeof self&&self&&self.Object===Object&&self,s=a||l||Function("return this")(),i=Object.prototype.toString,u=Math.max,c=Math.min,d=function(){return s.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function f(a){if("number"==typeof a)return a;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==i.call(e)}(a))return NaN;if(p(a)){var l="function"==typeof a.valueOf?a.valueOf():a;a=p(l)?l+"":l}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(e,"");var s=n.test(a);return s||r.test(a)?o(a.slice(2),s?2:8):t.test(a)?NaN:+a}return dn=function(e,t,n){var r,o,a,l,s,i,h=0,v=!1,g=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,a=o;return r=o=void 0,h=t,l=e.apply(a,n)}function b(e){var n=e-i;return void 0===i||n>=t||n<0||g&&e-h>=a}function S(){var e=d();if(b(e))return C(e);s=setTimeout(S,function(e){var n=t-(e-i);return g?c(n,a-(e-h)):n}(e))}function C(e){return s=void 0,m&&r?y(e):(r=o=void 0,l)}function x(){var e=d(),n=b(e);if(r=arguments,o=this,i=e,n){if(void 0===s)return function(e){return h=e,s=setTimeout(S,t),v?y(e):l}(i);if(g)return s=setTimeout(S,t),y(i)}return void 0===s&&(s=setTimeout(S,t)),l}return t=f(t)||0,p(n)&&(v=!!n.leading,a=(g="maxWait"in n)?u(f(n.maxWait)||0,t):a,m="trailing"in n?!!n.trailing:m),x.cancel=function(){void 0!==s&&clearTimeout(s),h=0,r=i=o=s=void 0},x.flush=function(){return void 0===s?l:C(d())},x}}()),hn=(e,t)=>(n="",r)=>{const o=fn(e,t.getProps().debounce??0);r?o(n):e(n)},vn=e=>!(!e||"object"!=typeof e||!e.value),gn=(e,t)=>({value:e[t.key],label:e[t.title]}),mn=(e,t)=>{if(!e)return null;if(!tt(e))return"object"==typeof e?vn(e)?[e]:[gn(e,t)]:[{value:e}];const n=[];for(const r of e)r&&("object"==typeof r?vn(r)?n.push(r):n.push(gn(r,t)):n.push({value:r}));return n},yn=(e,n)=>t.useMemo((()=>mn(e,n)),[n,e]),bn=e=>()=>e??null,Sn=(e,n)=>t.useCallback((t=>{e(mn(t,n))}),[n,e]),Cn=e=>t=>{const n=t??e;if(!n)return;if(!tt(n))return[n.value];const r=[];for(const e of n)r.push(e.value);return r},xn=(e,t,n)=>{const r={[n.key]:e.value,[n.title]:e.label},{idx:o,nodes:a}=de(t,e.value,n);if(o<0||!(null==a?void 0:a[o]))return r;const l={...a[o]};return delete l[n.children],l},wn=(e,n)=>{const r=t.useRef(void 0),o=t.useRef(null),a=t.useRef(void 0);return(t,l)=>{const s=e.getDataSet(),i=e.getFieldNames(),u=t??s,c=l??n;if(r.current===u&&o.current===c)return a.current;if(r.current=u,o.current=c,!c)return void(a.current=void 0);const d=[];if(tt(c))for(const e of c){const t=xn(e,u,i);t&&d.push(t)}else d.push(xn(c,u,i));return a.current=d,d}},Nn=(e,n)=>t.useCallback(((t,r=!0)=>{var o;const a=e.getFieldNames(),l=null==(o=mn(t,a))?void 0:o[0];if(!l)return;const s=e.getValues();if(r){if(Rn(s,l.value))return;n?e.setValues([...s??[],l]):e.setValues([l])}else{if(!Rn(s,l.value))return;n?e.setValues((null==s?void 0:s.filter((e=>e.value!==l.value)))??null):e.setValues([])}}),[e,n]),Rn=(e,t)=>{if(!e)return!1;for(const n of e)if(n.value===t)return!0;return!1},In={ru_RU:{view:"Просмотр",viewGroup:"Просмотр группы",viewRecord:"Просмотр записи",viewRecordsGroup:"Просмотр группы записей",create:"Создать",createRecord:"Создать запись",createGroup:"Создать группу",createRecordsGroup:"Создать группу записей",edit:"Редактировать",editGroup:"Редактировать группу",editRecord:"Редактировать запись",editRecordsGroup:"Редактировать группу записей",clone:"Клонировать",cloneGroup:"Клонировать группу",cloneRecord:"Клонировать запись",cloneRecordsGroup:"Клонировать группу записей",delete:"Удалить",deleteGroup:"Удалить группу",deleteRecord:"Удалить запись(и)",deleteRecordsGroup:"Удалить группу записей",select:"Выбрать",selectRecord:"Выбрать запись(и)",go:"Перейти",filter:"Фильтр",ok:"OK",cancel:"Отмена",tryAgainQt:"Попробовать еще раз?",deleteSelectedRecordQt:"Удалить выбранную запись?",error:"Ошибка",dataNotFound:"Данные не найдены"},en_US:{view:"View",viewGroup:"View group",viewRecord:"View record",viewRecordsGroup:"View records group",create:"Create",createRecord:"Create record",createGroup:"Create group",createRecordsGroup:"Create records group",edit:"Edit",editGroup:"Edit group",editRecord:"Edit record",editRecordsGroup:"Edit records group",clone:"Clone",cloneGroup:"Clone group",cloneRecord:"Clone record",cloneRecordsGroup:"Clone records group",delete:"Delete",deleteGroup:"Delete group",deleteRecord:"Delete record(s)",deleteRecordsGroup:"Delete records group(s)",select:"Select",selectRecord:"Select record(s)",go:"Go",filter:"Filter",ok:"OK",cancel:"Cancel",tryAgainQt:"Try again?",deleteSelectedRecordQt:"Delete selected record?",error:"Error",dataNotFound:"Data not found"},zh_CN:{view:"查看",viewGroup:"查看组",viewRecord:"查看记录",viewRecordsGroup:"查看记录组",create:"创建",createRecord:"创建记录",createGroup:"创建组",createRecordsGroup:"创建记录组",edit:"编辑",editGroup:"编辑组",editRecord:"编辑记录",editRecordsGroup:"编辑记录组",clone:"克隆",cloneGroup:"克隆组",cloneRecord:"克隆记录",cloneRecordsGroup:"克隆记录组",delete:"删除",deleteGroup:"删除组",deleteRecord:"删除记录",deleteRecordsGroup:"删除记录组",select:"选择",selectRecord:"选择记录",go:"前往",filter:"过滤",ok:"确定",cancel:"取消",tryAgainQt:"再试一次",deleteSelectedRecordQt:"删除选定的记录",error:"错误",dataNotFound:"数据未找到"}},En=e=>nt(e.language,In,e.translation),kn=({props:e,setProps:n})=>{var r,o;const[a]=t.useState(e.apiRef??{}),[l]=t.useState((null==(r=e.editFormProps)?void 0:r.apiRef)??{}),[s]=t.useState((null==(o=e.editGroupFormProps)?void 0:o.apiRef)??{}),[i,u]=t.useState(!1),[c,d]=t.useState(!1),[p,f]=t.useState(),[h,v]=t.useState(!1),[g,m]=t.useState(0),[y,b]=(e=>{const[n,r]=t.useState(e.open);return ce((()=>{r(e.open)}),[e.open]),[n,r]})(e),S=pe(e)(),C=(({dataMutator:e})=>t.useCallback((t=>{if(!e)return t;let n={...t};return e&&(n=e(n)),n}),[e]))(e),[x,w]=(({value:e},n)=>{const r=yn(e??null,n),[o,a]=t.useState(r);return ce((()=>{a(r)}),[r]),[o,a]})(e,S),[N,R,I,E]=fe(e.dataSet,S,C),[k,D]=he(e.expandedKeys,e.defaultExpandedKeys,e.defaultExpandAll,E),F=(e=>t=>{var n;if(!e.getIsMounted())return;const r=e.getProps();if(!r.noCacheFetchedData&&e.getIsAllFetched())return;if(r.minSearchLength&&t.length<r.minSearchLength)return e.setMinSymbols(r.minSearchLength),void e.setDataSet(void 0);e.setMinSymbols(0),e.setFetchError(void 0);const o=null==(n=null==r?void 0:r.onDataFetch)?void 0:n.call(r,t,e);o?(e.setIsFetching(!0),t||e.setDataSet(void 0),o.then((n=>{var o,a,l;e.getIsMounted()&&(e.setDataSet(n.data),e.setIsAllFetched(e.getIsAllFetched()||!t),e.getIsReady()||(e.setIsReady(!0),null==(o=null==r?void 0:r.onReady)||o.call(r)),e.setIsFetching(!1),null==(a=null==r?void 0:r.onDataFetchSuccess)||a.call(r,n,e),null==(l=null==r?void 0:r.onDataFetchComplete)||l.call(r,e))}),(t=>{e.getIsMounted()&&(e.setFetchError(t.message),e.setDataSet(void 0),e.setIsFetching(!1))}))):e.setIsAllFetched(!0)})(a),P={getId:W(e.componentId??"treeSelect-"+$()),getProps:B(e),setProps:z(n),updateProps:_(e,n),getIsMounted:H(),getFieldNames:pe(e),getDataSet:We(N),setDataSet:me(R,null==e?void 0:e.onDataSetChanged),getGroupsOnly:He(a),sortTree:ge(N,e.sortComparator,a),getValues:bn(x),setValues:Sn(w,S),isDataPlainList:Ge(I),getEditFormApi:an(l),getEditGroupFormApi:on(s),getSelectedKeys:Cn(x),getSelectedNodes:wn(a,x),isNodeSelected:Ke(a),selectNode:Nn(a,e.multiple),getActiveNodeKey:Ae(a),getActiveNode:ve(a),getExpandedKeys:Ve(k),setExpandedKeys:Te(D),getExpandedNodes:Le(a),isNodeExpanded:je(a),expandNode:Me(a),collapseNode:Oe(a),toggleNode:Pe(a),expandParentNodes:Fe(a),getNode:De(a),getNodes:ke(a),getNextNodeKey:Ee(a),getPrevNodeKey:Ie(a),getNextNode:Re(a),getPrevNode:Ne(a),getParentNode:we(a),addNode:xe(a),updateNode:Ce(a),removeNode:Se(a),moveNode:be(a),ensureNodeVisible:ye(a),t:En(e),treeSelectRef:t.useRef(null),getButtonsApi:rt(),getIsReady:nn(i),setIsReady:rn(u),getIsOpen:en(y),setIsOpen:tn(b),getIsFetching:(L=c,()=>L),setIsFetching:(j=d,e=>{j(e)}),getFetchError:ln(p),setFetchError:sn(f),getIsAllFetched:(M=h,()=>M),setIsAllFetched:(O=v,e=>{O(e)}),getMinSymbols:un(g),setMinSymbols:cn(m),fetchData:hn(F,a)};var O,M,j,L;return Object.assign(a,P),a},Dn=e=>{const[n,r]=U(e),o=Fn(n),a=kn({props:n,setProps:r});return t.useEffect((()=>{var e;n.fetchMode&&"onLoad"!==n.fetchMode||n.minSearchLength?a.getIsReady()||(a.setIsReady(!0),null==(e=null==n?void 0:n.onReady)||e.call(n)):a.fetchData()}),[a,n,n.fetchMode,n.minSearchLength]),D.jsx(kt,{children:D.jsx(Wt,{api:a,allProps:n,treeSelectProps:o})})},Fn=e=>t.useMemo((()=>j(e,{apiRef:!0,componentId:!0,dataMutator:!0,readOnly:!0,value:!0,filterTreeNode:!0,dataSet:!0,fetchMode:!0,noCacheFetchedData:!0,minSearchLength:!0,debounce:!0,editFormProps:!0,nodeDeleteMessage:!0,confirmDelete:!0,buttons:!0,onReady:!0,onDataFetch:!0,onDataFetchSuccess:!0,onDataFetchError:!0,onDataFetchComplete:!0,onDelete:!0,fieldNames:!0,titleRender:!0,selectedRender:!0,editGroupFormProps:!0,defaultExpandAll:!0,defaultExpandedKeys:!0,expandedKeys:!0,buttonsRowStyle:!0,buttonsRowStyles:!0,buttonsRowWrapperStyle:!0,buttonsIconsOnly:!0,buttonsPosition:!0,buttonsSize:!0,headerLabel:!0,language:!0,translation:!0,selectNewNode:!0,groupsMode:!0,sortOnChange:!0,sortComparator:!0,onChange:!0,onGetLabelCallback:!0,onDataSetChanged:!0})[1]),[e]),Pn=({field:e})=>{t.useSyncExternalStore(e.subscribe.bind(e),e.getSnapshot.bind(e));const[n]=t.useState({}),r=e.getProps(),o=e.getValue()??null,a=(e=>()=>{e.setTouched(!0)})(e),l=(e=>()=>{var t;e.setDirty(!0),e.setTouched(!0);const n=e.getProps();null==(t=n.onClear)||t.call(n)})(e),s=On(e,r.dataSet),i=((e,t)=>(n,r,o)=>{var a;if(e.isReady()){switch(t.valueType){case void 0:case"node":t.multiple?e.setValue(o??null):e.setValue((null==o?void 0:o.length)?o[0]:null);break;case"labeledValue":e.setValue(n??null);break;case"key":t.multiple?e.setValue(r??null):e.setValue((null==r?void 0:r.length)?r[0]:null)}e.setDirty(!0)}null==(a=t.onChange)||a.call(t,n,r,o,e)})(e,r),u=((e,t)=>n=>{var r;return null==(r=t.onDataSetChanged)?void 0:r.call(t,n,e)})(e,r),c=Mn(e,r),d=jn(e,r);t.useEffect((()=>{e.setReady(!0)}),[e]);const p={...{width:e.getWidth()??"100%"},...r.style},f=(h=r,t.useMemo((()=>j(h,{autoFocus:!0,autoHeightResize:!0,component:!0,dependsOn:!0,disabled:!0,helpClass:!0,hidden:!0,label:!0,nonEditable:!0,onDirtyStateChanged:!0,onDisabledStateChanged:!0,onErrorChanged:!0,onHiddenStateChanged:!0,onLabelChanged:!0,onReadOnlyStateChanged:!0,onReady:!0,onReadyStateChanged:!0,onTouchedStateChanged:!0,onValidated:!0,onValueChanged:!0,placeholder:!0,readOnly:!0,requiredMark:!0,rowStyle:!0,rules:!0,style:!0,tab:!0,tooltip:!0,defaultValue:!0,width:!0,valueType:!0,onDataSetChanged:!0,onChange:!0,dataSet:!0,onDataFetch:!0,onFieldDataFetch:!0,onFieldDataFetchError:!0,onFieldDataFetchSuccess:!0,className:!0,itemClassName:!0})[1]),[h]));var h;return D.jsx(Dn,{className:r.className,apiRef:n,style:p,...f,dataSet:s,autoFocus:r.autoFocus,disabled:e.isDisabled(),readOnly:e.isReadOnly(),value:o,placeholder:r.placeholder??"Choose",onChange:i,onDataSetChanged:u,onDataFetch:c,onReady:d,onClear:l,onBlur:a})},On=(e,n)=>t.useMemo((()=>"function"!=typeof n?n:()=>n(e)),[n,e]),Mn=(e,t)=>(n,r)=>{var o;return null==(o=t.onDataFetch)?void 0:o.call(t,n,r,e)},jn=(e,t)=>()=>{var n;return null==(n=t.onReady)?void 0:n.call(t,e)};class TreeSelectField extends M{render(){return D.jsx(Pn,{field:this})}}export{TreeSelectField as T};
