import{bL as un,r as a,i as le,p as Oe,s as ln,b as Pt,v as st,f as cn,y as Bt,bG as wt,d as ge,a9 as dn,K as Xe,h as Wt,u as Et,z as fn,A as zt,B as Rt,C as hn,V as vn,ai as gn,m as Dt,e as Ft,F as mn,o as Ut,L as pn,k as Sn,ab as yn,bv as At,j as S,t as Cn,c as at,g as bn}from"./index-CtAjfk3U.js";import{B as xn}from"./baseField-CLOOMrMa.js";import{s as qt,D as Tt}from"./dFormModal-DBrO8yV5.js";import{j as Nn,m as In,a as wn,B as En,l as kt,f as Rn,u as Dn,t as Fn,e as An,d as Tn,c as kn,P as On}from"./buttonsRow-DIWV9y5m.js";import{n as ht,j as Mn,U as Ln,T as Vn,p as Gn,q as Kn,r as _n,S as jn,o as Hn}from"./defaultButtonsProps-BFWSm065.js";import{u as $n,a as Pn,b as Bn,c as Wn,d as zn,e as Un,f as qn,n as Qt,g as Qn,h as Ot,i as Xn,j as Jn,k as Yn,l as Zn,m as er,o as tr,p as nr,q as rr,r as or,s as ar,t as sr,v as ur,w as lr,x as cr,y as ir,z as dr,A as fr,B as hr,C as vr,D as gr,E as mr,F as pr,G as Sr,H as yr,I as Cr,J as br,K as xr,L as Nr,M as Ir,N as wr}from"./useApiGetGroupsOnly-Bxa2nsTp.js";import{S as Er}from"./messageBox-BEJz6LZv.js";import{c as Rr,d as Dr,B as Fr,u as Ar,a as Tr,D as kr,m as Or}from"./useShowArrow-aGotVQ22.js";import{c as Mr,d as Lr,e as Vr}from"./index-CQ36vsgA.js";import{u as Gr}from"./useIcons-BRnDxCLJ.js";import{a as mt,u as Kr,c as _r}from"./isArray-Dq3mFmoY.js";function jr(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=un(e))||t){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(i){throw i},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var i=n.next();return u=i.done,i},e:function(i){l=!0,s=i},f:function(){try{u||n.return==null||n.return()}finally{if(l)throw s}}}}const Hr=function(e){var t=a.useRef({valueLabels:new Map});return a.useMemo(function(){var n=t.current.valueLabels,o=new Map,r=e.map(function(s){var u=s.value,l=s.label,c=l??n.get(u);return o.set(u,c),le(le({},s),{},{label:c})});return t.current.valueLabels=o,[r]},[e])};var $r=function(t,n,o,r){return a.useMemo(function(){var s=function(h){return h.map(function(R){var y=R.value;return y})},u=s(t),l=s(n),c=u.filter(function(g){return!r[g]}),i=u,d=l;if(o){var v=ht(u,!0,r);i=v.checkedKeys,d=v.halfCheckedKeys}return[Array.from(new Set([].concat(Oe(c),Oe(i)))),d]},[t,n,o,r])},Pr=function(t){return Array.isArray(t)?t:t!==void 0?[t]:[]},Br=function(t){var n=t||{},o=n.label,r=n.value,s=n.children;return{_title:o?[o]:["title","label"],value:r||"value",key:r||"value",children:s||"children"}},vt=function(t){return!t||t.disabled||t.disableCheckbox||t.checkable===!1},Wr=function(t,n){var o=[],r=function s(u){u.forEach(function(l){var c=l[n.children];c&&(o.push(l[n.value]),s(c))})};return r(t),o},Mt=function(t){return t==null};const zr=function(e,t){return a.useMemo(function(){var n=Mn(e,{fieldNames:t,initWrapper:function(r){return le(le({},r),{},{valueEntities:new Map})},processEntity:function(r,s){var u=r.node[t.value];s.valueEntities.set(u,r)}});return n},[e,t])};var pt=function(){return null},Ur=["children","value"];function Xt(e){return ln(e).map(function(t){if(!a.isValidElement(t)||!t.type)return null;var n=t,o=n.key,r=n.props,s=r.children,u=r.value,l=Pt(r,Ur),c=le({key:o,value:u},l),i=Xt(s);return i.length&&(c.children=i),c}).filter(function(t){return t})}function gt(e){if(!e)return e;var t=le({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return st(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function qr(e,t,n,o,r,s){var u=null,l=null;function c(){function i(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return d.map(function(h,R){var y="".concat(v,"-").concat(R),m=h[s.value],b=n.includes(m),H=i(h[s.children]||[],y,b),D=a.createElement(pt,h,H.map(function(f){return f.node}));if(t===m&&(u=D),b){var ne={pos:y,node:D,children:H};return g||l.push(ne),ne}return null}).filter(function(h){return h})}l||(l=[],i(o),l.sort(function(d,v){var g=d.node.props.value,h=v.node.props.value,R=n.indexOf(g),y=n.indexOf(h);return R-y}))}Object.defineProperty(e,"triggerNode",{get:function(){return st(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),c(),u}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return st(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),c(),r?l:l.map(function(d){var v=d.node;return v})}})}var Qr=function(t,n,o){var r=o.fieldNames,s=o.treeNodeFilterProp,u=o.filterTreeNode,l=r.children;return a.useMemo(function(){if(!n||u===!1)return t;var c=typeof u=="function"?u:function(d,v){return String(v[s]).toUpperCase().includes(n.toUpperCase())},i=function d(v){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return v.reduce(function(h,R){var y=R[l],m=g||c(n,gt(R)),b=d(y||[],m);return(m||b.length)&&h.push(le(le({},R),{},cn({isLeaf:void 0},l,b))),h},[])};return i(t)},[t,n,l,s,u])};function Lt(e){var t=a.useRef();t.current=e;var n=a.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}function Xr(e,t){var n=t.id,o=t.pId,r=t.rootPId,s=new Map,u=[];return e.forEach(function(l){var c=l[n],i=le(le({},l),{},{key:l.key||c});s.set(c,i)}),s.forEach(function(l){var c=l[o],i=s.get(c);i?(i.children=i.children||[],i.children.push(l)):(c===r||r===null)&&u.push(l)}),u}function Jr(e,t,n){return a.useMemo(function(){if(e){if(n){var o=le({id:"id",pId:"pId",rootPId:null},Bt(n)==="object"?n:{});return Xr(e,o)}return e}return Xt(t)},[t,n,e])}var Jt=a.createContext(null),St=a.createContext(null),Yr={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Zr=function(t,n){var o=Rr(),r=o.prefixCls,s=o.multiple,u=o.searchValue,l=o.toggleOpen,c=o.open,i=o.notFoundContent,d=a.useContext(St),v=d.virtual,g=d.listHeight,h=d.listItemHeight,R=d.listItemScrollOffset,y=d.treeData,m=d.fieldNames,b=d.onSelect,H=d.dropdownMatchSelectWidth,D=d.treeExpandAction,ne=d.treeTitleRender,f=d.onPopupScroll,p=d.leftMaxCount,B=d.leafCountOnly,$=d.valueEntities,w=a.useContext(Jt),q=w.checkable,A=w.checkedKeys,V=w.halfCheckedKeys,_=w.treeExpandedKeys,W=w.treeDefaultExpandAll,ye=w.treeDefaultExpandedKeys,Q=w.onTreeExpand,re=w.treeIcon,ce=w.showTreeIcon,Ce=w.switcherIcon,Ne=w.treeLine,ie=w.treeNodeFilterProp,oe=w.loadData,Y=w.treeLoadedKeys,Ie=w.treeMotion,we=w.onTreeLoad,me=w.keyEntities,C=a.useRef(),z=wt(function(){return y},[c,y],function(N,x){return x[0]&&N[1]!==x[1]}),ae=a.useMemo(function(){return q?{checked:A,halfChecked:V}:null},[q,A,V]);a.useEffect(function(){if(c&&!s&&A.length){var N;(N=C.current)===null||N===void 0||N.scrollTo({key:A[0]})}},[c]);var L=function(x){x.preventDefault()},be=function(x,j){var T=j.node;q&&vt(T)||(b(T.key,{selected:!A.includes(T.key)}),s||l(!1))},pe=a.useState(ye),Me=ge(pe,2),Ee=Me[0],Re=Me[1],se=a.useState(null),Le=ge(se,2),Ve=Le[0],Ge=Le[1],xe=a.useMemo(function(){return _?Oe(_):u?Ve:Ee},[Ee,Ve,_,u]),De=function(x){Re(x),Ge(x),Q&&Q(x)},Ke=String(u).toLowerCase(),Z=function(x){return Ke?String(x[ie]).toLowerCase().includes(Ke):!1};a.useEffect(function(){u&&Ge(Wr(y,m))},[u]);var _e=a.useState(function(){return new Map}),je=ge(_e,2),de=je[0],Je=je[1];a.useEffect(function(){p&&Je(new Map)},[p]);function he(N){var x=N[m.value];if(!de.has(x)){var j=$.get(x),T=(j.children||[]).length===0;if(T)de.set(x,!1);else{var K=j.children.filter(function(J){return!J.node.disabled&&!J.node.disableCheckbox&&!A.includes(J.node[m.value])}),te=K.length;de.set(x,te>p)}}return de.get(x)}var G=dn(function(N){var x=N[m.value];return A.includes(x)||p===null?!1:p<=0?!0:B&&p?he(N):!1}),Ye=function N(x){var j=jr(x),T;try{for(j.s();!(T=j.n()).done;){var K=T.value;if(!(K.disabled||K.selectable===!1)){if(u){if(Z(K))return K}else return K;if(K[m.children]){var te=N(K[m.children]);if(te)return te}}}}catch(J){j.e(J)}finally{j.f()}return null},Be=a.useState(null),He=ge(Be,2),Fe=He[0],We=He[1],ee=me[Fe];a.useEffect(function(){if(c){var N=null,x=function(){var T=Ye(z);return T?T[m.value]:null};!s&&A.length&&!u?N=A[0]:N=x(),We(N)}},[c,u]),a.useImperativeHandle(n,function(){var N;return{scrollTo:(N=C.current)===null||N===void 0?void 0:N.scrollTo,onKeyDown:function(j){var T,K=j.which;switch(K){case Xe.UP:case Xe.DOWN:case Xe.LEFT:case Xe.RIGHT:(T=C.current)===null||T===void 0||T.onKeyDown(j);break;case Xe.ENTER:{if(ee){var te=G(ee.node),J=(ee==null?void 0:ee.node)||{},Ue=J.selectable,fe=J.value,Ae=J.disabled;Ue!==!1&&!Ae&&!te&&be(null,{node:{key:Fe},selected:!A.includes(fe)})}break}case Xe.ESC:l(!1)}},onKeyUp:function(){}}});var ze=wt(function(){return!u},[u,_||Ee],function(N,x){var j=ge(N,1),T=j[0],K=ge(x,2),te=K[0],J=K[1];return T!==te&&!!(te||J)}),U=ze?oe:null;if(z.length===0)return a.createElement("div",{role:"listbox",className:"".concat(r,"-empty"),onMouseDown:L},i);var X={fieldNames:m};return Y&&(X.loadedKeys=Y),xe&&(X.expandedKeys=xe),a.createElement("div",{onMouseDown:L},ee&&c&&a.createElement("span",{style:Yr,"aria-live":"assertive"},ee.node.value),a.createElement(Ln.Provider,{value:{nodeDisabled:G}},a.createElement(Vn,Wt({ref:C,focusable:!1,prefixCls:"".concat(r,"-tree"),treeData:z,height:g,itemHeight:h,itemScrollOffset:R,virtual:v!==!1&&H!==!1,multiple:s,icon:re,showIcon:ce,switcherIcon:Ce,showLine:Ne,loadData:U,motion:Ie,activeKey:Fe,checkable:q,checkStrictly:!0,checkedKeys:ae,selectedKeys:q?[]:A,defaultExpandAll:W,titleRender:ne},X,{onActiveChange:We,onSelect:be,onCheck:be,onExpand:De,onLoad:we,filterTreeNode:Z,expandAction:D,onScroll:f}))))},eo=a.forwardRef(Zr),yt="SHOW_ALL",Ct="SHOW_PARENT",ut="SHOW_CHILD";function Vt(e,t,n,o){var r=new Set(e);return t===ut?e.filter(function(s){var u=n[s];return!u||!u.children||!u.children.some(function(l){var c=l.node;return r.has(c[o.value])})||!u.children.every(function(l){var c=l.node;return vt(c)||r.has(c[o.value])})}):t===Ct?e.filter(function(s){var u=n[s],l=u?u.parent:null;return!l||vt(l.node)||!r.has(l.key)}):e}var to=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","maxCount","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function no(e){return!e||Bt(e)!=="object"}var ro=a.forwardRef(function(e,t){var n=e.id,o=e.prefixCls,r=o===void 0?"rc-tree-select":o,s=e.value,u=e.defaultValue,l=e.onChange,c=e.onSelect,i=e.onDeselect,d=e.searchValue,v=e.inputValue,g=e.onSearch,h=e.autoClearSearchValue,R=h===void 0?!0:h,y=e.filterTreeNode,m=e.treeNodeFilterProp,b=m===void 0?"value":m,H=e.showCheckedStrategy,D=e.treeNodeLabelProp,ne=e.multiple,f=e.treeCheckable,p=e.treeCheckStrictly,B=e.labelInValue,$=e.maxCount,w=e.fieldNames,q=e.treeDataSimpleMode,A=e.treeData,V=e.children,_=e.loadData,W=e.treeLoadedKeys,ye=e.onTreeLoad,Q=e.treeDefaultExpandAll,re=e.treeExpandedKeys,ce=e.treeDefaultExpandedKeys,Ce=e.onTreeExpand,Ne=e.treeExpandAction,ie=e.virtual,oe=e.listHeight,Y=oe===void 0?200:oe,Ie=e.listItemHeight,we=Ie===void 0?20:Ie,me=e.listItemScrollOffset,C=me===void 0?0:me,z=e.onDropdownVisibleChange,ae=e.dropdownMatchSelectWidth,L=ae===void 0?!0:ae,be=e.treeLine,pe=e.treeIcon,Me=e.showTreeIcon,Ee=e.switcherIcon,Re=e.treeMotion,se=e.treeTitleRender,Le=e.onPopupScroll,Ve=Pt(e,to),Ge=Dr(n),xe=f&&!p,De=f||p,Ke=p||B,Z=De||ne,_e=Et(u,{value:s}),je=ge(_e,2),de=je[0],Je=je[1],he=a.useMemo(function(){return f?H||ut:yt},[H,f]),G=a.useMemo(function(){return Br(w)},[JSON.stringify(w)]),Ye=Et("",{value:d!==void 0?d:v,postState:function(I){return I||""}}),Be=ge(Ye,2),He=Be[0],Fe=Be[1],We=function(I){Fe(I),g==null||g(I)},ee=Jr(A,V,q),ze=zr(ee,G),U=ze.keyEntities,X=ze.valueEntities,N=a.useCallback(function(E){var I=[],F=[];return E.forEach(function(k){X.has(k)?F.push(k):I.push(k)}),{missingRawValues:I,existRawValues:F}},[X]),x=Qr(ee,He,{fieldNames:G,treeNodeFilterProp:b,filterTreeNode:y}),j=a.useCallback(function(E){if(E){if(D)return E[D];for(var I=G._title,F=0;F<I.length;F+=1){var k=E[I[F]];if(k!==void 0)return k}}},[G,D]),T=a.useCallback(function(E){var I=Pr(E);return I.map(function(F){return no(F)?{value:F}:F})},[]),K=a.useCallback(function(E){var I=T(E);return I.map(function(F){var k=F.label,ve=F.value,P=F.halfChecked,O,M=X.get(ve);if(M){var ue;k=se?se(M.node):(ue=k)!==null&&ue!==void 0?ue:j(M.node),O=M.node.disabled}else if(k===void 0){var Te=T(de).find(function(Ze){return Ze.value===ve});k=Te.label}return{label:k,value:ve,halfChecked:P,disabled:O}})},[X,j,T,de]),te=a.useMemo(function(){return T(de===null?[]:de)},[T,de]),J=a.useMemo(function(){var E=[],I=[];return te.forEach(function(F){F.halfChecked?I.push(F):E.push(F)}),[E,I]},[te]),Ue=ge(J,2),fe=Ue[0],Ae=Ue[1],xt=a.useMemo(function(){return fe.map(function(E){return E.value})},[fe]),Zt=$r(fe,Ae,xe,U),Nt=ge(Zt,2),qe=Nt[0],nt=Nt[1],en=a.useMemo(function(){var E=Vt(qe,he,U,G),I=E.map(function(P){var O,M;return(O=(M=U[P])===null||M===void 0||(M=M.node)===null||M===void 0?void 0:M[G.value])!==null&&O!==void 0?O:P}),F=I.map(function(P){var O=fe.find(function(ue){return ue.value===P}),M=B?O==null?void 0:O.label:se==null?void 0:se(O);return{value:P,label:M}}),k=K(F),ve=k[0];return!Z&&ve&&Mt(ve.value)&&Mt(ve.label)?[]:k.map(function(P){var O;return le(le({},P),{},{label:(O=P.label)!==null&&O!==void 0?O:P.value})})},[G,Z,qe,fe,K,he,U]),tn=Hr(en),nn=ge(tn,1),ct=nn[0],It=a.useMemo(function(){return Z&&(he==="SHOW_CHILD"||p||!f)?$:null},[$,Z,p,he,f]),rt=Lt(function(E,I,F){var k=Vt(E,he,U,G);if(!(It&&k.length>It)){var ve=K(E);if(Je(ve),R&&Fe(""),l){var P=E;xe&&(P=k.map(function(Se){var ke=X.get(Se);return ke?ke.node[G.value]:Se}));var O=I||{triggerValue:void 0,selected:void 0},M=O.triggerValue,ue=O.selected,Te=P;if(p){var Ze=Ae.filter(function(Se){return!P.includes(Se.value)});Te=[].concat(Oe(Te),Oe(Ze))}var et=K(Te),$e={preValue:fe,triggerValue:M},Qe=!0;(p||F==="selection"&&!ue)&&(Qe=!1),qr($e,M,E,ee,Qe,G),De?$e.checked=ue:$e.selected=ue;var ot=Ke?et:et.map(function(Se){return Se.value});l(Z?ot:ot[0],Ke?null:et.map(function(Se){return Se.label}),$e)}}}),it=a.useCallback(function(E,I){var F,k=I.selected,ve=I.source,P=U[E],O=P==null?void 0:P.node,M=(F=O==null?void 0:O[G.value])!==null&&F!==void 0?F:E;if(!Z)rt([M],{selected:!0,triggerValue:M},"option");else{var ue=k?[].concat(Oe(xt),[M]):qe.filter(function(ke){return ke!==M});if(xe){var Te=N(ue),Ze=Te.missingRawValues,et=Te.existRawValues,$e=et.map(function(ke){return X.get(ke).key}),Qe;if(k){var ot=ht($e,!0,U);Qe=ot.checkedKeys}else{var Se=ht($e,{halfCheckedKeys:nt},U);Qe=Se.checkedKeys}ue=[].concat(Oe(Ze),Oe(Qe.map(function(ke){return U[ke].node[G.value]})))}rt(ue,{selected:k,triggerValue:M},ve||"option")}k||!Z?c==null||c(M,gt(O)):i==null||i(M,gt(O))},[N,X,U,G,Z,xt,rt,xe,c,i,qe,nt,$]),rn=a.useCallback(function(E){if(z){var I={};Object.defineProperty(I,"documentClickClose",{get:function(){return st(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),z(E,I)}},[z]),on=Lt(function(E,I){var F=E.map(function(k){return k.value});if(I.type==="clear"){rt(F,{},"selection");return}I.values.length&&it(I.values[0].value,{selected:!1,source:"selection"})}),an=a.useMemo(function(){return{virtual:ie,dropdownMatchSelectWidth:L,listHeight:Y,listItemHeight:we,listItemScrollOffset:C,treeData:x,fieldNames:G,onSelect:it,treeExpandAction:Ne,treeTitleRender:se,onPopupScroll:Le,leftMaxCount:$===void 0?null:$-ct.length,leafCountOnly:he==="SHOW_CHILD"&&!p&&!!f,valueEntities:X}},[ie,L,Y,we,C,x,G,it,Ne,se,Le,$,ct.length,he,p,f,X]),sn=a.useMemo(function(){return{checkable:De,loadData:_,treeLoadedKeys:W,onTreeLoad:ye,checkedKeys:qe,halfCheckedKeys:nt,treeDefaultExpandAll:Q,treeExpandedKeys:re,treeDefaultExpandedKeys:ce,onTreeExpand:Ce,treeIcon:pe,treeMotion:Re,showTreeIcon:Me,switcherIcon:Ee,treeLine:be,treeNodeFilterProp:b,keyEntities:U}},[De,_,W,ye,qe,nt,Q,re,ce,Ce,pe,Re,Me,Ee,be,b,U]);return a.createElement(St.Provider,{value:an},a.createElement(Jt.Provider,{value:sn},a.createElement(Fr,Wt({ref:t},Ve,{id:Ge,prefixCls:r,mode:Z?"multiple":void 0,displayValues:ct,onDisplayValuesChange:on,searchValue:He,onSearch:We,OptionList:eo,emptyOptions:!ee.length,onDropdownVisibleChange:rn,dropdownMatchSelectWidth:L}))))}),tt=ro;tt.TreeNode=pt;tt.SHOW_ALL=yt;tt.SHOW_PARENT=Ct;tt.SHOW_CHILD=ut;const oo=e=>{const{componentCls:t,treePrefixCls:n,colorBgElevated:o}=e,r=`.${n}`;return[{[`${t}-dropdown`]:[{padding:`${Rt(e.paddingXS)} ${Rt(e.calc(e.paddingXS).div(2).equal())}`},Kn(n,zt(e,{colorBgContainer:o})),{[r]:{borderRadius:0,[`${r}-list-holder-inner`]:{alignItems:"stretch",[`${r}-treenode`]:{[`${r}-node-content-wrapper`]:{flex:"auto"}}}}},_n(`${n}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${r}-switcher${r}-switcher_close`]:{[`${r}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function ao(e,t,n){return fn("TreeSelect",o=>{const r=zt(o,{treePrefixCls:t});return[oo(r)]},Gn)(e,n)}var so=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};const uo=(e,t)=>{var n;const{prefixCls:o,size:r,disabled:s,bordered:u=!0,className:l,rootClassName:c,treeCheckable:i,multiple:d,listHeight:v=256,listItemHeight:g,placement:h,notFoundContent:R,switcherIcon:y,treeLine:m,getPopupContainer:b,popupClassName:H,dropdownClassName:D,treeIcon:ne=!1,transitionName:f,choiceTransitionName:p="",status:B,treeExpandAction:$,builtinPlacements:w,dropdownMatchSelectWidth:q,popupMatchSelectWidth:A,allowClear:V,variant:_,dropdownStyle:W,tagRender:ye,maxCount:Q,showCheckedStrategy:re,treeCheckStrictly:ce}=e,Ce=so(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender","maxCount","showCheckedStrategy","treeCheckStrictly"]),{getPopupContainer:Ne,getPrefixCls:ie,renderEmpty:oe,direction:Y,virtual:Ie,popupMatchSelectWidth:we,popupOverflow:me}=a.useContext(hn),[,C]=vn(),z=g??(C==null?void 0:C.controlHeightSM)+(C==null?void 0:C.paddingXXS),ae=ie(),L=ie("select",o),be=ie("select-tree",o),pe=ie("tree-select",o),{compactSize:Me,compactItemClassnames:Ee}=gn(L,Y),Re=Dt(L),se=Dt(pe),[Le,Ve,Ge]=Ar(L,Re),[xe]=ao(pe,be,se),[De,Ke]=Mr("treeSelect",_,u),Z=Ft(H||D,`${pe}-dropdown`,{[`${pe}-dropdown-rtl`]:Y==="rtl"},c,Ge,Re,se,Ve),_e=!!(i||d),je=a.useMemo(()=>{if(!(Q&&(re==="SHOW_ALL"&&!ce||re==="SHOW_PARENT")))return Q},[Q,re,ce]),de=Tr(e.suffixIcon,e.showArrow),Je=(n=A??q)!==null&&n!==void 0?n:we,{status:he,hasFeedback:G,isFormItemInput:Ye,feedbackIcon:Be}=a.useContext(mn),He=Vr(he,B),{suffixIcon:Fe,removeIcon:We,clearIcon:ee}=Gr(Object.assign(Object.assign({},Ce),{multiple:_e,showSuffixIcon:de,hasFeedback:G,feedbackIcon:Be,prefixCls:L,componentName:"TreeSelect"})),ze=V===!0?{clearIcon:ee}:V;let U;R!==void 0?U=R:U=(oe==null?void 0:oe("Select"))||a.createElement(kr,{componentName:"Select"});const X=Ut(Ce,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),N=a.useMemo(()=>h!==void 0?h:Y==="rtl"?"bottomRight":"bottomLeft",[h,Y]),x=pn(fe=>{var Ae;return(Ae=r??Me)!==null&&Ae!==void 0?Ae:fe}),j=a.useContext(Sn),T=s??j,K=Ft(!o&&pe,{[`${L}-lg`]:x==="large",[`${L}-sm`]:x==="small",[`${L}-rtl`]:Y==="rtl",[`${L}-${De}`]:Ke,[`${L}-in-form-item`]:Ye},Lr(L,He,G),Ee,l,c,Ge,Re,se,Ve),te=fe=>a.createElement(jn,{prefixCls:be,switcherIcon:y,treeNodeProps:fe,showLine:m}),[J]=yn("SelectLike",W==null?void 0:W.zIndex),Ue=a.createElement(tt,Object.assign({virtual:Ie,disabled:T},X,{dropdownMatchSelectWidth:Je,builtinPlacements:Or(w,me),ref:t,prefixCls:L,className:K,listHeight:v,listItemHeight:z,treeCheckable:i&&a.createElement("span",{className:`${L}-tree-checkbox-inner`}),treeLine:!!m,suffixIcon:Fe,multiple:_e,placement:N,removeIcon:We,allowClear:ze,switcherIcon:te,showTreeIcon:ne,notFoundContent:U,getPopupContainer:b||Ne,treeMotion:null,dropdownClassName:Z,dropdownStyle:Object.assign(Object.assign({},W),{zIndex:J}),choiceTransitionName:At(ae,"",p),transitionName:At(ae,"slide-up",f),treeExpandAction:$,tagRender:_e?ye:void 0,maxCount:je,showCheckedStrategy:re,treeCheckStrictly:ce}));return Le(xe(Ue))},lo=a.forwardRef(uo),Pe=lo,co=Nn(Pe,"dropdownAlign",e=>Ut(e,["visible"]));Pe.TreeNode=pt;Pe.SHOW_ALL=yt;Pe.SHOW_PARENT=Ct;Pe.SHOW_CHILD=ut;Pe._InternalPanelDoNotUseOrYouWillBeFired=co;const io=e=>()=>{e.setTouched(!0)},fo=(e,t)=>(n,o,r)=>{var s;if(e.isReady()){switch(t.valueType){case void 0:case"node":t.multiple?e.setValue(r??null):e.setValue(r!=null&&r.length?r[0]:null);break;case"labeledValue":e.setValue(n??null);break;case"key":t.multiple?e.setValue(o??null):e.setValue(o!=null&&o.length?o[0]:null);break}e.setDirty(!0)}(s=t.onChange)==null||s.call(t,n,o,r,e)},ho=e=>()=>{var n;e.setDirty(!0),e.setTouched(!0);const t=e.getProps();(n=t.onClear)==null||n.call(t)},vo=(e,t)=>n=>{var o;return(o=t.onDataSetChanged)==null?void 0:o.call(t,n,e)},go=e=>a.useMemo(()=>qt(e,{autoFocus:!0,autoHeightResize:!0,component:!0,dependsOn:!0,disabled:!0,helpClass:!0,hidden:!0,label:!0,nonEditable:!0,onDirtyStateChanged:!0,onDisabledStateChanged:!0,onErrorChanged:!0,onHiddenStateChanged:!0,onLabelChanged:!0,onReadOnlyStateChanged:!0,onReady:!0,onReadyStateChanged:!0,onTouchedStateChanged:!0,onValidated:!0,onValueChanged:!0,placeholder:!0,readOnly:!0,requiredMark:!0,rowStyle:!0,rules:!0,style:!0,tab:!0,tooltip:!0,defaultValue:!0,width:!0,valueType:!0,onDataSetChanged:!0,onChange:!0,dataSet:!0,onDataFetch:!0,onFieldDataFetch:!0,onFieldDataFetchError:!0,onFieldDataFetchSuccess:!0,className:!0,itemClassName:!0})[1],[e]),lt=a.createContext(void 0),mo=({children:e})=>{const t=a.useRef(!1),n=a.useRef(!1),o=a.useMemo(()=>({ctrlPressedRef:t,dialogOpenedRef:n}),[t]);return S.jsx(lt.Provider,{value:o,children:e})},po=e=>{const n=e.getFieldNames().title;return(o,r)=>!r||typeof r[n]!="string"?!1:r[n].toLowerCase().indexOf(o.toLowerCase())>=0},So=e=>a.useMemo(()=>({...{maxHeight:400,overflow:"auto"},...e}),[e]),Gt=(e,t,n)=>{const{dialogOpenedRef:o}=a.useContext(lt);return a.useMemo(()=>{const r=n?t==null?void 0:t.editGroupFormProps:t==null?void 0:t.editFormProps;if(!r)return;const s={...r};t.language&&!s.language&&(s.language=t.language);const u=r==null?void 0:r.onSubmitSuccess;s.onSubmitSuccess=(i,d,v,g,h)=>{var H;if(u==null||u(i,d,v,g,h),h.isPrevented())return;const R=g.model.getFormMode(),y=e.getFieldNames(),m={...d,...v};let b;if(m[y.parent]?b=(H=m[y.parent])==null?void 0:H[y.key]:m[y.parent]===null?b=void 0:b=e.getActiveNodeKey(),R==="create"||R==="clone")m[y.key]||(m[y.key]=Hn()),e.addNode(m,b,"insideBottom",{ensureVisible:!0,select:!!t.selectNewNode,sortNodes:t.sortOnChange});else if(R==="update"){e.updateNode(m,b,{ensureVisible:!0,sortNodes:t.sortOnChange});const D=e.getValues();e.setValues(yo(D,m,y))}};const l=r==null?void 0:r.onOpen;s.onOpen=(i,d,v,g)=>{const h=l==null?void 0:l(i,d,v,g);return g.isPrevented()||(o.current=!0),h};const c=r==null?void 0:r.onClosed;return s.onClosed=(i,d)=>{c==null||c(i,d),!d.isPrevented()&&(o.current=!1)},s},[n,t==null?void 0:t.editFormProps,t==null?void 0:t.editGroupFormProps,t.language,t.selectNewNode,t.sortOnChange,e,o])},yo=(e,t,n)=>{if(!e)return null;const o=[];for(const r of e)r.value===t[n.key]?o.push({value:r.value}):o.push(r);return o},Co=(e,t)=>{const{dialogOpenedRef:n}=a.useContext(lt);e.getButtonsApi().refreshButtons=bo();const o=e.getFieldNames(),r=e.getActiveNode(!0),s=!!(r!=null&&r.isLeaf)||!!(t.groupsMode&&!(r!=null&&r[o.isGroup])),u=t.buttons,l=t.buttonsSize??"small",c=t.buttonsPosition??"right",i=$n(t),d=Pn(e,t,s),v=Bn(e,t,s),g=Wn(e,t,r,dt,s),h=zn(e,t,r,dt,s),R=Un(e,t,r,dt,s),y=qn(e,t,r,s,()=>{n.current=!0},()=>{n.current=!1});return a.useMemo(()=>{const b=In({headerLabel:i,view:g,create:d,createGroup:v,clone:h,update:R,delete:y},u);for(const H in b){const D=b[H];!D||H==="headerLabel"||D.type==="hotkey"||(D.size=D.size??l,D.position=D.position??c,D.checkDisabled&&(D.disabled=!r),D.checkHidden&&(D.hidden=!r))}return b},[i,g,d,v,h,R,y,u,l,c,r])},bo=()=>{const[,e]=a.useState({});return a.useCallback(()=>{e({})},[e])},dt=e=>({...e}),xo=({treeApi:e,treeProps:t})=>{const n=Co(e,t),{token:{colorBorderSecondary:o}}=Cn.useToken();return a.useMemo(()=>n?S.jsx(wn,{buttons:n,apiRef:e.getButtonsApi(),style:{padding:"0 4px 6px 4px",borderBottom:`1px solid ${o}`,...t.buttonsRowStyle},styles:t.buttonsRowStyles,context:e,iconsOnly:t.buttonsIconsOnly!==!1}):null,[n,o,e,t.buttonsIconsOnly,t.buttonsRowStyle,t.buttonsRowStyles])},Yt=({api:e})=>{const t=e.getFetchError(),n=e.getIsFetching(),o=e.getMinSymbols(),r=e.isDataPlainList();return o?S.jsx(No,{minSymbols:o,plainList:r}):n?S.jsx(Io,{plainList:r}):t?S.jsx(wo,{error:t,plainList:r}):S.jsx(S.Fragment,{})},No=({minSymbols:e,plainList:t})=>S.jsxs("div",{style:{paddingLeft:t?"8px":"30px",fontSize:"12px"},children:["Введите как минимум ",e," симв."]}),Io=({plainList:e})=>S.jsxs("div",{style:{paddingLeft:e?"8px":"30px",fontSize:"12px"},children:[S.jsx(Er,{size:"small"})," загрузка..."]}),wo=({error:e,plainList:t})=>S.jsx("div",{role:"alert",style:{paddingLeft:t?"8px":"30px",fontSize:"12px",color:"#ff4d4f"},children:e}),Eo=({api:e})=>{const t=e.getIsFetching(),n=e.getFetchError(),o=e.getMinSymbols(),r=e.isDataPlainList();return o||t||n?S.jsx(S.Fragment,{}):S.jsx("div",{style:{paddingLeft:r?"8px":"30px",fontSize:"12px"},children:e.t("dataNotFound")})},Ro=({api:e,children:t})=>{const n=e.isDataPlainList(),o=e.getProps();return S.jsx("div",{className:n?"tree-select-plain":void 0,children:o.editFormProps||o.editGroupFormProps?S.jsx(Do,{api:e,children:t}):S.jsxs(S.Fragment,{children:[t,S.jsx(Yt,{api:e})]})})},Do=({api:e,children:t})=>{const n=e.getProps();return S.jsxs(En,{style:{display:"flex",flexDirection:"column",...n.buttonsRowWrapperStyle},keepFocus:!1,children:[S.jsx(xo,{treeApi:e,treeProps:n}),t,S.jsx(Yt,{api:e})]})},Fo=({api:e,children:t})=>{const n=e.getProps(),o=a.useContext(St);return o&&(n.titleRender?o.treeTitleRender=n.titleRender:o.treeTitleRender=void 0),n.dropdownRender?n.dropdownRender(t):S.jsx(Ro,{api:e,children:t})},Ao=({api:e,allProps:t,treeSelectProps:n})=>{const{ctrlPressedRef:o,dialogOpenedRef:r}=a.useContext(lt);ko(o);const s=Gt(e,t,!1),u=Gt(e,t,!0),l=So(t.dropdownStyle),c=Mo({api:e}),i=Oo(e),d=jo(e.getFieldNames()),v=e.getExpandedKeys(),g=Ho(e),h=Lo(e),R=Vo(e),y=Go(e,o,r),m=Ko(e),b=_o(e);return S.jsxs(S.Fragment,{children:[S.jsx(Pe,{ref:e.treeSelectRef,treeNodeFilterProp:d.label,notFoundContent:S.jsx(Eo,{api:e}),...n,labelInValue:!0,treeTitleRender:t.selectedRender,dropdownRender:t.readOnly?To:c,showSearch:!t.readOnly&&t.showSearch!==!1,allowClear:!t.readOnly&&t.allowClear!==!1,fieldNames:d,treeData:e.getDataSet(),value:i,disabled:t.disabled,treeDefaultExpandAll:t.defaultExpandAll,treeDefaultExpandedKeys:t.defaultExpandedKeys,treeExpandedKeys:v,open:e.getIsOpen(),dropdownStyle:l,filterTreeNode:b,onTreeExpand:g,onClear:h,onChange:R,onDropdownVisibleChange:y,onSearch:m}),!t.disabled&&s?S.jsx(Tt,{...s,apiRef:e.getEditFormApi()}):null,!t.disabled&&u?S.jsx(Tt,{...u,apiRef:e.getEditGroupFormApi()}):null]})},To=()=>S.jsx(S.Fragment,{}),ko=e=>{kt("keydown",t=>{t.key==="Control"&&(e.current=!0)}),kt("keyup",t=>{t.key==="Control"&&(e.current=!1)})},Oo=e=>{const t=e.getValues();return e.getProps().multiple?t??void 0:(t==null?void 0:t[0])??void 0},Mo=({api:e})=>a.useCallback(t=>S.jsx(Fo,{api:e,children:t}),[e]),Lo=e=>()=>{var n;e.setValues(null);const t=e.getProps();(n=t.onClear)==null||n.call(t)},Vo=e=>t=>{var u;const n=t;e.setValues(n??null);const o=e.getProps(),r=n?e.getSelectedKeys(n)??[]:[],s=n?e.getSelectedNodes(void 0,n)??[]:[];(u=o.onChange)==null||u.call(o,t,r,s)},Go=(e,t,n)=>o=>{var s;const r=e.getProps();if(r.readOnly){e.setIsOpen(!1);return}t.current||n.current?e.setIsOpen(!0):e.setIsOpen(o),o&&(r.fetchMode==="onUse"||r.fetchMode==="onUseForce")&&e.fetchData(),(s=r.onDropdownVisibleChange)==null||s.call(r,o)},Ko=e=>t=>{var o;e.fetchData(t,!0);const n=e.getProps();(o=n.onSearch)==null||o.call(n,t)},_o=e=>{const t=po(e);return(n,o)=>{if(!e.getIsAllFetched())return!0;const r=e.getProps();return r.filterTreeNode?typeof r.filterTreeNode=="function"?r.filterTreeNode(n,o):r.filterTreeNode:t(n,o)}},jo=e=>({value:e.key,label:e.title,children:e.children}),Ho=e=>t=>{var o;const n=e.getProps();e.setExpandedKeys(t),(o=n.onTreeExpand)==null||o.call(n,t)},$o=e=>t=>{var r;if(!e.getIsMounted())return;const n=e.getProps();if(!n.noCacheFetchedData&&e.getIsAllFetched())return;if(n.minSearchLength&&t.length<n.minSearchLength){e.setMinSymbols(n.minSearchLength),e.setDataSet(void 0);return}e.setMinSymbols(0),e.setFetchError(void 0);const o=(r=n==null?void 0:n.onDataFetch)==null?void 0:r.call(n,t,e);if(!o){e.setIsAllFetched(!0);return}e.setIsFetching(!0),t||e.setDataSet(void 0),o.then(s=>{var u,l,c;e.getIsMounted()&&(e.setDataSet(s.data),e.setIsAllFetched(e.getIsAllFetched()||!t),e.getIsReady()||(e.setIsReady(!0),(u=n==null?void 0:n.onReady)==null||u.call(n)),e.setIsFetching(!1),(l=n==null?void 0:n.onDataFetchSuccess)==null||l.call(n,s,e),(c=n==null?void 0:n.onDataFetchComplete)==null||c.call(n,e))},s=>{e.getIsMounted()&&(e.setFetchError(s.message),e.setDataSet(void 0),e.setIsFetching(!1))})},Po=e=>{const[t,n]=a.useState(e.open);return Qt(()=>{n(e.open)},[e.open]),[t,n]},Bo=e=>()=>e,Wo=e=>t=>{e(t)},zo=({dataMutator:e})=>a.useCallback(t=>{if(!e)return t;let n={...t};return e&&(n=e(n)),n},[e]),Uo=e=>()=>e,qo=e=>t=>{e(t)},Qo=e=>()=>e,Xo=e=>()=>e,Jo=e=>()=>e,Yo=e=>t=>{e(t)},Zo=e=>()=>e,ea=e=>t=>{e(t)},ta=e=>()=>e,na=e=>t=>{e(t)},ra=e=>()=>e,oa=e=>t=>{e(t)};var ft,Kt;function aa(){if(Kt)return ft;Kt=1;var e="Expected a function",t=NaN,n="[object Symbol]",o=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt,c=typeof at=="object"&&at&&at.Object===Object&&at,i=typeof self=="object"&&self&&self.Object===Object&&self,d=c||i||Function("return this")(),v=Object.prototype,g=v.toString,h=Math.max,R=Math.min,y=function(){return d.Date.now()};function m(f,p,B){var $,w,q,A,V,_,W=0,ye=!1,Q=!1,re=!0;if(typeof f!="function")throw new TypeError(e);p=ne(p)||0,b(B)&&(ye=!!B.leading,Q="maxWait"in B,q=Q?h(ne(B.maxWait)||0,p):q,re="trailing"in B?!!B.trailing:re);function ce(C){var z=$,ae=w;return $=w=void 0,W=C,A=f.apply(ae,z),A}function Ce(C){return W=C,V=setTimeout(oe,p),ye?ce(C):A}function Ne(C){var z=C-_,ae=C-W,L=p-z;return Q?R(L,q-ae):L}function ie(C){var z=C-_,ae=C-W;return _===void 0||z>=p||z<0||Q&&ae>=q}function oe(){var C=y();if(ie(C))return Y(C);V=setTimeout(oe,Ne(C))}function Y(C){return V=void 0,re&&$?ce(C):($=w=void 0,A)}function Ie(){V!==void 0&&clearTimeout(V),W=0,$=_=w=V=void 0}function we(){return V===void 0?A:Y(y())}function me(){var C=y(),z=ie(C);if($=arguments,w=this,_=C,z){if(V===void 0)return Ce(_);if(Q)return V=setTimeout(oe,p),ce(_)}return V===void 0&&(V=setTimeout(oe,p)),A}return me.cancel=Ie,me.flush=we,me}function b(f){var p=typeof f;return!!f&&(p=="object"||p=="function")}function H(f){return!!f&&typeof f=="object"}function D(f){return typeof f=="symbol"||H(f)&&g.call(f)==n}function ne(f){if(typeof f=="number")return f;if(D(f))return t;if(b(f)){var p=typeof f.valueOf=="function"?f.valueOf():f;f=b(p)?p+"":p}if(typeof f!="string")return f===0?f:+f;f=f.replace(o,"");var B=s.test(f);return B||u.test(f)?l(f.slice(2),B?2:8):r.test(f)?t:+f}return ft=m,ft}var sa=aa();const ua=bn(sa),la=(e,t)=>(n="",o)=>{const r=ua(e,t.getProps().debounce??0);o?r(n):e(n)},_t=e=>!!(e&&typeof e=="object"&&e.value),jt=(e,t)=>{const n=e[t.key],o=e[t.title];return{value:n,label:o}},bt=(e,t)=>{if(!e)return null;if(!mt(e))return typeof e=="object"?_t(e)?[e]:[jt(e,t)]:[{value:e}];const n=[];for(const o of e)o&&(typeof o=="object"?_t(o)?n.push(o):n.push(jt(o,t)):n.push({value:o}));return n},ca=({value:e},t)=>{const n=ia(e??null,t),[o,r]=a.useState(n);return Qt(()=>{r(n)},[n]),[o,r]},ia=(e,t)=>a.useMemo(()=>bt(e,t),[t,e]),da=e=>()=>e??null,fa=(e,t)=>a.useCallback(n=>{e(bt(n,t))},[t,e]),ha=e=>t=>{const n=t??e;if(!n)return;if(!mt(n))return[n.value];const o=[];for(const r of n)o.push(r.value);return o},Ht=(e,t,n)=>{const o={[n.key]:e.value,[n.title]:e.label},{idx:r,nodes:s}=Qn(t,e.value,n);if(r<0||!(s!=null&&s[r]))return o;const u={...s[r]};return delete u[n.children],u},va=(e,t)=>{const n=a.useRef(void 0),o=a.useRef(null),r=a.useRef(void 0);return(s,u)=>{const l=e.getDataSet(),c=e.getFieldNames(),i=s??l,d=u??t;if(n.current===i&&o.current===d)return r.current;if(n.current=i,o.current=d,!d){r.current=void 0;return}const v=[];if(!mt(d))v.push(Ht(d,i,c));else for(const g of d){const h=Ht(g,i,c);h&&v.push(h)}return r.current=v,v}},ga=(e,t)=>a.useCallback((n,o=!0)=>{var l;const r=e.getFieldNames(),s=(l=bt(n,r))==null?void 0:l[0];if(!s)return;const u=e.getValues();if(o){if($t(u,s.value))return;t?e.setValues([...u??[],s]):e.setValues([s])}else{if(!$t(u,s.value))return;t?e.setValues((u==null?void 0:u.filter(c=>c.value!==s.value))??null):e.setValues([])}},[e,t]),$t=(e,t)=>{if(!e)return!1;for(const n of e)if(n.value===t)return!0;return!1},ma={view:"Просмотр",viewGroup:"Просмотр группы",viewRecord:"Просмотр записи",viewRecordsGroup:"Просмотр группы записей",create:"Создать",createRecord:"Создать запись",createGroup:"Создать группу",createRecordsGroup:"Создать группу записей",edit:"Редактировать",editGroup:"Редактировать группу",editRecord:"Редактировать запись",editRecordsGroup:"Редактировать группу записей",clone:"Клонировать",cloneGroup:"Клонировать группу",cloneRecord:"Клонировать запись",cloneRecordsGroup:"Клонировать группу записей",delete:"Удалить",deleteGroup:"Удалить группу",deleteRecord:"Удалить запись(и)",deleteRecordsGroup:"Удалить группу записей",select:"Выбрать",selectRecord:"Выбрать запись(и)",go:"Перейти",filter:"Фильтр",ok:"OK",cancel:"Отмена",tryAgainQt:"Попробовать еще раз?",deleteSelectedRecordQt:"Удалить выбранную запись?",error:"Ошибка",dataNotFound:"Данные не найдены"},pa={view:"View",viewGroup:"View group",viewRecord:"View record",viewRecordsGroup:"View records group",create:"Create",createRecord:"Create record",createGroup:"Create group",createRecordsGroup:"Create records group",edit:"Edit",editGroup:"Edit group",editRecord:"Edit record",editRecordsGroup:"Edit records group",clone:"Clone",cloneGroup:"Clone group",cloneRecord:"Clone record",cloneRecordsGroup:"Clone records group",delete:"Delete",deleteGroup:"Delete group",deleteRecord:"Delete record(s)",deleteRecordsGroup:"Delete records group(s)",select:"Select",selectRecord:"Select record(s)",go:"Go",filter:"Filter",ok:"OK",cancel:"Cancel",tryAgainQt:"Try again?",deleteSelectedRecordQt:"Delete selected record?",error:"Error",dataNotFound:"Data not found"},Sa={view:"查看",viewGroup:"查看组",viewRecord:"查看记录",viewRecordsGroup:"查看记录组",create:"创建",createRecord:"创建记录",createGroup:"创建组",createRecordsGroup:"创建记录组",edit:"编辑",editGroup:"编辑组",editRecord:"编辑记录",editRecordsGroup:"编辑记录组",clone:"克隆",cloneGroup:"克隆组",cloneRecord:"克隆记录",cloneRecordsGroup:"克隆记录组",delete:"删除",deleteGroup:"删除组",deleteRecord:"删除记录",deleteRecordsGroup:"删除记录组",select:"选择",selectRecord:"选择记录",go:"前往",filter:"过滤",ok:"确定",cancel:"取消",tryAgainQt:"再试一次",deleteSelectedRecordQt:"删除选定的记录",error:"错误",dataNotFound:"数据未找到"},ya={ru_RU:ma,en_US:pa,zh_CN:Sa},Ca=e=>Kr(e.language,ya,e.translation),ba=({props:e,setProps:t})=>{var _,W;const[n]=a.useState(e.apiRef??{}),[o]=a.useState(((_=e.editFormProps)==null?void 0:_.apiRef)??{}),[r]=a.useState(((W=e.editGroupFormProps)==null?void 0:W.apiRef)??{}),[s,u]=a.useState(!1),[l,c]=a.useState(!1),[i,d]=a.useState(),[v,g]=a.useState(!1),[h,R]=a.useState(0),[y,m]=Po(e),b=Ot(e)(),H=zo(e),[D,ne]=ca(e,b),[f,p,B,$]=Xn(e.dataSet,b,H),[w,q]=Jn(e.expandedKeys,e.defaultExpandedKeys,e.defaultExpandAll,$),A=$o(n),V={getId:Dn(e.componentId??"treeSelect-"+Fn()),getProps:kn(e),setProps:Tn(t),updateProps:An(e,t),getIsMounted:Rn(),getFieldNames:Ot(e),getDataSet:wr(f),setDataSet:er(p,e==null?void 0:e.onDataSetChanged),getGroupsOnly:Ir(n),sortTree:Zn(f,e.sortComparator,n),getValues:da(D),setValues:fa(ne,b),isDataPlainList:Nr(B),getEditFormApi:Xo(o),getEditGroupFormApi:Qo(r),getSelectedKeys:ha(D),getSelectedNodes:va(n,D),isNodeSelected:xr(n),selectNode:ga(n,e.multiple),getActiveNodeKey:br(n),getActiveNode:Yn(n),getExpandedKeys:Cr(w),setExpandedKeys:yr(q),getExpandedNodes:Sr(n),isNodeExpanded:pr(n),expandNode:mr(n),collapseNode:gr(n),toggleNode:vr(n),expandParentNodes:hr(n),getNode:fr(n),getNodes:dr(n),getNextNodeKey:ir(n),getPrevNodeKey:cr(n),getNextNode:lr(n),getPrevNode:ur(n),getParentNode:sr(n),addNode:ar(n),updateNode:or(n),removeNode:rr(n),moveNode:nr(n),ensureNodeVisible:tr(n),t:Ca(e),treeSelectRef:a.useRef(null),getButtonsApi:_r(),getIsReady:Uo(s),setIsReady:qo(u),getIsOpen:Bo(y),setIsOpen:Wo(m),getIsFetching:Jo(l),setIsFetching:Yo(c),getFetchError:Zo(i),setFetchError:ea(d),getIsAllFetched:ta(v),setIsAllFetched:na(g),getMinSymbols:ra(h),setMinSymbols:oa(R),fetchData:la(A,n)};return Object.assign(n,V),n},xa=e=>{const[t,n]=On(e),o=Na(t),r=ba({props:t,setProps:n});return a.useEffect(()=>{var s;(!t.fetchMode||t.fetchMode==="onLoad")&&!t.minSearchLength?r.fetchData():r.getIsReady()||(r.setIsReady(!0),(s=t==null?void 0:t.onReady)==null||s.call(t))},[r,t,t.fetchMode,t.minSearchLength]),S.jsx(mo,{children:S.jsx(Ao,{api:r,allProps:t,treeSelectProps:o})})},Na=e=>a.useMemo(()=>qt(e,{apiRef:!0,componentId:!0,dataMutator:!0,readOnly:!0,value:!0,filterTreeNode:!0,dataSet:!0,fetchMode:!0,noCacheFetchedData:!0,minSearchLength:!0,debounce:!0,editFormProps:!0,nodeDeleteMessage:!0,confirmDelete:!0,buttons:!0,onReady:!0,onDataFetch:!0,onDataFetchSuccess:!0,onDataFetchError:!0,onDataFetchComplete:!0,onDelete:!0,fieldNames:!0,titleRender:!0,selectedRender:!0,editGroupFormProps:!0,defaultExpandAll:!0,defaultExpandedKeys:!0,expandedKeys:!0,buttonsRowStyle:!0,buttonsRowStyles:!0,buttonsRowWrapperStyle:!0,buttonsIconsOnly:!0,buttonsPosition:!0,buttonsSize:!0,headerLabel:!0,language:!0,translation:!0,selectNewNode:!0,groupsMode:!0,sortOnChange:!0,sortComparator:!0,onChange:!0,onGetLabelCallback:!0,onDataSetChanged:!0})[1],[e]),Ia=({field:e})=>{a.useSyncExternalStore(e.subscribe.bind(e),e.getSnapshot.bind(e));const[t]=a.useState({}),n=e.getProps(),o=e.getValue()??null,r=io(e),s=ho(e),u=wa(e,n.dataSet),l=fo(e,n),c=vo(e,n),i=Ea(e,n),d=Ra(e,n);a.useEffect(()=>{e.setReady(!0)},[e]);const g={...{width:e.getWidth()??"100%"},...n.style},h=go(n);return S.jsx(xa,{className:n.className,apiRef:t,style:g,...h,dataSet:u,autoFocus:n.autoFocus,disabled:e.isDisabled(),readOnly:e.isReadOnly(),value:o,placeholder:n.placeholder??"Choose",onChange:l,onDataSetChanged:c,onDataFetch:i,onReady:d,onClear:s,onBlur:r})},wa=(e,t)=>a.useMemo(()=>typeof t!="function"?t:()=>t(e),[t,e]),Ea=(e,t)=>(n,o)=>{var r;return(r=t.onDataFetch)==null?void 0:r.call(t,n,o,e)},Ra=(e,t)=>()=>{var n;return(n=t.onReady)==null?void 0:n.call(t,e)};class _a extends xn{render(){return S.jsx(Ia,{field:this})}}export{_a as T};
