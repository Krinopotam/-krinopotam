import{r as e,j as t,W as s}from"./index-BH0IsnV8.js";import{C as i,B as l}from"./baseField-CO3WFjOf.js";import{F as r}from"./isArray-DKcSB63v.js";const o=({field:l})=>{e.useSyncExternalStore(l.subscribe.bind(l),l.getSnapshot.bind(l)),e.useEffect((()=>{l.setReady(!0)}),[l]);const o=e.useRef(null),a=l.getModel().getFormProps(),h=l.getProps(),u=l.getRootFields();let c;for(const e in u){const t=u[e];t.isHidden()||(c=t)}const p=l.isHidden()||!l.hasVisibleChildren(),g=l.getLabel();let f="";"horizontal"===a.layout&&(f=g??(null==c?void 0:c.getLabel()));const m={width:l.getWidth(),margin:0,marginBottom:0};h.autoHeightResize&&(m.height="100%");const F={...m,...h.style},b={display:"flex",flexDirection:"row",flexWrap:"nowrap",gap:"24px",alignItems:"top",width:"100%"};h.autoHeightResize&&(b.height="100%");const x=n(u,24);return t.jsx(i,{nodeRef:o,in:!p,timeout:300,classNames:"zoom",unmountOnExit:!0,children:t.jsx("div",{ref:o,className:"dform-field-container",children:t.jsx(r.Item,{label:f,style:F,className:h.className,children:t.jsx("div",{style:b,children:Object.keys(u).map((e=>{const i=u[e],r={flex:i.getProps().width||i.noGrowWidth()?"0 0 auto":"1 1 auto",width:d(i,x)},o="horizontal"===a.layout&&i===c?null:void 0;return t.jsx(s.Fragment,{children:i.renderField({altLabel:o,fieldContainerStyle:r})},`item_${l.getName()}_subitem_${i.getName()}`)}))})})})})},n=(e,t)=>{const s=Object.keys(e).length;return s>0?(s-1)*t/s:0},d=(e,t)=>{const s=e.getProps();if(s.width)return a(s.width)?s.width+"px":`calc(${s.width} - ${t}px)`},a=e=>"number"==typeof e||e.length>0&&!isNaN(Number(e[e.length-1]));class InlineGroupField extends l{initChildrenFields(){const e=this.getProps(),t=e.fieldsProps;return e.fieldsProps?([this.fieldsMap,this.rootFields]=this.getModel().prepareFieldCollection(t,this),[this.fieldsMap,this.rootFields]):[{},{}]}render(){return t.jsx(o,{field:this})}renderField(){return this.render()}getFieldsMap(){return this.fieldsMap}getRootFields(){return this.rootFields}getValue(){}setValue(){}canHaveValue(){return!1}managesChildWidth(){return!0}setDisabled(e,t,s){if(this.isDisabled()!==e){for(const s in this.rootFields){this.rootFields[s].setDisabled(e,t,!0)}super.setDisabled(e,t,s)}}setReadOnly(e,t,s){if(this.isReadOnly()!==e){for(const s in this.rootFields){this.rootFields[s].setReadOnly(e,t,!0)}super.setReadOnly(e,t,s)}}}export{InlineGroupField as I};
