import{r as s,k as z,n as pe,q as on,d as _t,w as tt,h as an,bs as sn,e as Se,K as _e,i as $t,u as xt,v as un,x as ln,y as Pt,z as Nt,C as cn,ae as dn,m as It,f as Rt,F as fn,o as hn,G as vn,l as gn,aa as mn,ao as wt,j as m,t as pn,c as et,g as Sn}from"./index-fLDE7RV8.js";import{a as dt,u as yn,b as Cn,B as bn}from"./dForm-DcZj9aOC.js";import{s as Bt,D as Et}from"./dFormModal-BONKQnKH.js";import{j as xn,m as Nn,a as In,B as Rn,l as Dt,u as wn,t as En,d as Dn,e as Fn,f as An,c as Tn,P as kn}from"./mergeButtons-5jDhs16v.js";import{m as ut,j as On,T as Ln,n as Vn,p as Mn,q as Gn,S as Kn,o as jn}from"./defaultButtonsProps-BRD3xjmK.js";import{u as _n,a as $n,b as Pn,c as Bn,d as Hn,e as Wn,f as zn,n as Ht,g as Un,h as Ft,i as Qn,j as qn,k as Xn,l as Jn,m as Yn,o as Zn,p as er,q as tr,r as nr,s as rr,t as or,v as ar,w as sr,x as ur,y as lr,z as cr,A as ir,B as dr,C as fr,D as hr,E as vr,F as gr,G as mr,H as pr,I as Sr,J as yr,K as Cr,L as br,M as xr,N as Nr}from"./useApiGetGroupsOnly-DmM5f8UP.js";import{S as Ir}from"./modal-CJqMGIFI.js";import{c as Rr,d as wr,B as Er,u as Dr,b as Fr,D as Ar,m as Tr}from"./useShowArrow-Cn6xTPHQ.js";import{j as kr,k as Or,g as Lr}from"./index-Dm8OxE-t.js";import{u as Vr}from"./useIcons-C467XfOT.js";const Mr=function(e){var t=s.useRef({valueLabels:new Map});return s.useMemo(function(){var n=t.current.valueLabels,o=new Map,r=e.map(function(a){var u,l=a.value,c=(u=a.label)!==null&&u!==void 0?u:n.get(l);return o.set(l,c),z(z({},a),{},{label:c})});return t.current.valueLabels=o,[r]},[e])},Gr=function(e,t,n,o){return s.useMemo(function(){var r=e.map(function(c){var d=c.value;return d}),a=t.map(function(c){var d=c.value;return d}),u=r.filter(function(c){return!o[c]});if(n){var l=ut(r,!0,o);r=l.checkedKeys,a=l.halfCheckedKeys}return[Array.from(new Set([].concat(pe(u),pe(r)))),a]},[e,t,n,o])};function Kr(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}function jr(e){var t=e||{},n=t.label,o=t.value,r=t.children,a=o||"value";return{_title:n?[n]:["title","label"],value:a,key:a,children:r||"children"}}function lt(e){return!e||e.disabled||e.disableCheckbox||e.checkable===!1}function _r(e,t){var n=[];function o(r){r.forEach(function(a){var u=a[t.children];u&&(n.push(a[t.value]),o(u))})}return o(e),n}function At(e){return e==null}const $r=function(e,t){return s.useMemo(function(){var n=On(e,{fieldNames:t,initWrapper:function(r){return z(z({},r),{},{valueEntities:new Map})},processEntity:function(r,a){var u=r.node[t.value];a.valueEntities.set(u,r)}});return n},[e,t])};var ft=function(){return null},Pr=["children","value"];function Wt(e){return on(e).map(function(t){if(!s.isValidElement(t)||!t.type)return null;var n=t,o=n.key,r=n.props,a=r.children,u=r.value,l=_t(r,Pr),c=z({key:o,value:u},l),d=Wt(a);return d.length&&(c.children=d),c}).filter(function(t){return t})}function ct(e){if(!e)return e;var t=z({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return tt(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function Br(e,t,n,o,r,a){var u=null,l=null;function c(){function d(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return i.map(function(h,R){var p="".concat(v,"-").concat(R),S=h[a.value],y=n.includes(S),T=d(h[a.children]||[],p,y),N=s.createElement(ft,h,T.map(function(L){return L.node}));if(t===S&&(u=N),y){var _={pos:p,node:N,children:T};return g||l.push(_),_}return null}).filter(function(h){return h})}l||(l=[],d(o),l.sort(function(i,v){var g=i.node.props.value,h=v.node.props.value,R=n.indexOf(g),p=n.indexOf(h);return R-p}))}Object.defineProperty(e,"triggerNode",{get:function(){return tt(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),c(),u}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return tt(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),c(),r?l:l.map(function(i){var v=i.node;return v})}})}const Hr=function(e,t,n){var o=n.treeNodeFilterProp,r=n.filterTreeNode,a=n.fieldNames,u=a.children;return s.useMemo(function(){if(!t||r===!1)return e;var l;if(typeof r=="function")l=r;else{var c=t.toUpperCase();l=function(v,g){var h=g[o];return String(h).toUpperCase().includes(c)}}function d(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return i.reduce(function(g,h){var R=h[u],p=v||l(t,ct(h)),S=d(R||[],p);return(p||S.length)&&g.push(z(z({},h),{},an({isLeaf:void 0},u,S))),g},[])}return d(e)},[e,t,u,o,r])};function Tt(e){var t=s.useRef();t.current=e;var n=s.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}function Wr(e,t){var n=t.id,o=t.pId,r=t.rootPId,a={},u=[],l=e.map(function(c){var d=z({},c),i=d[n];return a[i]=d,d.key=d.key||i,d});return l.forEach(function(c){var d=c[o],i=a[d];i&&(i.children=i.children||[],i.children.push(c)),(d===r||!i&&r===null)&&u.push(c)}),u}function zr(e,t,n){return s.useMemo(function(){return e?n?Wr(e,z({id:"id",pId:"pId",rootPId:null},n!==!0?n:{})):e:Wt(t)},[t,n,e])}var zt=s.createContext(null),ht=s.createContext(null),Ur={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Qr=function(t,n){var o=Rr(),r=o.prefixCls,a=o.multiple,u=o.searchValue,l=o.toggleOpen,c=o.open,d=o.notFoundContent,i=s.useContext(ht),v=i.virtual,g=i.listHeight,h=i.listItemHeight,R=i.listItemScrollOffset,p=i.treeData,S=i.fieldNames,y=i.onSelect,T=i.dropdownMatchSelectWidth,N=i.treeExpandAction,_=i.treeTitleRender,L=i.onPopupScroll,f=s.useContext(zt),F=f.checkable,A=f.checkedKeys,U=f.halfCheckedKeys,ee=f.treeExpandedKeys,te=f.treeDefaultExpandAll,ne=f.treeDefaultExpandedKeys,J=f.onTreeExpand,$=f.treeIcon,Te=f.showTreeIcon,ye=f.switcherIcon,ke=f.treeLine,re=f.treeNodeFilterProp,le=f.loadData,Q=f.treeLoadedKeys,Oe=f.treeMotion,Le=f.onTreeLoad,Ve=f.keyEntities,Y=s.useRef(),O=sn(function(){return p},[c,p],function(k,C){return C[0]&&k[1]!==C[1]}),Ce=s.useState(null),P=Se(Ce,2),ce=P[0],ie=P[1],G=Ve[ce],de=s.useMemo(function(){return F?{checked:A,halfChecked:U}:null},[F,A,U]);s.useEffect(function(){if(c&&!a&&A.length){var k;(k=Y.current)===null||k===void 0||k.scrollTo({key:A[0]}),ie(A[0])}},[c]);var be=String(u).toLowerCase(),xe=function(C){return be?String(C[re]).toLowerCase().includes(be):!1},Ne=s.useState(ne),B=Se(Ne,2),Ie=B[0],$e=B[1],Pe=s.useState(null),q=Se(Pe,2),oe=q[0],Re=q[1],H=s.useMemo(function(){return ee?pe(ee):u?oe:Ie},[Ie,oe,ee,u]);s.useEffect(function(){u&&Re(_r(p,S))},[u]);var Me=function(C){$e(C),Re(C),J&&J(C)},we=function(C){C.preventDefault()},X=function(C,fe){var W=fe.node;F&&lt(W)||(y(W.key,{selected:!A.includes(W.key)}),a||l(!1))};if(s.useImperativeHandle(n,function(){var k;return{scrollTo:(k=Y.current)===null||k===void 0?void 0:k.scrollTo,onKeyDown:function(fe){var W,he=fe.which;switch(he){case _e.UP:case _e.DOWN:case _e.LEFT:case _e.RIGHT:(W=Y.current)===null||W===void 0||W.onKeyDown(fe);break;case _e.ENTER:{if(G){var De=(G==null?void 0:G.node)||{},Be=De.selectable,ae=De.value;Be!==!1&&X(null,{node:{key:ce},selected:!A.includes(ae)})}break}case _e.ESC:l(!1)}},onKeyUp:function(){}}}),O.length===0)return s.createElement("div",{role:"listbox",className:"".concat(r,"-empty"),onMouseDown:we},d);var Ee={fieldNames:S};return Q&&(Ee.loadedKeys=Q),H&&(Ee.expandedKeys=H),s.createElement("div",{onMouseDown:we},G&&c&&s.createElement("span",{style:Ur,"aria-live":"assertive"},G.node.value),s.createElement(Ln,$t({ref:Y,focusable:!1,prefixCls:"".concat(r,"-tree"),treeData:O,height:g,itemHeight:h,itemScrollOffset:R,virtual:v!==!1&&T!==!1,multiple:a,icon:$,showIcon:Te,switcherIcon:ye,showLine:ke,loadData:u?null:le,motion:Oe,activeKey:ce,checkable:F,checkStrictly:!0,checkedKeys:de,selectedKeys:F?[]:A,defaultExpandAll:te,titleRender:_},Ee,{onActiveChange:ie,onSelect:X,onCheck:X,onExpand:Me,onLoad:Le,filterTreeNode:xe,expandAction:N,onScroll:L})))},qr=s.forwardRef(Qr),vt="SHOW_ALL",gt="SHOW_PARENT",nt="SHOW_CHILD";function kt(e,t,n,o){var r=new Set(e);return t===nt?e.filter(function(a){var u=n[a];return!(u&&u.children&&u.children.some(function(l){var c=l.node;return r.has(c[o.value])})&&u.children.every(function(l){var c=l.node;return lt(c)||r.has(c[o.value])}))}):t===gt?e.filter(function(a){var u=n[a],l=u?u.parent:null;return!(l&&!lt(l.node)&&r.has(l.key))}):e}var Xr=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function Jr(e){return!e||un(e)!=="object"}var Yr=s.forwardRef(function(e,t){var n=e.id,o=e.prefixCls,r=o===void 0?"rc-tree-select":o,a=e.value,u=e.defaultValue,l=e.onChange,c=e.onSelect,d=e.onDeselect,i=e.searchValue,v=e.inputValue,g=e.onSearch,h=e.autoClearSearchValue,R=h===void 0?!0:h,p=e.filterTreeNode,S=e.treeNodeFilterProp,y=S===void 0?"value":S,T=e.showCheckedStrategy,N=e.treeNodeLabelProp,_=e.multiple,L=e.treeCheckable,f=e.treeCheckStrictly,F=e.labelInValue,A=e.fieldNames,U=e.treeDataSimpleMode,ee=e.treeData,te=e.children,ne=e.loadData,J=e.treeLoadedKeys,$=e.onTreeLoad,Te=e.treeDefaultExpandAll,ye=e.treeExpandedKeys,ke=e.treeDefaultExpandedKeys,re=e.onTreeExpand,le=e.treeExpandAction,Q=e.virtual,Oe=e.listHeight,Le=Oe===void 0?200:Oe,Ve=e.listItemHeight,Y=Ve===void 0?20:Ve,O=e.listItemScrollOffset,Ce=O===void 0?0:O,P=e.onDropdownVisibleChange,ce=e.dropdownMatchSelectWidth,ie=ce===void 0?!0:ce,G=e.treeLine,de=e.treeIcon,be=e.showTreeIcon,xe=e.switcherIcon,Ne=e.treeMotion,B=e.treeTitleRender,Ie=e.onPopupScroll,$e=_t(e,Xr),Pe=wr(n),q=L&&!f,oe=L||f,Re=f||F,H=oe||_,Me=xt(u,{value:a}),we=Se(Me,2),X=we[0],Ee=we[1],k=s.useMemo(function(){return L?T||nt:vt},[T,L]),C=s.useMemo(function(){return jr(A)},[JSON.stringify(A)]),fe=xt("",{value:i!==void 0?i:v,postState:function(b){return b||""}}),W=Se(fe,2),he=W[0],De=W[1],Be=function(b){De(b),g==null||g(b)},ae=zr(ee,te,U),Ue=$r(ae,C),M=Ue.keyEntities,se=Ue.valueEntities,Qe=s.useCallback(function(x){var b=[],I=[];return x.forEach(function(w){se.has(w)?I.push(w):b.push(w)}),{missingRawValues:b,existRawValues:I}},[se]),qe=Hr(ae,he,{fieldNames:C,treeNodeFilterProp:y,filterTreeNode:p}),Xe=s.useCallback(function(x){if(x){if(N)return x[N];for(var b=C._title,I=0;I<b.length;I+=1){var w=x[b[I]];if(w!==void 0)return w}}},[C,N]),ue=s.useCallback(function(x){var b=Kr(x);return b.map(function(I){return Jr(I)?{value:I}:I})},[]),ve=s.useCallback(function(x){var b=ue(x);return b.map(function(I){var w=I.label,K=I.value,V=I.halfChecked,E,D=se.get(K);if(D){var j;w=B?B(D.node):(j=w)!==null&&j!==void 0?j:Xe(D.node),E=D.node.disabled}else if(w===void 0){var ge=ue(X).find(function(He){return He.value===K});w=ge.label}return{label:w,value:K,halfChecked:V,disabled:E}})},[se,Xe,ue,X]),pt=s.useMemo(function(){return ue(X===null?[]:X)},[ue,X]),Qt=s.useMemo(function(){var x=[],b=[];return pt.forEach(function(I){I.halfChecked?b.push(I):x.push(I)}),[x,b]},[pt]),St=Se(Qt,2),Ge=St[0],yt=St[1],Ct=s.useMemo(function(){return Ge.map(function(x){return x.value})},[Ge]),qt=Gr(Ge,yt,q,M),bt=Se(qt,2),Ke=bt[0],Je=bt[1],Xt=s.useMemo(function(){var x=kt(Ke,k,M,C),b=x.map(function(V){var E,D;return(E=(D=M[V])===null||D===void 0||(D=D.node)===null||D===void 0?void 0:D[C.value])!==null&&E!==void 0?E:V}),I=b.map(function(V){var E=Ge.find(function(j){return j.value===V}),D=F?E==null?void 0:E.label:B==null?void 0:B(E);return{value:V,label:D}}),w=ve(I),K=w[0];return!H&&K&&At(K.value)&&At(K.label)?[]:w.map(function(V){var E;return z(z({},V),{},{label:(E=V.label)!==null&&E!==void 0?E:V.value})})},[C,H,Ke,Ge,ve,k,M]),Jt=Mr(Xt),Yt=Se(Jt,1),Zt=Yt[0],Ye=Tt(function(x,b,I){var w=ve(x);if(Ee(w),R&&De(""),l){var K=x;if(q){var V=kt(x,k,M,C);K=V.map(function(Z){var me=se.get(Z);return me?me.node[C.value]:Z})}var E=b||{triggerValue:void 0,selected:void 0},D=E.triggerValue,j=E.selected,ge=K;if(f){var He=yt.filter(function(Z){return!K.includes(Z.value)});ge=[].concat(pe(ge),pe(He))}var We=ve(ge),Fe={preValue:Ge,triggerValue:D},je=!0;(f||I==="selection"&&!j)&&(je=!1),Br(Fe,D,x,ae,je,C),oe?Fe.checked=j:Fe.selected=j;var Ze=Re?We:We.map(function(Z){return Z.value});l(H?Ze:Ze[0],Re?null:We.map(function(Z){return Z.label}),Fe)}}),ot=s.useCallback(function(x,b){var I,w=b.selected,K=b.source,V=M[x],E=V==null?void 0:V.node,D=(I=E==null?void 0:E[C.value])!==null&&I!==void 0?I:x;if(!H)Ye([D],{selected:!0,triggerValue:D},"option");else{var j=w?[].concat(pe(Ct),[D]):Ke.filter(function(me){return me!==D});if(q){var ge=Qe(j),He=ge.missingRawValues,We=ge.existRawValues,Fe=We.map(function(me){return se.get(me).key}),je;if(w){var Ze=ut(Fe,!0,M);je=Ze.checkedKeys}else{var Z=ut(Fe,{checked:!1,halfCheckedKeys:Je},M);je=Z.checkedKeys}j=[].concat(pe(He),pe(je.map(function(me){return M[me].node[C.value]})))}Ye(j,{selected:w,triggerValue:D},K||"option")}w||!H?c==null||c(D,ct(E)):d==null||d(D,ct(E))},[Qe,se,M,C,H,Ct,Ye,q,c,d,Ke,Je]),en=s.useCallback(function(x){if(P){var b={};Object.defineProperty(b,"documentClickClose",{get:function(){return tt(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),P(x,b)}},[P]),tn=Tt(function(x,b){var I=x.map(function(w){return w.value});if(b.type==="clear"){Ye(I,{},"selection");return}b.values.length&&ot(b.values[0].value,{selected:!1,source:"selection"})}),nn=s.useMemo(function(){return{virtual:Q,dropdownMatchSelectWidth:ie,listHeight:Le,listItemHeight:Y,listItemScrollOffset:Ce,treeData:qe,fieldNames:C,onSelect:ot,treeExpandAction:le,treeTitleRender:B,onPopupScroll:Ie}},[Q,ie,Le,Y,Ce,qe,C,ot,le,B,Ie]),rn=s.useMemo(function(){return{checkable:oe,loadData:ne,treeLoadedKeys:J,onTreeLoad:$,checkedKeys:Ke,halfCheckedKeys:Je,treeDefaultExpandAll:Te,treeExpandedKeys:ye,treeDefaultExpandedKeys:ke,onTreeExpand:re,treeIcon:de,treeMotion:Ne,showTreeIcon:be,switcherIcon:xe,treeLine:G,treeNodeFilterProp:y,keyEntities:M}},[oe,ne,J,$,Ke,Je,Te,ye,ke,re,de,Ne,be,xe,G,y,M]);return s.createElement(ht.Provider,{value:nn},s.createElement(zt.Provider,{value:rn},s.createElement(Er,$t({ref:t},$e,{id:Pe,prefixCls:r,mode:H?"multiple":void 0,displayValues:Zt,onDisplayValuesChange:tn,searchValue:he,onSearch:Be,OptionList:qr,emptyOptions:!ae.length,onDropdownVisibleChange:en,dropdownMatchSelectWidth:ie}))))}),ze=Yr;ze.TreeNode=ft;ze.SHOW_ALL=vt;ze.SHOW_PARENT=gt;ze.SHOW_CHILD=nt;const Zr=e=>{const{componentCls:t,treePrefixCls:n,colorBgElevated:o}=e,r=`.${n}`;return[{[`${t}-dropdown`]:[{padding:`${Nt(e.paddingXS)} ${Nt(e.calc(e.paddingXS).div(2).equal())}`},Mn(n,Pt(e,{colorBgContainer:o})),{[r]:{borderRadius:0,[`${r}-list-holder-inner`]:{alignItems:"stretch",[`${r}-treenode`]:{[`${r}-node-content-wrapper`]:{flex:"auto"}}}}},Gn(`${n}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${r}-switcher${r}-switcher_close`]:{[`${r}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function eo(e,t,n){return ln("TreeSelect",o=>{const r=Pt(o,{treePrefixCls:t});return[Zr(r)]},Vn)(e,n)}var to=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};const no=(e,t)=>{var n;const{prefixCls:o,size:r,disabled:a,bordered:u=!0,className:l,rootClassName:c,treeCheckable:d,multiple:i,listHeight:v=256,listItemHeight:g=26,placement:h,notFoundContent:R,switcherIcon:p,treeLine:S,getPopupContainer:y,popupClassName:T,dropdownClassName:N,treeIcon:_=!1,transitionName:L,choiceTransitionName:f="",status:F,treeExpandAction:A,builtinPlacements:U,dropdownMatchSelectWidth:ee,popupMatchSelectWidth:te,allowClear:ne,variant:J,dropdownStyle:$,tagRender:Te}=e,ye=to(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender"]),{getPopupContainer:ke,getPrefixCls:re,renderEmpty:le,direction:Q,virtual:Oe,popupMatchSelectWidth:Le,popupOverflow:Ve}=s.useContext(cn),Y=re(),O=re("select",o),Ce=re("select-tree",o),P=re("tree-select",o),{compactSize:ce,compactItemClassnames:ie}=dn(O,Q),G=It(O),de=It(P),[be,xe,Ne]=Dr(O,G),[B]=eo(P,Ce,de),[Ie,$e]=kr("treeSelect",J,u),Pe=Rt(T||N,`${P}-dropdown`,{[`${P}-dropdown-rtl`]:Q==="rtl"},c,Ne,G,de,xe),q=!!(d||i),oe=Fr(e.suffixIcon,e.showArrow),Re=(n=te??ee)!==null&&n!==void 0?n:Le,{status:H,hasFeedback:Me,isFormItemInput:we,feedbackIcon:X}=s.useContext(fn),Ee=Lr(H,F),{suffixIcon:k,removeIcon:C,clearIcon:fe}=Vr(Object.assign(Object.assign({},ye),{multiple:q,showSuffixIcon:oe,hasFeedback:Me,feedbackIcon:X,prefixCls:O,componentName:"TreeSelect"})),W=ne===!0?{clearIcon:fe}:ne;let he;R!==void 0?he=R:he=(le==null?void 0:le("Select"))||s.createElement(Ar,{componentName:"Select"});const De=hn(ye,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),Be=s.useMemo(()=>h!==void 0?h:Q==="rtl"?"bottomRight":"bottomLeft",[h,Q]),ae=vn(ue=>{var ve;return(ve=r??ce)!==null&&ve!==void 0?ve:ue}),Ue=s.useContext(gn),M=a??Ue,se=Rt(!o&&P,{[`${O}-lg`]:ae==="large",[`${O}-sm`]:ae==="small",[`${O}-rtl`]:Q==="rtl",[`${O}-${Ie}`]:$e,[`${O}-in-form-item`]:we},Or(O,Ee,Me),ie,l,c,Ne,G,de,xe),Qe=ue=>s.createElement(Kn,{prefixCls:Ce,switcherIcon:p,treeNodeProps:ue,showLine:S}),[qe]=mn("SelectLike",$==null?void 0:$.zIndex),Xe=s.createElement(ze,Object.assign({virtual:Oe,disabled:M},De,{dropdownMatchSelectWidth:Re,builtinPlacements:Tr(U,Ve),ref:t,prefixCls:O,className:se,listHeight:v,listItemHeight:g,treeCheckable:d&&s.createElement("span",{className:`${O}-tree-checkbox-inner`}),treeLine:!!S,suffixIcon:k,multiple:q,placement:Be,removeIcon:C,allowClear:W,switcherIcon:Qe,showTreeIcon:_,notFoundContent:he,getPopupContainer:y||ke,treeMotion:null,dropdownClassName:Pe,dropdownStyle:Object.assign(Object.assign({},$),{zIndex:qe}),choiceTransitionName:wt(Y,"",f),transitionName:wt(Y,"slide-up",L),treeExpandAction:A,tagRender:q?Te:void 0}));return be(B(Xe))},ro=s.forwardRef(no),Ae=ro,oo=xn(Ae);Ae.TreeNode=ft;Ae.SHOW_ALL=vt;Ae.SHOW_PARENT=gt;Ae.SHOW_CHILD=nt;Ae._InternalPanelDoNotUseOrYouWillBeFired=oo;const ao=e=>()=>{e.setTouched(!0)},so=(e,t)=>(n,o,r)=>{var a;if(e.isReady()){switch(t.valueType){case void 0:case"node":t.multiple?e.setValue(r??null):e.setValue(r!=null&&r.length?r[0]:null);break;case"labeledValue":e.setValue(n??null);break;case"key":t.multiple?e.setValue(o??null):e.setValue(o!=null&&o.length?o[0]:null);break}e.setDirty(!0)}(a=t.onChange)==null||a.call(t,n,o,r,e)},uo=e=>()=>{var n;e.setDirty(!0),e.setTouched(!0);const t=e.getProps();(n=t.onClear)==null||n.call(t)},lo=(e,t)=>n=>{var o;return(o=t.onDataSetChanged)==null?void 0:o.call(t,n,e)},co=e=>s.useMemo(()=>Bt(e,{autoFocus:!0,autoHeightResize:!0,component:!0,dependsOn:!0,disabled:!0,helpClass:!0,hidden:!0,inlineGroup:!0,label:!0,nonEditable:!0,onDirtyStateChanged:!0,onDisabledStateChanged:!0,onErrorChanged:!0,onHiddenStateChanged:!0,onLabelChanged:!0,onReadOnlyStateChanged:!0,onReady:!0,onReadyStateChanged:!0,onTouchedStateChanged:!0,onValidated:!0,onValueChanged:!0,placeholder:!0,readOnly:!0,requiredMark:!0,rowStyle:!0,rules:!0,style:!0,tab:!0,tooltip:!0,value:!0,width:!0,valueType:!0,onDataSetChanged:!0,onChange:!0,dataSet:!0,onDataFetch:!0})[1],[e]),rt=s.createContext(void 0),io=({children:e})=>{const t=s.useRef(!1),n=s.useRef(!1),o=s.useMemo(()=>({ctrlPressedRef:t,dialogOpenedRef:n}),[t]);return m.jsx(rt.Provider,{value:o,children:e})},fo=e=>{const n=e.getFieldNames().title;return(o,r)=>!r||typeof r[n]!="string"?!1:r[n].toLowerCase().indexOf(o.toLowerCase())>=0},ho=e=>s.useMemo(()=>({...{maxHeight:400,overflow:"auto"},...e}),[e]),Ot=(e,t,n)=>{const{dialogOpenedRef:o}=s.useContext(rt);return s.useMemo(()=>{const r=n?t==null?void 0:t.editGroupFormProps:t==null?void 0:t.editFormProps;if(!r)return;const a={...r};t.language&&!a.language&&(a.language=t.language);const u=r==null?void 0:r.onSubmitSuccess;a.onSubmitSuccess=(d,i,v,g,h)=>{var T;if(u==null||u(d,i,v,g,h),h.isPrevented())return;const R=g.model.getFormMode(),p=e.getFieldNames(),S={...i,...v};let y;if(S[p.parent]?y=(T=S[p.parent])==null?void 0:T[p.key]:S[p.parent]===null?y=void 0:y=e.getActiveNodeKey(),R==="create"||R==="clone")S[p.key]||(S[p.key]=jn()),e.addNode(S,y,"insideBottom",{ensureVisible:!0,select:!!t.selectNewNode,sortNodes:t.sortOnChange});else if(R==="update"){e.updateNode(S,y,{ensureVisible:!0,sortNodes:t.sortOnChange});const N=e.getValues();e.setValues(vo(N,S,p))}};const l=r==null?void 0:r.onOpen;a.onOpen=(d,i,v,g)=>{const h=l==null?void 0:l(d,i,v,g);return g.isPrevented()||(o.current=!0),h};const c=r==null?void 0:r.onClosed;return a.onClosed=(d,i)=>{c==null||c(d,i),!i.isPrevented()&&(o.current=!1)},a},[n,t==null?void 0:t.editFormProps,t==null?void 0:t.editGroupFormProps,t.language,t.selectNewNode,e,o])},vo=(e,t,n)=>{if(!e)return null;const o=[];for(const r of e)r.value===t[n.key]?o.push({value:r.value}):o.push(r);return o},go=(e,t)=>{const{dialogOpenedRef:n}=s.useContext(rt);e.getButtonsApi().refreshButtons=mo();const o=e.getFieldNames(),r=e.getActiveNode(!0),a=!!(r!=null&&r.isLeaf)||!!(t.groupsMode&&!(r!=null&&r[o.isGroup])),u=t.buttons,l=t.buttonsSize??"small",c=t.buttonsPosition??"right",d=_n(t),i=$n(e,t,a),v=Pn(e,t,a),g=Bn(e,t,r,at,a),h=Hn(e,t,r,at,a),R=Wn(e,t,r,at,a),p=zn(e,t,r,a,()=>{n.current=!0},()=>{n.current=!1});return s.useMemo(()=>{const y=Nn({headerLabel:d,view:g,create:i,createGroup:v,clone:h,update:R,delete:p},u);for(const T in y){const N=y[T];!N||T==="headerLabel"||N.type==="hotkey"||(N.size=N.size??l,N.position=N.position??c,N.checkDisabled&&(N.disabled=!r),N.checkHidden&&(N.hidden=!r))}return y},[d,g,i,v,h,R,p,u,l,c,r])},mo=()=>{const[,e]=s.useState({});return s.useCallback(()=>{e({})},[e])},at=e=>({...e}),po=({treeApi:e,treeProps:t})=>{const n=go(e,t),{token:{colorBorderSecondary:o}}=pn.useToken();return s.useMemo(()=>n?m.jsx("div",{style:{padding:"0 4px 6px 4px",borderBottom:`1px solid ${o}`,...t.buttonsRowWrapperStyle},children:m.jsx(In,{buttons:n,apiRef:e.getButtonsApi(),style:t.buttonsRowStyle,context:e,iconsOnly:t.buttonsIconsOnly!==!1})}):null,[n,o,e,t.buttonsIconsOnly,t.buttonsRowStyle,t.buttonsRowWrapperStyle])},Ut=({api:e})=>{const t=e.getFetchError(),n=e.getIsFetching(),o=e.getMinSymbols(),r=e.isDataPlainList();return o?m.jsx(So,{minSymbols:o,plainList:r}):n?m.jsx(yo,{plainList:r}):t?m.jsx(Co,{error:t,plainList:r}):m.jsx(m.Fragment,{})},So=({minSymbols:e,plainList:t})=>m.jsxs("div",{style:{paddingLeft:t?"8px":"30px",fontSize:"12px"},children:["Введите как минимум ",e," симв."]}),yo=({plainList:e})=>m.jsxs("div",{style:{paddingLeft:e?"8px":"30px",fontSize:"12px"},children:[m.jsx(Ir,{size:"small"})," загрузка..."]}),Co=({error:e,plainList:t})=>m.jsx("div",{role:"alert",style:{paddingLeft:t?"8px":"30px",fontSize:"12px",color:"#ff4d4f"},children:e}),bo=({api:e})=>{const t=e.getIsFetching(),n=e.getFetchError(),o=e.getMinSymbols(),r=e.isDataPlainList();return o||t||n?m.jsx(m.Fragment,{}):m.jsx("div",{style:{paddingLeft:r?"8px":"30px",fontSize:"12px"},children:e.t("dataNotFound")})},xo=({api:e,children:t})=>{const n=e.isDataPlainList(),o=e.getProps();return m.jsx("div",{className:n?"tree-select-plain":void 0,children:o.editFormProps||o.editGroupFormProps?m.jsx(No,{api:e,children:t}):m.jsxs(m.Fragment,{children:[t,m.jsx(Ut,{api:e})]})})},No=({api:e,children:t})=>{const n=e.getProps();return m.jsxs(Rn,{style:{display:"flex",flexDirection:"column",...n.buttonsRowWrapperStyle},keepFocus:!1,children:[m.jsx(po,{treeApi:e,treeProps:n}),t,m.jsx(Ut,{api:e})]})},Io=({api:e,children:t})=>{const n=e.getProps(),o=s.useContext(ht);return o&&(n.titleRender?o.treeTitleRender=n.titleRender:o.treeTitleRender=void 0),n.dropdownRender?n.dropdownRender(t):m.jsx(xo,{api:e,children:t})},Ro=({api:e,allProps:t,treeSelectProps:n})=>{const{ctrlPressedRef:o,dialogOpenedRef:r}=s.useContext(rt);Eo(o);const a=Ot(e,t,!1),u=Ot(e,t,!0),l=ho(t.dropdownStyle),c=Fo({api:e}),d=Do(e),i=Vo(e.getFieldNames()),v=e.getExpandedKeys(),g=Mo(e),h=Ao(e),R=To(e),p=ko(e,o,r),S=Oo(e),y=Lo(e);return m.jsxs(m.Fragment,{children:[m.jsx(Ae,{ref:e.treeSelectRef,treeNodeFilterProp:i.label,notFoundContent:m.jsx(bo,{api:e}),...n,labelInValue:!0,treeTitleRender:t.selectedRender,dropdownRender:t.readOnly?wo:c,showSearch:!t.readOnly&&t.showSearch!==!1,allowClear:!t.readOnly&&t.allowClear!==!1,fieldNames:i,treeData:e.getDataSet(),value:d,disabled:t.disabled,treeDefaultExpandAll:t.defaultExpandAll,treeDefaultExpandedKeys:t.defaultExpandedKeys,treeExpandedKeys:v,open:e.getIsOpen(),dropdownStyle:l,filterTreeNode:y,onTreeExpand:g,onClear:h,onChange:R,onDropdownVisibleChange:p,onSearch:S}),!t.disabled&&a?m.jsx(Et,{...a,apiRef:e.getEditFormApi()}):null,!t.disabled&&u?m.jsx(Et,{...u,apiRef:e.getEditGroupFormApi()}):null]})},wo=()=>m.jsx(m.Fragment,{}),Eo=e=>{Dt("keydown",t=>{t.key==="Control"&&(e.current=!0)}),Dt("keyup",t=>{t.key==="Control"&&(e.current=!1)})},Do=e=>{const t=e.getValues();return e.getProps().multiple?t??void 0:(t==null?void 0:t[0])??void 0},Fo=({api:e})=>s.useCallback(t=>m.jsx(Io,{api:e,children:t}),[e]),Ao=e=>()=>{var n;e.setValues(null);const t=e.getProps();(n=t.onClear)==null||n.call(t)},To=e=>t=>{var u;const n=t;e.setValues(n??null);const o=e.getProps(),r=n?e.getSelectedKeys(n)??[]:[],a=n?e.getSelectedNodes(void 0,n)??[]:[];(u=o.onChange)==null||u.call(o,t,r,a)},ko=(e,t,n)=>o=>{var a;const r=e.getProps();if(r.readOnly){e.setIsOpen(!1);return}t.current||n.current?e.setIsOpen(!0):e.setIsOpen(o),o&&(r.fetchMode==="onUse"||r.fetchMode==="onUseForce")&&e.fetchData(),(a=r.onDropdownVisibleChange)==null||a.call(r,o)},Oo=e=>t=>{var o;e.fetchData(t,!0);const n=e.getProps();(o=n.onSearch)==null||o.call(n,t)},Lo=e=>{const t=fo(e);return(n,o)=>{if(!e.getIsAllFetched())return!0;const r=e.getProps();return r.filterTreeNode?typeof r.filterTreeNode=="function"?r.filterTreeNode(n,o):r.filterTreeNode:t(n,o)}},Vo=e=>({value:e.key,label:e.title,children:e.children}),Mo=e=>t=>{var o;const n=e.getProps();e.setExpandedKeys(t),(o=n.onTreeExpand)==null||o.call(n,t)},Go=e=>t=>{var r;if(!e.getIsMounted())return;const n=e.getProps();if(!n.noCacheFetchedData&&e.getIsAllFetched())return;if(n.minSearchLength&&t.length<n.minSearchLength){e.setMinSymbols(n.minSearchLength),e.setDataSet(void 0);return}e.setMinSymbols(0),e.setFetchError(void 0);const o=(r=n==null?void 0:n.onDataFetch)==null?void 0:r.call(n,t,e);if(!o){e.setIsAllFetched(!0);return}e.setIsFetching(!0),t||e.setDataSet(void 0),o.then(a=>{var u,l,c;e.getIsMounted()&&(e.setDataSet(a.data),e.setIsAllFetched(e.getIsAllFetched()||!t),e.getIsReady()||(e.setIsReady(!0),(u=n==null?void 0:n.onReady)==null||u.call(n)),e.setIsFetching(!1),(l=n==null?void 0:n.onDataFetchSuccess)==null||l.call(n,a,e),(c=n==null?void 0:n.onDataFetchComplete)==null||c.call(n,e))},a=>{e.getIsMounted()&&(e.setFetchError(a.message),e.setDataSet(void 0),e.setIsFetching(!1))})},Ko=e=>{const[t,n]=s.useState(e.open);return Ht(()=>{n(e.open)},[e.open]),[t,n]},jo=e=>()=>e,_o=e=>t=>{e(t)},$o=({dataMutator:e})=>s.useCallback(t=>{if(!e)return t;let n={...t};return e&&(n=e(n)),n},[e]),Po=e=>()=>e,Bo=e=>t=>{e(t)},Ho=e=>()=>e,Wo=e=>()=>e,zo=e=>()=>e,Uo=e=>t=>{e(t)},Qo=e=>()=>e,qo=e=>t=>{e(t)},Xo=e=>()=>e,Jo=e=>t=>{e(t)},Yo=e=>()=>e,Zo=e=>t=>{e(t)};var ea="Expected a function",Lt=NaN,ta="[object Symbol]",na=/^\s+|\s+$/g,ra=/^[-+]0x[0-9a-f]+$/i,oa=/^0b[01]+$/i,aa=/^0o[0-7]+$/i,sa=parseInt,ua=typeof et=="object"&&et&&et.Object===Object&&et,la=typeof self=="object"&&self&&self.Object===Object&&self,ca=ua||la||Function("return this")(),ia=Object.prototype,da=ia.toString,fa=Math.max,ha=Math.min,st=function(){return ca.Date.now()};function va(e,t,n){var o,r,a,u,l,c,d=0,i=!1,v=!1,g=!0;if(typeof e!="function")throw new TypeError(ea);t=Vt(t)||0,it(n)&&(i=!!n.leading,v="maxWait"in n,a=v?fa(Vt(n.maxWait)||0,t):a,g="trailing"in n?!!n.trailing:g);function h(f){var F=o,A=r;return o=r=void 0,d=f,u=e.apply(A,F),u}function R(f){return d=f,l=setTimeout(y,t),i?h(f):u}function p(f){var F=f-c,A=f-d,U=t-F;return v?ha(U,a-A):U}function S(f){var F=f-c,A=f-d;return c===void 0||F>=t||F<0||v&&A>=a}function y(){var f=st();if(S(f))return T(f);l=setTimeout(y,p(f))}function T(f){return l=void 0,g&&o?h(f):(o=r=void 0,u)}function N(){l!==void 0&&clearTimeout(l),d=0,o=c=r=l=void 0}function _(){return l===void 0?u:T(st())}function L(){var f=st(),F=S(f);if(o=arguments,r=this,c=f,F){if(l===void 0)return R(c);if(v)return l=setTimeout(y,t),h(c)}return l===void 0&&(l=setTimeout(y,t)),u}return L.cancel=N,L.flush=_,L}function it(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ga(e){return!!e&&typeof e=="object"}function ma(e){return typeof e=="symbol"||ga(e)&&da.call(e)==ta}function Vt(e){if(typeof e=="number")return e;if(ma(e))return Lt;if(it(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=it(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(na,"");var n=oa.test(e);return n||aa.test(e)?sa(e.slice(2),n?2:8):ra.test(e)?Lt:+e}var pa=va;const Sa=Sn(pa),ya=(e,t)=>(n="",o)=>{const r=Sa(e,t.getProps().debounce??0);o?r(n):e(n)},Mt=e=>!!(e&&typeof e=="object"&&e.value),Gt=(e,t)=>{const n=e[t.key],o=e[t.title];return{value:n,label:o}},mt=(e,t)=>{if(!e)return null;if(!dt(e))return typeof e=="object"?Mt(e)?[e]:[Gt(e,t)]:[{value:e}];const n=[];for(const o of e)o&&(typeof o=="object"?Mt(o)?n.push(o):n.push(Gt(o,t)):n.push({value:o}));return n},Ca=({value:e},t)=>{const n=ba(e??null,t),[o,r]=s.useState(n);return Ht(()=>{r(n)},[n]),[o,r]},ba=(e,t)=>s.useMemo(()=>mt(e,t),[t,e]),xa=e=>()=>e??null,Na=(e,t)=>s.useCallback(n=>{e(mt(n,t))},[t,e]),Ia=e=>t=>{const n=t??e;if(!n)return;if(!dt(n))return[n.value];const o=[];for(const r of n)o.push(r.value);return o},Kt=(e,t,n)=>{const o={[n.key]:e.value,[n.title]:e.label},{idx:r,nodes:a}=Un(t,e.value,n);if(r<0||!(a!=null&&a[r]))return o;const u={...a[r]};return delete u[n.children],u},Ra=(e,t)=>{const n=s.useRef(void 0),o=s.useRef(null),r=s.useRef(void 0);return(a,u)=>{const l=e.getDataSet(),c=e.getFieldNames(),d=a??l,i=u??t;if(n.current===d&&o.current===i)return r.current;if(n.current=d,o.current=i,!i){r.current=void 0;return}const v=[];if(!dt(i))v.push(Kt(i,d,c));else for(const g of i){const h=Kt(g,d,c);h&&v.push(h)}return r.current=v,v}},wa=(e,t)=>s.useCallback((n,o=!0)=>{var l;const r=e.getFieldNames(),a=(l=mt(n,r))==null?void 0:l[0];if(!a)return;const u=e.getValues();if(o){if(jt(u,a.value))return;t?e.setValues([...u??[],a]):e.setValues([a])}else{if(!jt(u,a.value))return;t?e.setValues((u==null?void 0:u.filter(c=>c.value!==a.value))??null):e.setValues([])}},[e,t]),jt=(e,t)=>{if(!e)return!1;for(const n of e)if(n.value===t)return!0;return!1},Ea={view:"Просмотр",viewGroup:"Просмотр группы",viewRecord:"Просмотр записи",viewRecordsGroup:"Просмотр группы записей",create:"Создать",createRecord:"Создать запись",createGroup:"Создать группу",createRecordsGroup:"Создать группу записей",edit:"Редактировать",editGroup:"Редактировать группу",editRecord:"Редактировать запись",editRecordsGroup:"Редактировать группу записей",clone:"Клонировать",cloneGroup:"Клонировать группу",cloneRecord:"Клонировать запись",cloneRecordsGroup:"Клонировать группу записей",delete:"Удалить",deleteGroup:"Удалить группу",deleteRecord:"Удалить запись(и)",deleteRecordsGroup:"Удалить группу записей",select:"Выбрать",selectRecord:"Выбрать запись(и)",go:"Перейти",filter:"Фильтр",ok:"OK",cancel:"Отмена",tryAgainQt:"Попробовать еще раз?",deleteSelectedRecordQt:"Удалить выбранную запись?",error:"Ошибка",dataNotFound:"Данные не найдены"},Da={view:"View",viewGroup:"View group",viewRecord:"View record",viewRecordsGroup:"View records group",create:"Create",createRecord:"Create record",createGroup:"Create group",createRecordsGroup:"Create records group",edit:"Edit",editGroup:"Edit group",editRecord:"Edit record",editRecordsGroup:"Edit records group",clone:"Clone",cloneGroup:"Clone group",cloneRecord:"Clone record",cloneRecordsGroup:"Clone records group",delete:"Delete",deleteGroup:"Delete group",deleteRecord:"Delete record(s)",deleteRecordsGroup:"Delete records group(s)",select:"Select",selectRecord:"Select record(s)",go:"Go",filter:"Filter",ok:"OK",cancel:"Cancel",tryAgainQt:"Try again?",deleteSelectedRecordQt:"Delete selected record?",error:"Error",dataNotFound:"Data not found"},Fa={view:"查看",viewGroup:"查看组",viewRecord:"查看记录",viewRecordsGroup:"查看记录组",create:"创建",createRecord:"创建记录",createGroup:"创建组",createRecordsGroup:"创建记录组",edit:"编辑",editGroup:"编辑组",editRecord:"编辑记录",editRecordsGroup:"编辑记录组",clone:"克隆",cloneGroup:"克隆组",cloneRecord:"克隆记录",cloneRecordsGroup:"克隆记录组",delete:"删除",deleteGroup:"删除组",deleteRecord:"删除记录",deleteRecordsGroup:"删除记录组",select:"选择",selectRecord:"选择记录",go:"前往",filter:"过滤",ok:"确定",cancel:"取消",tryAgainQt:"再试一次",deleteSelectedRecordQt:"删除选定的记录",error:"错误",dataNotFound:"数据未找到"},Aa={ru:Ea,en:Da,cn:Fa},Ta=e=>yn(e.language,Aa,e.translation),ka=({props:e,setProps:t})=>{var J,$;const[n]=s.useState(e.apiRef??{}),[o]=s.useState(((J=e.editFormProps)==null?void 0:J.apiRef)??{}),[r]=s.useState((($=e.editGroupFormProps)==null?void 0:$.apiRef)??{}),[a,u]=s.useState(!1),[l,c]=s.useState(!1),[d,i]=s.useState(),[v,g]=s.useState(!1),[h,R]=s.useState(0),[p,S]=Ko(e),y=Ft(e)(),T=$o(e),[N,_]=Ca(e,y),[L,f,F,A]=Qn(e.dataSet,y,T),[U,ee]=qn(e.expandedKeys,e.defaultExpandedKeys,e.defaultExpandAll,A),te=Go(n),ne={getId:wn(e.componentId??"treeSelect-"+En()),getProps:Dn(e),setProps:Fn(t),updateProps:An(e,t),getIsMounted:Tn(),getFieldNames:Ft(e),getDataSet:Xn(L),setDataSet:Jn(f,e==null?void 0:e.onDataSetChanged),getGroupsOnly:Yn(n),sortTree:Zn(L,e.sortComparator,n),getValues:xa(N),setValues:Na(_,y),isDataPlainList:er(F),getEditFormApi:Wo(o),getEditGroupFormApi:Ho(r),getSelectedKeys:Ia(N),getSelectedNodes:Ra(n,N),isNodeSelected:tr(n),selectNode:wa(n,e.multiple),getActiveNodeKey:nr(n),getActiveNode:rr(n),getExpandedKeys:or(U),setExpandedKeys:ar(ee),getExpandedNodes:sr(n),isNodeExpanded:ur(n),expandNode:lr(n),collapseNode:cr(n),toggleNode:ir(n),expandParentNodes:dr(n),getNode:fr(n),getNodes:hr(n),getNextNodeKey:vr(n),getPrevNodeKey:gr(n),getNextNode:mr(n),getPrevNode:pr(n),getParentNode:Sr(n),addNode:yr(n),updateNode:Cr(n),removeNode:br(n),moveNode:xr(n),ensureNodeVisible:Nr(n),t:Ta(e),treeSelectRef:s.useRef(null),getButtonsApi:Cn(),getIsReady:Po(a),setIsReady:Bo(u),getIsOpen:jo(p),setIsOpen:_o(S),getIsFetching:zo(l),setIsFetching:Uo(c),getFetchError:Qo(d),setFetchError:qo(i),getIsAllFetched:Xo(v),setIsAllFetched:Jo(g),getMinSymbols:Yo(h),setMinSymbols:Zo(R),fetchData:ya(te,n)};return Object.assign(n,ne),n},Oa=e=>{const[t,n]=kn(e),o=La(t),r=ka({props:t,setProps:n});return s.useEffect(()=>{var a;(!t.fetchMode||t.fetchMode==="onLoad")&&!t.minSearchLength?r.fetchData():r.getIsReady()||(r.setIsReady(!0),(a=t==null?void 0:t.onReady)==null||a.call(t))},[r,t,t.fetchMode,t.minSearchLength]),m.jsx(io,{children:m.jsx(Ro,{api:r,allProps:t,treeSelectProps:o})})},La=e=>s.useMemo(()=>Bt(e,{apiRef:!0,componentId:!0,dataMutator:!0,readOnly:!0,value:!0,filterTreeNode:!0,dataSet:!0,fetchMode:!0,noCacheFetchedData:!0,minSearchLength:!0,debounce:!0,editFormProps:!0,nodeDeleteMessage:!0,confirmDelete:!0,buttons:!0,onReady:!0,onDataFetch:!0,onDataFetchSuccess:!0,onDataFetchError:!0,onDataFetchComplete:!0,onDelete:!0,fieldNames:!0,titleRender:!0,selectedRender:!0,editGroupFormProps:!0,defaultExpandAll:!0,defaultExpandedKeys:!0,expandedKeys:!0,buttonsRowStyle:!0,buttonsRowWrapperStyle:!0,buttonsIconsOnly:!0,buttonsPosition:!0,buttonsSize:!0,headerLabel:!0,language:!0,translation:!0,selectNewNode:!0,groupsMode:!0,sortOnChange:!0,sortComparator:!0,onChange:!0,onGetLabelCallback:!0,onDataSetChanged:!0})[1],[e]),Va=({field:e})=>{s.useSyncExternalStore(e.subscribe.bind(e),e.getSnapshot.bind(e));const[t]=s.useState({}),n=e.getProps(),o=e.getValue()??null,r=ao(e),a=uo(e),u=Ma(e,n.dataSet),l=so(e,n),c=lo(e,n),d=Ga(e,n),i=Ka(e,n);s.useEffect(()=>{e.setReady(!0)},[e]);const g={...{width:e.getWidth()??"100%"},...n.style},h=co(n);return m.jsx(Oa,{apiRef:t,style:g,...h,dataSet:u,autoFocus:n.autoFocus,disabled:e.isDisabled(),readOnly:e.isReadOnly(),value:o,placeholder:n.placeholder??"Choose",onChange:l,onDataSetChanged:c,onDataFetch:d,onReady:i,onClear:a,onBlur:r})},Ma=(e,t)=>s.useMemo(()=>typeof t!="function"?t:()=>t(e),[t,e]),Ga=(e,t)=>(n,o)=>{var r;return(r=t.onDataFetch)==null?void 0:r.call(t,n,o,e)},Ka=(e,t)=>()=>{var n;return(n=t.onReady)==null?void 0:n.call(t,e)};class qa extends bn{render(){return m.jsx(Va,{field:this})}}export{qa as T};
