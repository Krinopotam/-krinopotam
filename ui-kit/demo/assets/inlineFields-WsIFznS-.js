import{r as e,b as l,u as n,d as t,e as a,f as o,h as r,i as s,W as i,w as u,C as c,F as d,k as v,l as p,m as f,T as m,n as h,o as b,p as g,j as x,S as y,a as C}from"./index-DEKOHtjL.js";import{D as k}from"./isArray-CilX2EC5.js";import{I as E}from"./inputField-CnoVCY_k.js";import{I as O}from"./inlineGroupField-CYHId46J.js";import{B as j}from"./baseField-C1lQOwhI.js";import{u as F}from"./defaultButtonsProps-CTS3EVUl.js";import{P as w}from"./passwordField-DLeEeMAV.js";import{N}from"./numberField-9a3vBh07.js";import{T as M}from"./treeSelectField-_2tThtJm.js";import{S as D}from"./selectField-B6AnosDg.js";var _=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],P=e.forwardRef((function(i,u){var c=i.prefixCls,d=void 0===c?"rc-checkbox":c,v=i.className,p=i.style,f=i.checked,m=i.disabled,h=i.defaultChecked,b=void 0!==h&&h,g=i.type,x=void 0===g?"checkbox":g,y=i.title,C=i.onChange,k=l(i,_),E=e.useRef(null),O=e.useRef(null),j=n(b,{value:f}),F=t(j,2),w=F[0],N=F[1];e.useImperativeHandle(u,(function(){return{focus:function(e){var l;null===(l=E.current)||void 0===l||l.focus(e)},blur:function(){var e;null===(e=E.current)||void 0===e||e.blur()},input:E.current,nativeElement:O.current}}));var M=a(d,v,o(o({},"".concat(d,"-checked"),w),"".concat(d,"-disabled"),m));return e.createElement("span",{className:M,title:y,style:p,ref:O},e.createElement("input",r({},k,{className:"".concat(d,"-input"),ref:E,onChange:function(e){m||("checked"in i||N(e.target.checked),null==C||C({target:s(s({},i),{},{type:x,checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},disabled:m,checked:!!w,type:x})),e.createElement("span",{className:"".concat(d,"-inner")}))}));const S=i.createContext(null);const V=(l,n)=>{var t;const{prefixCls:o,className:r,rootClassName:s,children:b,indeterminate:g=!1,style:x,onMouseEnter:y,onMouseLeave:C,skipGroup:k=!1,disabled:E}=l,O=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)l.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(n[t[a]]=e[t[a]])}return n}(l,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:j,direction:w,checkbox:N}=e.useContext(c),M=e.useContext(S),{isFormItemInput:D}=e.useContext(d),_=e.useContext(v),V=null!==(t=(null==M?void 0:M.disabled)||E)&&void 0!==t?t:_,R=e.useRef(O.value),$=e.useRef(null),I=p(n,$);e.useEffect((()=>{null==M||M.registerValue(O.value)}),[]),e.useEffect((()=>{if(!k)return O.value!==R.current&&(null==M||M.cancelValue(R.current),null==M||M.registerValue(O.value),R.current=O.value),()=>null==M?void 0:M.cancelValue(O.value)}),[O.value]),e.useEffect((()=>{var e;(null===(e=$.current)||void 0===e?void 0:e.input)&&($.current.input.indeterminate=g)}),[g]);const L=j("checkbox",o),B=f(L),[G,T,W]=F(L,B),H=Object.assign({},O);M&&!k&&(H.onChange=function(){O.onChange&&O.onChange.apply(O,arguments),M.toggleOption&&M.toggleOption({label:b,value:O.value})},H.name=M.name,H.checked=M.value.includes(O.value));const z=a(`${L}-wrapper`,{[`${L}-rtl`]:"rtl"===w,[`${L}-wrapper-checked`]:H.checked,[`${L}-wrapper-disabled`]:V,[`${L}-wrapper-in-form-item`]:D},null==N?void 0:N.className,r,s,W,B,T),q=a({[`${L}-indeterminate`]:g},m,T),[A,K]=function(e){const l=i.useRef(null),n=()=>{u.cancel(l.current),l.current=null};return[()=>{n(),l.current=u((()=>{l.current=null}))},t=>{l.current&&(t.stopPropagation(),n()),null==e||e(t)}]}(H.onClick);return G(e.createElement(h,{component:"Checkbox",disabled:V},e.createElement("label",{className:z,style:Object.assign(Object.assign({},null==N?void 0:N.style),x),onMouseEnter:y,onMouseLeave:C,onClick:A},e.createElement(P,Object.assign({},H,{onClick:K,prefixCls:L,className:q,disabled:V,ref:I})),void 0!==b&&e.createElement("span",{className:`${L}-label`},b))))},R=e.forwardRef(V);const $=e.forwardRef(((l,n)=>{const{defaultValue:t,children:o,options:r=[],prefixCls:s,className:i,rootClassName:u,style:d,onChange:v}=l,p=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)l.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(n[t[a]]=e[t[a]])}return n}(l,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:m,direction:h}=e.useContext(c),[x,y]=e.useState(p.value||t||[]),[C,k]=e.useState([]);e.useEffect((()=>{"value"in p&&y(p.value||[])}),[p.value]);const E=e.useMemo((()=>r.map((e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e))),[r]),O=m("checkbox",s),j=`${O}-group`,w=f(O),[N,M,D]=F(O,w),_=b(p,["value","disabled"]),P=r.length?E.map((l=>e.createElement(R,{prefixCls:O,key:l.value.toString(),disabled:"disabled"in l?l.disabled:p.disabled,value:l.value,checked:x.includes(l.value),onChange:l.onChange,className:`${j}-item`,style:l.style,title:l.title,id:l.id,required:l.required},l.label))):o,V={toggleOption:e=>{const l=x.indexOf(e.value),n=g(x);-1===l?n.push(e.value):n.splice(l,1),"value"in p||y(n),null==v||v(n.filter((e=>C.includes(e))).sort(((e,l)=>E.findIndex((l=>l.value===e))-E.findIndex((e=>e.value===l)))))},value:x,disabled:p.disabled,name:p.name,registerValue:e=>{k((l=>[].concat(g(l),[e])))},cancelValue:e=>{k((l=>l.filter((l=>l!==e))))}},$=a(j,{[`${j}-rtl`]:"rtl"===h},i,u,D,w,M);return N(e.createElement("div",Object.assign({className:$,style:d},_,{ref:n}),e.createElement(S.Provider,{value:V},P)))})),I=R;I.Group=$,I.__ANT_CHECKBOX=!0;const L=({field:l})=>{e.useSyncExternalStore(l.subscribe.bind(l),l.getSnapshot.bind(l));const n=l.getName(),t=l.getProps(),a=l.getValue(),o=e.useCallback((e=>{l.isReady()&&(l.setValue(e.target.checked||!1),l.setTouched(!0),l.setDirty(!0))}),[l]);e.useEffect((()=>{l.setReady(!0)}),[l,n]);const r={...{width:l.getWidth()},...t.style};return x.jsx(I,{className:t.className,checked:a,disabled:l.isDisabled()||l.isReadOnly(),onChange:o,autoFocus:t.autoFocus,indeterminate:t.indeterminate,style:r})};class CheckboxField extends j{noGrowWidth(){return!0}render(){return x.jsx(L,{field:this})}}const B=({field:l})=>{e.useSyncExternalStore(l.subscribe.bind(l),l.getSnapshot.bind(l));const n=l.getProps(),t=l.getValue(),a=e.useCallback((e=>{var t;l.setTouched(!0),null==(t=null==n?void 0:n.onClick)||t.call(n,e,l)}),[l,n]);e.useEffect((()=>{l.setReady(!0)}),[l]);const o={...{width:l.getWidth()??"100%"},...n.style};return x.jsx("a",{className:n.className,href:n.href,target:n.target,style:o,onClick:e=>a(e),onContextMenu:e=>{var t;return null==(t=null==n?void 0:n.onContextMenu)?void 0:t.call(n,e,l)},onDoubleClick:e=>{var t;return null==(t=null==n?void 0:n.onDoubleClick)?void 0:t.call(n,e,l)},onDrag:e=>{var t;return null==(t=null==n?void 0:n.onDrag)?void 0:t.call(n,e,l)},onDragEnd:e=>{var t;return null==(t=null==n?void 0:n.onDragEnd)?void 0:t.call(n,e,l)},onDragEnter:e=>{var t;return null==(t=null==n?void 0:n.onDragEnter)?void 0:t.call(n,e,l)},onDragExit:e=>{var t;return null==(t=null==n?void 0:n.onDragExit)?void 0:t.call(n,e,l)},onDragLeave:e=>{var t;return null==(t=null==n?void 0:n.onDragLeave)?void 0:t.call(n,e,l)},onDragOver:e=>{var t;return null==(t=null==n?void 0:n.onDragOver)?void 0:t.call(n,e,l)},onDragStart:e=>{var t;return null==(t=null==n?void 0:n.onDragStart)?void 0:t.call(n,e,l)},onMouseDown:e=>{var t;return null==(t=null==n?void 0:n.onMouseDown)?void 0:t.call(n,e,l)},onMouseEnter:e=>{var t;return null==(t=null==n?void 0:n.onMouseEnter)?void 0:t.call(n,e,l)},onMouseLeave:e=>{var t;return null==(t=null==n?void 0:n.onMouseLeave)?void 0:t.call(n,e,l)},onMouseMove:e=>{var t;return null==(t=null==n?void 0:n.onMouseMove)?void 0:t.call(n,e,l)},onMouseOut:e=>{var t;return null==(t=null==n?void 0:n.onMouseOut)?void 0:t.call(n,e,l)},onMouseOver:e=>{var t;return null==(t=null==n?void 0:n.onMouseOver)?void 0:t.call(n,e,l)},onBlur:e=>{var t;return null==(t=null==n?void 0:n.onBlur)?void 0:t.call(n,e,l)},onFocus:e=>{var t;return null==(t=null==n?void 0:n.onFocus)?void 0:t.call(n,e,l)},onMouseUp:e=>{var t;return null==(t=null==n?void 0:n.onMouseUp)?void 0:t.call(n,e,l)},children:t})};class LinkField extends j{render(){return x.jsx(B,{field:this})}}const G=()=>{const[e,l]=i.useState(!1),n=T(e);return x.jsxs("div",{children:[x.jsx("h1",{children:"Form example with inline fields"}),x.jsxs("div",{style:{maxWidth:1e3,border:"1px solid gray",padding:5},children:[x.jsx(y,{style:{marginBottom:30},children:x.jsx(C,{checkedChildren:"Horizontal",unCheckedChildren:"Vertical",onChange:()=>l((e=>!e))})}),x.jsx(k,{...n})]})]})},T=e=>({layout:e?"horizontal":"vertical",fieldsProps:{inline1:{component:O,fieldsProps:{field1_1:{component:E,label:"Field1_1",placeholder:"200px",width:200},field1_2:{component:w,label:"Field1_2",placeholder:"auto (not set)",autoFocus:!0},field1_3:{component:N,label:"Field1_3",placeholder:"100px",width:100}}},inline2:{component:O,fieldsProps:{field2_1:{component:M,label:"Field2_1",placeholder:"50%",width:"50%"},field2_2:{component:D,label:"Field2_2",placeholder:"auto (not set)"},field2_3:{component:LinkField,label:"Field2_3",href:"https://test.ru/link",defaultValue:"https://test.ru/link",placeholder:"20%",width:"20%"}}},inline3:{component:O,fieldsProps:{field3_1:{component:E,label:"Field3_1",placeholder:"auto (not set)"},field3_2:{component:E,label:"Field3_2",placeholder:"100px",width:"100px"},field3_3:{component:CheckboxField,label:"Field3_3",width:50}}}},buttons:{ok:{position:"right"}}});export{G as E,T as u};
