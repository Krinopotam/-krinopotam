import{bK as un,r as o,i as le,n as Oe,q as ln,b as Pt,s as st,f as cn,x as Bt,bF as wt,d as ve,a8 as dn,K as Xe,h as Wt,u as Et,y as fn,z as zt,A as Rt,C as hn,U as gn,ah as vn,m as Dt,e as Ft,F as mn,o as Ut,I as pn,k as Sn,aa as yn,bu as At,j as S,t as Cn,c as ot,g as bn}from"./index-B5poLpDm.js";import{a as mt,u as xn,b as Nn,B as In}from"./dForm-vrGhQ6Lh.js";import{s as qt,D as Tt}from"./dFormModal-C_QqbNS_.js";import{j as wn,m as En,a as Rn,B as Dn,l as kt,f as Fn,u as An,t as Tn,e as kn,d as On,c as Mn,P as Ln}from"./buttonsRow-aX3TQ5bu.js";import{n as ht,j as Vn,U as Gn,T as Kn,p as _n,q as jn,r as Hn,S as $n,o as Pn}from"./defaultButtonsProps-DtqWhfDr.js";import{u as Bn,a as Wn,b as zn,c as Un,d as qn,e as Qn,f as Xn,n as Qt,g as Jn,h as Ot,i as Yn,j as Zn,k as er,l as tr,m as nr,o as rr,p as ar,q as or,r as sr,s as ur,t as lr,v as cr,w as ir,x as dr,y as fr,z as hr,A as gr,B as vr,C as mr,D as pr,E as Sr,F as yr,G as Cr,H as br,I as xr,J as Nr,K as Ir,L as wr,M as Er,N as Rr}from"./useApiGetGroupsOnly-5VEr3Syr.js";import{S as Dr}from"./messageBox-1o2XjDyt.js";import{c as Fr,d as Ar,B as Tr,u as kr,a as Or,D as Mr,m as Lr}from"./useShowArrow-Dw-Bhs1H.js";import{b as Vr,c as Gr,d as Kr}from"./index-AMqWlYeY.js";import{u as _r}from"./useIcons-BKmiU9RQ.js";function jr(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=un(e))||t){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(i){throw i},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var i=n.next();return u=i.done,i},e:function(i){l=!0,s=i},f:function(){try{u||n.return==null||n.return()}finally{if(l)throw s}}}}const Hr=function(e){var t=o.useRef({valueLabels:new Map});return o.useMemo(function(){var n=t.current.valueLabels,a=new Map,r=e.map(function(s){var u=s.value,l=s.label,c=l??n.get(u);return a.set(u,c),le(le({},s),{},{label:c})});return t.current.valueLabels=a,[r]},[e])};var $r=function(t,n,a,r){return o.useMemo(function(){var s=function(h){return h.map(function(R){var y=R.value;return y})},u=s(t),l=s(n),c=u.filter(function(v){return!r[v]}),i=u,d=l;if(a){var g=ht(u,!0,r);i=g.checkedKeys,d=g.halfCheckedKeys}return[Array.from(new Set([].concat(Oe(c),Oe(i)))),d]},[t,n,a,r])},Pr=function(t){return Array.isArray(t)?t:t!==void 0?[t]:[]},Br=function(t){var n=t||{},a=n.label,r=n.value,s=n.children;return{_title:a?[a]:["title","label"],value:r||"value",key:r||"value",children:s||"children"}},gt=function(t){return!t||t.disabled||t.disableCheckbox||t.checkable===!1},Wr=function(t,n){var a=[],r=function s(u){u.forEach(function(l){var c=l[n.children];c&&(a.push(l[n.value]),s(c))})};return r(t),a},Mt=function(t){return t==null};const zr=function(e,t){return o.useMemo(function(){var n=Vn(e,{fieldNames:t,initWrapper:function(r){return le(le({},r),{},{valueEntities:new Map})},processEntity:function(r,s){var u=r.node[t.value];s.valueEntities.set(u,r)}});return n},[e,t])};var pt=function(){return null},Ur=["children","value"];function Xt(e){return ln(e).map(function(t){if(!o.isValidElement(t)||!t.type)return null;var n=t,a=n.key,r=n.props,s=r.children,u=r.value,l=Pt(r,Ur),c=le({key:a,value:u},l),i=Xt(s);return i.length&&(c.children=i),c}).filter(function(t){return t})}function vt(e){if(!e)return e;var t=le({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return st(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function qr(e,t,n,a,r,s){var u=null,l=null;function c(){function i(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return d.map(function(h,R){var y="".concat(g,"-").concat(R),m=h[s.value],b=n.includes(m),H=i(h[s.children]||[],y,b),D=o.createElement(pt,h,H.map(function(f){return f.node}));if(t===m&&(u=D),b){var ne={pos:y,node:D,children:H};return v||l.push(ne),ne}return null}).filter(function(h){return h})}l||(l=[],i(a),l.sort(function(d,g){var v=d.node.props.value,h=g.node.props.value,R=n.indexOf(v),y=n.indexOf(h);return R-y}))}Object.defineProperty(e,"triggerNode",{get:function(){return st(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),c(),u}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return st(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),c(),r?l:l.map(function(d){var g=d.node;return g})}})}var Qr=function(t,n,a){var r=a.fieldNames,s=a.treeNodeFilterProp,u=a.filterTreeNode,l=r.children;return o.useMemo(function(){if(!n||u===!1)return t;var c=typeof u=="function"?u:function(d,g){return String(g[s]).toUpperCase().includes(n.toUpperCase())},i=function d(g){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return g.reduce(function(h,R){var y=R[l],m=v||c(n,vt(R)),b=d(y||[],m);return(m||b.length)&&h.push(le(le({},R),{},cn({isLeaf:void 0},l,b))),h},[])};return i(t)},[t,n,l,s,u])};function Lt(e){var t=o.useRef();t.current=e;var n=o.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}function Xr(e,t){var n=t.id,a=t.pId,r=t.rootPId,s=new Map,u=[];return e.forEach(function(l){var c=l[n],i=le(le({},l),{},{key:l.key||c});s.set(c,i)}),s.forEach(function(l){var c=l[a],i=s.get(c);i?(i.children=i.children||[],i.children.push(l)):(c===r||r===null)&&u.push(l)}),u}function Jr(e,t,n){return o.useMemo(function(){if(e){if(n){var a=le({id:"id",pId:"pId",rootPId:null},Bt(n)==="object"?n:{});return Xr(e,a)}return e}return Xt(t)},[t,n,e])}var Jt=o.createContext(null),St=o.createContext(null),Yr={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Zr=function(t,n){var a=Fr(),r=a.prefixCls,s=a.multiple,u=a.searchValue,l=a.toggleOpen,c=a.open,i=a.notFoundContent,d=o.useContext(St),g=d.virtual,v=d.listHeight,h=d.listItemHeight,R=d.listItemScrollOffset,y=d.treeData,m=d.fieldNames,b=d.onSelect,H=d.dropdownMatchSelectWidth,D=d.treeExpandAction,ne=d.treeTitleRender,f=d.onPopupScroll,p=d.leftMaxCount,B=d.leafCountOnly,$=d.valueEntities,w=o.useContext(Jt),q=w.checkable,A=w.checkedKeys,V=w.halfCheckedKeys,_=w.treeExpandedKeys,W=w.treeDefaultExpandAll,ye=w.treeDefaultExpandedKeys,Q=w.onTreeExpand,re=w.treeIcon,ce=w.showTreeIcon,Ce=w.switcherIcon,Ne=w.treeLine,ie=w.treeNodeFilterProp,ae=w.loadData,Y=w.treeLoadedKeys,Ie=w.treeMotion,we=w.onTreeLoad,me=w.keyEntities,C=o.useRef(),z=wt(function(){return y},[c,y],function(N,x){return x[0]&&N[1]!==x[1]}),oe=o.useMemo(function(){return q?{checked:A,halfChecked:V}:null},[q,A,V]);o.useEffect(function(){if(c&&!s&&A.length){var N;(N=C.current)===null||N===void 0||N.scrollTo({key:A[0]})}},[c]);var L=function(x){x.preventDefault()},be=function(x,j){var T=j.node;q&&gt(T)||(b(T.key,{selected:!A.includes(T.key)}),s||l(!1))},pe=o.useState(ye),Me=ve(pe,2),Ee=Me[0],Re=Me[1],se=o.useState(null),Le=ve(se,2),Ve=Le[0],Ge=Le[1],xe=o.useMemo(function(){return _?Oe(_):u?Ve:Ee},[Ee,Ve,_,u]),De=function(x){Re(x),Ge(x),Q&&Q(x)},Ke=String(u).toLowerCase(),Z=function(x){return Ke?String(x[ie]).toLowerCase().includes(Ke):!1};o.useEffect(function(){u&&Ge(Wr(y,m))},[u]);var _e=o.useState(function(){return new Map}),je=ve(_e,2),de=je[0],Je=je[1];o.useEffect(function(){p&&Je(new Map)},[p]);function he(N){var x=N[m.value];if(!de.has(x)){var j=$.get(x),T=(j.children||[]).length===0;if(T)de.set(x,!1);else{var K=j.children.filter(function(J){return!J.node.disabled&&!J.node.disableCheckbox&&!A.includes(J.node[m.value])}),te=K.length;de.set(x,te>p)}}return de.get(x)}var G=dn(function(N){var x=N[m.value];return A.includes(x)||p===null?!1:p<=0?!0:B&&p?he(N):!1}),Ye=function N(x){var j=jr(x),T;try{for(j.s();!(T=j.n()).done;){var K=T.value;if(!(K.disabled||K.selectable===!1)){if(u){if(Z(K))return K}else return K;if(K[m.children]){var te=N(K[m.children]);if(te)return te}}}}catch(J){j.e(J)}finally{j.f()}return null},Be=o.useState(null),He=ve(Be,2),Fe=He[0],We=He[1],ee=me[Fe];o.useEffect(function(){if(c){var N=null,x=function(){var T=Ye(z);return T?T[m.value]:null};!s&&A.length&&!u?N=A[0]:N=x(),We(N)}},[c,u]),o.useImperativeHandle(n,function(){var N;return{scrollTo:(N=C.current)===null||N===void 0?void 0:N.scrollTo,onKeyDown:function(j){var T,K=j.which;switch(K){case Xe.UP:case Xe.DOWN:case Xe.LEFT:case Xe.RIGHT:(T=C.current)===null||T===void 0||T.onKeyDown(j);break;case Xe.ENTER:{if(ee){var te=G(ee.node),J=(ee==null?void 0:ee.node)||{},Ue=J.selectable,fe=J.value,Ae=J.disabled;Ue!==!1&&!Ae&&!te&&be(null,{node:{key:Fe},selected:!A.includes(fe)})}break}case Xe.ESC:l(!1)}},onKeyUp:function(){}}});var ze=wt(function(){return!u},[u,_||Ee],function(N,x){var j=ve(N,1),T=j[0],K=ve(x,2),te=K[0],J=K[1];return T!==te&&!!(te||J)}),U=ze?ae:null;if(z.length===0)return o.createElement("div",{role:"listbox",className:"".concat(r,"-empty"),onMouseDown:L},i);var X={fieldNames:m};return Y&&(X.loadedKeys=Y),xe&&(X.expandedKeys=xe),o.createElement("div",{onMouseDown:L},ee&&c&&o.createElement("span",{style:Yr,"aria-live":"assertive"},ee.node.value),o.createElement(Gn.Provider,{value:{nodeDisabled:G}},o.createElement(Kn,Wt({ref:C,focusable:!1,prefixCls:"".concat(r,"-tree"),treeData:z,height:v,itemHeight:h,itemScrollOffset:R,virtual:g!==!1&&H!==!1,multiple:s,icon:re,showIcon:ce,switcherIcon:Ce,showLine:Ne,loadData:U,motion:Ie,activeKey:Fe,checkable:q,checkStrictly:!0,checkedKeys:oe,selectedKeys:q?[]:A,defaultExpandAll:W,titleRender:ne},X,{onActiveChange:We,onSelect:be,onCheck:be,onExpand:De,onLoad:we,filterTreeNode:Z,expandAction:D,onScroll:f}))))},ea=o.forwardRef(Zr),yt="SHOW_ALL",Ct="SHOW_PARENT",ut="SHOW_CHILD";function Vt(e,t,n,a){var r=new Set(e);return t===ut?e.filter(function(s){var u=n[s];return!u||!u.children||!u.children.some(function(l){var c=l.node;return r.has(c[a.value])})||!u.children.every(function(l){var c=l.node;return gt(c)||r.has(c[a.value])})}):t===Ct?e.filter(function(s){var u=n[s],l=u?u.parent:null;return!l||gt(l.node)||!r.has(l.key)}):e}var ta=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","maxCount","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function na(e){return!e||Bt(e)!=="object"}var ra=o.forwardRef(function(e,t){var n=e.id,a=e.prefixCls,r=a===void 0?"rc-tree-select":a,s=e.value,u=e.defaultValue,l=e.onChange,c=e.onSelect,i=e.onDeselect,d=e.searchValue,g=e.inputValue,v=e.onSearch,h=e.autoClearSearchValue,R=h===void 0?!0:h,y=e.filterTreeNode,m=e.treeNodeFilterProp,b=m===void 0?"value":m,H=e.showCheckedStrategy,D=e.treeNodeLabelProp,ne=e.multiple,f=e.treeCheckable,p=e.treeCheckStrictly,B=e.labelInValue,$=e.maxCount,w=e.fieldNames,q=e.treeDataSimpleMode,A=e.treeData,V=e.children,_=e.loadData,W=e.treeLoadedKeys,ye=e.onTreeLoad,Q=e.treeDefaultExpandAll,re=e.treeExpandedKeys,ce=e.treeDefaultExpandedKeys,Ce=e.onTreeExpand,Ne=e.treeExpandAction,ie=e.virtual,ae=e.listHeight,Y=ae===void 0?200:ae,Ie=e.listItemHeight,we=Ie===void 0?20:Ie,me=e.listItemScrollOffset,C=me===void 0?0:me,z=e.onDropdownVisibleChange,oe=e.dropdownMatchSelectWidth,L=oe===void 0?!0:oe,be=e.treeLine,pe=e.treeIcon,Me=e.showTreeIcon,Ee=e.switcherIcon,Re=e.treeMotion,se=e.treeTitleRender,Le=e.onPopupScroll,Ve=Pt(e,ta),Ge=Ar(n),xe=f&&!p,De=f||p,Ke=p||B,Z=De||ne,_e=Et(u,{value:s}),je=ve(_e,2),de=je[0],Je=je[1],he=o.useMemo(function(){return f?H||ut:yt},[H,f]),G=o.useMemo(function(){return Br(w)},[JSON.stringify(w)]),Ye=Et("",{value:d!==void 0?d:g,postState:function(I){return I||""}}),Be=ve(Ye,2),He=Be[0],Fe=Be[1],We=function(I){Fe(I),v==null||v(I)},ee=Jr(A,V,q),ze=zr(ee,G),U=ze.keyEntities,X=ze.valueEntities,N=o.useCallback(function(E){var I=[],F=[];return E.forEach(function(k){X.has(k)?F.push(k):I.push(k)}),{missingRawValues:I,existRawValues:F}},[X]),x=Qr(ee,He,{fieldNames:G,treeNodeFilterProp:b,filterTreeNode:y}),j=o.useCallback(function(E){if(E){if(D)return E[D];for(var I=G._title,F=0;F<I.length;F+=1){var k=E[I[F]];if(k!==void 0)return k}}},[G,D]),T=o.useCallback(function(E){var I=Pr(E);return I.map(function(F){return na(F)?{value:F}:F})},[]),K=o.useCallback(function(E){var I=T(E);return I.map(function(F){var k=F.label,ge=F.value,P=F.halfChecked,O,M=X.get(ge);if(M){var ue;k=se?se(M.node):(ue=k)!==null&&ue!==void 0?ue:j(M.node),O=M.node.disabled}else if(k===void 0){var Te=T(de).find(function(Ze){return Ze.value===ge});k=Te.label}return{label:k,value:ge,halfChecked:P,disabled:O}})},[X,j,T,de]),te=o.useMemo(function(){return T(de===null?[]:de)},[T,de]),J=o.useMemo(function(){var E=[],I=[];return te.forEach(function(F){F.halfChecked?I.push(F):E.push(F)}),[E,I]},[te]),Ue=ve(J,2),fe=Ue[0],Ae=Ue[1],xt=o.useMemo(function(){return fe.map(function(E){return E.value})},[fe]),Zt=$r(fe,Ae,xe,U),Nt=ve(Zt,2),qe=Nt[0],nt=Nt[1],en=o.useMemo(function(){var E=Vt(qe,he,U,G),I=E.map(function(P){var O,M;return(O=(M=U[P])===null||M===void 0||(M=M.node)===null||M===void 0?void 0:M[G.value])!==null&&O!==void 0?O:P}),F=I.map(function(P){var O=fe.find(function(ue){return ue.value===P}),M=B?O==null?void 0:O.label:se==null?void 0:se(O);return{value:P,label:M}}),k=K(F),ge=k[0];return!Z&&ge&&Mt(ge.value)&&Mt(ge.label)?[]:k.map(function(P){var O;return le(le({},P),{},{label:(O=P.label)!==null&&O!==void 0?O:P.value})})},[G,Z,qe,fe,K,he,U]),tn=Hr(en),nn=ve(tn,1),ct=nn[0],It=o.useMemo(function(){return Z&&(he==="SHOW_CHILD"||p||!f)?$:null},[$,Z,p,he,f]),rt=Lt(function(E,I,F){var k=Vt(E,he,U,G);if(!(It&&k.length>It)){var ge=K(E);if(Je(ge),R&&Fe(""),l){var P=E;xe&&(P=k.map(function(Se){var ke=X.get(Se);return ke?ke.node[G.value]:Se}));var O=I||{triggerValue:void 0,selected:void 0},M=O.triggerValue,ue=O.selected,Te=P;if(p){var Ze=Ae.filter(function(Se){return!P.includes(Se.value)});Te=[].concat(Oe(Te),Oe(Ze))}var et=K(Te),$e={preValue:fe,triggerValue:M},Qe=!0;(p||F==="selection"&&!ue)&&(Qe=!1),qr($e,M,E,ee,Qe,G),De?$e.checked=ue:$e.selected=ue;var at=Ke?et:et.map(function(Se){return Se.value});l(Z?at:at[0],Ke?null:et.map(function(Se){return Se.label}),$e)}}}),it=o.useCallback(function(E,I){var F,k=I.selected,ge=I.source,P=U[E],O=P==null?void 0:P.node,M=(F=O==null?void 0:O[G.value])!==null&&F!==void 0?F:E;if(!Z)rt([M],{selected:!0,triggerValue:M},"option");else{var ue=k?[].concat(Oe(xt),[M]):qe.filter(function(ke){return ke!==M});if(xe){var Te=N(ue),Ze=Te.missingRawValues,et=Te.existRawValues,$e=et.map(function(ke){return X.get(ke).key}),Qe;if(k){var at=ht($e,!0,U);Qe=at.checkedKeys}else{var Se=ht($e,{halfCheckedKeys:nt},U);Qe=Se.checkedKeys}ue=[].concat(Oe(Ze),Oe(Qe.map(function(ke){return U[ke].node[G.value]})))}rt(ue,{selected:k,triggerValue:M},ge||"option")}k||!Z?c==null||c(M,vt(O)):i==null||i(M,vt(O))},[N,X,U,G,Z,xt,rt,xe,c,i,qe,nt,$]),rn=o.useCallback(function(E){if(z){var I={};Object.defineProperty(I,"documentClickClose",{get:function(){return st(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),z(E,I)}},[z]),an=Lt(function(E,I){var F=E.map(function(k){return k.value});if(I.type==="clear"){rt(F,{},"selection");return}I.values.length&&it(I.values[0].value,{selected:!1,source:"selection"})}),on=o.useMemo(function(){return{virtual:ie,dropdownMatchSelectWidth:L,listHeight:Y,listItemHeight:we,listItemScrollOffset:C,treeData:x,fieldNames:G,onSelect:it,treeExpandAction:Ne,treeTitleRender:se,onPopupScroll:Le,leftMaxCount:$===void 0?null:$-ct.length,leafCountOnly:he==="SHOW_CHILD"&&!p&&!!f,valueEntities:X}},[ie,L,Y,we,C,x,G,it,Ne,se,Le,$,ct.length,he,p,f,X]),sn=o.useMemo(function(){return{checkable:De,loadData:_,treeLoadedKeys:W,onTreeLoad:ye,checkedKeys:qe,halfCheckedKeys:nt,treeDefaultExpandAll:Q,treeExpandedKeys:re,treeDefaultExpandedKeys:ce,onTreeExpand:Ce,treeIcon:pe,treeMotion:Re,showTreeIcon:Me,switcherIcon:Ee,treeLine:be,treeNodeFilterProp:b,keyEntities:U}},[De,_,W,ye,qe,nt,Q,re,ce,Ce,pe,Re,Me,Ee,be,b,U]);return o.createElement(St.Provider,{value:on},o.createElement(Jt.Provider,{value:sn},o.createElement(Tr,Wt({ref:t},Ve,{id:Ge,prefixCls:r,mode:Z?"multiple":void 0,displayValues:ct,onDisplayValuesChange:an,searchValue:He,onSearch:We,OptionList:ea,emptyOptions:!ee.length,onDropdownVisibleChange:rn,dropdownMatchSelectWidth:L}))))}),tt=ra;tt.TreeNode=pt;tt.SHOW_ALL=yt;tt.SHOW_PARENT=Ct;tt.SHOW_CHILD=ut;const aa=e=>{const{componentCls:t,treePrefixCls:n,colorBgElevated:a}=e,r=`.${n}`;return[{[`${t}-dropdown`]:[{padding:`${Rt(e.paddingXS)} ${Rt(e.calc(e.paddingXS).div(2).equal())}`},jn(n,zt(e,{colorBgContainer:a})),{[r]:{borderRadius:0,[`${r}-list-holder-inner`]:{alignItems:"stretch",[`${r}-treenode`]:{[`${r}-node-content-wrapper`]:{flex:"auto"}}}}},Hn(`${n}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${r}-switcher${r}-switcher_close`]:{[`${r}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function oa(e,t,n){return fn("TreeSelect",a=>{const r=zt(a,{treePrefixCls:t});return[aa(r)]},_n)(e,n)}var sa=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};const ua=(e,t)=>{var n;const{prefixCls:a,size:r,disabled:s,bordered:u=!0,className:l,rootClassName:c,treeCheckable:i,multiple:d,listHeight:g=256,listItemHeight:v,placement:h,notFoundContent:R,switcherIcon:y,treeLine:m,getPopupContainer:b,popupClassName:H,dropdownClassName:D,treeIcon:ne=!1,transitionName:f,choiceTransitionName:p="",status:B,treeExpandAction:$,builtinPlacements:w,dropdownMatchSelectWidth:q,popupMatchSelectWidth:A,allowClear:V,variant:_,dropdownStyle:W,tagRender:ye,maxCount:Q,showCheckedStrategy:re,treeCheckStrictly:ce}=e,Ce=sa(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender","maxCount","showCheckedStrategy","treeCheckStrictly"]),{getPopupContainer:Ne,getPrefixCls:ie,renderEmpty:ae,direction:Y,virtual:Ie,popupMatchSelectWidth:we,popupOverflow:me}=o.useContext(hn),[,C]=gn(),z=v??(C==null?void 0:C.controlHeightSM)+(C==null?void 0:C.paddingXXS),oe=ie(),L=ie("select",a),be=ie("select-tree",a),pe=ie("tree-select",a),{compactSize:Me,compactItemClassnames:Ee}=vn(L,Y),Re=Dt(L),se=Dt(pe),[Le,Ve,Ge]=kr(L,Re),[xe]=oa(pe,be,se),[De,Ke]=Vr("treeSelect",_,u),Z=Ft(H||D,`${pe}-dropdown`,{[`${pe}-dropdown-rtl`]:Y==="rtl"},c,Ge,Re,se,Ve),_e=!!(i||d),je=o.useMemo(()=>{if(!(Q&&(re==="SHOW_ALL"&&!ce||re==="SHOW_PARENT")))return Q},[Q,re,ce]),de=Or(e.suffixIcon,e.showArrow),Je=(n=A??q)!==null&&n!==void 0?n:we,{status:he,hasFeedback:G,isFormItemInput:Ye,feedbackIcon:Be}=o.useContext(mn),He=Kr(he,B),{suffixIcon:Fe,removeIcon:We,clearIcon:ee}=_r(Object.assign(Object.assign({},Ce),{multiple:_e,showSuffixIcon:de,hasFeedback:G,feedbackIcon:Be,prefixCls:L,componentName:"TreeSelect"})),ze=V===!0?{clearIcon:ee}:V;let U;R!==void 0?U=R:U=(ae==null?void 0:ae("Select"))||o.createElement(Mr,{componentName:"Select"});const X=Ut(Ce,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),N=o.useMemo(()=>h!==void 0?h:Y==="rtl"?"bottomRight":"bottomLeft",[h,Y]),x=pn(fe=>{var Ae;return(Ae=r??Me)!==null&&Ae!==void 0?Ae:fe}),j=o.useContext(Sn),T=s??j,K=Ft(!a&&pe,{[`${L}-lg`]:x==="large",[`${L}-sm`]:x==="small",[`${L}-rtl`]:Y==="rtl",[`${L}-${De}`]:Ke,[`${L}-in-form-item`]:Ye},Gr(L,He,G),Ee,l,c,Ge,Re,se,Ve),te=fe=>o.createElement($n,{prefixCls:be,switcherIcon:y,treeNodeProps:fe,showLine:m}),[J]=yn("SelectLike",W==null?void 0:W.zIndex),Ue=o.createElement(tt,Object.assign({virtual:Ie,disabled:T},X,{dropdownMatchSelectWidth:Je,builtinPlacements:Lr(w,me),ref:t,prefixCls:L,className:K,listHeight:g,listItemHeight:z,treeCheckable:i&&o.createElement("span",{className:`${L}-tree-checkbox-inner`}),treeLine:!!m,suffixIcon:Fe,multiple:_e,placement:N,removeIcon:We,allowClear:ze,switcherIcon:te,showTreeIcon:ne,notFoundContent:U,getPopupContainer:b||Ne,treeMotion:null,dropdownClassName:Z,dropdownStyle:Object.assign(Object.assign({},W),{zIndex:J}),choiceTransitionName:At(oe,"",p),transitionName:At(oe,"slide-up",f),treeExpandAction:$,tagRender:_e?ye:void 0,maxCount:je,showCheckedStrategy:re,treeCheckStrictly:ce}));return Le(xe(Ue))},la=o.forwardRef(ua),Pe=la,ca=wn(Pe,"dropdownAlign",e=>Ut(e,["visible"]));Pe.TreeNode=pt;Pe.SHOW_ALL=yt;Pe.SHOW_PARENT=Ct;Pe.SHOW_CHILD=ut;Pe._InternalPanelDoNotUseOrYouWillBeFired=ca;const ia=e=>()=>{e.setTouched(!0)},da=(e,t)=>(n,a,r)=>{var s;if(e.isReady()){switch(t.valueType){case void 0:case"node":t.multiple?e.setValue(r??null):e.setValue(r!=null&&r.length?r[0]:null);break;case"labeledValue":e.setValue(n??null);break;case"key":t.multiple?e.setValue(a??null):e.setValue(a!=null&&a.length?a[0]:null);break}e.setDirty(!0)}(s=t.onChange)==null||s.call(t,n,a,r,e)},fa=e=>()=>{var n;e.setDirty(!0),e.setTouched(!0);const t=e.getProps();(n=t.onClear)==null||n.call(t)},ha=(e,t)=>n=>{var a;return(a=t.onDataSetChanged)==null?void 0:a.call(t,n,e)},ga=e=>o.useMemo(()=>qt(e,{autoFocus:!0,autoHeightResize:!0,component:!0,dependsOn:!0,disabled:!0,helpClass:!0,hidden:!0,inlineGroup:!0,label:!0,nonEditable:!0,onDirtyStateChanged:!0,onDisabledStateChanged:!0,onErrorChanged:!0,onHiddenStateChanged:!0,onLabelChanged:!0,onReadOnlyStateChanged:!0,onReady:!0,onReadyStateChanged:!0,onTouchedStateChanged:!0,onValidated:!0,onValueChanged:!0,placeholder:!0,readOnly:!0,requiredMark:!0,rowStyle:!0,rules:!0,style:!0,tab:!0,tooltip:!0,defaultValue:!0,width:!0,valueType:!0,onDataSetChanged:!0,onChange:!0,dataSet:!0,onDataFetch:!0,onFieldDataFetch:!0,onFieldDataFetchError:!0,onFieldDataFetchSuccess:!0,className:!0,itemClassName:!0})[1],[e]),lt=o.createContext(void 0),va=({children:e})=>{const t=o.useRef(!1),n=o.useRef(!1),a=o.useMemo(()=>({ctrlPressedRef:t,dialogOpenedRef:n}),[t]);return S.jsx(lt.Provider,{value:a,children:e})},ma=e=>{const n=e.getFieldNames().title;return(a,r)=>!r||typeof r[n]!="string"?!1:r[n].toLowerCase().indexOf(a.toLowerCase())>=0},pa=e=>o.useMemo(()=>({...{maxHeight:400,overflow:"auto"},...e}),[e]),Gt=(e,t,n)=>{const{dialogOpenedRef:a}=o.useContext(lt);return o.useMemo(()=>{const r=n?t==null?void 0:t.editGroupFormProps:t==null?void 0:t.editFormProps;if(!r)return;const s={...r};t.language&&!s.language&&(s.language=t.language);const u=r==null?void 0:r.onSubmitSuccess;s.onSubmitSuccess=(i,d,g,v,h)=>{var H;if(u==null||u(i,d,g,v,h),h.isPrevented())return;const R=v.model.getFormMode(),y=e.getFieldNames(),m={...d,...g};let b;if(m[y.parent]?b=(H=m[y.parent])==null?void 0:H[y.key]:m[y.parent]===null?b=void 0:b=e.getActiveNodeKey(),R==="create"||R==="clone")m[y.key]||(m[y.key]=Pn()),e.addNode(m,b,"insideBottom",{ensureVisible:!0,select:!!t.selectNewNode,sortNodes:t.sortOnChange});else if(R==="update"){e.updateNode(m,b,{ensureVisible:!0,sortNodes:t.sortOnChange});const D=e.getValues();e.setValues(Sa(D,m,y))}};const l=r==null?void 0:r.onOpen;s.onOpen=(i,d,g,v)=>{const h=l==null?void 0:l(i,d,g,v);return v.isPrevented()||(a.current=!0),h};const c=r==null?void 0:r.onClosed;return s.onClosed=(i,d)=>{c==null||c(i,d),!d.isPrevented()&&(a.current=!1)},s},[n,t==null?void 0:t.editFormProps,t==null?void 0:t.editGroupFormProps,t.language,t.selectNewNode,t.sortOnChange,e,a])},Sa=(e,t,n)=>{if(!e)return null;const a=[];for(const r of e)r.value===t[n.key]?a.push({value:r.value}):a.push(r);return a},ya=(e,t)=>{const{dialogOpenedRef:n}=o.useContext(lt);e.getButtonsApi().refreshButtons=Ca();const a=e.getFieldNames(),r=e.getActiveNode(!0),s=!!(r!=null&&r.isLeaf)||!!(t.groupsMode&&!(r!=null&&r[a.isGroup])),u=t.buttons,l=t.buttonsSize??"small",c=t.buttonsPosition??"right",i=Bn(t),d=Wn(e,t,s),g=zn(e,t,s),v=Un(e,t,r,dt,s),h=qn(e,t,r,dt,s),R=Qn(e,t,r,dt,s),y=Xn(e,t,r,s,()=>{n.current=!0},()=>{n.current=!1});return o.useMemo(()=>{const b=En({headerLabel:i,view:v,create:d,createGroup:g,clone:h,update:R,delete:y},u);for(const H in b){const D=b[H];!D||H==="headerLabel"||D.type==="hotkey"||(D.size=D.size??l,D.position=D.position??c,D.checkDisabled&&(D.disabled=!r),D.checkHidden&&(D.hidden=!r))}return b},[i,v,d,g,h,R,y,u,l,c,r])},Ca=()=>{const[,e]=o.useState({});return o.useCallback(()=>{e({})},[e])},dt=e=>({...e}),ba=({treeApi:e,treeProps:t})=>{const n=ya(e,t),{token:{colorBorderSecondary:a}}=Cn.useToken();return o.useMemo(()=>n?S.jsx(Rn,{buttons:n,apiRef:e.getButtonsApi(),style:{padding:"0 4px 6px 4px",borderBottom:`1px solid ${a}`,...t.buttonsRowStyle},styles:t.buttonsRowStyles,context:e,iconsOnly:t.buttonsIconsOnly!==!1}):null,[n,a,e,t.buttonsIconsOnly,t.buttonsRowStyle,t.buttonsRowStyles])},Yt=({api:e})=>{const t=e.getFetchError(),n=e.getIsFetching(),a=e.getMinSymbols(),r=e.isDataPlainList();return a?S.jsx(xa,{minSymbols:a,plainList:r}):n?S.jsx(Na,{plainList:r}):t?S.jsx(Ia,{error:t,plainList:r}):S.jsx(S.Fragment,{})},xa=({minSymbols:e,plainList:t})=>S.jsxs("div",{style:{paddingLeft:t?"8px":"30px",fontSize:"12px"},children:["Введите как минимум ",e," симв."]}),Na=({plainList:e})=>S.jsxs("div",{style:{paddingLeft:e?"8px":"30px",fontSize:"12px"},children:[S.jsx(Dr,{size:"small"})," загрузка..."]}),Ia=({error:e,plainList:t})=>S.jsx("div",{role:"alert",style:{paddingLeft:t?"8px":"30px",fontSize:"12px",color:"#ff4d4f"},children:e}),wa=({api:e})=>{const t=e.getIsFetching(),n=e.getFetchError(),a=e.getMinSymbols(),r=e.isDataPlainList();return a||t||n?S.jsx(S.Fragment,{}):S.jsx("div",{style:{paddingLeft:r?"8px":"30px",fontSize:"12px"},children:e.t("dataNotFound")})},Ea=({api:e,children:t})=>{const n=e.isDataPlainList(),a=e.getProps();return S.jsx("div",{className:n?"tree-select-plain":void 0,children:a.editFormProps||a.editGroupFormProps?S.jsx(Ra,{api:e,children:t}):S.jsxs(S.Fragment,{children:[t,S.jsx(Yt,{api:e})]})})},Ra=({api:e,children:t})=>{const n=e.getProps();return S.jsxs(Dn,{style:{display:"flex",flexDirection:"column",...n.buttonsRowWrapperStyle},keepFocus:!1,children:[S.jsx(ba,{treeApi:e,treeProps:n}),t,S.jsx(Yt,{api:e})]})},Da=({api:e,children:t})=>{const n=e.getProps(),a=o.useContext(St);return a&&(n.titleRender?a.treeTitleRender=n.titleRender:a.treeTitleRender=void 0),n.dropdownRender?n.dropdownRender(t):S.jsx(Ea,{api:e,children:t})},Fa=({api:e,allProps:t,treeSelectProps:n})=>{const{ctrlPressedRef:a,dialogOpenedRef:r}=o.useContext(lt);Ta(a);const s=Gt(e,t,!1),u=Gt(e,t,!0),l=pa(t.dropdownStyle),c=Oa({api:e}),i=ka(e),d=_a(e.getFieldNames()),g=e.getExpandedKeys(),v=ja(e),h=Ma(e),R=La(e),y=Va(e,a,r),m=Ga(e),b=Ka(e);return S.jsxs(S.Fragment,{children:[S.jsx(Pe,{ref:e.treeSelectRef,treeNodeFilterProp:d.label,notFoundContent:S.jsx(wa,{api:e}),...n,labelInValue:!0,treeTitleRender:t.selectedRender,dropdownRender:t.readOnly?Aa:c,showSearch:!t.readOnly&&t.showSearch!==!1,allowClear:!t.readOnly&&t.allowClear!==!1,fieldNames:d,treeData:e.getDataSet(),value:i,disabled:t.disabled,treeDefaultExpandAll:t.defaultExpandAll,treeDefaultExpandedKeys:t.defaultExpandedKeys,treeExpandedKeys:g,open:e.getIsOpen(),dropdownStyle:l,filterTreeNode:b,onTreeExpand:v,onClear:h,onChange:R,onDropdownVisibleChange:y,onSearch:m}),!t.disabled&&s?S.jsx(Tt,{...s,apiRef:e.getEditFormApi()}):null,!t.disabled&&u?S.jsx(Tt,{...u,apiRef:e.getEditGroupFormApi()}):null]})},Aa=()=>S.jsx(S.Fragment,{}),Ta=e=>{kt("keydown",t=>{t.key==="Control"&&(e.current=!0)}),kt("keyup",t=>{t.key==="Control"&&(e.current=!1)})},ka=e=>{const t=e.getValues();return e.getProps().multiple?t??void 0:(t==null?void 0:t[0])??void 0},Oa=({api:e})=>o.useCallback(t=>S.jsx(Da,{api:e,children:t}),[e]),Ma=e=>()=>{var n;e.setValues(null);const t=e.getProps();(n=t.onClear)==null||n.call(t)},La=e=>t=>{var u;const n=t;e.setValues(n??null);const a=e.getProps(),r=n?e.getSelectedKeys(n)??[]:[],s=n?e.getSelectedNodes(void 0,n)??[]:[];(u=a.onChange)==null||u.call(a,t,r,s)},Va=(e,t,n)=>a=>{var s;const r=e.getProps();if(r.readOnly){e.setIsOpen(!1);return}t.current||n.current?e.setIsOpen(!0):e.setIsOpen(a),a&&(r.fetchMode==="onUse"||r.fetchMode==="onUseForce")&&e.fetchData(),(s=r.onDropdownVisibleChange)==null||s.call(r,a)},Ga=e=>t=>{var a;e.fetchData(t,!0);const n=e.getProps();(a=n.onSearch)==null||a.call(n,t)},Ka=e=>{const t=ma(e);return(n,a)=>{if(!e.getIsAllFetched())return!0;const r=e.getProps();return r.filterTreeNode?typeof r.filterTreeNode=="function"?r.filterTreeNode(n,a):r.filterTreeNode:t(n,a)}},_a=e=>({value:e.key,label:e.title,children:e.children}),ja=e=>t=>{var a;const n=e.getProps();e.setExpandedKeys(t),(a=n.onTreeExpand)==null||a.call(n,t)},Ha=e=>t=>{var r;if(!e.getIsMounted())return;const n=e.getProps();if(!n.noCacheFetchedData&&e.getIsAllFetched())return;if(n.minSearchLength&&t.length<n.minSearchLength){e.setMinSymbols(n.minSearchLength),e.setDataSet(void 0);return}e.setMinSymbols(0),e.setFetchError(void 0);const a=(r=n==null?void 0:n.onDataFetch)==null?void 0:r.call(n,t,e);if(!a){e.setIsAllFetched(!0);return}e.setIsFetching(!0),t||e.setDataSet(void 0),a.then(s=>{var u,l,c;e.getIsMounted()&&(e.setDataSet(s.data),e.setIsAllFetched(e.getIsAllFetched()||!t),e.getIsReady()||(e.setIsReady(!0),(u=n==null?void 0:n.onReady)==null||u.call(n)),e.setIsFetching(!1),(l=n==null?void 0:n.onDataFetchSuccess)==null||l.call(n,s,e),(c=n==null?void 0:n.onDataFetchComplete)==null||c.call(n,e))},s=>{e.getIsMounted()&&(e.setFetchError(s.message),e.setDataSet(void 0),e.setIsFetching(!1))})},$a=e=>{const[t,n]=o.useState(e.open);return Qt(()=>{n(e.open)},[e.open]),[t,n]},Pa=e=>()=>e,Ba=e=>t=>{e(t)},Wa=({dataMutator:e})=>o.useCallback(t=>{if(!e)return t;let n={...t};return e&&(n=e(n)),n},[e]),za=e=>()=>e,Ua=e=>t=>{e(t)},qa=e=>()=>e,Qa=e=>()=>e,Xa=e=>()=>e,Ja=e=>t=>{e(t)},Ya=e=>()=>e,Za=e=>t=>{e(t)},eo=e=>()=>e,to=e=>t=>{e(t)},no=e=>()=>e,ro=e=>t=>{e(t)};var ft,Kt;function ao(){if(Kt)return ft;Kt=1;var e="Expected a function",t=NaN,n="[object Symbol]",a=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt,c=typeof ot=="object"&&ot&&ot.Object===Object&&ot,i=typeof self=="object"&&self&&self.Object===Object&&self,d=c||i||Function("return this")(),g=Object.prototype,v=g.toString,h=Math.max,R=Math.min,y=function(){return d.Date.now()};function m(f,p,B){var $,w,q,A,V,_,W=0,ye=!1,Q=!1,re=!0;if(typeof f!="function")throw new TypeError(e);p=ne(p)||0,b(B)&&(ye=!!B.leading,Q="maxWait"in B,q=Q?h(ne(B.maxWait)||0,p):q,re="trailing"in B?!!B.trailing:re);function ce(C){var z=$,oe=w;return $=w=void 0,W=C,A=f.apply(oe,z),A}function Ce(C){return W=C,V=setTimeout(ae,p),ye?ce(C):A}function Ne(C){var z=C-_,oe=C-W,L=p-z;return Q?R(L,q-oe):L}function ie(C){var z=C-_,oe=C-W;return _===void 0||z>=p||z<0||Q&&oe>=q}function ae(){var C=y();if(ie(C))return Y(C);V=setTimeout(ae,Ne(C))}function Y(C){return V=void 0,re&&$?ce(C):($=w=void 0,A)}function Ie(){V!==void 0&&clearTimeout(V),W=0,$=_=w=V=void 0}function we(){return V===void 0?A:Y(y())}function me(){var C=y(),z=ie(C);if($=arguments,w=this,_=C,z){if(V===void 0)return Ce(_);if(Q)return V=setTimeout(ae,p),ce(_)}return V===void 0&&(V=setTimeout(ae,p)),A}return me.cancel=Ie,me.flush=we,me}function b(f){var p=typeof f;return!!f&&(p=="object"||p=="function")}function H(f){return!!f&&typeof f=="object"}function D(f){return typeof f=="symbol"||H(f)&&v.call(f)==n}function ne(f){if(typeof f=="number")return f;if(D(f))return t;if(b(f)){var p=typeof f.valueOf=="function"?f.valueOf():f;f=b(p)?p+"":p}if(typeof f!="string")return f===0?f:+f;f=f.replace(a,"");var B=s.test(f);return B||u.test(f)?l(f.slice(2),B?2:8):r.test(f)?t:+f}return ft=m,ft}var oo=ao();const so=bn(oo),uo=(e,t)=>(n="",a)=>{const r=so(e,t.getProps().debounce??0);a?r(n):e(n)},_t=e=>!!(e&&typeof e=="object"&&e.value),jt=(e,t)=>{const n=e[t.key],a=e[t.title];return{value:n,label:a}},bt=(e,t)=>{if(!e)return null;if(!mt(e))return typeof e=="object"?_t(e)?[e]:[jt(e,t)]:[{value:e}];const n=[];for(const a of e)a&&(typeof a=="object"?_t(a)?n.push(a):n.push(jt(a,t)):n.push({value:a}));return n},lo=({value:e},t)=>{const n=co(e??null,t),[a,r]=o.useState(n);return Qt(()=>{r(n)},[n]),[a,r]},co=(e,t)=>o.useMemo(()=>bt(e,t),[t,e]),io=e=>()=>e??null,fo=(e,t)=>o.useCallback(n=>{e(bt(n,t))},[t,e]),ho=e=>t=>{const n=t??e;if(!n)return;if(!mt(n))return[n.value];const a=[];for(const r of n)a.push(r.value);return a},Ht=(e,t,n)=>{const a={[n.key]:e.value,[n.title]:e.label},{idx:r,nodes:s}=Jn(t,e.value,n);if(r<0||!(s!=null&&s[r]))return a;const u={...s[r]};return delete u[n.children],u},go=(e,t)=>{const n=o.useRef(void 0),a=o.useRef(null),r=o.useRef(void 0);return(s,u)=>{const l=e.getDataSet(),c=e.getFieldNames(),i=s??l,d=u??t;if(n.current===i&&a.current===d)return r.current;if(n.current=i,a.current=d,!d){r.current=void 0;return}const g=[];if(!mt(d))g.push(Ht(d,i,c));else for(const v of d){const h=Ht(v,i,c);h&&g.push(h)}return r.current=g,g}},vo=(e,t)=>o.useCallback((n,a=!0)=>{var l;const r=e.getFieldNames(),s=(l=bt(n,r))==null?void 0:l[0];if(!s)return;const u=e.getValues();if(a){if($t(u,s.value))return;t?e.setValues([...u??[],s]):e.setValues([s])}else{if(!$t(u,s.value))return;t?e.setValues((u==null?void 0:u.filter(c=>c.value!==s.value))??null):e.setValues([])}},[e,t]),$t=(e,t)=>{if(!e)return!1;for(const n of e)if(n.value===t)return!0;return!1},mo={view:"Просмотр",viewGroup:"Просмотр группы",viewRecord:"Просмотр записи",viewRecordsGroup:"Просмотр группы записей",create:"Создать",createRecord:"Создать запись",createGroup:"Создать группу",createRecordsGroup:"Создать группу записей",edit:"Редактировать",editGroup:"Редактировать группу",editRecord:"Редактировать запись",editRecordsGroup:"Редактировать группу записей",clone:"Клонировать",cloneGroup:"Клонировать группу",cloneRecord:"Клонировать запись",cloneRecordsGroup:"Клонировать группу записей",delete:"Удалить",deleteGroup:"Удалить группу",deleteRecord:"Удалить запись(и)",deleteRecordsGroup:"Удалить группу записей",select:"Выбрать",selectRecord:"Выбрать запись(и)",go:"Перейти",filter:"Фильтр",ok:"OK",cancel:"Отмена",tryAgainQt:"Попробовать еще раз?",deleteSelectedRecordQt:"Удалить выбранную запись?",error:"Ошибка",dataNotFound:"Данные не найдены"},po={view:"View",viewGroup:"View group",viewRecord:"View record",viewRecordsGroup:"View records group",create:"Create",createRecord:"Create record",createGroup:"Create group",createRecordsGroup:"Create records group",edit:"Edit",editGroup:"Edit group",editRecord:"Edit record",editRecordsGroup:"Edit records group",clone:"Clone",cloneGroup:"Clone group",cloneRecord:"Clone record",cloneRecordsGroup:"Clone records group",delete:"Delete",deleteGroup:"Delete group",deleteRecord:"Delete record(s)",deleteRecordsGroup:"Delete records group(s)",select:"Select",selectRecord:"Select record(s)",go:"Go",filter:"Filter",ok:"OK",cancel:"Cancel",tryAgainQt:"Try again?",deleteSelectedRecordQt:"Delete selected record?",error:"Error",dataNotFound:"Data not found"},So={view:"查看",viewGroup:"查看组",viewRecord:"查看记录",viewRecordsGroup:"查看记录组",create:"创建",createRecord:"创建记录",createGroup:"创建组",createRecordsGroup:"创建记录组",edit:"编辑",editGroup:"编辑组",editRecord:"编辑记录",editRecordsGroup:"编辑记录组",clone:"克隆",cloneGroup:"克隆组",cloneRecord:"克隆记录",cloneRecordsGroup:"克隆记录组",delete:"删除",deleteGroup:"删除组",deleteRecord:"删除记录",deleteRecordsGroup:"删除记录组",select:"选择",selectRecord:"选择记录",go:"前往",filter:"过滤",ok:"确定",cancel:"取消",tryAgainQt:"再试一次",deleteSelectedRecordQt:"删除选定的记录",error:"错误",dataNotFound:"数据未找到"},yo={ru_RU:mo,en_US:po,zh_CN:So},Co=e=>xn(e.language,yo,e.translation),bo=({props:e,setProps:t})=>{var _,W;const[n]=o.useState(e.apiRef??{}),[a]=o.useState(((_=e.editFormProps)==null?void 0:_.apiRef)??{}),[r]=o.useState(((W=e.editGroupFormProps)==null?void 0:W.apiRef)??{}),[s,u]=o.useState(!1),[l,c]=o.useState(!1),[i,d]=o.useState(),[g,v]=o.useState(!1),[h,R]=o.useState(0),[y,m]=$a(e),b=Ot(e)(),H=Wa(e),[D,ne]=lo(e,b),[f,p,B,$]=Yn(e.dataSet,b,H),[w,q]=Zn(e.expandedKeys,e.defaultExpandedKeys,e.defaultExpandAll,$),A=Ha(n),V={getId:An(e.componentId??"treeSelect-"+Tn()),getProps:Mn(e),setProps:On(t),updateProps:kn(e,t),getIsMounted:Fn(),getFieldNames:Ot(e),getDataSet:Rr(f),setDataSet:nr(p,e==null?void 0:e.onDataSetChanged),getGroupsOnly:Er(n),sortTree:tr(f,e.sortComparator,n),getValues:io(D),setValues:fo(ne,b),isDataPlainList:wr(B),getEditFormApi:Qa(a),getEditGroupFormApi:qa(r),getSelectedKeys:ho(D),getSelectedNodes:go(n,D),isNodeSelected:Ir(n),selectNode:vo(n,e.multiple),getActiveNodeKey:Nr(n),getActiveNode:er(n),getExpandedKeys:xr(w),setExpandedKeys:br(q),getExpandedNodes:Cr(n),isNodeExpanded:yr(n),expandNode:Sr(n),collapseNode:pr(n),toggleNode:mr(n),expandParentNodes:vr(n),getNode:gr(n),getNodes:hr(n),getNextNodeKey:fr(n),getPrevNodeKey:dr(n),getNextNode:ir(n),getPrevNode:cr(n),getParentNode:lr(n),addNode:ur(n),updateNode:sr(n),removeNode:or(n),moveNode:ar(n),ensureNodeVisible:rr(n),t:Co(e),treeSelectRef:o.useRef(null),getButtonsApi:Nn(),getIsReady:za(s),setIsReady:Ua(u),getIsOpen:Pa(y),setIsOpen:Ba(m),getIsFetching:Xa(l),setIsFetching:Ja(c),getFetchError:Ya(i),setFetchError:Za(d),getIsAllFetched:eo(g),setIsAllFetched:to(v),getMinSymbols:no(h),setMinSymbols:ro(R),fetchData:uo(A,n)};return Object.assign(n,V),n},xo=e=>{const[t,n]=Ln(e),a=No(t),r=bo({props:t,setProps:n});return o.useEffect(()=>{var s;(!t.fetchMode||t.fetchMode==="onLoad")&&!t.minSearchLength?r.fetchData():r.getIsReady()||(r.setIsReady(!0),(s=t==null?void 0:t.onReady)==null||s.call(t))},[r,t,t.fetchMode,t.minSearchLength]),S.jsx(va,{children:S.jsx(Fa,{api:r,allProps:t,treeSelectProps:a})})},No=e=>o.useMemo(()=>qt(e,{apiRef:!0,componentId:!0,dataMutator:!0,readOnly:!0,value:!0,filterTreeNode:!0,dataSet:!0,fetchMode:!0,noCacheFetchedData:!0,minSearchLength:!0,debounce:!0,editFormProps:!0,nodeDeleteMessage:!0,confirmDelete:!0,buttons:!0,onReady:!0,onDataFetch:!0,onDataFetchSuccess:!0,onDataFetchError:!0,onDataFetchComplete:!0,onDelete:!0,fieldNames:!0,titleRender:!0,selectedRender:!0,editGroupFormProps:!0,defaultExpandAll:!0,defaultExpandedKeys:!0,expandedKeys:!0,buttonsRowStyle:!0,buttonsRowStyles:!0,buttonsRowWrapperStyle:!0,buttonsIconsOnly:!0,buttonsPosition:!0,buttonsSize:!0,headerLabel:!0,language:!0,translation:!0,selectNewNode:!0,groupsMode:!0,sortOnChange:!0,sortComparator:!0,onChange:!0,onGetLabelCallback:!0,onDataSetChanged:!0})[1],[e]),Io=({field:e})=>{o.useSyncExternalStore(e.subscribe.bind(e),e.getSnapshot.bind(e));const[t]=o.useState({}),n=e.getProps(),a=e.getValue()??null,r=ia(e),s=fa(e),u=wo(e,n.dataSet),l=da(e,n),c=ha(e,n),i=Eo(e,n),d=Ro(e,n);o.useEffect(()=>{e.setReady(!0)},[e]);const v={...{width:e.getWidth()??"100%"},...n.style},h=ga(n);return S.jsx(xo,{className:n.className,apiRef:t,style:v,...h,dataSet:u,autoFocus:n.autoFocus,disabled:e.isDisabled(),readOnly:e.isReadOnly(),value:a,placeholder:n.placeholder??"Choose",onChange:l,onDataSetChanged:c,onDataFetch:i,onReady:d,onClear:s,onBlur:r})},wo=(e,t)=>o.useMemo(()=>typeof t!="function"?t:()=>t(e),[t,e]),Eo=(e,t)=>(n,a)=>{var r;return(r=t.onDataFetch)==null?void 0:r.call(t,n,a,e)},Ro=(e,t)=>()=>{var n;return(n=t.onReady)==null?void 0:n.call(t,e)};class Ko extends In{render(){return S.jsx(Io,{field:this})}}export{Ko as T};
