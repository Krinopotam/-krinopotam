import{r as s,k as z,n as ye,q as sn,d as _t,w as nt,h as un,br as ln,e as Se,K as je,i as $t,u as xt,v as cn,x as dn,y as Ht,z as Ft,C as fn,aV as hn,m as Rt,f as Et,F as gn,o as vn,G as mn,l as yn,aR as Sn,Y as It,j as v,t as bn,c as tt,g as Cn}from"./index-CNGiMTrA.js";import{t as pn,E as xn,a as it,u as Fn,b as Rn,B as En}from"./dForm-DmRsT3BS.js";import{D as Nt,s as Wt}from"./dFormModal-Clfa5FkM.js";import{j as In,S as Nn,h as Dn,m as Bt,k as wn,f as An,o as Dt,u as kn,t as Tn,c as On,d as Mn,e as Ln,b as Vn,P as Gn}from"./modal-DVHWH6Qh.js";import{m as ut,j as Kn,T as Pn,n as jn,p as _n,q as $n,S as Hn,o as Wn,d as Bn,b as zn,r as Un,a as Qn,c as qn,e as Xn,g as Yn}from"./defaultButtonsProps-YE4_7d0V.js";import{c as Jn,d as Zn,B as er,u as tr,b as nr,D as rr,m as or}from"./useShowArrow-D-EuJM8o.js";import{j as ar,k as sr,g as ur}from"./index-u-jxti1R.js";import{u as lr}from"./useIcons-B7FuD7ir.js";import{n as zt,g as cr,u as wt,a as dr,b as ir,c as fr,d as hr,e as gr,f as vr,h as mr,i as yr,j as Sr,k as br,l as Cr,m as pr,o as xr,p as Fr,q as Rr,r as Er,s as Ir,t as Nr,v as Dr,w as wr,x as Ar,y as kr,z as Tr,A as Or,B as Mr,C as Lr,D as Vr,E as Gr}from"./useApiIsNodeSelected-Bqe8ESB8.js";const Kr=function(e){var t=s.useRef({valueLabels:new Map});return s.useMemo(function(){var n=t.current.valueLabels,r=new Map,o=e.map(function(a){var u,l=a.value,c=(u=a.label)!==null&&u!==void 0?u:n.get(l);return r.set(l,c),z(z({},a),{},{label:c})});return t.current.valueLabels=r,[o]},[e])},Pr=function(e,t,n,r){return s.useMemo(function(){var o=e.map(function(c){var d=c.value;return d}),a=t.map(function(c){var d=c.value;return d}),u=o.filter(function(c){return!r[c]});if(n){var l=ut(o,!0,r);o=l.checkedKeys,a=l.halfCheckedKeys}return[Array.from(new Set([].concat(ye(u),ye(o)))),a]},[e,t,n,r])};function jr(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}function _r(e){var t=e||{},n=t.label,r=t.value,o=t.children,a=r||"value";return{_title:n?[n]:["title","label"],value:a,key:a,children:o||"children"}}function lt(e){return!e||e.disabled||e.disableCheckbox||e.checkable===!1}function $r(e,t){var n=[];function r(o){o.forEach(function(a){var u=a[t.children];u&&(n.push(a[t.value]),r(u))})}return r(e),n}function At(e){return e==null}const Hr=function(e,t){return s.useMemo(function(){var n=Kn(e,{fieldNames:t,initWrapper:function(o){return z(z({},o),{},{valueEntities:new Map})},processEntity:function(o,a){var u=o.node[t.value];a.valueEntities.set(u,o)}});return n},[e,t])};var ft=function(){return null},Wr=["children","value"];function Ut(e){return sn(e).map(function(t){if(!s.isValidElement(t)||!t.type)return null;var n=t,r=n.key,o=n.props,a=o.children,u=o.value,l=_t(o,Wr),c=z({key:r,value:u},l),d=Ut(a);return d.length&&(c.children=d),c}).filter(function(t){return t})}function ct(e){if(!e)return e;var t=z({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return nt(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function Br(e,t,n,r,o,a){var u=null,l=null;function c(){function d(i){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return i.map(function(h,E){var C="".concat(g,"-").concat(E),y=h[a.value],p=n.includes(y),R=d(h[a.children]||[],C,p),T=s.createElement(ft,h,R.map(function(L){return L.node}));if(t===y&&(u=T),p){var j={pos:C,node:T,children:R};return m||l.push(j),j}return null}).filter(function(h){return h})}l||(l=[],d(r),l.sort(function(i,g){var m=i.node.props.value,h=g.node.props.value,E=n.indexOf(m),C=n.indexOf(h);return E-C}))}Object.defineProperty(e,"triggerNode",{get:function(){return nt(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),c(),u}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return nt(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),c(),o?l:l.map(function(i){var g=i.node;return g})}})}const zr=function(e,t,n){var r=n.treeNodeFilterProp,o=n.filterTreeNode,a=n.fieldNames,u=a.children;return s.useMemo(function(){if(!t||o===!1)return e;var l;if(typeof o=="function")l=o;else{var c=t.toUpperCase();l=function(g,m){var h=m[r];return String(h).toUpperCase().includes(c)}}function d(i){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return i.reduce(function(m,h){var E=h[u],C=g||l(t,ct(h)),y=d(E||[],C);return(C||y.length)&&m.push(z(z({},h),{},un({isLeaf:void 0},u,y))),m},[])}return d(e)},[e,t,u,r,o])};function kt(e){var t=s.useRef();t.current=e;var n=s.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}function Ur(e,t){var n=t.id,r=t.pId,o=t.rootPId,a={},u=[],l=e.map(function(c){var d=z({},c),i=d[n];return a[i]=d,d.key=d.key||i,d});return l.forEach(function(c){var d=c[r],i=a[d];i&&(i.children=i.children||[],i.children.push(c)),(d===o||!i&&o===null)&&u.push(c)}),u}function Qr(e,t,n){return s.useMemo(function(){return e?n?Ur(e,z({id:"id",pId:"pId",rootPId:null},n!==!0?n:{})):e:Ut(t)},[t,n,e])}var Qt=s.createContext(null),ht=s.createContext(null),qr={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Xr=function(t,n){var r=Jn(),o=r.prefixCls,a=r.multiple,u=r.searchValue,l=r.toggleOpen,c=r.open,d=r.notFoundContent,i=s.useContext(ht),g=i.virtual,m=i.listHeight,h=i.listItemHeight,E=i.listItemScrollOffset,C=i.treeData,y=i.fieldNames,p=i.onSelect,R=i.dropdownMatchSelectWidth,T=i.treeExpandAction,j=i.treeTitleRender,L=i.onPopupScroll,f=s.useContext(Qt),w=f.checkable,A=f.checkedKeys,U=f.halfCheckedKeys,ee=f.treeExpandedKeys,te=f.treeDefaultExpandAll,ne=f.treeDefaultExpandedKeys,Y=f.onTreeExpand,_=f.treeIcon,ke=f.showTreeIcon,be=f.switcherIcon,Te=f.treeLine,re=f.treeNodeFilterProp,le=f.loadData,Q=f.treeLoadedKeys,Oe=f.treeMotion,Me=f.onTreeLoad,Le=f.keyEntities,J=s.useRef(),O=ln(function(){return C},[c,C],function(k,S){return S[0]&&k[1]!==S[1]}),Ce=s.useState(null),$=Se(Ce,2),ce=$[0],de=$[1],G=Le[ce],ie=s.useMemo(function(){return w?{checked:A,halfChecked:U}:null},[w,A,U]);s.useEffect(function(){if(c&&!a&&A.length){var k;(k=J.current)===null||k===void 0||k.scrollTo({key:A[0]}),de(A[0])}},[c]);var pe=String(u).toLowerCase(),xe=function(S){return pe?String(S[re]).toLowerCase().includes(pe):!1},Fe=s.useState(ne),H=Se(Fe,2),Re=H[0],$e=H[1],He=s.useState(null),q=Se(He,2),oe=q[0],Ee=q[1],W=s.useMemo(function(){return ee?ye(ee):u?oe:Re},[Re,oe,ee,u]);s.useEffect(function(){u&&Ee($r(C,y))},[u]);var Ve=function(S){$e(S),Ee(S),Y&&Y(S)},Ie=function(S){S.preventDefault()},X=function(S,fe){var B=fe.node;w&&lt(B)||(p(B.key,{selected:!A.includes(B.key)}),a||l(!1))};if(s.useImperativeHandle(n,function(){var k;return{scrollTo:(k=J.current)===null||k===void 0?void 0:k.scrollTo,onKeyDown:function(fe){var B,he=fe.which;switch(he){case je.UP:case je.DOWN:case je.LEFT:case je.RIGHT:(B=J.current)===null||B===void 0||B.onKeyDown(fe);break;case je.ENTER:{if(G){var De=(G==null?void 0:G.node)||{},We=De.selectable,ae=De.value;We!==!1&&X(null,{node:{key:ce},selected:!A.includes(ae)})}break}case je.ESC:l(!1)}},onKeyUp:function(){}}}),O.length===0)return s.createElement("div",{role:"listbox",className:"".concat(o,"-empty"),onMouseDown:Ie},d);var Ne={fieldNames:y};return Q&&(Ne.loadedKeys=Q),W&&(Ne.expandedKeys=W),s.createElement("div",{onMouseDown:Ie},G&&c&&s.createElement("span",{style:qr,"aria-live":"assertive"},G.node.value),s.createElement(Pn,$t({ref:J,focusable:!1,prefixCls:"".concat(o,"-tree"),treeData:O,height:m,itemHeight:h,itemScrollOffset:E,virtual:g!==!1&&R!==!1,multiple:a,icon:_,showIcon:ke,switcherIcon:be,showLine:Te,loadData:u?null:le,motion:Oe,activeKey:ce,checkable:w,checkStrictly:!0,checkedKeys:ie,selectedKeys:w?[]:A,defaultExpandAll:te,titleRender:j},Ne,{onActiveChange:de,onSelect:X,onCheck:X,onExpand:Ve,onLoad:Me,filterTreeNode:xe,expandAction:T,onScroll:L})))},Yr=s.forwardRef(Xr),gt="SHOW_ALL",vt="SHOW_PARENT",rt="SHOW_CHILD";function Tt(e,t,n,r){var o=new Set(e);return t===rt?e.filter(function(a){var u=n[a];return!(u&&u.children&&u.children.some(function(l){var c=l.node;return o.has(c[r.value])})&&u.children.every(function(l){var c=l.node;return lt(c)||o.has(c[r.value])}))}):t===vt?e.filter(function(a){var u=n[a],l=u?u.parent:null;return!(l&&!lt(l.node)&&o.has(l.key))}):e}var Jr=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function Zr(e){return!e||cn(e)!=="object"}var eo=s.forwardRef(function(e,t){var n=e.id,r=e.prefixCls,o=r===void 0?"rc-tree-select":r,a=e.value,u=e.defaultValue,l=e.onChange,c=e.onSelect,d=e.onDeselect,i=e.searchValue,g=e.inputValue,m=e.onSearch,h=e.autoClearSearchValue,E=h===void 0?!0:h,C=e.filterTreeNode,y=e.treeNodeFilterProp,p=y===void 0?"value":y,R=e.showCheckedStrategy,T=e.treeNodeLabelProp,j=e.multiple,L=e.treeCheckable,f=e.treeCheckStrictly,w=e.labelInValue,A=e.fieldNames,U=e.treeDataSimpleMode,ee=e.treeData,te=e.children,ne=e.loadData,Y=e.treeLoadedKeys,_=e.onTreeLoad,ke=e.treeDefaultExpandAll,be=e.treeExpandedKeys,Te=e.treeDefaultExpandedKeys,re=e.onTreeExpand,le=e.treeExpandAction,Q=e.virtual,Oe=e.listHeight,Me=Oe===void 0?200:Oe,Le=e.listItemHeight,J=Le===void 0?20:Le,O=e.listItemScrollOffset,Ce=O===void 0?0:O,$=e.onDropdownVisibleChange,ce=e.dropdownMatchSelectWidth,de=ce===void 0?!0:ce,G=e.treeLine,ie=e.treeIcon,pe=e.showTreeIcon,xe=e.switcherIcon,Fe=e.treeMotion,H=e.treeTitleRender,Re=e.onPopupScroll,$e=_t(e,Jr),He=Zn(n),q=L&&!f,oe=L||f,Ee=f||w,W=oe||j,Ve=xt(u,{value:a}),Ie=Se(Ve,2),X=Ie[0],Ne=Ie[1],k=s.useMemo(function(){return L?R||rt:gt},[R,L]),S=s.useMemo(function(){return _r(A)},[JSON.stringify(A)]),fe=xt("",{value:i!==void 0?i:g,postState:function(b){return b||""}}),B=Se(fe,2),he=B[0],De=B[1],We=function(b){De(b),m==null||m(b)},ae=Qr(ee,te,U),Qe=Hr(ae,S),V=Qe.keyEntities,se=Qe.valueEntities,qe=s.useCallback(function(x){var b=[],F=[];return x.forEach(function(I){se.has(I)?F.push(I):b.push(I)}),{missingRawValues:b,existRawValues:F}},[se]),Xe=zr(ae,he,{fieldNames:S,treeNodeFilterProp:p,filterTreeNode:C}),Ye=s.useCallback(function(x){if(x){if(T)return x[T];for(var b=S._title,F=0;F<b.length;F+=1){var I=x[b[F]];if(I!==void 0)return I}}},[S,T]),ue=s.useCallback(function(x){var b=jr(x);return b.map(function(F){return Zr(F)?{value:F}:F})},[]),ge=s.useCallback(function(x){var b=ue(x);return b.map(function(F){var I=F.label,K=F.value,M=F.halfChecked,N,D=se.get(K);if(D){var P;I=H?H(D.node):(P=I)!==null&&P!==void 0?P:Ye(D.node),N=D.node.disabled}else if(I===void 0){var ve=ue(X).find(function(Be){return Be.value===K});I=ve.label}return{label:I,value:K,halfChecked:M,disabled:N}})},[se,Ye,ue,X]),yt=s.useMemo(function(){return ue(X===null?[]:X)},[ue,X]),Xt=s.useMemo(function(){var x=[],b=[];return yt.forEach(function(F){F.halfChecked?b.push(F):x.push(F)}),[x,b]},[yt]),St=Se(Xt,2),Ge=St[0],bt=St[1],Ct=s.useMemo(function(){return Ge.map(function(x){return x.value})},[Ge]),Yt=Pr(Ge,bt,q,V),pt=Se(Yt,2),Ke=pt[0],Je=pt[1],Jt=s.useMemo(function(){var x=Tt(Ke,k,V,S),b=x.map(function(M){var N,D;return(N=(D=V[M])===null||D===void 0||(D=D.node)===null||D===void 0?void 0:D[S.value])!==null&&N!==void 0?N:M}),F=b.map(function(M){var N=Ge.find(function(P){return P.value===M}),D=w?N==null?void 0:N.label:H==null?void 0:H(N);return{value:M,label:D}}),I=ge(F),K=I[0];return!W&&K&&At(K.value)&&At(K.label)?[]:I.map(function(M){var N;return z(z({},M),{},{label:(N=M.label)!==null&&N!==void 0?N:M.value})})},[S,W,Ke,Ge,ge,k,V]),Zt=Kr(Jt),en=Se(Zt,1),tn=en[0],Ze=kt(function(x,b,F){var I=ge(x);if(Ne(I),E&&De(""),l){var K=x;if(q){var M=Tt(x,k,V,S);K=M.map(function(Z){var me=se.get(Z);return me?me.node[S.value]:Z})}var N=b||{triggerValue:void 0,selected:void 0},D=N.triggerValue,P=N.selected,ve=K;if(f){var Be=bt.filter(function(Z){return!K.includes(Z.value)});ve=[].concat(ye(ve),ye(Be))}var ze=ge(ve),we={preValue:Ge,triggerValue:D},Pe=!0;(f||F==="selection"&&!P)&&(Pe=!1),Br(we,D,x,ae,Pe,S),oe?we.checked=P:we.selected=P;var et=Ee?ze:ze.map(function(Z){return Z.value});l(W?et:et[0],Ee?null:ze.map(function(Z){return Z.label}),we)}}),at=s.useCallback(function(x,b){var F,I=b.selected,K=b.source,M=V[x],N=M==null?void 0:M.node,D=(F=N==null?void 0:N[S.value])!==null&&F!==void 0?F:x;if(!W)Ze([D],{selected:!0,triggerValue:D},"option");else{var P=I?[].concat(ye(Ct),[D]):Ke.filter(function(me){return me!==D});if(q){var ve=qe(P),Be=ve.missingRawValues,ze=ve.existRawValues,we=ze.map(function(me){return se.get(me).key}),Pe;if(I){var et=ut(we,!0,V);Pe=et.checkedKeys}else{var Z=ut(we,{checked:!1,halfCheckedKeys:Je},V);Pe=Z.checkedKeys}P=[].concat(ye(Be),ye(Pe.map(function(me){return V[me].node[S.value]})))}Ze(P,{selected:I,triggerValue:D},K||"option")}I||!W?c==null||c(D,ct(N)):d==null||d(D,ct(N))},[qe,se,V,S,W,Ct,Ze,q,c,d,Ke,Je]),nn=s.useCallback(function(x){if($){var b={};Object.defineProperty(b,"documentClickClose",{get:function(){return nt(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),$(x,b)}},[$]),rn=kt(function(x,b){var F=x.map(function(I){return I.value});if(b.type==="clear"){Ze(F,{},"selection");return}b.values.length&&at(b.values[0].value,{selected:!1,source:"selection"})}),on=s.useMemo(function(){return{virtual:Q,dropdownMatchSelectWidth:de,listHeight:Me,listItemHeight:J,listItemScrollOffset:Ce,treeData:Xe,fieldNames:S,onSelect:at,treeExpandAction:le,treeTitleRender:H,onPopupScroll:Re}},[Q,de,Me,J,Ce,Xe,S,at,le,H,Re]),an=s.useMemo(function(){return{checkable:oe,loadData:ne,treeLoadedKeys:Y,onTreeLoad:_,checkedKeys:Ke,halfCheckedKeys:Je,treeDefaultExpandAll:ke,treeExpandedKeys:be,treeDefaultExpandedKeys:Te,onTreeExpand:re,treeIcon:ie,treeMotion:Fe,showTreeIcon:pe,switcherIcon:xe,treeLine:G,treeNodeFilterProp:p,keyEntities:V}},[oe,ne,Y,_,Ke,Je,ke,be,Te,re,ie,Fe,pe,xe,G,p,V]);return s.createElement(ht.Provider,{value:on},s.createElement(Qt.Provider,{value:an},s.createElement(er,$t({ref:t},$e,{id:He,prefixCls:o,mode:W?"multiple":void 0,displayValues:tn,onDisplayValuesChange:rn,searchValue:he,onSearch:We,OptionList:Yr,emptyOptions:!ae.length,onDropdownVisibleChange:nn,dropdownMatchSelectWidth:de}))))}),Ue=eo;Ue.TreeNode=ft;Ue.SHOW_ALL=gt;Ue.SHOW_PARENT=vt;Ue.SHOW_CHILD=rt;const to=e=>{const{componentCls:t,treePrefixCls:n,colorBgElevated:r}=e,o=`.${n}`;return[{[`${t}-dropdown`]:[{padding:`${Ft(e.paddingXS)} ${Ft(e.calc(e.paddingXS).div(2).equal())}`},_n(n,Ht(e,{colorBgContainer:r})),{[o]:{borderRadius:0,[`${o}-list-holder-inner`]:{alignItems:"stretch",[`${o}-treenode`]:{[`${o}-node-content-wrapper`]:{flex:"auto"}}}}},$n(`${n}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${o}-switcher${o}-switcher_close`]:{[`${o}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function no(e,t,n){return dn("TreeSelect",r=>{const o=Ht(r,{treePrefixCls:t});return[to(o)]},jn)(e,n)}var ro=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const oo=(e,t)=>{var n;const{prefixCls:r,size:o,disabled:a,bordered:u=!0,className:l,rootClassName:c,treeCheckable:d,multiple:i,listHeight:g=256,listItemHeight:m=26,placement:h,notFoundContent:E,switcherIcon:C,treeLine:y,getPopupContainer:p,popupClassName:R,dropdownClassName:T,treeIcon:j=!1,transitionName:L,choiceTransitionName:f="",status:w,treeExpandAction:A,builtinPlacements:U,dropdownMatchSelectWidth:ee,popupMatchSelectWidth:te,allowClear:ne,variant:Y,dropdownStyle:_,tagRender:ke}=e,be=ro(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender"]),{getPopupContainer:Te,getPrefixCls:re,renderEmpty:le,direction:Q,virtual:Oe,popupMatchSelectWidth:Me,popupOverflow:Le}=s.useContext(fn),J=re(),O=re("select",r),Ce=re("select-tree",r),$=re("tree-select",r),{compactSize:ce,compactItemClassnames:de}=hn(O,Q),G=Rt(O),ie=Rt($),[pe,xe,Fe]=tr(O,G),[H]=no($,Ce,ie),[Re,$e]=ar("treeSelect",Y,u),He=Et(R||T,`${$}-dropdown`,{[`${$}-dropdown-rtl`]:Q==="rtl"},c,Fe,G,ie,xe),q=!!(d||i),oe=nr(e.suffixIcon,e.showArrow),Ee=(n=te??ee)!==null&&n!==void 0?n:Me,{status:W,hasFeedback:Ve,isFormItemInput:Ie,feedbackIcon:X}=s.useContext(gn),Ne=ur(W,w),{suffixIcon:k,removeIcon:S,clearIcon:fe}=lr(Object.assign(Object.assign({},be),{multiple:q,showSuffixIcon:oe,hasFeedback:Ve,feedbackIcon:X,prefixCls:O,componentName:"TreeSelect"})),B=ne===!0?{clearIcon:fe}:ne;let he;E!==void 0?he=E:he=(le==null?void 0:le("Select"))||s.createElement(rr,{componentName:"Select"});const De=vn(be,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),We=s.useMemo(()=>h!==void 0?h:Q==="rtl"?"bottomRight":"bottomLeft",[h,Q]),ae=mn(ue=>{var ge;return(ge=o??ce)!==null&&ge!==void 0?ge:ue}),Qe=s.useContext(yn),V=a??Qe,se=Et(!r&&$,{[`${O}-lg`]:ae==="large",[`${O}-sm`]:ae==="small",[`${O}-rtl`]:Q==="rtl",[`${O}-${Re}`]:$e,[`${O}-in-form-item`]:Ie},sr(O,Ne,Ve),de,l,c,Fe,G,ie,xe),qe=ue=>s.createElement(Hn,{prefixCls:Ce,switcherIcon:C,treeNodeProps:ue,showLine:y}),[Xe]=Sn("SelectLike",_==null?void 0:_.zIndex),Ye=s.createElement(Ue,Object.assign({virtual:Oe,disabled:V},De,{dropdownMatchSelectWidth:Ee,builtinPlacements:or(U,Le),ref:t,prefixCls:O,className:se,listHeight:g,listItemHeight:m,treeCheckable:d&&s.createElement("span",{className:`${O}-tree-checkbox-inner`}),treeLine:!!y,suffixIcon:k,multiple:q,placement:We,removeIcon:S,allowClear:B,switcherIcon:qe,showTreeIcon:j,notFoundContent:he,getPopupContainer:p||Te,treeMotion:null,dropdownClassName:He,dropdownStyle:Object.assign(Object.assign({},_),{zIndex:Xe}),choiceTransitionName:It(J,"",f),transitionName:It(J,"slide-up",L),treeExpandAction:A,tagRender:q?ke:void 0}));return pe(H(Ye))},ao=s.forwardRef(oo),Ae=ao,so=In(Ae);Ae.TreeNode=ft;Ae.SHOW_ALL=gt;Ae.SHOW_PARENT=vt;Ae.SHOW_CHILD=rt;Ae._InternalPanelDoNotUseOrYouWillBeFired=so;const uo=e=>s.useMemo(()=>({...{maxHeight:400,overflow:"auto"},...e}),[e]),lo=e=>{const n=e.getFieldNames().title;return s.useCallback((r,o)=>!o||typeof o[n]!="string"?!1:o[n].toLowerCase().indexOf(r.toLowerCase())>=0,[n])},qt=({api:e})=>{const t=e.getFetchError(),n=e.getIsFetching(),r=e.getMinSymbols(),o=e.isDataPlainList();return r?v.jsx(co,{minSymbols:r,plainList:o}):n?v.jsx(io,{plainList:o}):t?v.jsx(fo,{error:t,plainList:o}):v.jsx(v.Fragment,{})},co=({minSymbols:e,plainList:t})=>v.jsxs("div",{style:{paddingLeft:t?"8px":"30px",fontSize:"12px"},children:["Введите как минимум ",e," симв."]}),io=({plainList:e})=>v.jsxs("div",{style:{paddingLeft:e?"8px":"30px",fontSize:"12px"},children:[v.jsx(Nn,{size:"small"})," загрузка..."]}),fo=({error:e,plainList:t})=>v.jsx("div",{role:"alert",style:{paddingLeft:t?"8px":"30px",fontSize:"12px",color:"#ff4d4f"},children:e}),ho=({api:e})=>{const t=e.getIsFetching(),n=e.getFetchError(),r=e.getMinSymbols(),o=e.isDataPlainList();return r||t||n?v.jsx(v.Fragment,{}):v.jsx("div",{style:{paddingLeft:o?"8px":"30px",fontSize:"12px"},children:e.t("dataNotFound")})},ot=s.createContext(void 0),go=({children:e})=>{const t=s.useRef(!1),n=s.useRef(!1),r=s.useMemo(()=>({ctrlPressedRef:t,dialogOpenedRef:n}),[t]);return v.jsx(ot.Provider,{value:r,children:e})},Ot=(e,t,n)=>{const{dialogOpenedRef:r}=s.useContext(ot);return s.useMemo(()=>{const o=n?t==null?void 0:t.editGroupFormProps:t==null?void 0:t.editFormProps;if(!o)return;const a={...o};t.language&&!a.language&&(a.language=t.language);const u=o==null?void 0:o.onSubmitSuccess;a.onSubmitSuccess=(d,i,g,m,h)=>{var R;if(u==null||u(d,i,g,m,h),h.isPrevented())return;const E=m.model.getFormMode(),C=e.getFieldNames(),y={...i,...g};let p;if(y[C.parent]?p=(R=y[C.parent])==null?void 0:R[C.key]:y[C.parent]===null?p=void 0:p=e.getActiveNodeKey(),E==="create"||E==="clone")y[C.key]||(y[C.key]=Wn()),e.addNode(y,p,"insideBottom",{ensureVisible:!0,select:!!t.selectNewNode});else if(E==="update"){e.updateNode(y,p,{ensureVisible:!0});const T=e.getValues();e.setValues(vo(T,y,C))}};const l=o==null?void 0:o.onOpen;a.onOpen=(d,i,g,m)=>{const h=l==null?void 0:l(d,i,g,m);return m.isPrevented()||(r.current=!0),h};const c=o==null?void 0:o.onClosed;return a.onClosed=(d,i)=>{c==null||c(d,i),!i.isPrevented()&&(r.current=!1)},a},[n,t==null?void 0:t.editFormProps,t==null?void 0:t.editGroupFormProps,t.language,t.selectNewNode,e,r])},vo=(e,t,n)=>{if(!e)return null;const r=[];for(const o of e)o.value===t[n.key]?r.push({value:o.value}):r.push(o);return r},mo=(e,t)=>{e.getButtonsApi().refreshButtons=yo();const n=e.getFieldNames(),r=e.getActiveNode(!0),o=!(r!=null&&r.isLeaf)&&(!t.groupsMode||(r==null?void 0:r[n.isGroup])),a=t.buttons,u=t.buttonsSize??"small",l=t.buttonsPosition??"right",c=So(t),d=bo(e,t,o),i=Co(e,t,o),g=po(e,t,r,o),m=xo(e,t,r,o),h=Fo(e,t,r,o),E=Ro(e,t,r,o);return s.useMemo(()=>{const y=Dn({headerLabel:c,view:g,create:d,createGroup:i,clone:m,update:h,delete:E},a);for(const p in y){const R=y[p];!R||p==="headerLabel"||R.type==="hotkey"||(R.size=R.size??u,R.position=R.position??l,R.checkDisabled&&(R.disabled=!r),R.checkHidden&&(R.hidden=!r))}return y},[c,g,d,i,m,h,E,a,u,l,r])},yo=()=>{const[,e]=s.useState({});return s.useCallback(()=>{e({})},[e])},So=e=>s.useMemo(()=>{if(e.headerLabel)return{...Bn,title:e.headerLabel}},[e.headerLabel]),bo=(e,t,n)=>{var r;return s.useMemo(()=>{var o;if(!(!t.editFormProps||t.disabled||t.readOnly||((o=t.buttons)==null?void 0:o.create)===null))return{...zn,title:e.t("create"),tooltip:e.t("createRecord"),onClick:()=>{const a=e.getFieldNames(),u=e.getActiveNode(!1);let l;u&&(l=u&&n?u:e.getParentNode(u)),e.getEditFormApi().open("create",{defaultValues:{[a.parent]:l}})}}},[t.editFormProps,t.disabled,t.readOnly,(r=t.buttons)==null?void 0:r.create,e,n])},Co=(e,t,n)=>{var r;return s.useMemo(()=>{var o;if(!(!t.editGroupFormProps||!t.groupsMode||t.disabled||t.readOnly||((o=t.buttons)==null?void 0:o.createGroup)===null))return{...Un,title:e.t("createGroup"),tooltip:e.t("createRecordsGroup"),onClick:()=>{const a=e.getFieldNames(),u=e.getActiveNode(!1);let l;u&&(l=u&&n?u:e.getParentNode(u)),e.getEditGroupFormApi().open("create",{defaultValues:{[a.parent]:l}})}}},[t.editGroupFormProps,t.groupsMode,t.disabled,t.readOnly,(r=t.buttons)==null?void 0:r.createGroup,e,n])},po=(e,t,n,r)=>{var o;return s.useMemo(()=>{var a;if(!(!r&&!t.editFormProps||r&&!t.editGroupFormProps||!t.readOnly||t.disabled||((a=t.buttons)==null?void 0:a.view)===null))return{...Qn,title:e.t("view"),tooltip:e.t("viewRecord"),disabled:!n,onClick:()=>{if(!n)return;const u=e.getFieldNames(),l=e.getParentNode(n);r?e.getEditGroupFormApi().open("view",{dataSet:{..._e(n),[u.parent]:l}}):e.getEditFormApi().open("view",{dataSet:{..._e(n),[u.parent]:l}})}}},[r,t.editFormProps,t.editGroupFormProps,t.readOnly,t.disabled,(o=t.buttons)==null?void 0:o.view,n,e])},xo=(e,t,n,r)=>{var o;return s.useMemo(()=>{var u;const a=t.editGroupFormProps;if(!(!r&&!t.editFormProps||r&&!t.editGroupFormProps||t.disabled||t.readOnly||((u=t.buttons)==null?void 0:u.clone)===null))return{...qn,title:r&&a?e.t("cloneGroup"):e.t("clone"),tooltip:r&&a?e.t("cloneRecordsGroup"):e.t("cloneRecord"),disabled:!n,onClick:()=>{if(!n)return;const l=e.getFieldNames(),c=e.getParentNode(n);r?e.getEditGroupFormApi().open("clone",{dataSet:{..._e(n),[l.parent]:c}}):e.getEditFormApi().open("clone",{dataSet:{..._e(n),[l.parent]:c}})}}},[t.editGroupFormProps,t.editFormProps,t.disabled,t.readOnly,(o=t.buttons)==null?void 0:o.clone,r,n,e])},Fo=(e,t,n,r)=>{var o;return s.useMemo(()=>{var u;const a=t.editGroupFormProps;if(!(!r&&!t.editFormProps||r&&!t.editGroupFormProps||t.disabled||t.readOnly||((u=t.buttons)==null?void 0:u.update)===null))return{...Xn,title:r&&a?e.t("editGroup"):e.t("edit"),tooltip:r&&a?e.t("editRecordsGroup"):e.t("editRecord"),disabled:!n,onClick:()=>{if(!n)return;const l=e.getFieldNames(),c=e.getParentNode(n);r?e.getEditGroupFormApi().open("update",{dataSet:{..._e(n),[l.parent]:c}}):e.getEditFormApi().open("update",{dataSet:{..._e(n),[l.parent]:c}})}}},[t.editGroupFormProps,t.editFormProps,t.disabled,t.readOnly,(o=t.buttons)==null?void 0:o.update,r,n,e])},Ro=(e,t,n,r)=>{const{dialogOpenedRef:o}=s.useContext(ot);return s.useMemo(()=>{var a;if(!(!t.editFormProps||t.disabled||t.readOnly||((a=t.buttons)==null?void 0:a.delete)===null))return{...Yn,title:r?e.t("deleteGroup"):e.t("delete"),tooltip:r?e.t("deleteRecordsGroup"):e.t("deleteRecord"),disabled:!n,onClick:()=>{if(!n)return;if(o.current=!0,!t.confirmDelete){Mt(n,t,e,o,e.t("error")),o.current=!1;return}const u=Bt.confirmWaiter({language:t.language,content:t.nodeDeleteMessage??e.t("deleteSelectedRecordQt"),colorType:"danger",onOk:()=>{Mt(n,t,e,o,e.t("error"),u)},onCancel:()=>{u.destroy(),o.current=!1}})}}},[t,r,e,n,o])},Mt=(e,t,n,r,o,a)=>{var c;const u=n.getButtonsApi(),l=(c=t==null?void 0:t.onDelete)==null?void 0:c.call(t,e,n);if(!pn(l)){n.removeNode(e),a&&a.destroy(),r.current=!1;return}t.confirmDelete||(u.loading("delete",!0),u.disableAll(!0)),l.then(()=>{a==null||a.destroy(),n.getIsMounted()&&(n.removeNode(e),t.confirmDelete||(u.loading("delete",!1),u.disableAll(!1)),r.current=!1)}).catch(d=>{a==null||a.destroy(),n.getIsMounted()&&(t.confirmDelete||(u.loading("delete",!1),u.disableAll(!1)),Bt.alert({language:t.language,title:o,content:v.jsx(xn,{error:d}),colorType:"danger",onOk:()=>{r.current=!1}}))})},_e=e=>({...e}),Eo=({treeApi:e,treeProps:t})=>{const n=mo(e,t),{token:{colorBorderSecondary:r}}=bn.useToken();return s.useMemo(()=>n?v.jsx("div",{style:{padding:"0 4px 6px 4px",borderBottom:`1px solid ${r}`,...t.buttonsRowWrapperStyle},children:v.jsx(wn,{buttons:n,apiRef:e.getButtonsApi(),style:t.buttonsRowStyle,context:e,iconsOnly:t.buttonsIconsOnly!==!1})}):null,[n,r,e,t.buttonsIconsOnly,t.buttonsRowStyle,t.buttonsRowWrapperStyle])},Io=({api:e,children:t})=>{const n=e.isDataPlainList(),r=e.getProps();return v.jsx("div",{className:n?"tree-select-plain":void 0,children:r.editFormProps||r.editGroupFormProps?v.jsx(No,{api:e,children:t}):v.jsxs(v.Fragment,{children:[t,v.jsx(qt,{api:e})]})})},No=({api:e,children:t})=>{const n=e.getProps();return v.jsxs(An,{style:{display:"flex",flexDirection:"column",...n.buttonsRowWrapperStyle},noKeepFocus:!0,children:[v.jsx(Eo,{treeApi:e,treeProps:n}),t,v.jsx(qt,{api:e})]})},Do=({api:e,children:t})=>{const n=e.getProps(),r=s.useContext(ht);return r&&(n.titleRender?r.treeTitleRender=n.titleRender:r.treeTitleRender=void 0),n.dropdownRender?n.dropdownRender(t):v.jsx(Io,{api:e,children:t})},wo=({api:e,allProps:t,treeSelectProps:n})=>{const{ctrlPressedRef:r,dialogOpenedRef:o}=s.useContext(ot);ko(r);const a=Ot(e,t,!1),u=Ot(e,t,!0),l=uo(t.dropdownStyle),c=Oo({api:e}),d=To(e),i=Po(e.getFieldNames()),g=e.getExpandedKeys(),m=jo(e),h=Mo(e),E=Lo(e),C=Vo(e,r,o),y=Go(e),p=Ko(e);return v.jsxs(v.Fragment,{children:[v.jsx(Ae,{ref:e.treeSelectRef,treeNodeFilterProp:i.label,notFoundContent:v.jsx(ho,{api:e}),...n,labelInValue:!0,treeTitleRender:t.selectedRender,dropdownRender:t.readOnly?Ao:c,showSearch:!t.readOnly&&t.showSearch!==!1,allowClear:!t.readOnly&&t.allowClear!==!1,fieldNames:i,treeData:e.getDataSet(),value:d,disabled:t.disabled,treeDefaultExpandAll:t.defaultExpandAll,treeDefaultExpandedKeys:t.defaultExpandedKeys,treeExpandedKeys:g,open:e.getIsOpen(),dropdownStyle:l,filterTreeNode:p,onTreeExpand:m,onClear:h,onChange:E,onDropdownVisibleChange:C,onSearch:y}),!t.disabled&&a?v.jsx(Nt,{...a,apiRef:e.getEditFormApi()}):null,!t.disabled&&u?v.jsx(Nt,{...u,apiRef:e.getEditGroupFormApi()}):null]})},Ao=()=>v.jsx(v.Fragment,{}),ko=e=>{Dt("keydown",t=>{t.key==="Control"&&(e.current=!0)}),Dt("keyup",t=>{t.key==="Control"&&(e.current=!1)})},To=e=>{const t=e.getValues();return e.getProps().multiple?t??void 0:(t==null?void 0:t[0])??void 0},Oo=({api:e})=>s.useCallback(t=>v.jsx(Do,{api:e,children:t}),[e]),Mo=e=>s.useCallback(()=>{var n;e.setValues(null);const t=e.getProps();(n=t.onClear)==null||n.call(t)},[e]),Lo=e=>s.useCallback(t=>{var u;const n=t;e.setValues(n??null);const r=e.getProps(),o=n?e.getSelectedKeys(n)??[]:[],a=n?e.getSelectedNodes(void 0,n)??[]:[];(u=r.onChange)==null||u.call(r,t,o,a)},[e]),Vo=(e,t,n)=>s.useCallback(r=>{var a;const o=e.getProps();if(o.readOnly){e.setIsOpen(!1);return}t.current||n.current?e.setIsOpen(!0):e.setIsOpen(r),r&&(o.fetchMode==="onUse"||o.fetchMode==="onUseForce")&&e.fetchData(),(a=o.onDropdownVisibleChange)==null||a.call(o,r)},[e,t,n]),Go=e=>s.useCallback(t=>{var r;e.fetchData(t,!0);const n=e.getProps();(r=n.onSearch)==null||r.call(n,t)},[e]),Ko=e=>{const t=lo(e);return s.useCallback((n,r)=>{if(!e.getIsAllFetched())return!0;const o=e.getProps();return o.filterTreeNode?typeof o.filterTreeNode=="function"?o.filterTreeNode(n,r):o.filterTreeNode:t(n,r)},[e,t])},Po=e=>s.useMemo(()=>{const t=e.key,n=e.title,r=e.children;return{value:t,label:n,children:r}},[e.children,e.key,e.title]),jo=e=>s.useCallback(t=>{var r;const n=e.getProps();e.setExpandedKeys(t),(r=n.onTreeExpand)==null||r.call(n,t)},[e]),_o=e=>t=>{var o;if(!e.getIsMounted())return;const n=e.getProps();if(!n.noCacheFetchedData&&e.getIsAllFetched())return;if(n.minSearchLength&&t.length<n.minSearchLength){e.setMinSymbols(n.minSearchLength),e.setDataSet(void 0);return}e.setMinSymbols(0),e.setFetchError(void 0);const r=(o=n==null?void 0:n.onDataFetch)==null?void 0:o.call(n,t,e);if(!r){e.setIsAllFetched(!0);return}e.setIsFetching(!0),t||e.setDataSet(void 0),r.then(a=>{var u,l,c;e.getIsMounted()&&(e.setDataSet(a.data),e.setIsAllFetched(e.getIsAllFetched()||!t),e.getIsReady()||(e.setIsReady(!0),(u=n==null?void 0:n.onReady)==null||u.call(n)),e.setIsFetching(!1),(l=n==null?void 0:n.onDataFetchSuccess)==null||l.call(n,a,e),(c=n==null?void 0:n.onDataFetchComplete)==null||c.call(n,e))},a=>{e.getIsMounted()&&(e.setFetchError(a.message),e.setDataSet(void 0),e.setIsFetching(!1))})},$o=e=>{const[t,n]=s.useState(e.open);return zt(()=>{n(e.open)},[e.open]),[t,n]},Ho=e=>()=>e,Wo=e=>t=>{e(t)},Bo=({dataMutator:e})=>s.useCallback(t=>{if(!e)return t;let n={...t};return e&&(n=e(n)),n},[e]),zo=e=>()=>e,Uo=e=>t=>{e(t)},Qo=e=>()=>e,qo=e=>()=>e,Xo=e=>()=>e,Yo=e=>t=>{e(t)},Jo=e=>()=>e,Zo=e=>t=>{e(t)},ea=e=>()=>e,ta=e=>t=>{e(t)},na=e=>()=>e,ra=e=>t=>{e(t)};var oa="Expected a function",Lt=NaN,aa="[object Symbol]",sa=/^\s+|\s+$/g,ua=/^[-+]0x[0-9a-f]+$/i,la=/^0b[01]+$/i,ca=/^0o[0-7]+$/i,da=parseInt,ia=typeof tt=="object"&&tt&&tt.Object===Object&&tt,fa=typeof self=="object"&&self&&self.Object===Object&&self,ha=ia||fa||Function("return this")(),ga=Object.prototype,va=ga.toString,ma=Math.max,ya=Math.min,st=function(){return ha.Date.now()};function Sa(e,t,n){var r,o,a,u,l,c,d=0,i=!1,g=!1,m=!0;if(typeof e!="function")throw new TypeError(oa);t=Vt(t)||0,dt(n)&&(i=!!n.leading,g="maxWait"in n,a=g?ma(Vt(n.maxWait)||0,t):a,m="trailing"in n?!!n.trailing:m);function h(f){var w=r,A=o;return r=o=void 0,d=f,u=e.apply(A,w),u}function E(f){return d=f,l=setTimeout(p,t),i?h(f):u}function C(f){var w=f-c,A=f-d,U=t-w;return g?ya(U,a-A):U}function y(f){var w=f-c,A=f-d;return c===void 0||w>=t||w<0||g&&A>=a}function p(){var f=st();if(y(f))return R(f);l=setTimeout(p,C(f))}function R(f){return l=void 0,m&&r?h(f):(r=o=void 0,u)}function T(){l!==void 0&&clearTimeout(l),d=0,r=c=o=l=void 0}function j(){return l===void 0?u:R(st())}function L(){var f=st(),w=y(f);if(r=arguments,o=this,c=f,w){if(l===void 0)return E(c);if(g)return l=setTimeout(p,t),h(c)}return l===void 0&&(l=setTimeout(p,t)),u}return L.cancel=T,L.flush=j,L}function dt(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ba(e){return!!e&&typeof e=="object"}function Ca(e){return typeof e=="symbol"||ba(e)&&va.call(e)==aa}function Vt(e){if(typeof e=="number")return e;if(Ca(e))return Lt;if(dt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=dt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(sa,"");var n=la.test(e);return n||ca.test(e)?da(e.slice(2),n?2:8):ua.test(e)?Lt:+e}var pa=Sa;const xa=Cn(pa),Fa=(e,t)=>(n="",r)=>{const o=xa(e,t.getProps().debounce??0);r?o(n):e(n)},Gt=e=>!!(e&&typeof e=="object"&&e.value),Kt=(e,t)=>{const n=e[t.key],r=e[t.title];return{value:n,label:r}},mt=(e,t)=>{if(!e)return null;if(!it(e))return typeof e=="object"?Gt(e)?[e]:[Kt(e,t)]:[{value:e}];const n=[];for(const r of e)r&&(typeof r=="object"?Gt(r)?n.push(r):n.push(Kt(r,t)):n.push({value:r}));return n},Ra=({value:e},t)=>{const n=Ea(e??null,t),[r,o]=s.useState(n);return zt(()=>{o(n)},[n]),[r,o]},Ea=(e,t)=>s.useMemo(()=>mt(e,t),[t,e]),Ia=e=>()=>e??null,Na=(e,t)=>s.useCallback(n=>{e(mt(n,t))},[t,e]),Da=e=>t=>{const n=t??e;if(!n)return;if(!it(n))return[n.value];const r=[];for(const o of n)r.push(o.value);return r},Pt=(e,t,n)=>{const r={[n.key]:e.value,[n.title]:e.label},{idx:o,nodes:a}=cr(t,e.value,n);if(o<0||!(a!=null&&a[o]))return r;const u={...a[o]};return delete u[n.children],u},wa=(e,t)=>{const n=s.useRef(void 0),r=s.useRef(null),o=s.useRef(void 0);return(a,u)=>{const l=e.getDataSet(),c=e.getFieldNames(),d=a??l,i=u??t;if(n.current===d&&r.current===i)return o.current;if(n.current=d,r.current=i,!i){o.current=void 0;return}const g=[];if(!it(i))g.push(Pt(i,d,c));else for(const m of i){const h=Pt(m,d,c);h&&g.push(h)}return o.current=g,g}},Aa=(e,t)=>s.useCallback((n,r=!0)=>{var l;const o=e.getFieldNames(),a=(l=mt(n,o))==null?void 0:l[0];if(!a)return;const u=e.getValues();if(r){if(jt(u,a.value))return;t?e.setValues([...u??[],a]):e.setValues([a])}else{if(!jt(u,a.value))return;t?e.setValues((u==null?void 0:u.filter(c=>c.value!==a.value))??null):e.setValues([])}},[e,t]),jt=(e,t)=>{if(!e)return!1;for(const n of e)if(n.value===t)return!0;return!1},ka={view:"Просмотр",viewRecord:"Просмотр записи",create:"Создать",createRecord:"Создать запись",createGroup:"Создать группу",createRecordsGroup:"Создать группу записей",edit:"Редактировать",editGroup:"Редактировать группу",editRecord:"Редактировать запись",editRecordsGroup:"Редактировать группу записей",clone:"Клонировать",cloneGroup:"Клонировать группу",cloneRecord:"Клонировать запись",cloneRecordsGroup:"Клонировать группу записей",delete:"Удалить",deleteGroup:"Удалить группу",deleteRecord:"Удалить запись(и)",deleteRecordsGroup:"Удалить группу записей",select:"Выбрать",selectRecord:"Выбрать запись(и)",go:"Перейти",filter:"Фильтр",ok:"OK",cancel:"Отмена",tryAgainQt:"Попробовать еще раз?",deleteSelectedRecordQt:"Удалить выбранную запись?",error:"Ошибка",dataNotFound:"Данные не найдены"},Ta={view:"View",viewRecord:"View record",create:"Create",createRecord:"Create record",createGroup:"Create group",createRecordsGroup:"Create records group",edit:"Edit",editGroup:"Edit group",editRecord:"Edit record",editRecordsGroup:"Edit records group",clone:"Clone",cloneGroup:"Clone group",cloneRecord:"Clone record",cloneRecordsGroup:"Clone records group",delete:"Delete",deleteGroup:"Delete group",deleteRecord:"Delete record(s)",deleteRecordsGroup:"Delete records group(s)",select:"Select",selectRecord:"Select record(s)",go:"Go",filter:"Filter",ok:"OK",cancel:"Cancel",tryAgainQt:"Try again?",deleteSelectedRecordQt:"Delete selected record?",error:"Error",dataNotFound:"Data not found"},Oa={view:"查看",viewRecord:"查看记录",create:"创建",createRecord:"创建记录",createGroup:"创建组",createRecordsGroup:"创建记录组",edit:"编辑",editGroup:"编辑组",editRecord:"编辑记录",editRecordsGroup:"编辑记录组",clone:"克隆",cloneGroup:"克隆组",cloneRecord:"克隆记录",cloneRecordsGroup:"克隆记录组",delete:"删除",deleteGroup:"删除组",deleteRecord:"删除记录",deleteRecordsGroup:"删除记录组",select:"选择",selectRecord:"选择记录",go:"前往",filter:"过滤",ok:"确定",cancel:"取消",tryAgainQt:"再试一次",deleteSelectedRecordQt:"删除选定的记录",error:"错误",dataNotFound:"数据未找到"},Ma={ru:ka,en:Ta,cn:Oa},La=e=>Fn(e.language,Ma,e.translation),Va=({props:e,setProps:t})=>{var Y,_;const[n]=s.useState(e.apiRef??{}),[r]=s.useState(((Y=e.editFormProps)==null?void 0:Y.apiRef)??{}),[o]=s.useState(((_=e.editGroupFormProps)==null?void 0:_.apiRef)??{}),[a,u]=s.useState(!1),[l,c]=s.useState(!1),[d,i]=s.useState(),[g,m]=s.useState(!1),[h,E]=s.useState(0),[C,y]=$o(e),p=wt(e)(),R=Bo(e),[T,j]=Ra(e,p),[L,f,w,A]=dr(e.dataSet,p,R),[U,ee]=ir(e.expandedKeys,e.defaultExpandedKeys,e.defaultExpandAll,A),te=_o(n),ne={getId:kn(e.componentId??"treeSelect-"+Tn()),getProps:On(e),setProps:Mn(t),updateProps:Ln(e,t),getIsMounted:Vn(),getFieldNames:wt(e),getDataSet:fr(L),setDataSet:hr(f,e==null?void 0:e.onDataSetChanged),getValues:Ia(T),setValues:Na(j,p),isDataPlainList:gr(w),getEditFormApi:qo(r),getEditGroupFormApi:Qo(o),getSelectedKeys:Da(T),getSelectedNodes:wa(n,T),isNodeSelected:vr(n),selectNode:Aa(n,e.multiple),getActiveNodeKey:mr(n),getActiveNode:yr(n),getExpandedKeys:Sr(U),setExpandedKeys:br(ee),getExpandedNodes:Cr(n),isNodeExpanded:pr(n),expandNode:xr(n),collapseNode:Fr(n),toggleNode:Rr(n),expandParentNodes:Er(n),getNode:Ir(n),getNodes:Nr(n),getNextNodeKey:Dr(n),getPrevNodeKey:wr(n),getNextNode:Ar(n),getPrevNode:kr(n),getParentNode:Tr(n),addNode:Or(n),updateNode:Mr(n),removeNode:Lr(n),moveNode:Vr(n),ensureNodeVisible:Gr(n),t:La(e),treeSelectRef:s.useRef(null),getButtonsApi:Rn(),getIsReady:zo(a),setIsReady:Uo(u),getIsOpen:Ho(C),setIsOpen:Wo(y),getIsFetching:Xo(l),setIsFetching:Yo(c),getFetchError:Jo(d),setFetchError:Zo(i),getIsAllFetched:ea(g),setIsAllFetched:ta(m),getMinSymbols:na(h),setMinSymbols:ra(E),fetchData:Fa(te,n)};return Object.assign(n,ne),n},Ga=e=>{const[t,n]=Gn(e),r=Ka(t),o=Va({props:t,setProps:n});return s.useEffect(()=>{var a;(!t.fetchMode||t.fetchMode==="onLoad")&&!t.minSearchLength?o.fetchData():o.getIsReady()||(o.setIsReady(!0),(a=t==null?void 0:t.onReady)==null||a.call(t))},[o,t,t.fetchMode,t.minSearchLength]),v.jsx(go,{children:v.jsx(wo,{api:o,allProps:t,treeSelectProps:r})})},Ka=e=>s.useMemo(()=>Wt(e,{apiRef:!0,componentId:!0,dataMutator:!0,readOnly:!0,value:!0,filterTreeNode:!0,dataSet:!0,fetchMode:!0,noCacheFetchedData:!0,minSearchLength:!0,debounce:!0,editFormProps:!0,nodeDeleteMessage:!0,confirmDelete:!0,buttons:!0,onReady:!0,onDataFetch:!0,onDataFetchSuccess:!0,onDataFetchError:!0,onDataFetchComplete:!0,onDelete:!0,fieldNames:!0,titleRender:!0,selectedRender:!0,editGroupFormProps:!0,defaultExpandAll:!0,defaultExpandedKeys:!0,expandedKeys:!0,buttonsRowStyle:!0,buttonsRowWrapperStyle:!0,buttonsIconsOnly:!0,buttonsPosition:!0,buttonsSize:!0,headerLabel:!0,language:!0,translation:!0,selectNewNode:!0,groupsMode:!0,onChange:!0,onGetLabelCallback:!0,onDataSetChanged:!0})[1],[e]),Pa=(e,t)=>s.useCallback((n,r,o)=>{var a;if(e.isReady()){switch(t.valueType){case void 0:case"node":t.multiple?e.setValue(o??null):e.setValue(o!=null&&o.length?o[0]:null);break;case"labeledValue":e.setValue(n??null);break;case"key":t.multiple?e.setValue(r??null):e.setValue(r!=null&&r.length?r[0]:null);break}e.setDirty(!0)}(a=t.onChange)==null||a.call(t,n,r,o,e)},[e,t]),ja=e=>s.useCallback(()=>{e.setTouched(!0)},[e]),_a=e=>s.useCallback(()=>{var n;e.setDirty(!0),e.setTouched(!0);const t=e.getProps();(n=t.onClear)==null||n.call(t)},[e]),$a=(e,t)=>s.useCallback(n=>{var r;return(r=t.onDataSetChanged)==null?void 0:r.call(t,n,e)},[e,t]),Ha=e=>s.useMemo(()=>Wt(e,{autoFocus:!0,autoHeightResize:!0,component:!0,dependsOn:!0,disabled:!0,helpClass:!0,hidden:!0,inlineGroup:!0,label:!0,nonEditable:!0,onDirtyStateChanged:!0,onDisabledStateChanged:!0,onErrorChanged:!0,onHiddenStateChanged:!0,onLabelChanged:!0,onReadOnlyStateChanged:!0,onReady:!0,onReadyStateChanged:!0,onTouchedStateChanged:!0,onValidated:!0,onValueChanged:!0,placeholder:!0,readOnly:!0,requiredMark:!0,rowStyle:!0,rules:!0,style:!0,tab:!0,tooltip:!0,value:!0,width:!0,valueType:!0,onDataSetChanged:!0,onChange:!0,dataSet:!0,onDataFetch:!0})[1],[e]),Wa=({field:e})=>{s.useSyncExternalStore(e.subscribe.bind(e),e.getSnapshot.bind(e));const[t]=s.useState({}),n=e.getProps(),r=e.getValue()??null,o=ja(e),a=_a(e),u=Ba(e,n.dataSet),l=Pa(e,n),c=$a(e,n),d=za(e,n),i=Ua(e,n);s.useEffect(()=>{e.setReady(!0)},[e]);const m={...{width:e.getWidth()??"100%"},...n.style},h=Ha(n);return v.jsx(Ga,{apiRef:t,style:m,...h,dataSet:u,autoFocus:n.autoFocus,disabled:e.isDisabled(),readOnly:e.isReadOnly(),value:r,placeholder:n.placeholder??"Choose",onChange:l,onDataSetChanged:c,onDataFetch:d,onReady:i,onClear:a,onBlur:o})},Ba=(e,t)=>s.useMemo(()=>typeof t!="function"?t:()=>t(e),[t,e]),za=(e,t)=>s.useCallback((n,r)=>{var o;return(o=t.onDataFetch)==null?void 0:o.call(t,n,r,e)},[e,t]),Ua=(e,t)=>s.useCallback(()=>{var n;return(n=t.onReady)==null?void 0:n.call(t,e)},[e,t]);class rs extends En{render(){return v.jsx(Wa,{field:this})}}export{rs as T};
