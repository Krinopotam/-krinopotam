import{r as e,j as t,W as s}from"./index-CQvKQJ1H.js";import{C as i,B as r}from"./baseField-gHIWNuTG.js";import{F as l}from"./isArray-1gBtd_za.js";const o=({field:r})=>{e.useSyncExternalStore(r.subscribe.bind(r),r.getSnapshot.bind(r)),e.useEffect((()=>{r.setReady(!0)}),[r]);const o=e.useRef(null),a=r.getModel().getFormProps(),h=r.getProps(),u=r.getRootFields();let c;for(const e in u){const t=u[e];t.isHidden()||(c||(c=t))}const p=r.isHidden()||!r.hasVisibleChildren();let f="";"horizontal"===a.layout&&(f=null==c?void 0:c.getLabel());const g={width:r.getWidth(),margin:0,marginBottom:0};h.autoHeightResize&&(g.height="100%");const m={...g,...h.style},F={display:"flex",flexDirection:"row",flexWrap:"nowrap",gap:"24px",alignItems:"top",width:"100%"};h.autoHeightResize&&(F.height="100%");const b=n(u,24);return t.jsx(i,{nodeRef:o,in:!p,timeout:300,classNames:"zoom",unmountOnExit:!0,children:t.jsx("div",{ref:o,className:"dform-field-container",children:t.jsx(l.Item,{label:f,style:m,className:h.className,children:t.jsx("div",{style:F,children:Object.keys(u).map((e=>{const i=u[e],l={flex:i.getProps().width||i.noGrowWidth()?"0 0 auto":"1 1 auto",width:d(i,b)},o="horizontal"===a.layout&&i===c?null:void 0;return t.jsx(s.Fragment,{children:i.renderField({altLabel:o,fieldContainerStyle:l})},`item_${r.getName()}_subitem_${i.getName()}`)}))})})})})},n=(e,t)=>{const s=Object.keys(e).length;return s>0?(s-1)*t/s:0},d=(e,t)=>{const s=e.getProps();if(s.width)return a(s.width)?s.width+"px":`calc(${s.width} - ${t}px)`},a=e=>"number"==typeof e||e.length>0&&!isNaN(Number(e[e.length-1]));class InlineGroupField extends r{initChildrenFields(){const e=this.getProps(),t=e.fieldsProps;return e.fieldsProps?([this.fieldsMap,this.rootFields]=this.getModel().prepareFieldCollection(t,this),[this.fieldsMap,this.rootFields]):[{},{}]}render(){return t.jsx(o,{field:this})}renderField(){return this.render()}getFieldsMap(){return this.fieldsMap}getRootFields(){return this.rootFields}getValue(){}setValue(){}canHaveValue(){return!1}managesChildWidth(){return!0}setDisabled(e,t,s){if(this.isDisabled()!==e){for(const s in this.rootFields){this.rootFields[s].setDisabled(e,t,!0)}super.setDisabled(e,t,s)}}setReadOnly(e,t,s){if(this.isReadOnly()!==e){for(const s in this.rootFields){this.rootFields[s].setReadOnly(e,t,!0)}super.setReadOnly(e,t,s)}}}export{InlineGroupField as I};
