import{j as h,b4 as T,r as c,c as Y}from"./index-BRcPwwbH.js";import{i as S,G as D,j as L,k as N,H as X}from"./messageBox-Dgk4xpFW.js";const A=()=>{const e=navigator.userAgent||navigator.vendor||window.opera,t=["android","webos","iphone","ipad","ipod","blackberry","ieMobile","opera mini","avantgo","bada","blazer","elaine","fennec","hipTop","iris","kindle","lge","maemo","midp","mmp","symbian","pocket","webOs","nexus","compal"];return new RegExp(t.join("|"),"i").test(e)},{useToken:I}=T,G=({onMouseResize:e,resizable:t,children:n,style:s,colorType:a})=>{const{token:l}=I(),f=P(l,a);return A()&&(t=!1),h.jsxs(h.Fragment,{children:[n?h.jsx("div",{style:{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:f,...s},children:n}):null,t?h.jsx(O,{onMouseDown:e}):null]})},O=e=>h.jsx("div",{className:"resize-handle",...e,children:h.jsx("div",{className:"resize-handle-inner"})}),P=(e,t)=>{let n=e.colorFillSecondary;return t==="info"?n=e.colorInfoHover:t==="success"?n=e.colorSuccessHover:t==="warning"?n=e.colorWarningHover:t==="danger"&&(n=e.colorErrorHover),n};/**
 * @Modal
 * @version 0.0.0.3
 * @link omegatester@gmail.com
 * @author Maksim Zaytsev
 * @license MIT
 */const U=(e,t)=>{c.useEffect(()=>(t?S.pushToStack(e):S.removeFromStack(e),()=>{S.removeFromStack(e)}),[t,e])},q=(e,t,n)=>{const[s,a]=c.useState(!1),[l,f]=c.useState({initWidth:0,initHeight:0,mouseDownX:0,mouseDownY:0,element:void 0}),w=c.useCallback(r=>{if(r.preventDefault(),!(r.target instanceof HTMLElement))return;const i=r.target.closest(".custom-antd-modal .ant-modal");if(!i)return;const o=W("width",t.width,i)||i.getBoundingClientRect().width,d=W("height",t.height,i)||i.getBoundingClientRect().height;f({initWidth:o,initHeight:d,mouseDownX:r.clientX,mouseDownY:r.clientY,element:i}),a(!0)},[t.height,t.width]);return c.useEffect(()=>{const r=i=>{if(s){const{initWidth:o,mouseDownX:d,initHeight:g,mouseDownY:m}=l,p=i.clientX-d,u=i.clientY-m,b=o+p*2,v=g+u*(e.centered?2:1);return n({width:b,height:v})}};return window.addEventListener("mousemove",r,{passive:!0}),()=>window.removeEventListener("mousemove",r)},[l,s,n,e.centered]),c.useEffect(()=>{const r=()=>{var i;if(s){const o=l.element,d=(i=l.element)==null?void 0:i.querySelector(".custom-antd-modal .ant-modal-content");if(!o||!d)return;let g=o.getBoundingClientRect().width,m=o.getBoundingClientRect().height;const p=d.getBoundingClientRect().width,u=d.getBoundingClientRect().height;g<p&&(g=p),m<u&&(m=u),n({width:g,height:m})}a(!1)};return window.addEventListener("mouseup",r),()=>window.removeEventListener("mouseup",r)},[s,l.element,a,n]),w},W=(e,t,n)=>{if(!t)return 0;if(typeof t=="number")return t;const s=RegExp(/^(\d+(?:\.\d+)?)(px|%)$/).exec(t);if(!s)return 0;const a=parseFloat(s[1]),l=s[2];if(l==="px")return a;if(l==="%"&&(n!=null&&n.parentElement)){const w=n.parentElement.getBoundingClientRect()[e];return a/100*w}return 0},ne=e=>{const{modalId:t,resizable:n=!0,isDraggable:s=!0,colorType:a,headerIcon:l,maxHeight:f,minHeight:w,minWidth:r,maxWidth:i,...o}=e,[d]=c.useState(t??"modal-"+D());U(d,!!o.open);const g=c.useRef({}),m=c.useRef();c.useEffect(()=>{o.open&&(m.current=document.activeElement)},[o.open]);const p=c.useCallback(x=>{var y,C,M,E;x?(C=(y=g.current)==null?void 0:y.onParentComponentRendered)==null||C.call(y):(M=m.current)==null||M.focus(),(E=o.onAfterOpenChange)==null||E.call(o,x)},[o]),[u,b]=c.useState({width:o.width??void 0,height:o.height??void 0}),v=q(o,u,b),R=24,j=z({props:o,height:u.height,minWidth:r,maxWidth:i,minHeight:w,maxHeight:f,baseMinWidth:250,baseMinHeight:130}),$=V(o,R),k=J(o,R),B=K(o),F=Q(o,R),[H]=c.useState("draggable-"+D());return h.jsx(L,{...o,width:u.width,height:u.height,style:j,styles:{body:k,footer:{margin:0},content:B},rootClassName:Y("custom-antd-modal",o.rootClassName),modalRender:x=>N(x,H,g,s),title:h.jsx(X,{draggableId:H,icon:l,title:o.title,colorType:a,style:$}),footer:h.jsx(G,{onMouseResize:v,resizable:n,style:F,colorType:a,children:o.footer}),afterOpenChange:p})},z=e=>({height:e.height,minWidth:e.minWidth??e.baseMinWidth,maxWidth:e.maxWidth,minHeight:e.minHeight??e.baseMinHeight,maxHeight:e.maxHeight,...e.props.style}),J=(e,t)=>{var s;return{padding:`0 ${t}px 0 ${t}px`,...(s=e.styles)==null?void 0:s.body,overflowY:e.notScrollable?"hidden":"auto"}},K=e=>{var n;return{...(n=e.styles)==null?void 0:n.content}},Q=(e,t)=>{var n;return{padding:`20px ${t}px 20px ${t}px`,...(n=e.styles)==null?void 0:n.footer}},V=(e,t)=>{var s;const n=e.closable===!1||e.closeIcon===null?0:14;return{padding:`3px ${t+n}px 3px ${t}px`,...(s=e.styles)==null?void 0:s.header}};export{ne as M};
