const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BNjet-3W.js","assets/default-highlight-DdW2S8iS.js","assets/index-BYTxC3xS.js"])))=>i.map(i=>d[i]);
import{r as o,j as e,D as n,_ as r}from"./index-BYTxC3xS.js";import{b as t}from"./buttonsRow-JL3h8SZf.js";import{D as s}from"./dFormModal-np82chGo.js";import{I as i}from"./inputField-Bqpci0ar.js";import{F as a}from"./buttonsProps-CZkAvbAa.js";import{P as m,C as d}from"./pageLayout-CeU2Cl8T.js";import{d as l,c as p}from"./darcula-BqMdvqtY.js";import"./isArray-ByIOrY18.js";import"./messageBox-DGOEHkOQ.js";import"./index-CdDoHZh8.js";import"./modal-D3_G00Vo.js";import"./baseField-uHyjuBop.js";import"./index-OmxKuYto.js";import"./SearchOutlined-C5H0yATP.js";const c={},u={formId:"Test form",apiRef:c,confirmChanges:!0,fieldsProps:{position:{component:i,label:"Должность"},department:{component:i,label:"Подразделение"}},onDataFetch:()=>new Promise(((o,e)=>{setTimeout((()=>{Math.random()<.5?e({message:"Ошибка загрузки данных",code:400}):o({data:{position:"Директор",department:"Главная дирекция"}})}),3e3)})),buttons:a(c)},f=()=>{const n=o.useCallback((()=>{c.open("update")}),[]);return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Example of loading data when opening a form"}),e.jsx("p",{children:"To ensure loading, you need to pass a function to the onDataFetch callback that returns a Promise, which, if the server responds successfully (resolve), returns an object of the form:"}),e.jsx("code",{children:'data:{имя_поля1: "значение", имя_поля2: "значение 2"...}'}),e.jsx("p",{children:"and if there is an error (reject)"}),e.jsx("code",{children:"error:{message: string, code: number}"}),e.jsx("p",{children:"For example, the probability of failure during loading is 50%"}),e.jsx("p",{}),e.jsxs("div",{style:{maxWidth:500},children:[e.jsx(t,{onClick:n,children:"Open form"}),e.jsx(s,{...u})]})]})},h=o.lazy((()=>r((()=>import("./index-BNjet-3W.js").then((o=>o.dw))),__vite__mapDeps([0,1,2])).then((o=>({default:o.Prism}))))),j=r=>e.jsxs(m,{children:[e.jsx(f,{}),e.jsx(n,{}),e.jsx("div",{children:e.jsx(d,{items:[{key:1,label:"Show source",children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading source..."}),children:e.jsx(h,{language:"tsx",style:r.darkMode?l:p,showLineNumbers:!0,children:"\nimport React, {useCallback} from 'react';\nimport {Button} from @krinopotam/ui-kit/button';\nimport {IDFormModalApi, DFormModal, IDFormModalProps} from @krinopotam/ui-kit/dFormModal';\nimport {InputField} from @krinopotam/ui-kit/dForm/fields/input/inputField\";\nimport {FormLayoutSwitch} from \"../../../common/buttonsProps\";\nconst formApi = {} as IDFormModalApi;\nconst formProps: IDFormModalProps = {\n    formId: 'Test form',\n    apiRef: formApi,\n    confirmChanges: true,\n    fieldsProps: {\n        position: {component: InputField, label: 'Должность'},\n        department: {component: InputField, label: 'Подразделение'},\n    },\n    onDataFetch: () => {\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                if (Math.random() < 0.5) reject({message: 'Ошибка загрузки данных', code: 400});\n                else resolve({data: {position: 'Директор', department: 'Главная дирекция'}});\n            }, 3000);\n        });\n    },\n    buttons: FormLayoutSwitch(formApi),\n}\nexport const FormFetching = (): React.JSX.Element => {\n    const onClick = useCallback(() => {\n        formApi.open('update');\n    }, []);\n    return (\n        <>\n            <div style={{maxWidth: 500}}>\n                <Button onClick={onClick}>Open form</Button>\n                <DFormModal {...formProps} />\n            </div>\n        </>\n    );\n};\n"})})}]})})]});export{j as Page57b15f877dba4f9c96f66ccfaecd5236,j as default};
