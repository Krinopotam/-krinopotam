const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Ck5bJKlb.js","assets/default-highlight-D85JGHgv.js","assets/index-CAK7O9l6.js"])))=>i.map(i=>d[i]);
import{W as e,j as o,S as n,a as t,D as r,r as i,_ as s}from"./index-CAK7O9l6.js";import{D as a}from"./isArray-Bxga0gLP.js";import{I as l}from"./inputField-Wpdm7b6O.js";import{P as d,C as m}from"./pageLayout-Cp-Vtr5E.js";import{d as c,c as p}from"./darcula-BqMdvqtY.js";import"./buttonsRow-B4oNgxRU.js";import"./messageBox-BplIwBs3.js";import"./index-CnihH4Wh.js";import"./baseField-VcJHUSVQ.js";import"./index-DzBz7Ssv.js";import"./SearchOutlined-Dka42DAS.js";const h=()=>{const[r,i]=e.useState(!1),s=u(r);return o.jsxs("div",{children:[o.jsx("h1",{children:"Example of loading data when opening a form"}),o.jsx("p",{children:"To ensure loading, you need to pass a function to the onDataFetch callback that returns a Promise, which, if the server responds successfully (resolve), returns an object like:"}),o.jsx("code",{children:'data:{field_name1: "value", field_name2: "value 2"...}'}),o.jsx("p",{children:"in case of error (reject)"}),o.jsx("code",{children:"error:{message: string, code: number}"}),o.jsx("p",{children:"For example, the probability of failure during loading is 50%"}),o.jsx("p",{}),o.jsxs("div",{style:{maxWidth:500},children:[o.jsx(n,{style:{marginBottom:30},children:o.jsx(t,{checkedChildren:"Horizontal",unCheckedChildren:"Vertical",onChange:()=>i((e=>!e))})}),o.jsx(a,{...s})]})]})},u=e=>({formId:"Test form",layout:e?"horizontal":"vertical",formMode:"update",confirmChanges:!0,fieldsProps:{position:{component:l,label:"Position"},department:{component:l,label:"Department"}},onDataFetch:()=>new Promise(((e,o)=>{setTimeout((()=>{Math.random()<.5?o({message:"Error loading data",code:400}):e({data:{position:"Chief",department:"Sales department"}})}),3e3)})),buttons:{ok:{position:"right"}}}),f=i.lazy((()=>s((()=>import("./index-Ck5bJKlb.js").then((e=>e.dw))),__vite__mapDeps([0,1,2])).then((e=>({default:e.Prism}))))),j=e=>o.jsxs(d,{children:[o.jsx(h,{}),o.jsx(r,{}),o.jsx("div",{children:o.jsx(m,{items:[{key:1,label:"Show source",children:o.jsx(i.Suspense,{fallback:o.jsx("div",{children:"Loading source..."}),children:o.jsx(f,{language:"tsx",style:e.darkMode?c:p,showLineNumbers:!0,children:"\nimport React from 'react';\nimport {DForm, IDFormProps} from @krinopotam/ui-kit/dForm';\nimport {InputField} from @krinopotam/ui-kit/dForm/fields/input/inputField';\nimport {Space, Switch} from 'antd';\nexport const Example = (): React.JSX.Element => {\n    const [horizontal, setHorizontal] = React.useState(false);\n    const formProps = useFormProps(horizontal);\n    return (\n        <div>\n            <div style={{maxWidth: 500}}>\n                <Space style={{marginBottom: 30}}>\n                    <Switch checkedChildren={'Horizontal'} unCheckedChildren={'Vertical'} onChange={() => setHorizontal(cur => !cur)} />\n                </Space>\n                <DForm {...formProps} />\n            </div>\n        </div>\n    );\n};\nconst useFormProps = (horizontal: boolean) => {\n    return {\n        formId: 'Test form',\n        layout: horizontal ? 'horizontal' : 'vertical',\n        formMode: 'update',\n        confirmChanges: true,\n        fieldsProps: {\n            position: {component: InputField, label: 'Position'},\n            department: {component: InputField, label: 'Department'},\n        },\n        onDataFetch: () => {\n            return new Promise((resolve, reject) => {\n                setTimeout(() => {\n                    if (Math.random() < 0.5) reject({message: 'Error loading data', code: 400});\n                    else resolve({data: {position: 'Chief', department: 'Sales department'}});\n                }, 3000);\n            });\n        },\n        buttons: {ok: {position: 'right'}},\n    } satisfies IDFormProps;\n};\n"})})}]})})]});export{j as Page523a4bad977c4ab8a234cd803fb7dff0,j as default};
