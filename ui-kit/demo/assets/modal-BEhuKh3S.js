import{j as h,t as B,r as c,f as F}from"./index-DLyGJszd.js";import{M as Y,a as I,H as L}from"./modal-CjmvIDqE.js";import{t as N}from"./mergeButtons-OmCcH4N9.js";const T=()=>{const e=navigator.userAgent||navigator.vendor||window.opera,t=["android","webos","iphone","ipad","ipod","blackberry","ieMobile","opera mini","avantgo","bada","blazer","elaine","fennec","hipTop","iris","kindle","lge","maemo","midp","mmp","symbian","pocket","webOs","nexus","compal"];return new RegExp(t.join("|"),"i").test(e)},{useToken:X}=B,k=({onMouseResize:e,resizable:t,children:o,style:s,colorType:l})=>{const{token:r}=X(),m=A(r,l);return T()&&(t=!1),h.jsxs(h.Fragment,{children:[o?h.jsx("div",{style:{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:m,...s},children:o}):null,t?h.jsx(O,{onMouseDown:e}):null]})},O=e=>h.jsx("div",{className:"resize-handle",...e,children:h.jsx("div",{className:"resize-handle-inner"})}),A=(e,t)=>{let o=e.colorFillSecondary;return t==="info"?o=e.colorInfoHover:t==="success"?o=e.colorSuccessHover:t==="warning"?o=e.colorWarningHover:t==="danger"&&(o=e.colorErrorHover),o},P=(e,t,o)=>{const[s,l]=c.useState(!1),[r,m]=c.useState({initWidth:0,initHeight:0,mouseDownX:0,mouseDownY:0,element:void 0}),w=c.useCallback(i=>{if(i.preventDefault(),!(i.target instanceof HTMLElement))return;const n=i.target.closest(".custom-antd-modal .ant-modal");if(!n)return;const a=S("width",t.width,n)||n.getBoundingClientRect().width,d=S("height",t.height,n)||n.getBoundingClientRect().height;m({initWidth:a,initHeight:d,mouseDownX:i.clientX,mouseDownY:i.clientY,element:n}),l(!0)},[t.height,t.width]);return c.useEffect(()=>{const i=n=>{if(s){const{initWidth:a,mouseDownX:d,initHeight:g,mouseDownY:u}=r,f=n.clientX-d,p=n.clientY-u,x=a+f*2,v=g+p*(e.centered?2:1);return o({width:x,height:v})}};return window.addEventListener("mousemove",i,{passive:!0}),()=>window.removeEventListener("mousemove",i)},[r,s,o,e.centered]),c.useEffect(()=>{const i=()=>{var n;if(s){const a=r.element,d=(n=r.element)==null?void 0:n.querySelector(".custom-antd-modal .ant-modal-content");if(!a||!d)return;let g=a.getBoundingClientRect().width,u=a.getBoundingClientRect().height;const f=d.getBoundingClientRect().width,p=d.getBoundingClientRect().height;g<f&&(g=f),u<p&&(u=p),o({width:g,height:u})}l(!1)};return window.addEventListener("mouseup",i),()=>window.removeEventListener("mouseup",i)},[s,r.element,l,o]),w},S=(e,t,o)=>{if(!t)return 0;if(typeof t=="number")return t;const s=RegExp(/^(\d+(?:\.\d+)?)(px|%)$/).exec(t);if(!s)return 0;const l=parseFloat(s[1]),r=s[2];if(r==="px")return l;if(r==="%"&&(o!=null&&o.parentElement)){const w=o.parentElement.getBoundingClientRect()[e];return l/100*w}return 0},_=e=>{const{resizable:t=!0,isDraggable:o=!0,colorType:s,headerIcon:l,maxHeight:r,minHeight:m,minWidth:w,maxWidth:i,...n}=e,a=c.useRef({}),d=c.useRef();c.useEffect(()=>{n.open&&(d.current=document.activeElement)},[n.open]);const g=c.useCallback(y=>{var b,H,C,M;y?(H=(b=a.current)==null?void 0:b.onParentComponentRendered)==null||H.call(b):(C=d.current)==null||C.focus(),(M=n.onAfterOpenChange)==null||M.call(n,y)},[n]),[u,f]=c.useState({width:n.width??void 0,height:n.height??void 0}),p=P(n,u,f),x=24,E=q({props:n,height:u.height,minWidth:w,maxWidth:i,minHeight:m,maxHeight:r,baseMinWidth:250,baseMinHeight:130}),W=J(n,x),D=G(n,x),j=U(n),$=z(n,x),[R]=c.useState("draggable-"+N());return h.jsx(Y,{...n,width:u.width,height:u.height,style:E,styles:{body:D,footer:{margin:0},content:j},rootClassName:F("custom-antd-modal",n.rootClassName),modalRender:y=>I(y,R,a,o),title:h.jsx(L,{draggableId:R,icon:l,title:n.title,colorType:s,style:W}),footer:h.jsx(k,{onMouseResize:p,resizable:t,style:$,colorType:s,children:n.footer}),afterOpenChange:g})},q=e=>({height:e.height,minWidth:e.minWidth??e.baseMinWidth,maxWidth:e.maxWidth,minHeight:e.minHeight??e.baseMinHeight,maxHeight:e.maxHeight,...e.props.style}),G=(e,t)=>{var s;return{padding:`0 ${t}px 0 ${t}px`,...(s=e.styles)==null?void 0:s.body,overflowY:e.notScrollable?"hidden":"auto"}},U=e=>{var o;return{...(o=e.styles)==null?void 0:o.content}},z=(e,t)=>{var o;return{padding:`20px ${t}px 20px ${t}px`,...(o=e.styles)==null?void 0:o.footer}},J=(e,t)=>{var s;const o=e.closable===!1||e.closeIcon===null?0:14;return{padding:`3px ${t+o}px 3px ${t}px`,...(s=e.styles)==null?void 0:s.header}};export{_ as M};
