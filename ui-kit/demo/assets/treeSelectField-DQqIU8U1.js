import{r as a,k as z,n as pe,q as on,d as _t,w as tt,h as an,bs as sn,e as Se,K as _e,i as $t,u as xt,v as un,x as ln,y as Pt,z as It,C as cn,aV as dn,m as Nt,f as Rt,F as fn,o as hn,G as vn,l as gn,aR as mn,Y as wt,j as m,t as pn,c as et,g as Sn}from"./index-C4KfxKt0.js";import{a as dt,u as yn,b as Cn,B as bn}from"./dForm-DkkmO2de.js";import{D as Et,s as Bt}from"./dFormModal-NILuEzR7.js";import{j as xn,S as In,h as Nn,k as Rn,f as wn,o as Dt,u as En,t as Dn,c as Fn,d as kn,e as An,b as Tn,P as On}from"./modal-B9kdAnYE.js";import{m as ut,j as Vn,T as Ln,n as Mn,p as Gn,q as Kn,S as jn,o as _n}from"./defaultButtonsProps-DB_b1JyB.js";import{u as $n,a as Pn,b as Bn,c as Hn,d as Wn,e as zn,f as Un,n as Ht,g as Qn,h as Ft,i as qn,j as Xn,k as Yn,l as Jn,m as Zn,o as er,p as tr,q as nr,r as rr,s as or,t as ar,v as sr,w as ur,x as lr,y as cr,z as ir,A as dr,B as fr,C as hr,D as vr,E as gr,F as mr,G as pr,H as Sr,I as yr,J as Cr,K as br,L as xr,M as Ir,N as Nr}from"./useApiGetGroupsOnly-Di3cbyaq.js";import{c as Rr,d as wr,B as Er,u as Dr,b as Fr,D as kr,m as Ar}from"./useShowArrow-Bin-bzmW.js";import{j as Tr,k as Or,g as Vr}from"./index-kYmYzKiJ.js";import{u as Lr}from"./useIcons-Dh6q2bL1.js";const Mr=function(e){var t=a.useRef({valueLabels:new Map});return a.useMemo(function(){var n=t.current.valueLabels,o=new Map,r=e.map(function(s){var u,l=s.value,c=(u=s.label)!==null&&u!==void 0?u:n.get(l);return o.set(l,c),z(z({},s),{},{label:c})});return t.current.valueLabels=o,[r]},[e])},Gr=function(e,t,n,o){return a.useMemo(function(){var r=e.map(function(c){var d=c.value;return d}),s=t.map(function(c){var d=c.value;return d}),u=r.filter(function(c){return!o[c]});if(n){var l=ut(r,!0,o);r=l.checkedKeys,s=l.halfCheckedKeys}return[Array.from(new Set([].concat(pe(u),pe(r)))),s]},[e,t,n,o])};function Kr(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}function jr(e){var t=e||{},n=t.label,o=t.value,r=t.children,s=o||"value";return{_title:n?[n]:["title","label"],value:s,key:s,children:r||"children"}}function lt(e){return!e||e.disabled||e.disableCheckbox||e.checkable===!1}function _r(e,t){var n=[];function o(r){r.forEach(function(s){var u=s[t.children];u&&(n.push(s[t.value]),o(u))})}return o(e),n}function kt(e){return e==null}const $r=function(e,t){return a.useMemo(function(){var n=Vn(e,{fieldNames:t,initWrapper:function(r){return z(z({},r),{},{valueEntities:new Map})},processEntity:function(r,s){var u=r.node[t.value];s.valueEntities.set(u,r)}});return n},[e,t])};var ft=function(){return null},Pr=["children","value"];function Wt(e){return on(e).map(function(t){if(!a.isValidElement(t)||!t.type)return null;var n=t,o=n.key,r=n.props,s=r.children,u=r.value,l=_t(r,Pr),c=z({key:o,value:u},l),d=Wt(s);return d.length&&(c.children=d),c}).filter(function(t){return t})}function ct(e){if(!e)return e;var t=z({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return tt(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function Br(e,t,n,o,r,s){var u=null,l=null;function c(){function d(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return i.map(function(h,R){var p="".concat(v,"-").concat(R),S=h[s.value],y=n.includes(S),A=d(h[s.children]||[],p,y),I=a.createElement(ft,h,A.map(function(V){return V.node}));if(t===S&&(u=I),y){var _={pos:p,node:I,children:A};return g||l.push(_),_}return null}).filter(function(h){return h})}l||(l=[],d(o),l.sort(function(i,v){var g=i.node.props.value,h=v.node.props.value,R=n.indexOf(g),p=n.indexOf(h);return R-p}))}Object.defineProperty(e,"triggerNode",{get:function(){return tt(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),c(),u}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return tt(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),c(),r?l:l.map(function(i){var v=i.node;return v})}})}const Hr=function(e,t,n){var o=n.treeNodeFilterProp,r=n.filterTreeNode,s=n.fieldNames,u=s.children;return a.useMemo(function(){if(!t||r===!1)return e;var l;if(typeof r=="function")l=r;else{var c=t.toUpperCase();l=function(v,g){var h=g[o];return String(h).toUpperCase().includes(c)}}function d(i){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return i.reduce(function(g,h){var R=h[u],p=v||l(t,ct(h)),S=d(R||[],p);return(p||S.length)&&g.push(z(z({},h),{},an({isLeaf:void 0},u,S))),g},[])}return d(e)},[e,t,u,o,r])};function At(e){var t=a.useRef();t.current=e;var n=a.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}function Wr(e,t){var n=t.id,o=t.pId,r=t.rootPId,s={},u=[],l=e.map(function(c){var d=z({},c),i=d[n];return s[i]=d,d.key=d.key||i,d});return l.forEach(function(c){var d=c[o],i=s[d];i&&(i.children=i.children||[],i.children.push(c)),(d===r||!i&&r===null)&&u.push(c)}),u}function zr(e,t,n){return a.useMemo(function(){return e?n?Wr(e,z({id:"id",pId:"pId",rootPId:null},n!==!0?n:{})):e:Wt(t)},[t,n,e])}var zt=a.createContext(null),ht=a.createContext(null),Ur={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Qr=function(t,n){var o=Rr(),r=o.prefixCls,s=o.multiple,u=o.searchValue,l=o.toggleOpen,c=o.open,d=o.notFoundContent,i=a.useContext(ht),v=i.virtual,g=i.listHeight,h=i.listItemHeight,R=i.listItemScrollOffset,p=i.treeData,S=i.fieldNames,y=i.onSelect,A=i.dropdownMatchSelectWidth,I=i.treeExpandAction,_=i.treeTitleRender,V=i.onPopupScroll,f=a.useContext(zt),F=f.checkable,k=f.checkedKeys,U=f.halfCheckedKeys,ee=f.treeExpandedKeys,te=f.treeDefaultExpandAll,ne=f.treeDefaultExpandedKeys,Y=f.onTreeExpand,$=f.treeIcon,Ae=f.showTreeIcon,ye=f.switcherIcon,Te=f.treeLine,re=f.treeNodeFilterProp,le=f.loadData,Q=f.treeLoadedKeys,Oe=f.treeMotion,Ve=f.onTreeLoad,Le=f.keyEntities,J=a.useRef(),O=sn(function(){return p},[c,p],function(T,C){return C[0]&&T[1]!==C[1]}),Ce=a.useState(null),P=Se(Ce,2),ce=P[0],ie=P[1],G=Le[ce],de=a.useMemo(function(){return F?{checked:k,halfChecked:U}:null},[F,k,U]);a.useEffect(function(){if(c&&!s&&k.length){var T;(T=J.current)===null||T===void 0||T.scrollTo({key:k[0]}),ie(k[0])}},[c]);var be=String(u).toLowerCase(),xe=function(C){return be?String(C[re]).toLowerCase().includes(be):!1},Ie=a.useState(ne),B=Se(Ie,2),Ne=B[0],$e=B[1],Pe=a.useState(null),q=Se(Pe,2),oe=q[0],Re=q[1],H=a.useMemo(function(){return ee?pe(ee):u?oe:Ne},[Ne,oe,ee,u]);a.useEffect(function(){u&&Re(_r(p,S))},[u]);var Me=function(C){$e(C),Re(C),Y&&Y(C)},we=function(C){C.preventDefault()},X=function(C,fe){var W=fe.node;F&&lt(W)||(y(W.key,{selected:!k.includes(W.key)}),s||l(!1))};if(a.useImperativeHandle(n,function(){var T;return{scrollTo:(T=J.current)===null||T===void 0?void 0:T.scrollTo,onKeyDown:function(fe){var W,he=fe.which;switch(he){case _e.UP:case _e.DOWN:case _e.LEFT:case _e.RIGHT:(W=J.current)===null||W===void 0||W.onKeyDown(fe);break;case _e.ENTER:{if(G){var De=(G==null?void 0:G.node)||{},Be=De.selectable,ae=De.value;Be!==!1&&X(null,{node:{key:ce},selected:!k.includes(ae)})}break}case _e.ESC:l(!1)}},onKeyUp:function(){}}}),O.length===0)return a.createElement("div",{role:"listbox",className:"".concat(r,"-empty"),onMouseDown:we},d);var Ee={fieldNames:S};return Q&&(Ee.loadedKeys=Q),H&&(Ee.expandedKeys=H),a.createElement("div",{onMouseDown:we},G&&c&&a.createElement("span",{style:Ur,"aria-live":"assertive"},G.node.value),a.createElement(Ln,$t({ref:J,focusable:!1,prefixCls:"".concat(r,"-tree"),treeData:O,height:g,itemHeight:h,itemScrollOffset:R,virtual:v!==!1&&A!==!1,multiple:s,icon:$,showIcon:Ae,switcherIcon:ye,showLine:Te,loadData:u?null:le,motion:Oe,activeKey:ce,checkable:F,checkStrictly:!0,checkedKeys:de,selectedKeys:F?[]:k,defaultExpandAll:te,titleRender:_},Ee,{onActiveChange:ie,onSelect:X,onCheck:X,onExpand:Me,onLoad:Ve,filterTreeNode:xe,expandAction:I,onScroll:V})))},qr=a.forwardRef(Qr),vt="SHOW_ALL",gt="SHOW_PARENT",nt="SHOW_CHILD";function Tt(e,t,n,o){var r=new Set(e);return t===nt?e.filter(function(s){var u=n[s];return!(u&&u.children&&u.children.some(function(l){var c=l.node;return r.has(c[o.value])})&&u.children.every(function(l){var c=l.node;return lt(c)||r.has(c[o.value])}))}):t===gt?e.filter(function(s){var u=n[s],l=u?u.parent:null;return!(l&&!lt(l.node)&&r.has(l.key))}):e}var Xr=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function Yr(e){return!e||un(e)!=="object"}var Jr=a.forwardRef(function(e,t){var n=e.id,o=e.prefixCls,r=o===void 0?"rc-tree-select":o,s=e.value,u=e.defaultValue,l=e.onChange,c=e.onSelect,d=e.onDeselect,i=e.searchValue,v=e.inputValue,g=e.onSearch,h=e.autoClearSearchValue,R=h===void 0?!0:h,p=e.filterTreeNode,S=e.treeNodeFilterProp,y=S===void 0?"value":S,A=e.showCheckedStrategy,I=e.treeNodeLabelProp,_=e.multiple,V=e.treeCheckable,f=e.treeCheckStrictly,F=e.labelInValue,k=e.fieldNames,U=e.treeDataSimpleMode,ee=e.treeData,te=e.children,ne=e.loadData,Y=e.treeLoadedKeys,$=e.onTreeLoad,Ae=e.treeDefaultExpandAll,ye=e.treeExpandedKeys,Te=e.treeDefaultExpandedKeys,re=e.onTreeExpand,le=e.treeExpandAction,Q=e.virtual,Oe=e.listHeight,Ve=Oe===void 0?200:Oe,Le=e.listItemHeight,J=Le===void 0?20:Le,O=e.listItemScrollOffset,Ce=O===void 0?0:O,P=e.onDropdownVisibleChange,ce=e.dropdownMatchSelectWidth,ie=ce===void 0?!0:ce,G=e.treeLine,de=e.treeIcon,be=e.showTreeIcon,xe=e.switcherIcon,Ie=e.treeMotion,B=e.treeTitleRender,Ne=e.onPopupScroll,$e=_t(e,Xr),Pe=wr(n),q=V&&!f,oe=V||f,Re=f||F,H=oe||_,Me=xt(u,{value:s}),we=Se(Me,2),X=we[0],Ee=we[1],T=a.useMemo(function(){return V?A||nt:vt},[A,V]),C=a.useMemo(function(){return jr(k)},[JSON.stringify(k)]),fe=xt("",{value:i!==void 0?i:v,postState:function(b){return b||""}}),W=Se(fe,2),he=W[0],De=W[1],Be=function(b){De(b),g==null||g(b)},ae=zr(ee,te,U),Ue=$r(ae,C),M=Ue.keyEntities,se=Ue.valueEntities,Qe=a.useCallback(function(x){var b=[],N=[];return x.forEach(function(w){se.has(w)?N.push(w):b.push(w)}),{missingRawValues:b,existRawValues:N}},[se]),qe=Hr(ae,he,{fieldNames:C,treeNodeFilterProp:y,filterTreeNode:p}),Xe=a.useCallback(function(x){if(x){if(I)return x[I];for(var b=C._title,N=0;N<b.length;N+=1){var w=x[b[N]];if(w!==void 0)return w}}},[C,I]),ue=a.useCallback(function(x){var b=Kr(x);return b.map(function(N){return Yr(N)?{value:N}:N})},[]),ve=a.useCallback(function(x){var b=ue(x);return b.map(function(N){var w=N.label,K=N.value,L=N.halfChecked,E,D=se.get(K);if(D){var j;w=B?B(D.node):(j=w)!==null&&j!==void 0?j:Xe(D.node),E=D.node.disabled}else if(w===void 0){var ge=ue(X).find(function(He){return He.value===K});w=ge.label}return{label:w,value:K,halfChecked:L,disabled:E}})},[se,Xe,ue,X]),pt=a.useMemo(function(){return ue(X===null?[]:X)},[ue,X]),Qt=a.useMemo(function(){var x=[],b=[];return pt.forEach(function(N){N.halfChecked?b.push(N):x.push(N)}),[x,b]},[pt]),St=Se(Qt,2),Ge=St[0],yt=St[1],Ct=a.useMemo(function(){return Ge.map(function(x){return x.value})},[Ge]),qt=Gr(Ge,yt,q,M),bt=Se(qt,2),Ke=bt[0],Ye=bt[1],Xt=a.useMemo(function(){var x=Tt(Ke,T,M,C),b=x.map(function(L){var E,D;return(E=(D=M[L])===null||D===void 0||(D=D.node)===null||D===void 0?void 0:D[C.value])!==null&&E!==void 0?E:L}),N=b.map(function(L){var E=Ge.find(function(j){return j.value===L}),D=F?E==null?void 0:E.label:B==null?void 0:B(E);return{value:L,label:D}}),w=ve(N),K=w[0];return!H&&K&&kt(K.value)&&kt(K.label)?[]:w.map(function(L){var E;return z(z({},L),{},{label:(E=L.label)!==null&&E!==void 0?E:L.value})})},[C,H,Ke,Ge,ve,T,M]),Yt=Mr(Xt),Jt=Se(Yt,1),Zt=Jt[0],Je=At(function(x,b,N){var w=ve(x);if(Ee(w),R&&De(""),l){var K=x;if(q){var L=Tt(x,T,M,C);K=L.map(function(Z){var me=se.get(Z);return me?me.node[C.value]:Z})}var E=b||{triggerValue:void 0,selected:void 0},D=E.triggerValue,j=E.selected,ge=K;if(f){var He=yt.filter(function(Z){return!K.includes(Z.value)});ge=[].concat(pe(ge),pe(He))}var We=ve(ge),Fe={preValue:Ge,triggerValue:D},je=!0;(f||N==="selection"&&!j)&&(je=!1),Br(Fe,D,x,ae,je,C),oe?Fe.checked=j:Fe.selected=j;var Ze=Re?We:We.map(function(Z){return Z.value});l(H?Ze:Ze[0],Re?null:We.map(function(Z){return Z.label}),Fe)}}),ot=a.useCallback(function(x,b){var N,w=b.selected,K=b.source,L=M[x],E=L==null?void 0:L.node,D=(N=E==null?void 0:E[C.value])!==null&&N!==void 0?N:x;if(!H)Je([D],{selected:!0,triggerValue:D},"option");else{var j=w?[].concat(pe(Ct),[D]):Ke.filter(function(me){return me!==D});if(q){var ge=Qe(j),He=ge.missingRawValues,We=ge.existRawValues,Fe=We.map(function(me){return se.get(me).key}),je;if(w){var Ze=ut(Fe,!0,M);je=Ze.checkedKeys}else{var Z=ut(Fe,{checked:!1,halfCheckedKeys:Ye},M);je=Z.checkedKeys}j=[].concat(pe(He),pe(je.map(function(me){return M[me].node[C.value]})))}Je(j,{selected:w,triggerValue:D},K||"option")}w||!H?c==null||c(D,ct(E)):d==null||d(D,ct(E))},[Qe,se,M,C,H,Ct,Je,q,c,d,Ke,Ye]),en=a.useCallback(function(x){if(P){var b={};Object.defineProperty(b,"documentClickClose",{get:function(){return tt(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),P(x,b)}},[P]),tn=At(function(x,b){var N=x.map(function(w){return w.value});if(b.type==="clear"){Je(N,{},"selection");return}b.values.length&&ot(b.values[0].value,{selected:!1,source:"selection"})}),nn=a.useMemo(function(){return{virtual:Q,dropdownMatchSelectWidth:ie,listHeight:Ve,listItemHeight:J,listItemScrollOffset:Ce,treeData:qe,fieldNames:C,onSelect:ot,treeExpandAction:le,treeTitleRender:B,onPopupScroll:Ne}},[Q,ie,Ve,J,Ce,qe,C,ot,le,B,Ne]),rn=a.useMemo(function(){return{checkable:oe,loadData:ne,treeLoadedKeys:Y,onTreeLoad:$,checkedKeys:Ke,halfCheckedKeys:Ye,treeDefaultExpandAll:Ae,treeExpandedKeys:ye,treeDefaultExpandedKeys:Te,onTreeExpand:re,treeIcon:de,treeMotion:Ie,showTreeIcon:be,switcherIcon:xe,treeLine:G,treeNodeFilterProp:y,keyEntities:M}},[oe,ne,Y,$,Ke,Ye,Ae,ye,Te,re,de,Ie,be,xe,G,y,M]);return a.createElement(ht.Provider,{value:nn},a.createElement(zt.Provider,{value:rn},a.createElement(Er,$t({ref:t},$e,{id:Pe,prefixCls:r,mode:H?"multiple":void 0,displayValues:Zt,onDisplayValuesChange:tn,searchValue:he,onSearch:Be,OptionList:qr,emptyOptions:!ae.length,onDropdownVisibleChange:en,dropdownMatchSelectWidth:ie}))))}),ze=Jr;ze.TreeNode=ft;ze.SHOW_ALL=vt;ze.SHOW_PARENT=gt;ze.SHOW_CHILD=nt;const Zr=e=>{const{componentCls:t,treePrefixCls:n,colorBgElevated:o}=e,r=`.${n}`;return[{[`${t}-dropdown`]:[{padding:`${It(e.paddingXS)} ${It(e.calc(e.paddingXS).div(2).equal())}`},Gn(n,Pt(e,{colorBgContainer:o})),{[r]:{borderRadius:0,[`${r}-list-holder-inner`]:{alignItems:"stretch",[`${r}-treenode`]:{[`${r}-node-content-wrapper`]:{flex:"auto"}}}}},Kn(`${n}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${r}-switcher${r}-switcher_close`]:{[`${r}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function eo(e,t,n){return ln("TreeSelect",o=>{const r=Pt(o,{treePrefixCls:t});return[Zr(r)]},Mn)(e,n)}var to=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};const no=(e,t)=>{var n;const{prefixCls:o,size:r,disabled:s,bordered:u=!0,className:l,rootClassName:c,treeCheckable:d,multiple:i,listHeight:v=256,listItemHeight:g=26,placement:h,notFoundContent:R,switcherIcon:p,treeLine:S,getPopupContainer:y,popupClassName:A,dropdownClassName:I,treeIcon:_=!1,transitionName:V,choiceTransitionName:f="",status:F,treeExpandAction:k,builtinPlacements:U,dropdownMatchSelectWidth:ee,popupMatchSelectWidth:te,allowClear:ne,variant:Y,dropdownStyle:$,tagRender:Ae}=e,ye=to(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender"]),{getPopupContainer:Te,getPrefixCls:re,renderEmpty:le,direction:Q,virtual:Oe,popupMatchSelectWidth:Ve,popupOverflow:Le}=a.useContext(cn),J=re(),O=re("select",o),Ce=re("select-tree",o),P=re("tree-select",o),{compactSize:ce,compactItemClassnames:ie}=dn(O,Q),G=Nt(O),de=Nt(P),[be,xe,Ie]=Dr(O,G),[B]=eo(P,Ce,de),[Ne,$e]=Tr("treeSelect",Y,u),Pe=Rt(A||I,`${P}-dropdown`,{[`${P}-dropdown-rtl`]:Q==="rtl"},c,Ie,G,de,xe),q=!!(d||i),oe=Fr(e.suffixIcon,e.showArrow),Re=(n=te??ee)!==null&&n!==void 0?n:Ve,{status:H,hasFeedback:Me,isFormItemInput:we,feedbackIcon:X}=a.useContext(fn),Ee=Vr(H,F),{suffixIcon:T,removeIcon:C,clearIcon:fe}=Lr(Object.assign(Object.assign({},ye),{multiple:q,showSuffixIcon:oe,hasFeedback:Me,feedbackIcon:X,prefixCls:O,componentName:"TreeSelect"})),W=ne===!0?{clearIcon:fe}:ne;let he;R!==void 0?he=R:he=(le==null?void 0:le("Select"))||a.createElement(kr,{componentName:"Select"});const De=hn(ye,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),Be=a.useMemo(()=>h!==void 0?h:Q==="rtl"?"bottomRight":"bottomLeft",[h,Q]),ae=vn(ue=>{var ve;return(ve=r??ce)!==null&&ve!==void 0?ve:ue}),Ue=a.useContext(gn),M=s??Ue,se=Rt(!o&&P,{[`${O}-lg`]:ae==="large",[`${O}-sm`]:ae==="small",[`${O}-rtl`]:Q==="rtl",[`${O}-${Ne}`]:$e,[`${O}-in-form-item`]:we},Or(O,Ee,Me),ie,l,c,Ie,G,de,xe),Qe=ue=>a.createElement(jn,{prefixCls:Ce,switcherIcon:p,treeNodeProps:ue,showLine:S}),[qe]=mn("SelectLike",$==null?void 0:$.zIndex),Xe=a.createElement(ze,Object.assign({virtual:Oe,disabled:M},De,{dropdownMatchSelectWidth:Re,builtinPlacements:Ar(U,Le),ref:t,prefixCls:O,className:se,listHeight:v,listItemHeight:g,treeCheckable:d&&a.createElement("span",{className:`${O}-tree-checkbox-inner`}),treeLine:!!S,suffixIcon:T,multiple:q,placement:Be,removeIcon:C,allowClear:W,switcherIcon:Qe,showTreeIcon:_,notFoundContent:he,getPopupContainer:y||Te,treeMotion:null,dropdownClassName:Pe,dropdownStyle:Object.assign(Object.assign({},$),{zIndex:qe}),choiceTransitionName:wt(J,"",f),transitionName:wt(J,"slide-up",V),treeExpandAction:k,tagRender:q?Ae:void 0}));return be(B(Xe))},ro=a.forwardRef(no),ke=ro,oo=xn(ke);ke.TreeNode=ft;ke.SHOW_ALL=vt;ke.SHOW_PARENT=gt;ke.SHOW_CHILD=nt;ke._InternalPanelDoNotUseOrYouWillBeFired=oo;const ao=e=>a.useMemo(()=>({...{maxHeight:400,overflow:"auto"},...e}),[e]),so=e=>{const n=e.getFieldNames().title;return a.useCallback((o,r)=>!r||typeof r[n]!="string"?!1:r[n].toLowerCase().indexOf(o.toLowerCase())>=0,[n])},Ut=({api:e})=>{const t=e.getFetchError(),n=e.getIsFetching(),o=e.getMinSymbols(),r=e.isDataPlainList();return o?m.jsx(uo,{minSymbols:o,plainList:r}):n?m.jsx(lo,{plainList:r}):t?m.jsx(co,{error:t,plainList:r}):m.jsx(m.Fragment,{})},uo=({minSymbols:e,plainList:t})=>m.jsxs("div",{style:{paddingLeft:t?"8px":"30px",fontSize:"12px"},children:["Введите как минимум ",e," симв."]}),lo=({plainList:e})=>m.jsxs("div",{style:{paddingLeft:e?"8px":"30px",fontSize:"12px"},children:[m.jsx(In,{size:"small"})," загрузка..."]}),co=({error:e,plainList:t})=>m.jsx("div",{role:"alert",style:{paddingLeft:t?"8px":"30px",fontSize:"12px",color:"#ff4d4f"},children:e}),io=({api:e})=>{const t=e.getIsFetching(),n=e.getFetchError(),o=e.getMinSymbols(),r=e.isDataPlainList();return o||t||n?m.jsx(m.Fragment,{}):m.jsx("div",{style:{paddingLeft:r?"8px":"30px",fontSize:"12px"},children:e.t("dataNotFound")})},rt=a.createContext(void 0),fo=({children:e})=>{const t=a.useRef(!1),n=a.useRef(!1),o=a.useMemo(()=>({ctrlPressedRef:t,dialogOpenedRef:n}),[t]);return m.jsx(rt.Provider,{value:o,children:e})},Ot=(e,t,n)=>{const{dialogOpenedRef:o}=a.useContext(rt);return a.useMemo(()=>{const r=n?t==null?void 0:t.editGroupFormProps:t==null?void 0:t.editFormProps;if(!r)return;const s={...r};t.language&&!s.language&&(s.language=t.language);const u=r==null?void 0:r.onSubmitSuccess;s.onSubmitSuccess=(d,i,v,g,h)=>{var A;if(u==null||u(d,i,v,g,h),h.isPrevented())return;const R=g.model.getFormMode(),p=e.getFieldNames(),S={...i,...v};let y;if(S[p.parent]?y=(A=S[p.parent])==null?void 0:A[p.key]:S[p.parent]===null?y=void 0:y=e.getActiveNodeKey(),R==="create"||R==="clone")S[p.key]||(S[p.key]=_n()),e.addNode(S,y,"insideBottom",{ensureVisible:!0,select:!!t.selectNewNode,sortNodes:t.sortOnChange});else if(R==="update"){e.updateNode(S,y,{ensureVisible:!0,sortNodes:t.sortOnChange});const I=e.getValues();e.setValues(ho(I,S,p))}};const l=r==null?void 0:r.onOpen;s.onOpen=(d,i,v,g)=>{const h=l==null?void 0:l(d,i,v,g);return g.isPrevented()||(o.current=!0),h};const c=r==null?void 0:r.onClosed;return s.onClosed=(d,i)=>{c==null||c(d,i),!i.isPrevented()&&(o.current=!1)},s},[n,t==null?void 0:t.editFormProps,t==null?void 0:t.editGroupFormProps,t.language,t.selectNewNode,e,o])},ho=(e,t,n)=>{if(!e)return null;const o=[];for(const r of e)r.value===t[n.key]?o.push({value:r.value}):o.push(r);return o},vo=(e,t)=>{const{dialogOpenedRef:n}=a.useContext(rt);e.getButtonsApi().refreshButtons=go();const o=e.getFieldNames(),r=e.getActiveNode(!0),s=!!(r!=null&&r.isLeaf)||!!(t.groupsMode&&!(r!=null&&r[o.isGroup])),u=t.buttons,l=t.buttonsSize??"small",c=t.buttonsPosition??"right",d=$n(t),i=Pn(e,t,s),v=Bn(e,t,s),g=Hn(e,t,r,at,s),h=Wn(e,t,r,at,s),R=zn(e,t,r,at,s),p=Un(e,t,r,s,()=>{n.current=!0},()=>{n.current=!1});return a.useMemo(()=>{const y=Nn({headerLabel:d,view:g,create:i,createGroup:v,clone:h,update:R,delete:p},u);for(const A in y){const I=y[A];!I||A==="headerLabel"||I.type==="hotkey"||(I.size=I.size??l,I.position=I.position??c,I.checkDisabled&&(I.disabled=!r),I.checkHidden&&(I.hidden=!r))}return y},[d,g,i,v,h,R,p,u,l,c,r])},go=()=>{const[,e]=a.useState({});return a.useCallback(()=>{e({})},[e])},at=e=>({...e}),mo=({treeApi:e,treeProps:t})=>{const n=vo(e,t),{token:{colorBorderSecondary:o}}=pn.useToken();return a.useMemo(()=>n?m.jsx("div",{style:{padding:"0 4px 6px 4px",borderBottom:`1px solid ${o}`,...t.buttonsRowWrapperStyle},children:m.jsx(Rn,{buttons:n,apiRef:e.getButtonsApi(),style:t.buttonsRowStyle,context:e,iconsOnly:t.buttonsIconsOnly!==!1})}):null,[n,o,e,t.buttonsIconsOnly,t.buttonsRowStyle,t.buttonsRowWrapperStyle])},po=({api:e,children:t})=>{const n=e.isDataPlainList(),o=e.getProps();return m.jsx("div",{className:n?"tree-select-plain":void 0,children:o.editFormProps||o.editGroupFormProps?m.jsx(So,{api:e,children:t}):m.jsxs(m.Fragment,{children:[t,m.jsx(Ut,{api:e})]})})},So=({api:e,children:t})=>{const n=e.getProps();return m.jsxs(wn,{style:{display:"flex",flexDirection:"column",...n.buttonsRowWrapperStyle},noKeepFocus:!0,children:[m.jsx(mo,{treeApi:e,treeProps:n}),t,m.jsx(Ut,{api:e})]})},yo=({api:e,children:t})=>{const n=e.getProps(),o=a.useContext(ht);return o&&(n.titleRender?o.treeTitleRender=n.titleRender:o.treeTitleRender=void 0),n.dropdownRender?n.dropdownRender(t):m.jsx(po,{api:e,children:t})},Co=({api:e,allProps:t,treeSelectProps:n})=>{const{ctrlPressedRef:o,dialogOpenedRef:r}=a.useContext(rt);xo(o);const s=Ot(e,t,!1),u=Ot(e,t,!0),l=ao(t.dropdownStyle),c=No({api:e}),d=Io(e),i=ko(e.getFieldNames()),v=e.getExpandedKeys(),g=Ao(e),h=Ro(e),R=wo(e),p=Eo(e,o,r),S=Do(e),y=Fo(e);return m.jsxs(m.Fragment,{children:[m.jsx(ke,{ref:e.treeSelectRef,treeNodeFilterProp:i.label,notFoundContent:m.jsx(io,{api:e}),...n,labelInValue:!0,treeTitleRender:t.selectedRender,dropdownRender:t.readOnly?bo:c,showSearch:!t.readOnly&&t.showSearch!==!1,allowClear:!t.readOnly&&t.allowClear!==!1,fieldNames:i,treeData:e.getDataSet(),value:d,disabled:t.disabled,treeDefaultExpandAll:t.defaultExpandAll,treeDefaultExpandedKeys:t.defaultExpandedKeys,treeExpandedKeys:v,open:e.getIsOpen(),dropdownStyle:l,filterTreeNode:y,onTreeExpand:g,onClear:h,onChange:R,onDropdownVisibleChange:p,onSearch:S}),!t.disabled&&s?m.jsx(Et,{...s,apiRef:e.getEditFormApi()}):null,!t.disabled&&u?m.jsx(Et,{...u,apiRef:e.getEditGroupFormApi()}):null]})},bo=()=>m.jsx(m.Fragment,{}),xo=e=>{Dt("keydown",t=>{t.key==="Control"&&(e.current=!0)}),Dt("keyup",t=>{t.key==="Control"&&(e.current=!1)})},Io=e=>{const t=e.getValues();return e.getProps().multiple?t??void 0:(t==null?void 0:t[0])??void 0},No=({api:e})=>a.useCallback(t=>m.jsx(yo,{api:e,children:t}),[e]),Ro=e=>a.useCallback(()=>{var n;e.setValues(null);const t=e.getProps();(n=t.onClear)==null||n.call(t)},[e]),wo=e=>a.useCallback(t=>{var u;const n=t;e.setValues(n??null);const o=e.getProps(),r=n?e.getSelectedKeys(n)??[]:[],s=n?e.getSelectedNodes(void 0,n)??[]:[];(u=o.onChange)==null||u.call(o,t,r,s)},[e]),Eo=(e,t,n)=>a.useCallback(o=>{var s;const r=e.getProps();if(r.readOnly){e.setIsOpen(!1);return}t.current||n.current?e.setIsOpen(!0):e.setIsOpen(o),o&&(r.fetchMode==="onUse"||r.fetchMode==="onUseForce")&&e.fetchData(),(s=r.onDropdownVisibleChange)==null||s.call(r,o)},[e,t,n]),Do=e=>a.useCallback(t=>{var o;e.fetchData(t,!0);const n=e.getProps();(o=n.onSearch)==null||o.call(n,t)},[e]),Fo=e=>{const t=so(e);return a.useCallback((n,o)=>{if(!e.getIsAllFetched())return!0;const r=e.getProps();return r.filterTreeNode?typeof r.filterTreeNode=="function"?r.filterTreeNode(n,o):r.filterTreeNode:t(n,o)},[e,t])},ko=e=>a.useMemo(()=>{const t=e.key,n=e.title,o=e.children;return{value:t,label:n,children:o}},[e.children,e.key,e.title]),Ao=e=>a.useCallback(t=>{var o;const n=e.getProps();e.setExpandedKeys(t),(o=n.onTreeExpand)==null||o.call(n,t)},[e]),To=e=>t=>{var r;if(!e.getIsMounted())return;const n=e.getProps();if(!n.noCacheFetchedData&&e.getIsAllFetched())return;if(n.minSearchLength&&t.length<n.minSearchLength){e.setMinSymbols(n.minSearchLength),e.setDataSet(void 0);return}e.setMinSymbols(0),e.setFetchError(void 0);const o=(r=n==null?void 0:n.onDataFetch)==null?void 0:r.call(n,t,e);if(!o){e.setIsAllFetched(!0);return}e.setIsFetching(!0),t||e.setDataSet(void 0),o.then(s=>{var u,l,c;e.getIsMounted()&&(e.setDataSet(s.data),e.setIsAllFetched(e.getIsAllFetched()||!t),e.getIsReady()||(e.setIsReady(!0),(u=n==null?void 0:n.onReady)==null||u.call(n)),e.setIsFetching(!1),(l=n==null?void 0:n.onDataFetchSuccess)==null||l.call(n,s,e),(c=n==null?void 0:n.onDataFetchComplete)==null||c.call(n,e))},s=>{e.getIsMounted()&&(e.setFetchError(s.message),e.setDataSet(void 0),e.setIsFetching(!1))})},Oo=e=>{const[t,n]=a.useState(e.open);return Ht(()=>{n(e.open)},[e.open]),[t,n]},Vo=e=>()=>e,Lo=e=>t=>{e(t)},Mo=({dataMutator:e})=>a.useCallback(t=>{if(!e)return t;let n={...t};return e&&(n=e(n)),n},[e]),Go=e=>()=>e,Ko=e=>t=>{e(t)},jo=e=>()=>e,_o=e=>()=>e,$o=e=>()=>e,Po=e=>t=>{e(t)},Bo=e=>()=>e,Ho=e=>t=>{e(t)},Wo=e=>()=>e,zo=e=>t=>{e(t)},Uo=e=>()=>e,Qo=e=>t=>{e(t)};var qo="Expected a function",Vt=NaN,Xo="[object Symbol]",Yo=/^\s+|\s+$/g,Jo=/^[-+]0x[0-9a-f]+$/i,Zo=/^0b[01]+$/i,ea=/^0o[0-7]+$/i,ta=parseInt,na=typeof et=="object"&&et&&et.Object===Object&&et,ra=typeof self=="object"&&self&&self.Object===Object&&self,oa=na||ra||Function("return this")(),aa=Object.prototype,sa=aa.toString,ua=Math.max,la=Math.min,st=function(){return oa.Date.now()};function ca(e,t,n){var o,r,s,u,l,c,d=0,i=!1,v=!1,g=!0;if(typeof e!="function")throw new TypeError(qo);t=Lt(t)||0,it(n)&&(i=!!n.leading,v="maxWait"in n,s=v?ua(Lt(n.maxWait)||0,t):s,g="trailing"in n?!!n.trailing:g);function h(f){var F=o,k=r;return o=r=void 0,d=f,u=e.apply(k,F),u}function R(f){return d=f,l=setTimeout(y,t),i?h(f):u}function p(f){var F=f-c,k=f-d,U=t-F;return v?la(U,s-k):U}function S(f){var F=f-c,k=f-d;return c===void 0||F>=t||F<0||v&&k>=s}function y(){var f=st();if(S(f))return A(f);l=setTimeout(y,p(f))}function A(f){return l=void 0,g&&o?h(f):(o=r=void 0,u)}function I(){l!==void 0&&clearTimeout(l),d=0,o=c=r=l=void 0}function _(){return l===void 0?u:A(st())}function V(){var f=st(),F=S(f);if(o=arguments,r=this,c=f,F){if(l===void 0)return R(c);if(v)return l=setTimeout(y,t),h(c)}return l===void 0&&(l=setTimeout(y,t)),u}return V.cancel=I,V.flush=_,V}function it(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ia(e){return!!e&&typeof e=="object"}function da(e){return typeof e=="symbol"||ia(e)&&sa.call(e)==Xo}function Lt(e){if(typeof e=="number")return e;if(da(e))return Vt;if(it(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=it(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Yo,"");var n=Zo.test(e);return n||ea.test(e)?ta(e.slice(2),n?2:8):Jo.test(e)?Vt:+e}var fa=ca;const ha=Sn(fa),va=(e,t)=>(n="",o)=>{const r=ha(e,t.getProps().debounce??0);o?r(n):e(n)},Mt=e=>!!(e&&typeof e=="object"&&e.value),Gt=(e,t)=>{const n=e[t.key],o=e[t.title];return{value:n,label:o}},mt=(e,t)=>{if(!e)return null;if(!dt(e))return typeof e=="object"?Mt(e)?[e]:[Gt(e,t)]:[{value:e}];const n=[];for(const o of e)o&&(typeof o=="object"?Mt(o)?n.push(o):n.push(Gt(o,t)):n.push({value:o}));return n},ga=({value:e},t)=>{const n=ma(e??null,t),[o,r]=a.useState(n);return Ht(()=>{r(n)},[n]),[o,r]},ma=(e,t)=>a.useMemo(()=>mt(e,t),[t,e]),pa=e=>()=>e??null,Sa=(e,t)=>a.useCallback(n=>{e(mt(n,t))},[t,e]),ya=e=>t=>{const n=t??e;if(!n)return;if(!dt(n))return[n.value];const o=[];for(const r of n)o.push(r.value);return o},Kt=(e,t,n)=>{const o={[n.key]:e.value,[n.title]:e.label},{idx:r,nodes:s}=Qn(t,e.value,n);if(r<0||!(s!=null&&s[r]))return o;const u={...s[r]};return delete u[n.children],u},Ca=(e,t)=>{const n=a.useRef(void 0),o=a.useRef(null),r=a.useRef(void 0);return(s,u)=>{const l=e.getDataSet(),c=e.getFieldNames(),d=s??l,i=u??t;if(n.current===d&&o.current===i)return r.current;if(n.current=d,o.current=i,!i){r.current=void 0;return}const v=[];if(!dt(i))v.push(Kt(i,d,c));else for(const g of i){const h=Kt(g,d,c);h&&v.push(h)}return r.current=v,v}},ba=(e,t)=>a.useCallback((n,o=!0)=>{var l;const r=e.getFieldNames(),s=(l=mt(n,r))==null?void 0:l[0];if(!s)return;const u=e.getValues();if(o){if(jt(u,s.value))return;t?e.setValues([...u??[],s]):e.setValues([s])}else{if(!jt(u,s.value))return;t?e.setValues((u==null?void 0:u.filter(c=>c.value!==s.value))??null):e.setValues([])}},[e,t]),jt=(e,t)=>{if(!e)return!1;for(const n of e)if(n.value===t)return!0;return!1},xa={view:"Просмотр",viewGroup:"Просмотр группы",viewRecord:"Просмотр записи",viewRecordsGroup:"Просмотр группы записей",create:"Создать",createRecord:"Создать запись",createGroup:"Создать группу",createRecordsGroup:"Создать группу записей",edit:"Редактировать",editGroup:"Редактировать группу",editRecord:"Редактировать запись",editRecordsGroup:"Редактировать группу записей",clone:"Клонировать",cloneGroup:"Клонировать группу",cloneRecord:"Клонировать запись",cloneRecordsGroup:"Клонировать группу записей",delete:"Удалить",deleteGroup:"Удалить группу",deleteRecord:"Удалить запись(и)",deleteRecordsGroup:"Удалить группу записей",select:"Выбрать",selectRecord:"Выбрать запись(и)",go:"Перейти",filter:"Фильтр",ok:"OK",cancel:"Отмена",tryAgainQt:"Попробовать еще раз?",deleteSelectedRecordQt:"Удалить выбранную запись?",error:"Ошибка",dataNotFound:"Данные не найдены"},Ia={view:"View",viewGroup:"View group",viewRecord:"View record",viewRecordsGroup:"View records group",create:"Create",createRecord:"Create record",createGroup:"Create group",createRecordsGroup:"Create records group",edit:"Edit",editGroup:"Edit group",editRecord:"Edit record",editRecordsGroup:"Edit records group",clone:"Clone",cloneGroup:"Clone group",cloneRecord:"Clone record",cloneRecordsGroup:"Clone records group",delete:"Delete",deleteGroup:"Delete group",deleteRecord:"Delete record(s)",deleteRecordsGroup:"Delete records group(s)",select:"Select",selectRecord:"Select record(s)",go:"Go",filter:"Filter",ok:"OK",cancel:"Cancel",tryAgainQt:"Try again?",deleteSelectedRecordQt:"Delete selected record?",error:"Error",dataNotFound:"Data not found"},Na={view:"查看",viewGroup:"查看组",viewRecord:"查看记录",viewRecordsGroup:"查看记录组",create:"创建",createRecord:"创建记录",createGroup:"创建组",createRecordsGroup:"创建记录组",edit:"编辑",editGroup:"编辑组",editRecord:"编辑记录",editRecordsGroup:"编辑记录组",clone:"克隆",cloneGroup:"克隆组",cloneRecord:"克隆记录",cloneRecordsGroup:"克隆记录组",delete:"删除",deleteGroup:"删除组",deleteRecord:"删除记录",deleteRecordsGroup:"删除记录组",select:"选择",selectRecord:"选择记录",go:"前往",filter:"过滤",ok:"确定",cancel:"取消",tryAgainQt:"再试一次",deleteSelectedRecordQt:"删除选定的记录",error:"错误",dataNotFound:"数据未找到"},Ra={ru:xa,en:Ia,cn:Na},wa=e=>yn(e.language,Ra,e.translation),Ea=({props:e,setProps:t})=>{var Y,$;const[n]=a.useState(e.apiRef??{}),[o]=a.useState(((Y=e.editFormProps)==null?void 0:Y.apiRef)??{}),[r]=a.useState((($=e.editGroupFormProps)==null?void 0:$.apiRef)??{}),[s,u]=a.useState(!1),[l,c]=a.useState(!1),[d,i]=a.useState(),[v,g]=a.useState(!1),[h,R]=a.useState(0),[p,S]=Oo(e),y=Ft(e)(),A=Mo(e),[I,_]=ga(e,y),[V,f,F,k]=qn(e.dataSet,y,A),[U,ee]=Xn(e.expandedKeys,e.defaultExpandedKeys,e.defaultExpandAll,k),te=To(n),ne={getId:En(e.componentId??"treeSelect-"+Dn()),getProps:Fn(e),setProps:kn(t),updateProps:An(e,t),getIsMounted:Tn(),getFieldNames:Ft(e),getDataSet:Yn(V),setDataSet:Jn(f,e==null?void 0:e.onDataSetChanged),getGroupsOnly:Zn(n),sortTree:er(V,e.sortComparator,n),getValues:pa(I),setValues:Sa(_,y),isDataPlainList:tr(F),getEditFormApi:_o(o),getEditGroupFormApi:jo(r),getSelectedKeys:ya(I),getSelectedNodes:Ca(n,I),isNodeSelected:nr(n),selectNode:ba(n,e.multiple),getActiveNodeKey:rr(n),getActiveNode:or(n),getExpandedKeys:ar(U),setExpandedKeys:sr(ee),getExpandedNodes:ur(n),isNodeExpanded:lr(n),expandNode:cr(n),collapseNode:ir(n),toggleNode:dr(n),expandParentNodes:fr(n),getNode:hr(n),getNodes:vr(n),getNextNodeKey:gr(n),getPrevNodeKey:mr(n),getNextNode:pr(n),getPrevNode:Sr(n),getParentNode:yr(n),addNode:Cr(n),updateNode:br(n),removeNode:xr(n),moveNode:Ir(n),ensureNodeVisible:Nr(n),t:wa(e),treeSelectRef:a.useRef(null),getButtonsApi:Cn(),getIsReady:Go(s),setIsReady:Ko(u),getIsOpen:Vo(p),setIsOpen:Lo(S),getIsFetching:$o(l),setIsFetching:Po(c),getFetchError:Bo(d),setFetchError:Ho(i),getIsAllFetched:Wo(v),setIsAllFetched:zo(g),getMinSymbols:Uo(h),setMinSymbols:Qo(R),fetchData:va(te,n)};return Object.assign(n,ne),n},Da=e=>{const[t,n]=On(e),o=Fa(t),r=Ea({props:t,setProps:n});return a.useEffect(()=>{var s;(!t.fetchMode||t.fetchMode==="onLoad")&&!t.minSearchLength?r.fetchData():r.getIsReady()||(r.setIsReady(!0),(s=t==null?void 0:t.onReady)==null||s.call(t))},[r,t,t.fetchMode,t.minSearchLength]),m.jsx(fo,{children:m.jsx(Co,{api:r,allProps:t,treeSelectProps:o})})},Fa=e=>a.useMemo(()=>Bt(e,{apiRef:!0,componentId:!0,dataMutator:!0,readOnly:!0,value:!0,filterTreeNode:!0,dataSet:!0,fetchMode:!0,noCacheFetchedData:!0,minSearchLength:!0,debounce:!0,editFormProps:!0,nodeDeleteMessage:!0,confirmDelete:!0,buttons:!0,onReady:!0,onDataFetch:!0,onDataFetchSuccess:!0,onDataFetchError:!0,onDataFetchComplete:!0,onDelete:!0,fieldNames:!0,titleRender:!0,selectedRender:!0,editGroupFormProps:!0,defaultExpandAll:!0,defaultExpandedKeys:!0,expandedKeys:!0,buttonsRowStyle:!0,buttonsRowWrapperStyle:!0,buttonsIconsOnly:!0,buttonsPosition:!0,buttonsSize:!0,headerLabel:!0,language:!0,translation:!0,selectNewNode:!0,groupsMode:!0,sortOnChange:!0,sortComparator:!0,onChange:!0,onGetLabelCallback:!0,onDataSetChanged:!0})[1],[e]),ka=(e,t)=>a.useCallback((n,o,r)=>{var s;if(e.isReady()){switch(t.valueType){case void 0:case"node":t.multiple?e.setValue(r??null):e.setValue(r!=null&&r.length?r[0]:null);break;case"labeledValue":e.setValue(n??null);break;case"key":t.multiple?e.setValue(o??null):e.setValue(o!=null&&o.length?o[0]:null);break}e.setDirty(!0)}(s=t.onChange)==null||s.call(t,n,o,r,e)},[e,t]),Aa=e=>a.useCallback(()=>{e.setTouched(!0)},[e]),Ta=e=>a.useCallback(()=>{var n;e.setDirty(!0),e.setTouched(!0);const t=e.getProps();(n=t.onClear)==null||n.call(t)},[e]),Oa=(e,t)=>a.useCallback(n=>{var o;return(o=t.onDataSetChanged)==null?void 0:o.call(t,n,e)},[e,t]),Va=e=>a.useMemo(()=>Bt(e,{autoFocus:!0,autoHeightResize:!0,component:!0,dependsOn:!0,disabled:!0,helpClass:!0,hidden:!0,inlineGroup:!0,label:!0,nonEditable:!0,onDirtyStateChanged:!0,onDisabledStateChanged:!0,onErrorChanged:!0,onHiddenStateChanged:!0,onLabelChanged:!0,onReadOnlyStateChanged:!0,onReady:!0,onReadyStateChanged:!0,onTouchedStateChanged:!0,onValidated:!0,onValueChanged:!0,placeholder:!0,readOnly:!0,requiredMark:!0,rowStyle:!0,rules:!0,style:!0,tab:!0,tooltip:!0,value:!0,width:!0,valueType:!0,onDataSetChanged:!0,onChange:!0,dataSet:!0,onDataFetch:!0})[1],[e]),La=({field:e})=>{a.useSyncExternalStore(e.subscribe.bind(e),e.getSnapshot.bind(e));const[t]=a.useState({}),n=e.getProps(),o=e.getValue()??null,r=Aa(e),s=Ta(e),u=Ma(e,n.dataSet),l=ka(e,n),c=Oa(e,n),d=Ga(e,n),i=Ka(e,n);a.useEffect(()=>{e.setReady(!0)},[e]);const g={...{width:e.getWidth()??"100%"},...n.style},h=Va(n);return m.jsx(Da,{apiRef:t,style:g,...h,dataSet:u,autoFocus:n.autoFocus,disabled:e.isDisabled(),readOnly:e.isReadOnly(),value:o,placeholder:n.placeholder??"Choose",onChange:l,onDataSetChanged:c,onDataFetch:d,onReady:i,onClear:s,onBlur:r})},Ma=(e,t)=>a.useMemo(()=>typeof t!="function"?t:()=>t(e),[t,e]),Ga=(e,t)=>a.useCallback((n,o)=>{var r;return(r=t.onDataFetch)==null?void 0:r.call(t,n,o,e)},[e,t]),Ka=(e,t)=>a.useCallback(()=>{var n;return(n=t.onReady)==null?void 0:n.call(t,e)},[e,t]);class Qa extends bn{render(){return m.jsx(La,{field:this})}}export{Qa as T};
