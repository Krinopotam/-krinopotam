import{j as t,r as e}from"./index-BH0IsnV8.js";var o=t=>!t.firstChild||t.firstChild.offsetParent===t,s=(t,e)=>{let s=t,n=0;o(e)||(n+=t.offsetTop-e.offsetTop,e=t.offsetParent,n+=-t.offsetTop);do{n+=s.offsetTop,s=s.offsetParent}while(s&&s!==e);return n},n=null;"undefined"!=typeof CSS&&CSS.supports&&(CSS.supports("position","sticky")?n="sticky":CSS.supports("position","-webkit-sticky")&&(n="-webkit-sticky"));var i=!1;try{const t=Object.defineProperty({},"passive",{get(){i={passive:!0}}}),e=()=>{};window.addEventListener("testPassive",e,t),window.removeEventListener("testPassive",e,t)}catch(f){}var r=t=>{const{el:e,onChange:o,unsubs:s,measure:n}=t;if(e===window){const t=()=>({top:0,left:0,height:window.innerHeight,width:window.innerWidth}),e=n(t()),r=()=>{Object.assign(e,n(t())),o()};return window.addEventListener("resize",r,i),s.push((()=>window.removeEventListener("resize",r))),e}{const t=n(e.getBoundingClientRect()),i=new ResizeObserver((()=>{Object.assign(t,n(e.getBoundingClientRect())),o()}));return i.observe(e),s.push((()=>i.disconnect())),t}},l=(t,e,l)=>{const{bottom:p,offsetBottom:f,offsetTop:a}=l,h=(t=>{let e=t;for(;e=e.parentElement;){const t=getComputedStyle(e,null).getPropertyValue("overflow-y");if(e===document.body)return window;if("auto"===t||"scroll"===t||"overlay"===t)return e}return window})(t);let u=!1;const c=()=>{u||requestAnimationFrame((()=>{const e=g();if(e!==E)S(e);else if(1!==e||p){if(2===e){const{height:e,offsetTop:o}=y,{height:s,naturalTop:n}=T,{height:i}=x,r=Math.max(0,o+d+e-(n+i+f));if(p){const e=Math.max(0,s-i-r);t.style.bottom=`${e}px`}else t.style.top=`${r}px`}}else{const{height:e}=y,{height:o}=x;t.style.top=e-o-f+"px"}u=!1})),u=!0};let d=h===window?window.scrollY:h.scrollTop;const m=t=>{const{offsetTop:e,height:o}=y,{naturalTop:s}=T,{height:n}=x;return t+e+o>=s+n+C+f},g=()=>{const{height:t}=y,{height:e}=x;return e+a+f<=t?3:m(d)?1:2},w=h!==window&&o(h),y=r({el:h,onChange:c,unsubs:e,measure:({height:t,top:e})=>({height:t,offsetTop:w?e:0})}),b=(t=>{let e=t.parentElement;for(;e&&"contents"===getComputedStyle(e,null).getPropertyValue("display");)e=e.parentElement;return e||window})(t),v=b===window?{top:0,bottom:0}:(t=>{const e=getComputedStyle(t,null);return{top:parseInt(e.getPropertyValue("padding-top"),10),bottom:parseInt(e.getPropertyValue("padding-bottom"),10)}})(b),T=r({el:b,onChange:c,unsubs:e,measure:({height:t})=>({height:t-v.top-v.bottom,naturalTop:b===window?0:s(b,h)+v.top+y.offsetTop})}),x=r({el:t,onChange:c,unsubs:e,measure:({height:t})=>({height:t})});let C=0,E=g();const S=e=>{const o=E;if(E=e,2===o&&(C=-1),3===e)return t.style.position=n,void(p?t.style.bottom=`${f}px`:t.style.top=`${a}px`);const{height:s,offsetTop:i}=y,{height:r,naturalTop:l}=T,{height:h}=x;if(2===e)if(t.style.position="relative",C=0===o?Math.max(0,i+d-l+a):Math.max(0,i+d+s-(l+h+f)),p){const e=Math.max(0,r-h-C);t.style.bottom=`${e}px`}else t.style.top=`${C}px`;else t.style.position=n,1===e?p?t.style.bottom=`${f}px`:t.style.top=s-h-f+"px":p?t.style.bottom=s-h-f+"px":t.style.top=`${a}px`};S(E);const P=t=>{if(t===d)return;const e=t-d;if(d=t,3===E)return;const{offsetTop:o,height:s}=y,{naturalTop:n,height:i}=T,{height:r}=x;if(e>0)if(0===E){if(t+o+a>n){const e=Math.max(0,o+d-n+a);S(t+o+s<=n+r+e+f?2:1)}}else 2===E&&m(t)&&S(1);else if(1===E){if(o+t+s<n+i+f){const e=Math.max(0,o+d+s-(n+r+f));S(o+t+a>=n+e?2:0)}}else 2===E&&o+t+a<n+C&&S(0)},L=h===window?()=>P(window.scrollY):()=>P(h.scrollTop);h.addEventListener("scroll",L,i),h.addEventListener("mousewheel",L,i),e.push((()=>h.removeEventListener("scroll",L)),(()=>h.removeEventListener("mousewheel",L)))},p=o=>{const{offsetTop:s,offsetBottom:i,bottom:r,children:p,className:f,style:a}=o,h=(({offsetTop:t=0,offsetBottom:o=0,bottom:s=!1}={})=>{const[i,r]=e.useState(null);return e.useEffect((()=>{if(!i||!n)return;const e=[];return l(i,e,{offsetBottom:o,offsetTop:t,bottom:s}),()=>{e.forEach((t=>t()))}}),[i,o,t,s]),r})({offsetTop:s,offsetBottom:i,bottom:r});return t.jsx("div",{className:f,style:a,ref:h,children:p})};export{p as s};
