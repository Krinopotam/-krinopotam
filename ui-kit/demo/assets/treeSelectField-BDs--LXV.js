import{r as a,k as z,n as Se,q as sn,d as _t,w as nt,h as ln,br as un,e as ye,K as Pe,i as $t,u as xt,v as cn,x as dn,y as Ht,z as Ft,C as fn,aV as hn,m as Rt,f as Et,F as gn,o as vn,G as mn,l as Sn,aR as yn,Y as It,j as v,t as bn,c as tt,g as Cn}from"./index-CgBeyb-e.js";import{t as pn,E as xn,a as it,u as Fn,b as Rn,B as En}from"./dForm-B-6Y2TlM.js";import{D as Nt,s as Wt}from"./dFormModal-B-TtMmSz.js";import{j as In,S as Nn,h as Dn,m as Bt,k as wn,f as An,o as Dt,u as kn,t as On,c as Tn,d as Mn,e as Ln,b as Vn,P as Gn}from"./modal-hi51mlNB.js";import{m as lt,j as Kn,T as jn,n as Pn,p as _n,q as $n,S as Hn,o as Wn,d as Bn,b as zn,r as Un,a as Qn,c as qn,e as Xn,g as Yn}from"./defaultButtonsProps-BjCvvsD6.js";import{c as Jn,d as Zn,B as er,u as tr,b as nr,D as rr,m as or}from"./useShowArrow-DhNUwsya.js";import{j as ar,k as sr,g as lr}from"./index-Birbnh4n.js";import{u as ur}from"./useIcons-tPNZCeWw.js";import{n as zt,g as cr,u as wt,a as dr,b as ir,c as fr,d as hr,e as gr,f as vr,h as mr,i as Sr,j as yr,k as br,l as Cr,m as pr,o as xr,p as Fr,q as Rr,r as Er,s as Ir,t as Nr,v as Dr,w as wr,x as Ar,y as kr,z as Or,A as Tr,B as Mr,C as Lr,D as Vr,E as Gr,F as Kr,G as jr}from"./useApiGetGroupsOnly-BzYeVIfm.js";const Pr=function(e){var t=a.useRef({valueLabels:new Map});return a.useMemo(function(){var n=t.current.valueLabels,r=new Map,o=e.map(function(s){var l,u=s.value,c=(l=s.label)!==null&&l!==void 0?l:n.get(u);return r.set(u,c),z(z({},s),{},{label:c})});return t.current.valueLabels=r,[o]},[e])},_r=function(e,t,n,r){return a.useMemo(function(){var o=e.map(function(c){var i=c.value;return i}),s=t.map(function(c){var i=c.value;return i}),l=o.filter(function(c){return!r[c]});if(n){var u=lt(o,!0,r);o=u.checkedKeys,s=u.halfCheckedKeys}return[Array.from(new Set([].concat(Se(l),Se(o)))),s]},[e,t,n,r])};function $r(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}function Hr(e){var t=e||{},n=t.label,r=t.value,o=t.children,s=r||"value";return{_title:n?[n]:["title","label"],value:s,key:s,children:o||"children"}}function ut(e){return!e||e.disabled||e.disableCheckbox||e.checkable===!1}function Wr(e,t){var n=[];function r(o){o.forEach(function(s){var l=s[t.children];l&&(n.push(s[t.value]),r(l))})}return r(e),n}function At(e){return e==null}const Br=function(e,t){return a.useMemo(function(){var n=Kn(e,{fieldNames:t,initWrapper:function(o){return z(z({},o),{},{valueEntities:new Map})},processEntity:function(o,s){var l=o.node[t.value];s.valueEntities.set(l,o)}});return n},[e,t])};var ft=function(){return null},zr=["children","value"];function Ut(e){return sn(e).map(function(t){if(!a.isValidElement(t)||!t.type)return null;var n=t,r=n.key,o=n.props,s=o.children,l=o.value,u=_t(o,zr),c=z({key:r,value:l},u),i=Ut(s);return i.length&&(c.children=i),c}).filter(function(t){return t})}function ct(e){if(!e)return e;var t=z({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return nt(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function Ur(e,t,n,r,o,s){var l=null,u=null;function c(){function i(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return d.map(function(h,E){var C="".concat(g,"-").concat(E),S=h[s.value],p=n.includes(S),R=i(h[s.children]||[],C,p),O=a.createElement(ft,h,R.map(function(M){return M.node}));if(t===S&&(l=O),p){var P={pos:C,node:O,children:R};return m||u.push(P),P}return null}).filter(function(h){return h})}u||(u=[],i(r),u.sort(function(d,g){var m=d.node.props.value,h=g.node.props.value,E=n.indexOf(m),C=n.indexOf(h);return E-C}))}Object.defineProperty(e,"triggerNode",{get:function(){return nt(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),c(),l}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return nt(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),c(),o?u:u.map(function(d){var g=d.node;return g})}})}const Qr=function(e,t,n){var r=n.treeNodeFilterProp,o=n.filterTreeNode,s=n.fieldNames,l=s.children;return a.useMemo(function(){if(!t||o===!1)return e;var u;if(typeof o=="function")u=o;else{var c=t.toUpperCase();u=function(g,m){var h=m[r];return String(h).toUpperCase().includes(c)}}function i(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return d.reduce(function(m,h){var E=h[l],C=g||u(t,ct(h)),S=i(E||[],C);return(C||S.length)&&m.push(z(z({},h),{},ln({isLeaf:void 0},l,S))),m},[])}return i(e)},[e,t,l,r,o])};function kt(e){var t=a.useRef();t.current=e;var n=a.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}function qr(e,t){var n=t.id,r=t.pId,o=t.rootPId,s={},l=[],u=e.map(function(c){var i=z({},c),d=i[n];return s[d]=i,i.key=i.key||d,i});return u.forEach(function(c){var i=c[r],d=s[i];d&&(d.children=d.children||[],d.children.push(c)),(i===o||!d&&o===null)&&l.push(c)}),l}function Xr(e,t,n){return a.useMemo(function(){return e?n?qr(e,z({id:"id",pId:"pId",rootPId:null},n!==!0?n:{})):e:Ut(t)},[t,n,e])}var Qt=a.createContext(null),ht=a.createContext(null),Yr={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Jr=function(t,n){var r=Jn(),o=r.prefixCls,s=r.multiple,l=r.searchValue,u=r.toggleOpen,c=r.open,i=r.notFoundContent,d=a.useContext(ht),g=d.virtual,m=d.listHeight,h=d.listItemHeight,E=d.listItemScrollOffset,C=d.treeData,S=d.fieldNames,p=d.onSelect,R=d.dropdownMatchSelectWidth,O=d.treeExpandAction,P=d.treeTitleRender,M=d.onPopupScroll,f=a.useContext(Qt),w=f.checkable,A=f.checkedKeys,U=f.halfCheckedKeys,ee=f.treeExpandedKeys,te=f.treeDefaultExpandAll,ne=f.treeDefaultExpandedKeys,Y=f.onTreeExpand,_=f.treeIcon,ke=f.showTreeIcon,be=f.switcherIcon,Oe=f.treeLine,re=f.treeNodeFilterProp,ue=f.loadData,Q=f.treeLoadedKeys,Te=f.treeMotion,Me=f.onTreeLoad,Le=f.keyEntities,J=a.useRef(),T=un(function(){return C},[c,C],function(k,y){return y[0]&&k[1]!==y[1]}),Ce=a.useState(null),$=ye(Ce,2),ce=$[0],de=$[1],G=Le[ce],ie=a.useMemo(function(){return w?{checked:A,halfChecked:U}:null},[w,A,U]);a.useEffect(function(){if(c&&!s&&A.length){var k;(k=J.current)===null||k===void 0||k.scrollTo({key:A[0]}),de(A[0])}},[c]);var pe=String(l).toLowerCase(),xe=function(y){return pe?String(y[re]).toLowerCase().includes(pe):!1},Fe=a.useState(ne),H=ye(Fe,2),Re=H[0],$e=H[1],He=a.useState(null),q=ye(He,2),oe=q[0],Ee=q[1],W=a.useMemo(function(){return ee?Se(ee):l?oe:Re},[Re,oe,ee,l]);a.useEffect(function(){l&&Ee(Wr(C,S))},[l]);var Ve=function(y){$e(y),Ee(y),Y&&Y(y)},Ie=function(y){y.preventDefault()},X=function(y,fe){var B=fe.node;w&&ut(B)||(p(B.key,{selected:!A.includes(B.key)}),s||u(!1))};if(a.useImperativeHandle(n,function(){var k;return{scrollTo:(k=J.current)===null||k===void 0?void 0:k.scrollTo,onKeyDown:function(fe){var B,he=fe.which;switch(he){case Pe.UP:case Pe.DOWN:case Pe.LEFT:case Pe.RIGHT:(B=J.current)===null||B===void 0||B.onKeyDown(fe);break;case Pe.ENTER:{if(G){var De=(G==null?void 0:G.node)||{},We=De.selectable,ae=De.value;We!==!1&&X(null,{node:{key:ce},selected:!A.includes(ae)})}break}case Pe.ESC:u(!1)}},onKeyUp:function(){}}}),T.length===0)return a.createElement("div",{role:"listbox",className:"".concat(o,"-empty"),onMouseDown:Ie},i);var Ne={fieldNames:S};return Q&&(Ne.loadedKeys=Q),W&&(Ne.expandedKeys=W),a.createElement("div",{onMouseDown:Ie},G&&c&&a.createElement("span",{style:Yr,"aria-live":"assertive"},G.node.value),a.createElement(jn,$t({ref:J,focusable:!1,prefixCls:"".concat(o,"-tree"),treeData:T,height:m,itemHeight:h,itemScrollOffset:E,virtual:g!==!1&&R!==!1,multiple:s,icon:_,showIcon:ke,switcherIcon:be,showLine:Oe,loadData:l?null:ue,motion:Te,activeKey:ce,checkable:w,checkStrictly:!0,checkedKeys:ie,selectedKeys:w?[]:A,defaultExpandAll:te,titleRender:P},Ne,{onActiveChange:de,onSelect:X,onCheck:X,onExpand:Ve,onLoad:Me,filterTreeNode:xe,expandAction:O,onScroll:M})))},Zr=a.forwardRef(Jr),gt="SHOW_ALL",vt="SHOW_PARENT",rt="SHOW_CHILD";function Ot(e,t,n,r){var o=new Set(e);return t===rt?e.filter(function(s){var l=n[s];return!(l&&l.children&&l.children.some(function(u){var c=u.node;return o.has(c[r.value])})&&l.children.every(function(u){var c=u.node;return ut(c)||o.has(c[r.value])}))}):t===vt?e.filter(function(s){var l=n[s],u=l?l.parent:null;return!(u&&!ut(u.node)&&o.has(u.key))}):e}var eo=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function to(e){return!e||cn(e)!=="object"}var no=a.forwardRef(function(e,t){var n=e.id,r=e.prefixCls,o=r===void 0?"rc-tree-select":r,s=e.value,l=e.defaultValue,u=e.onChange,c=e.onSelect,i=e.onDeselect,d=e.searchValue,g=e.inputValue,m=e.onSearch,h=e.autoClearSearchValue,E=h===void 0?!0:h,C=e.filterTreeNode,S=e.treeNodeFilterProp,p=S===void 0?"value":S,R=e.showCheckedStrategy,O=e.treeNodeLabelProp,P=e.multiple,M=e.treeCheckable,f=e.treeCheckStrictly,w=e.labelInValue,A=e.fieldNames,U=e.treeDataSimpleMode,ee=e.treeData,te=e.children,ne=e.loadData,Y=e.treeLoadedKeys,_=e.onTreeLoad,ke=e.treeDefaultExpandAll,be=e.treeExpandedKeys,Oe=e.treeDefaultExpandedKeys,re=e.onTreeExpand,ue=e.treeExpandAction,Q=e.virtual,Te=e.listHeight,Me=Te===void 0?200:Te,Le=e.listItemHeight,J=Le===void 0?20:Le,T=e.listItemScrollOffset,Ce=T===void 0?0:T,$=e.onDropdownVisibleChange,ce=e.dropdownMatchSelectWidth,de=ce===void 0?!0:ce,G=e.treeLine,ie=e.treeIcon,pe=e.showTreeIcon,xe=e.switcherIcon,Fe=e.treeMotion,H=e.treeTitleRender,Re=e.onPopupScroll,$e=_t(e,eo),He=Zn(n),q=M&&!f,oe=M||f,Ee=f||w,W=oe||P,Ve=xt(l,{value:s}),Ie=ye(Ve,2),X=Ie[0],Ne=Ie[1],k=a.useMemo(function(){return M?R||rt:gt},[R,M]),y=a.useMemo(function(){return Hr(A)},[JSON.stringify(A)]),fe=xt("",{value:d!==void 0?d:g,postState:function(b){return b||""}}),B=ye(fe,2),he=B[0],De=B[1],We=function(b){De(b),m==null||m(b)},ae=Xr(ee,te,U),Qe=Br(ae,y),V=Qe.keyEntities,se=Qe.valueEntities,qe=a.useCallback(function(x){var b=[],F=[];return x.forEach(function(I){se.has(I)?F.push(I):b.push(I)}),{missingRawValues:b,existRawValues:F}},[se]),Xe=Qr(ae,he,{fieldNames:y,treeNodeFilterProp:p,filterTreeNode:C}),Ye=a.useCallback(function(x){if(x){if(O)return x[O];for(var b=y._title,F=0;F<b.length;F+=1){var I=x[b[F]];if(I!==void 0)return I}}},[y,O]),le=a.useCallback(function(x){var b=$r(x);return b.map(function(F){return to(F)?{value:F}:F})},[]),ge=a.useCallback(function(x){var b=le(x);return b.map(function(F){var I=F.label,K=F.value,L=F.halfChecked,N,D=se.get(K);if(D){var j;I=H?H(D.node):(j=I)!==null&&j!==void 0?j:Ye(D.node),N=D.node.disabled}else if(I===void 0){var ve=le(X).find(function(Be){return Be.value===K});I=ve.label}return{label:I,value:K,halfChecked:L,disabled:N}})},[se,Ye,le,X]),St=a.useMemo(function(){return le(X===null?[]:X)},[le,X]),Xt=a.useMemo(function(){var x=[],b=[];return St.forEach(function(F){F.halfChecked?b.push(F):x.push(F)}),[x,b]},[St]),yt=ye(Xt,2),Ge=yt[0],bt=yt[1],Ct=a.useMemo(function(){return Ge.map(function(x){return x.value})},[Ge]),Yt=_r(Ge,bt,q,V),pt=ye(Yt,2),Ke=pt[0],Je=pt[1],Jt=a.useMemo(function(){var x=Ot(Ke,k,V,y),b=x.map(function(L){var N,D;return(N=(D=V[L])===null||D===void 0||(D=D.node)===null||D===void 0?void 0:D[y.value])!==null&&N!==void 0?N:L}),F=b.map(function(L){var N=Ge.find(function(j){return j.value===L}),D=w?N==null?void 0:N.label:H==null?void 0:H(N);return{value:L,label:D}}),I=ge(F),K=I[0];return!W&&K&&At(K.value)&&At(K.label)?[]:I.map(function(L){var N;return z(z({},L),{},{label:(N=L.label)!==null&&N!==void 0?N:L.value})})},[y,W,Ke,Ge,ge,k,V]),Zt=Pr(Jt),en=ye(Zt,1),tn=en[0],Ze=kt(function(x,b,F){var I=ge(x);if(Ne(I),E&&De(""),u){var K=x;if(q){var L=Ot(x,k,V,y);K=L.map(function(Z){var me=se.get(Z);return me?me.node[y.value]:Z})}var N=b||{triggerValue:void 0,selected:void 0},D=N.triggerValue,j=N.selected,ve=K;if(f){var Be=bt.filter(function(Z){return!K.includes(Z.value)});ve=[].concat(Se(ve),Se(Be))}var ze=ge(ve),we={preValue:Ge,triggerValue:D},je=!0;(f||F==="selection"&&!j)&&(je=!1),Ur(we,D,x,ae,je,y),oe?we.checked=j:we.selected=j;var et=Ee?ze:ze.map(function(Z){return Z.value});u(W?et:et[0],Ee?null:ze.map(function(Z){return Z.label}),we)}}),at=a.useCallback(function(x,b){var F,I=b.selected,K=b.source,L=V[x],N=L==null?void 0:L.node,D=(F=N==null?void 0:N[y.value])!==null&&F!==void 0?F:x;if(!W)Ze([D],{selected:!0,triggerValue:D},"option");else{var j=I?[].concat(Se(Ct),[D]):Ke.filter(function(me){return me!==D});if(q){var ve=qe(j),Be=ve.missingRawValues,ze=ve.existRawValues,we=ze.map(function(me){return se.get(me).key}),je;if(I){var et=lt(we,!0,V);je=et.checkedKeys}else{var Z=lt(we,{checked:!1,halfCheckedKeys:Je},V);je=Z.checkedKeys}j=[].concat(Se(Be),Se(je.map(function(me){return V[me].node[y.value]})))}Ze(j,{selected:I,triggerValue:D},K||"option")}I||!W?c==null||c(D,ct(N)):i==null||i(D,ct(N))},[qe,se,V,y,W,Ct,Ze,q,c,i,Ke,Je]),nn=a.useCallback(function(x){if($){var b={};Object.defineProperty(b,"documentClickClose",{get:function(){return nt(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),$(x,b)}},[$]),rn=kt(function(x,b){var F=x.map(function(I){return I.value});if(b.type==="clear"){Ze(F,{},"selection");return}b.values.length&&at(b.values[0].value,{selected:!1,source:"selection"})}),on=a.useMemo(function(){return{virtual:Q,dropdownMatchSelectWidth:de,listHeight:Me,listItemHeight:J,listItemScrollOffset:Ce,treeData:Xe,fieldNames:y,onSelect:at,treeExpandAction:ue,treeTitleRender:H,onPopupScroll:Re}},[Q,de,Me,J,Ce,Xe,y,at,ue,H,Re]),an=a.useMemo(function(){return{checkable:oe,loadData:ne,treeLoadedKeys:Y,onTreeLoad:_,checkedKeys:Ke,halfCheckedKeys:Je,treeDefaultExpandAll:ke,treeExpandedKeys:be,treeDefaultExpandedKeys:Oe,onTreeExpand:re,treeIcon:ie,treeMotion:Fe,showTreeIcon:pe,switcherIcon:xe,treeLine:G,treeNodeFilterProp:p,keyEntities:V}},[oe,ne,Y,_,Ke,Je,ke,be,Oe,re,ie,Fe,pe,xe,G,p,V]);return a.createElement(ht.Provider,{value:on},a.createElement(Qt.Provider,{value:an},a.createElement(er,$t({ref:t},$e,{id:He,prefixCls:o,mode:W?"multiple":void 0,displayValues:tn,onDisplayValuesChange:rn,searchValue:he,onSearch:We,OptionList:Zr,emptyOptions:!ae.length,onDropdownVisibleChange:nn,dropdownMatchSelectWidth:de}))))}),Ue=no;Ue.TreeNode=ft;Ue.SHOW_ALL=gt;Ue.SHOW_PARENT=vt;Ue.SHOW_CHILD=rt;const ro=e=>{const{componentCls:t,treePrefixCls:n,colorBgElevated:r}=e,o=`.${n}`;return[{[`${t}-dropdown`]:[{padding:`${Ft(e.paddingXS)} ${Ft(e.calc(e.paddingXS).div(2).equal())}`},_n(n,Ht(e,{colorBgContainer:r})),{[o]:{borderRadius:0,[`${o}-list-holder-inner`]:{alignItems:"stretch",[`${o}-treenode`]:{[`${o}-node-content-wrapper`]:{flex:"auto"}}}}},$n(`${n}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${o}-switcher${o}-switcher_close`]:{[`${o}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function oo(e,t,n){return dn("TreeSelect",r=>{const o=Ht(r,{treePrefixCls:t});return[ro(o)]},Pn)(e,n)}var ao=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const so=(e,t)=>{var n;const{prefixCls:r,size:o,disabled:s,bordered:l=!0,className:u,rootClassName:c,treeCheckable:i,multiple:d,listHeight:g=256,listItemHeight:m=26,placement:h,notFoundContent:E,switcherIcon:C,treeLine:S,getPopupContainer:p,popupClassName:R,dropdownClassName:O,treeIcon:P=!1,transitionName:M,choiceTransitionName:f="",status:w,treeExpandAction:A,builtinPlacements:U,dropdownMatchSelectWidth:ee,popupMatchSelectWidth:te,allowClear:ne,variant:Y,dropdownStyle:_,tagRender:ke}=e,be=ao(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender"]),{getPopupContainer:Oe,getPrefixCls:re,renderEmpty:ue,direction:Q,virtual:Te,popupMatchSelectWidth:Me,popupOverflow:Le}=a.useContext(fn),J=re(),T=re("select",r),Ce=re("select-tree",r),$=re("tree-select",r),{compactSize:ce,compactItemClassnames:de}=hn(T,Q),G=Rt(T),ie=Rt($),[pe,xe,Fe]=tr(T,G),[H]=oo($,Ce,ie),[Re,$e]=ar("treeSelect",Y,l),He=Et(R||O,`${$}-dropdown`,{[`${$}-dropdown-rtl`]:Q==="rtl"},c,Fe,G,ie,xe),q=!!(i||d),oe=nr(e.suffixIcon,e.showArrow),Ee=(n=te??ee)!==null&&n!==void 0?n:Me,{status:W,hasFeedback:Ve,isFormItemInput:Ie,feedbackIcon:X}=a.useContext(gn),Ne=lr(W,w),{suffixIcon:k,removeIcon:y,clearIcon:fe}=ur(Object.assign(Object.assign({},be),{multiple:q,showSuffixIcon:oe,hasFeedback:Ve,feedbackIcon:X,prefixCls:T,componentName:"TreeSelect"})),B=ne===!0?{clearIcon:fe}:ne;let he;E!==void 0?he=E:he=(ue==null?void 0:ue("Select"))||a.createElement(rr,{componentName:"Select"});const De=vn(be,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),We=a.useMemo(()=>h!==void 0?h:Q==="rtl"?"bottomRight":"bottomLeft",[h,Q]),ae=mn(le=>{var ge;return(ge=o??ce)!==null&&ge!==void 0?ge:le}),Qe=a.useContext(Sn),V=s??Qe,se=Et(!r&&$,{[`${T}-lg`]:ae==="large",[`${T}-sm`]:ae==="small",[`${T}-rtl`]:Q==="rtl",[`${T}-${Re}`]:$e,[`${T}-in-form-item`]:Ie},sr(T,Ne,Ve),de,u,c,Fe,G,ie,xe),qe=le=>a.createElement(Hn,{prefixCls:Ce,switcherIcon:C,treeNodeProps:le,showLine:S}),[Xe]=yn("SelectLike",_==null?void 0:_.zIndex),Ye=a.createElement(Ue,Object.assign({virtual:Te,disabled:V},De,{dropdownMatchSelectWidth:Ee,builtinPlacements:or(U,Le),ref:t,prefixCls:T,className:se,listHeight:g,listItemHeight:m,treeCheckable:i&&a.createElement("span",{className:`${T}-tree-checkbox-inner`}),treeLine:!!S,suffixIcon:k,multiple:q,placement:We,removeIcon:y,allowClear:B,switcherIcon:qe,showTreeIcon:P,notFoundContent:he,getPopupContainer:p||Oe,treeMotion:null,dropdownClassName:He,dropdownStyle:Object.assign(Object.assign({},_),{zIndex:Xe}),choiceTransitionName:It(J,"",f),transitionName:It(J,"slide-up",M),treeExpandAction:A,tagRender:q?ke:void 0}));return pe(H(Ye))},lo=a.forwardRef(so),Ae=lo,uo=In(Ae);Ae.TreeNode=ft;Ae.SHOW_ALL=gt;Ae.SHOW_PARENT=vt;Ae.SHOW_CHILD=rt;Ae._InternalPanelDoNotUseOrYouWillBeFired=uo;const co=e=>a.useMemo(()=>({...{maxHeight:400,overflow:"auto"},...e}),[e]),io=e=>{const n=e.getFieldNames().title;return a.useCallback((r,o)=>!o||typeof o[n]!="string"?!1:o[n].toLowerCase().indexOf(r.toLowerCase())>=0,[n])},qt=({api:e})=>{const t=e.getFetchError(),n=e.getIsFetching(),r=e.getMinSymbols(),o=e.isDataPlainList();return r?v.jsx(fo,{minSymbols:r,plainList:o}):n?v.jsx(ho,{plainList:o}):t?v.jsx(go,{error:t,plainList:o}):v.jsx(v.Fragment,{})},fo=({minSymbols:e,plainList:t})=>v.jsxs("div",{style:{paddingLeft:t?"8px":"30px",fontSize:"12px"},children:["Введите как минимум ",e," симв."]}),ho=({plainList:e})=>v.jsxs("div",{style:{paddingLeft:e?"8px":"30px",fontSize:"12px"},children:[v.jsx(Nn,{size:"small"})," загрузка..."]}),go=({error:e,plainList:t})=>v.jsx("div",{role:"alert",style:{paddingLeft:t?"8px":"30px",fontSize:"12px",color:"#ff4d4f"},children:e}),vo=({api:e})=>{const t=e.getIsFetching(),n=e.getFetchError(),r=e.getMinSymbols(),o=e.isDataPlainList();return r||t||n?v.jsx(v.Fragment,{}):v.jsx("div",{style:{paddingLeft:o?"8px":"30px",fontSize:"12px"},children:e.t("dataNotFound")})},ot=a.createContext(void 0),mo=({children:e})=>{const t=a.useRef(!1),n=a.useRef(!1),r=a.useMemo(()=>({ctrlPressedRef:t,dialogOpenedRef:n}),[t]);return v.jsx(ot.Provider,{value:r,children:e})},Tt=(e,t,n)=>{const{dialogOpenedRef:r}=a.useContext(ot);return a.useMemo(()=>{const o=n?t==null?void 0:t.editGroupFormProps:t==null?void 0:t.editFormProps;if(!o)return;const s={...o};t.language&&!s.language&&(s.language=t.language);const l=o==null?void 0:o.onSubmitSuccess;s.onSubmitSuccess=(i,d,g,m,h)=>{var R;if(l==null||l(i,d,g,m,h),h.isPrevented())return;const E=m.model.getFormMode(),C=e.getFieldNames(),S={...d,...g};let p;if(S[C.parent]?p=(R=S[C.parent])==null?void 0:R[C.key]:S[C.parent]===null?p=void 0:p=e.getActiveNodeKey(),E==="create"||E==="clone")S[C.key]||(S[C.key]=Wn()),e.addNode(S,p,"insideBottom",{ensureVisible:!0,select:!!t.selectNewNode,sortNodes:t.sortOnChange});else if(E==="update"){e.updateNode(S,p,{ensureVisible:!0,sortNodes:t.sortOnChange});const O=e.getValues();e.setValues(So(O,S,C))}};const u=o==null?void 0:o.onOpen;s.onOpen=(i,d,g,m)=>{const h=u==null?void 0:u(i,d,g,m);return m.isPrevented()||(r.current=!0),h};const c=o==null?void 0:o.onClosed;return s.onClosed=(i,d)=>{c==null||c(i,d),!d.isPrevented()&&(r.current=!1)},s},[n,t==null?void 0:t.editFormProps,t==null?void 0:t.editGroupFormProps,t.language,t.selectNewNode,e,r])},So=(e,t,n)=>{if(!e)return null;const r=[];for(const o of e)o.value===t[n.key]?r.push({value:o.value}):r.push(o);return r},yo=(e,t)=>{e.getButtonsApi().refreshButtons=bo();const n=e.getFieldNames(),r=e.getActiveNode(!0),o=!(r!=null&&r.isLeaf)&&(!t.groupsMode||(r==null?void 0:r[n.isGroup])),s=t.buttons,l=t.buttonsSize??"small",u=t.buttonsPosition??"right",c=Co(t),i=po(e,t,o),d=xo(e,t,o),g=Fo(e,t,r,o),m=Ro(e,t,r,o),h=Eo(e,t,r,o),E=Io(e,t,r,o);return a.useMemo(()=>{const S=Dn({headerLabel:c,view:g,create:i,createGroup:d,clone:m,update:h,delete:E},s);for(const p in S){const R=S[p];!R||p==="headerLabel"||R.type==="hotkey"||(R.size=R.size??l,R.position=R.position??u,R.checkDisabled&&(R.disabled=!r),R.checkHidden&&(R.hidden=!r))}return S},[c,g,i,d,m,h,E,s,l,u,r])},bo=()=>{const[,e]=a.useState({});return a.useCallback(()=>{e({})},[e])},Co=e=>a.useMemo(()=>{if(e.headerLabel)return{...Bn,title:e.headerLabel}},[e.headerLabel]),po=(e,t,n)=>{var r;return a.useMemo(()=>{var o;if(!(!t.editFormProps||t.disabled||t.readOnly||((o=t.buttons)==null?void 0:o.create)===null))return{...zn,title:e.t("create"),tooltip:e.t("createRecord"),onClick:()=>{const s=e.getFieldNames(),l=e.getActiveNode(!1);let u;l&&(u=l&&n?l:e.getParentNode(l)),e.getEditFormApi().open("create",{defaultValues:{[s.parent]:u}})}}},[t.editFormProps,t.disabled,t.readOnly,(r=t.buttons)==null?void 0:r.create,e,n])},xo=(e,t,n)=>{var r;return a.useMemo(()=>{var o;if(!(!t.editGroupFormProps||!t.groupsMode||t.disabled||t.readOnly||((o=t.buttons)==null?void 0:o.createGroup)===null))return{...Un,title:e.t("createGroup"),tooltip:e.t("createRecordsGroup"),onClick:()=>{const s=e.getFieldNames(),l=e.getActiveNode(!1);let u;l&&(u=l&&n?l:e.getParentNode(l)),e.getEditGroupFormApi().open("create",{defaultValues:{[s.parent]:u}})}}},[t.editGroupFormProps,t.groupsMode,t.disabled,t.readOnly,(r=t.buttons)==null?void 0:r.createGroup,e,n])},Fo=(e,t,n,r)=>{var o;return a.useMemo(()=>{var s;if(!(!r&&!t.editFormProps||r&&!t.editGroupFormProps||!t.readOnly||t.disabled||((s=t.buttons)==null?void 0:s.view)===null))return{...Qn,title:e.t("view"),tooltip:e.t("viewRecord"),disabled:!n,onClick:()=>{if(!n)return;const l=e.getFieldNames(),u=e.getParentNode(n);r?e.getEditGroupFormApi().open("view",{dataSet:{..._e(n),[l.parent]:u}}):e.getEditFormApi().open("view",{dataSet:{..._e(n),[l.parent]:u}})}}},[r,t.editFormProps,t.editGroupFormProps,t.readOnly,t.disabled,(o=t.buttons)==null?void 0:o.view,n,e])},Ro=(e,t,n,r)=>{var o;return a.useMemo(()=>{var l;const s=t.editGroupFormProps;if(!(!r&&!t.editFormProps||r&&!t.editGroupFormProps||t.disabled||t.readOnly||((l=t.buttons)==null?void 0:l.clone)===null))return{...qn,title:r&&s?e.t("cloneGroup"):e.t("clone"),tooltip:r&&s?e.t("cloneRecordsGroup"):e.t("cloneRecord"),disabled:!n,onClick:()=>{if(!n)return;const u=e.getFieldNames(),c=e.getParentNode(n);r?e.getEditGroupFormApi().open("clone",{dataSet:{..._e(n),[u.parent]:c}}):e.getEditFormApi().open("clone",{dataSet:{..._e(n),[u.parent]:c}})}}},[t.editGroupFormProps,t.editFormProps,t.disabled,t.readOnly,(o=t.buttons)==null?void 0:o.clone,r,n,e])},Eo=(e,t,n,r)=>{var o;return a.useMemo(()=>{var l;const s=t.editGroupFormProps;if(!(!r&&!t.editFormProps||r&&!t.editGroupFormProps||t.disabled||t.readOnly||((l=t.buttons)==null?void 0:l.update)===null))return{...Xn,title:r&&s?e.t("editGroup"):e.t("edit"),tooltip:r&&s?e.t("editRecordsGroup"):e.t("editRecord"),disabled:!n,onClick:()=>{if(!n)return;const u=e.getFieldNames(),c=e.getParentNode(n);r?e.getEditGroupFormApi().open("update",{dataSet:{..._e(n),[u.parent]:c}}):e.getEditFormApi().open("update",{dataSet:{..._e(n),[u.parent]:c}})}}},[t.editGroupFormProps,t.editFormProps,t.disabled,t.readOnly,(o=t.buttons)==null?void 0:o.update,r,n,e])},Io=(e,t,n,r)=>{const{dialogOpenedRef:o}=a.useContext(ot);return a.useMemo(()=>{var s;if(!(!t.editFormProps||t.disabled||t.readOnly||((s=t.buttons)==null?void 0:s.delete)===null))return{...Yn,title:r?e.t("deleteGroup"):e.t("delete"),tooltip:r?e.t("deleteRecordsGroup"):e.t("deleteRecord"),disabled:!n,onClick:()=>{if(!n)return;if(o.current=!0,!t.confirmDelete){Mt(n,t,e,o),o.current=!1;return}const l=Bt.confirmWaiter({language:t.language,content:t.nodeDeleteMessage??e.t("deleteSelectedRecordQt"),colorType:"danger",onOk:()=>{Mt(n,t,e,o,l)},onCancel:()=>{l.destroy(),o.current=!1}})}}},[t,r,e,n,o])},Mt=(e,t,n,r,o)=>{var u;const s=n.getButtonsApi(),l=(u=t==null?void 0:t.onDelete)==null?void 0:u.call(t,e,n);if(!pn(l)){n.removeNode(e),o&&o.destroy(),r.current=!1;return}t.confirmDelete||(s.loading("delete",!0),s.disableAll(!0)),l.then(()=>{o==null||o.destroy(),n.getIsMounted()&&(n.removeNode(e),t.confirmDelete||(s.loading("delete",!1),s.disableAll(!1)),r.current=!1)}).catch(c=>{o==null||o.destroy(),n.getIsMounted()&&(t.confirmDelete||(s.loading("delete",!1),s.disableAll(!1)),Bt.alert({language:t.language,title:n.t("error"),content:v.jsx(xn,{error:c}),colorType:"danger",onOk:()=>{r.current=!1}}))})},_e=e=>({...e}),No=({treeApi:e,treeProps:t})=>{const n=yo(e,t),{token:{colorBorderSecondary:r}}=bn.useToken();return a.useMemo(()=>n?v.jsx("div",{style:{padding:"0 4px 6px 4px",borderBottom:`1px solid ${r}`,...t.buttonsRowWrapperStyle},children:v.jsx(wn,{buttons:n,apiRef:e.getButtonsApi(),style:t.buttonsRowStyle,context:e,iconsOnly:t.buttonsIconsOnly!==!1})}):null,[n,r,e,t.buttonsIconsOnly,t.buttonsRowStyle,t.buttonsRowWrapperStyle])},Do=({api:e,children:t})=>{const n=e.isDataPlainList(),r=e.getProps();return v.jsx("div",{className:n?"tree-select-plain":void 0,children:r.editFormProps||r.editGroupFormProps?v.jsx(wo,{api:e,children:t}):v.jsxs(v.Fragment,{children:[t,v.jsx(qt,{api:e})]})})},wo=({api:e,children:t})=>{const n=e.getProps();return v.jsxs(An,{style:{display:"flex",flexDirection:"column",...n.buttonsRowWrapperStyle},noKeepFocus:!0,children:[v.jsx(No,{treeApi:e,treeProps:n}),t,v.jsx(qt,{api:e})]})},Ao=({api:e,children:t})=>{const n=e.getProps(),r=a.useContext(ht);return r&&(n.titleRender?r.treeTitleRender=n.titleRender:r.treeTitleRender=void 0),n.dropdownRender?n.dropdownRender(t):v.jsx(Do,{api:e,children:t})},ko=({api:e,allProps:t,treeSelectProps:n})=>{const{ctrlPressedRef:r,dialogOpenedRef:o}=a.useContext(ot);To(r);const s=Tt(e,t,!1),l=Tt(e,t,!0),u=co(t.dropdownStyle),c=Lo({api:e}),i=Mo(e),d=_o(e.getFieldNames()),g=e.getExpandedKeys(),m=$o(e),h=Vo(e),E=Go(e),C=Ko(e,r,o),S=jo(e),p=Po(e);return v.jsxs(v.Fragment,{children:[v.jsx(Ae,{ref:e.treeSelectRef,treeNodeFilterProp:d.label,notFoundContent:v.jsx(vo,{api:e}),...n,labelInValue:!0,treeTitleRender:t.selectedRender,dropdownRender:t.readOnly?Oo:c,showSearch:!t.readOnly&&t.showSearch!==!1,allowClear:!t.readOnly&&t.allowClear!==!1,fieldNames:d,treeData:e.getDataSet(),value:i,disabled:t.disabled,treeDefaultExpandAll:t.defaultExpandAll,treeDefaultExpandedKeys:t.defaultExpandedKeys,treeExpandedKeys:g,open:e.getIsOpen(),dropdownStyle:u,filterTreeNode:p,onTreeExpand:m,onClear:h,onChange:E,onDropdownVisibleChange:C,onSearch:S}),!t.disabled&&s?v.jsx(Nt,{...s,apiRef:e.getEditFormApi()}):null,!t.disabled&&l?v.jsx(Nt,{...l,apiRef:e.getEditGroupFormApi()}):null]})},Oo=()=>v.jsx(v.Fragment,{}),To=e=>{Dt("keydown",t=>{t.key==="Control"&&(e.current=!0)}),Dt("keyup",t=>{t.key==="Control"&&(e.current=!1)})},Mo=e=>{const t=e.getValues();return e.getProps().multiple?t??void 0:(t==null?void 0:t[0])??void 0},Lo=({api:e})=>a.useCallback(t=>v.jsx(Ao,{api:e,children:t}),[e]),Vo=e=>a.useCallback(()=>{var n;e.setValues(null);const t=e.getProps();(n=t.onClear)==null||n.call(t)},[e]),Go=e=>a.useCallback(t=>{var l;const n=t;e.setValues(n??null);const r=e.getProps(),o=n?e.getSelectedKeys(n)??[]:[],s=n?e.getSelectedNodes(void 0,n)??[]:[];(l=r.onChange)==null||l.call(r,t,o,s)},[e]),Ko=(e,t,n)=>a.useCallback(r=>{var s;const o=e.getProps();if(o.readOnly){e.setIsOpen(!1);return}t.current||n.current?e.setIsOpen(!0):e.setIsOpen(r),r&&(o.fetchMode==="onUse"||o.fetchMode==="onUseForce")&&e.fetchData(),(s=o.onDropdownVisibleChange)==null||s.call(o,r)},[e,t,n]),jo=e=>a.useCallback(t=>{var r;e.fetchData(t,!0);const n=e.getProps();(r=n.onSearch)==null||r.call(n,t)},[e]),Po=e=>{const t=io(e);return a.useCallback((n,r)=>{if(!e.getIsAllFetched())return!0;const o=e.getProps();return o.filterTreeNode?typeof o.filterTreeNode=="function"?o.filterTreeNode(n,r):o.filterTreeNode:t(n,r)},[e,t])},_o=e=>a.useMemo(()=>{const t=e.key,n=e.title,r=e.children;return{value:t,label:n,children:r}},[e.children,e.key,e.title]),$o=e=>a.useCallback(t=>{var r;const n=e.getProps();e.setExpandedKeys(t),(r=n.onTreeExpand)==null||r.call(n,t)},[e]),Ho=e=>t=>{var o;if(!e.getIsMounted())return;const n=e.getProps();if(!n.noCacheFetchedData&&e.getIsAllFetched())return;if(n.minSearchLength&&t.length<n.minSearchLength){e.setMinSymbols(n.minSearchLength),e.setDataSet(void 0);return}e.setMinSymbols(0),e.setFetchError(void 0);const r=(o=n==null?void 0:n.onDataFetch)==null?void 0:o.call(n,t,e);if(!r){e.setIsAllFetched(!0);return}e.setIsFetching(!0),t||e.setDataSet(void 0),r.then(s=>{var l,u,c;e.getIsMounted()&&(e.setDataSet(s.data),e.setIsAllFetched(e.getIsAllFetched()||!t),e.getIsReady()||(e.setIsReady(!0),(l=n==null?void 0:n.onReady)==null||l.call(n)),e.setIsFetching(!1),(u=n==null?void 0:n.onDataFetchSuccess)==null||u.call(n,s,e),(c=n==null?void 0:n.onDataFetchComplete)==null||c.call(n,e))},s=>{e.getIsMounted()&&(e.setFetchError(s.message),e.setDataSet(void 0),e.setIsFetching(!1))})},Wo=e=>{const[t,n]=a.useState(e.open);return zt(()=>{n(e.open)},[e.open]),[t,n]},Bo=e=>()=>e,zo=e=>t=>{e(t)},Uo=({dataMutator:e})=>a.useCallback(t=>{if(!e)return t;let n={...t};return e&&(n=e(n)),n},[e]),Qo=e=>()=>e,qo=e=>t=>{e(t)},Xo=e=>()=>e,Yo=e=>()=>e,Jo=e=>()=>e,Zo=e=>t=>{e(t)},ea=e=>()=>e,ta=e=>t=>{e(t)},na=e=>()=>e,ra=e=>t=>{e(t)},oa=e=>()=>e,aa=e=>t=>{e(t)};var sa="Expected a function",Lt=NaN,la="[object Symbol]",ua=/^\s+|\s+$/g,ca=/^[-+]0x[0-9a-f]+$/i,da=/^0b[01]+$/i,ia=/^0o[0-7]+$/i,fa=parseInt,ha=typeof tt=="object"&&tt&&tt.Object===Object&&tt,ga=typeof self=="object"&&self&&self.Object===Object&&self,va=ha||ga||Function("return this")(),ma=Object.prototype,Sa=ma.toString,ya=Math.max,ba=Math.min,st=function(){return va.Date.now()};function Ca(e,t,n){var r,o,s,l,u,c,i=0,d=!1,g=!1,m=!0;if(typeof e!="function")throw new TypeError(sa);t=Vt(t)||0,dt(n)&&(d=!!n.leading,g="maxWait"in n,s=g?ya(Vt(n.maxWait)||0,t):s,m="trailing"in n?!!n.trailing:m);function h(f){var w=r,A=o;return r=o=void 0,i=f,l=e.apply(A,w),l}function E(f){return i=f,u=setTimeout(p,t),d?h(f):l}function C(f){var w=f-c,A=f-i,U=t-w;return g?ba(U,s-A):U}function S(f){var w=f-c,A=f-i;return c===void 0||w>=t||w<0||g&&A>=s}function p(){var f=st();if(S(f))return R(f);u=setTimeout(p,C(f))}function R(f){return u=void 0,m&&r?h(f):(r=o=void 0,l)}function O(){u!==void 0&&clearTimeout(u),i=0,r=c=o=u=void 0}function P(){return u===void 0?l:R(st())}function M(){var f=st(),w=S(f);if(r=arguments,o=this,c=f,w){if(u===void 0)return E(c);if(g)return u=setTimeout(p,t),h(c)}return u===void 0&&(u=setTimeout(p,t)),l}return M.cancel=O,M.flush=P,M}function dt(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function pa(e){return!!e&&typeof e=="object"}function xa(e){return typeof e=="symbol"||pa(e)&&Sa.call(e)==la}function Vt(e){if(typeof e=="number")return e;if(xa(e))return Lt;if(dt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=dt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(ua,"");var n=da.test(e);return n||ia.test(e)?fa(e.slice(2),n?2:8):ca.test(e)?Lt:+e}var Fa=Ca;const Ra=Cn(Fa),Ea=(e,t)=>(n="",r)=>{const o=Ra(e,t.getProps().debounce??0);r?o(n):e(n)},Gt=e=>!!(e&&typeof e=="object"&&e.value),Kt=(e,t)=>{const n=e[t.key],r=e[t.title];return{value:n,label:r}},mt=(e,t)=>{if(!e)return null;if(!it(e))return typeof e=="object"?Gt(e)?[e]:[Kt(e,t)]:[{value:e}];const n=[];for(const r of e)r&&(typeof r=="object"?Gt(r)?n.push(r):n.push(Kt(r,t)):n.push({value:r}));return n},Ia=({value:e},t)=>{const n=Na(e??null,t),[r,o]=a.useState(n);return zt(()=>{o(n)},[n]),[r,o]},Na=(e,t)=>a.useMemo(()=>mt(e,t),[t,e]),Da=e=>()=>e??null,wa=(e,t)=>a.useCallback(n=>{e(mt(n,t))},[t,e]),Aa=e=>t=>{const n=t??e;if(!n)return;if(!it(n))return[n.value];const r=[];for(const o of n)r.push(o.value);return r},jt=(e,t,n)=>{const r={[n.key]:e.value,[n.title]:e.label},{idx:o,nodes:s}=cr(t,e.value,n);if(o<0||!(s!=null&&s[o]))return r;const l={...s[o]};return delete l[n.children],l},ka=(e,t)=>{const n=a.useRef(void 0),r=a.useRef(null),o=a.useRef(void 0);return(s,l)=>{const u=e.getDataSet(),c=e.getFieldNames(),i=s??u,d=l??t;if(n.current===i&&r.current===d)return o.current;if(n.current=i,r.current=d,!d){o.current=void 0;return}const g=[];if(!it(d))g.push(jt(d,i,c));else for(const m of d){const h=jt(m,i,c);h&&g.push(h)}return o.current=g,g}},Oa=(e,t)=>a.useCallback((n,r=!0)=>{var u;const o=e.getFieldNames(),s=(u=mt(n,o))==null?void 0:u[0];if(!s)return;const l=e.getValues();if(r){if(Pt(l,s.value))return;t?e.setValues([...l??[],s]):e.setValues([s])}else{if(!Pt(l,s.value))return;t?e.setValues((l==null?void 0:l.filter(c=>c.value!==s.value))??null):e.setValues([])}},[e,t]),Pt=(e,t)=>{if(!e)return!1;for(const n of e)if(n.value===t)return!0;return!1},Ta={view:"Просмотр",viewRecord:"Просмотр записи",create:"Создать",createRecord:"Создать запись",createGroup:"Создать группу",createRecordsGroup:"Создать группу записей",edit:"Редактировать",editGroup:"Редактировать группу",editRecord:"Редактировать запись",editRecordsGroup:"Редактировать группу записей",clone:"Клонировать",cloneGroup:"Клонировать группу",cloneRecord:"Клонировать запись",cloneRecordsGroup:"Клонировать группу записей",delete:"Удалить",deleteGroup:"Удалить группу",deleteRecord:"Удалить запись(и)",deleteRecordsGroup:"Удалить группу записей",select:"Выбрать",selectRecord:"Выбрать запись(и)",go:"Перейти",filter:"Фильтр",ok:"OK",cancel:"Отмена",tryAgainQt:"Попробовать еще раз?",deleteSelectedRecordQt:"Удалить выбранную запись?",error:"Ошибка",dataNotFound:"Данные не найдены"},Ma={view:"View",viewRecord:"View record",create:"Create",createRecord:"Create record",createGroup:"Create group",createRecordsGroup:"Create records group",edit:"Edit",editGroup:"Edit group",editRecord:"Edit record",editRecordsGroup:"Edit records group",clone:"Clone",cloneGroup:"Clone group",cloneRecord:"Clone record",cloneRecordsGroup:"Clone records group",delete:"Delete",deleteGroup:"Delete group",deleteRecord:"Delete record(s)",deleteRecordsGroup:"Delete records group(s)",select:"Select",selectRecord:"Select record(s)",go:"Go",filter:"Filter",ok:"OK",cancel:"Cancel",tryAgainQt:"Try again?",deleteSelectedRecordQt:"Delete selected record?",error:"Error",dataNotFound:"Data not found"},La={view:"查看",viewRecord:"查看记录",create:"创建",createRecord:"创建记录",createGroup:"创建组",createRecordsGroup:"创建记录组",edit:"编辑",editGroup:"编辑组",editRecord:"编辑记录",editRecordsGroup:"编辑记录组",clone:"克隆",cloneGroup:"克隆组",cloneRecord:"克隆记录",cloneRecordsGroup:"克隆记录组",delete:"删除",deleteGroup:"删除组",deleteRecord:"删除记录",deleteRecordsGroup:"删除记录组",select:"选择",selectRecord:"选择记录",go:"前往",filter:"过滤",ok:"确定",cancel:"取消",tryAgainQt:"再试一次",deleteSelectedRecordQt:"删除选定的记录",error:"错误",dataNotFound:"数据未找到"},Va={ru:Ta,en:Ma,cn:La},Ga=e=>Fn(e.language,Va,e.translation),Ka=({props:e,setProps:t})=>{var Y,_;const[n]=a.useState(e.apiRef??{}),[r]=a.useState(((Y=e.editFormProps)==null?void 0:Y.apiRef)??{}),[o]=a.useState(((_=e.editGroupFormProps)==null?void 0:_.apiRef)??{}),[s,l]=a.useState(!1),[u,c]=a.useState(!1),[i,d]=a.useState(),[g,m]=a.useState(!1),[h,E]=a.useState(0),[C,S]=Wo(e),p=wt(e)(),R=Uo(e),[O,P]=Ia(e,p),[M,f,w,A]=dr(e.dataSet,p,R),[U,ee]=ir(e.expandedKeys,e.defaultExpandedKeys,e.defaultExpandAll,A),te=Ho(n),ne={getId:kn(e.componentId??"treeSelect-"+On()),getProps:Tn(e),setProps:Mn(t),updateProps:Ln(e,t),getIsMounted:Vn(),getFieldNames:wt(e),getDataSet:fr(M),setDataSet:hr(f,e==null?void 0:e.onDataSetChanged),getGroupsOnly:gr(n),sortTree:vr(M,e.sortComparator,n),getValues:Da(O),setValues:wa(P,p),isDataPlainList:mr(w),getEditFormApi:Yo(r),getEditGroupFormApi:Xo(o),getSelectedKeys:Aa(O),getSelectedNodes:ka(n,O),isNodeSelected:Sr(n),selectNode:Oa(n,e.multiple),getActiveNodeKey:yr(n),getActiveNode:br(n),getExpandedKeys:Cr(U),setExpandedKeys:pr(ee),getExpandedNodes:xr(n),isNodeExpanded:Fr(n),expandNode:Rr(n),collapseNode:Er(n),toggleNode:Ir(n),expandParentNodes:Nr(n),getNode:Dr(n),getNodes:wr(n),getNextNodeKey:Ar(n),getPrevNodeKey:kr(n),getNextNode:Or(n),getPrevNode:Tr(n),getParentNode:Mr(n),addNode:Lr(n),updateNode:Vr(n),removeNode:Gr(n),moveNode:Kr(n),ensureNodeVisible:jr(n),t:Ga(e),treeSelectRef:a.useRef(null),getButtonsApi:Rn(),getIsReady:Qo(s),setIsReady:qo(l),getIsOpen:Bo(C),setIsOpen:zo(S),getIsFetching:Jo(u),setIsFetching:Zo(c),getFetchError:ea(i),setFetchError:ta(d),getIsAllFetched:na(g),setIsAllFetched:ra(m),getMinSymbols:oa(h),setMinSymbols:aa(E),fetchData:Ea(te,n)};return Object.assign(n,ne),n},ja=e=>{const[t,n]=Gn(e),r=Pa(t),o=Ka({props:t,setProps:n});return a.useEffect(()=>{var s;(!t.fetchMode||t.fetchMode==="onLoad")&&!t.minSearchLength?o.fetchData():o.getIsReady()||(o.setIsReady(!0),(s=t==null?void 0:t.onReady)==null||s.call(t))},[o,t,t.fetchMode,t.minSearchLength]),v.jsx(mo,{children:v.jsx(ko,{api:o,allProps:t,treeSelectProps:r})})},Pa=e=>a.useMemo(()=>Wt(e,{apiRef:!0,componentId:!0,dataMutator:!0,readOnly:!0,value:!0,filterTreeNode:!0,dataSet:!0,fetchMode:!0,noCacheFetchedData:!0,minSearchLength:!0,debounce:!0,editFormProps:!0,nodeDeleteMessage:!0,confirmDelete:!0,buttons:!0,onReady:!0,onDataFetch:!0,onDataFetchSuccess:!0,onDataFetchError:!0,onDataFetchComplete:!0,onDelete:!0,fieldNames:!0,titleRender:!0,selectedRender:!0,editGroupFormProps:!0,defaultExpandAll:!0,defaultExpandedKeys:!0,expandedKeys:!0,buttonsRowStyle:!0,buttonsRowWrapperStyle:!0,buttonsIconsOnly:!0,buttonsPosition:!0,buttonsSize:!0,headerLabel:!0,language:!0,translation:!0,selectNewNode:!0,groupsMode:!0,sortOnChange:!0,sortComparator:!0,onChange:!0,onGetLabelCallback:!0,onDataSetChanged:!0})[1],[e]),_a=(e,t)=>a.useCallback((n,r,o)=>{var s;if(e.isReady()){switch(t.valueType){case void 0:case"node":t.multiple?e.setValue(o??null):e.setValue(o!=null&&o.length?o[0]:null);break;case"labeledValue":e.setValue(n??null);break;case"key":t.multiple?e.setValue(r??null):e.setValue(r!=null&&r.length?r[0]:null);break}e.setDirty(!0)}(s=t.onChange)==null||s.call(t,n,r,o,e)},[e,t]),$a=e=>a.useCallback(()=>{e.setTouched(!0)},[e]),Ha=e=>a.useCallback(()=>{var n;e.setDirty(!0),e.setTouched(!0);const t=e.getProps();(n=t.onClear)==null||n.call(t)},[e]),Wa=(e,t)=>a.useCallback(n=>{var r;return(r=t.onDataSetChanged)==null?void 0:r.call(t,n,e)},[e,t]),Ba=e=>a.useMemo(()=>Wt(e,{autoFocus:!0,autoHeightResize:!0,component:!0,dependsOn:!0,disabled:!0,helpClass:!0,hidden:!0,inlineGroup:!0,label:!0,nonEditable:!0,onDirtyStateChanged:!0,onDisabledStateChanged:!0,onErrorChanged:!0,onHiddenStateChanged:!0,onLabelChanged:!0,onReadOnlyStateChanged:!0,onReady:!0,onReadyStateChanged:!0,onTouchedStateChanged:!0,onValidated:!0,onValueChanged:!0,placeholder:!0,readOnly:!0,requiredMark:!0,rowStyle:!0,rules:!0,style:!0,tab:!0,tooltip:!0,value:!0,width:!0,valueType:!0,onDataSetChanged:!0,onChange:!0,dataSet:!0,onDataFetch:!0})[1],[e]),za=({field:e})=>{a.useSyncExternalStore(e.subscribe.bind(e),e.getSnapshot.bind(e));const[t]=a.useState({}),n=e.getProps(),r=e.getValue()??null,o=$a(e),s=Ha(e),l=Ua(e,n.dataSet),u=_a(e,n),c=Wa(e,n),i=Qa(e,n),d=qa(e,n);a.useEffect(()=>{e.setReady(!0)},[e]);const m={...{width:e.getWidth()??"100%"},...n.style},h=Ba(n);return v.jsx(ja,{apiRef:t,style:m,...h,dataSet:l,autoFocus:n.autoFocus,disabled:e.isDisabled(),readOnly:e.isReadOnly(),value:r,placeholder:n.placeholder??"Choose",onChange:u,onDataSetChanged:c,onDataFetch:i,onReady:d,onClear:s,onBlur:o})},Ua=(e,t)=>a.useMemo(()=>typeof t!="function"?t:()=>t(e),[t,e]),Qa=(e,t)=>a.useCallback((n,r)=>{var o;return(o=t.onDataFetch)==null?void 0:o.call(t,n,r,e)},[e,t]),qa=(e,t)=>a.useCallback(()=>{var n;return(n=t.onReady)==null?void 0:n.call(t,e)},[e,t]);class as extends En{render(){return v.jsx(za,{field:this})}}export{as as T};
