{"version":3,"file":"tabulator-5c6c20f9.js","sources":["../../../../src/tabulatorBase/formatters/dateTime.ts","../../../../src/tabulatorBase/sorters/dateTime.ts","../../../../stories/datasets/tabulator.ts"],"sourcesContent":["import dayjs from \"dayjs\";\r\nimport {ColumnDefinition, ValueStringCallback} from \"tabulator-tables\";\r\n\r\nexport interface IDateTimeFormatterParams {\r\n    // datetime\r\n    inputFormat?: string | undefined;\r\n    outputFormat?: string | undefined;\r\n    invalidPlaceholder?: string | number | ValueStringCallback;\r\n}\r\n\r\nexport const DateTimeFormatter: ColumnDefinition['formatter'] = function (cell, formatterParams: IDateTimeFormatterParams) {\r\n    //cell - the cell component\r\n    //formatterParams - parameters set for the column\r\n    //onRendered - function to call when the formatter has been rendered\r\n    const value = cell.getValue();\r\n    if (!value) return '';\r\n\r\n    let inputFormat = formatterParams.inputFormat || \"DD.MM.YYYY HH:mm:ss\";\r\n    let outputFormat = formatterParams.outputFormat || \"DD.MM.YYYY HH:mm:ss\";\r\n    if (!inputFormat) {\r\n        if (value.length === 10) inputFormat = 'DD.MM.YYYY';\r\n        else if (value.length === 16) inputFormat = 'DD.MM.YYYY HH:mm';\r\n        else inputFormat = \"DD.MM.YYYY HH:mm:ss\";\r\n    }\r\n\r\n    if (!outputFormat) {\r\n        if (value.length === 10) outputFormat = 'DD.MM.YYYY';\r\n        else if (value.length === 16) outputFormat = 'DD.MM.YYYY HH:mm';\r\n        else outputFormat = \"DD.MM.YYYY HH:mm:ss\";\r\n    }\r\n\r\n    const invalid = typeof formatterParams.invalidPlaceholder !== 'undefined' ? formatterParams.invalidPlaceholder : '';\r\n\r\n    const dt = dayjs(value, inputFormat)\r\n    if (!dt.isValid()) {\r\n        if (typeof invalid === \"function\") {\r\n            return invalid(value);\r\n        } else {\r\n            return invalid.toString();\r\n        }\r\n    }\r\n\r\n    return dt.format(outputFormat)\r\n}","import {ColumnDefinition} from \"tabulator-tables\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport interface IDateTimeSorterParams {\r\n    format?: string | undefined;\r\n    alignEmptyValues?: 'top'|'bottom';\r\n}\r\nexport const DateTimeSorter: ColumnDefinition['sorter'] = function (a, b, aRow, bRow, column, dir, params:IDateTimeSorterParams) {\r\n    let format = params.format;\r\n    if (!format) {\r\n        if (a.length === 10) format = 'DD.MM.YYYY';\r\n        else if (a.length === 16) format = 'DD.MM.YYYY HH:mm';\r\n        else format = \"DD.MM.YYYY HH:mm:ss\";\r\n    }\r\n\r\n    const alignEmptyValues = params.alignEmptyValues;\r\n    let emptyAlign = 0;\r\n\r\n    const valA = dayjs(a, format)\r\n    const valB = dayjs(b, format)\r\n\r\n\r\n    if (!valA.isValid()) {\r\n        emptyAlign = !valB.isValid() ? 0 : -1;\r\n    } else if (!valB.isValid()) {\r\n        emptyAlign = 1;\r\n    } else {\r\n        //compare valid values\r\n        if (valA.isSame(valB)) return 0\r\n        return valA.isBefore(valB) ? -1 : 1\r\n    }\r\n\r\n    //fix empty values in position\r\n    if ((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")) {\r\n        emptyAlign *= -1;\r\n    }\r\n\r\n    return emptyAlign;\r\n}","import {DateTimeFormatter, DateTimeSorter, ITabulatorColumn} from \"@src/tabulatorBase\";\r\n\r\nexport const TabulatorTreeDataset = [\r\n    {\r\n        id: '1',\r\n        name: 'Ivanov Ivan Ivanovich',\r\n        age: '65',\r\n        col: 'red',\r\n        dob: '',\r\n        rating: 2,\r\n        passed: false,\r\n        children: [\r\n            {id: '1_1', name: 'Ivanova Alina Ivanovna', age: '17', col: 'green', dob: '22/05/2019', rating: 4, passed: true},\r\n            {id: '1_2', name: 'Ivanov Petr Ivanovich', age: '16', col: 'orange', dob: '01/08/2021', rating: 2, passed: false},\r\n            {\r\n                id: '1_3',\r\n                name: 'Ivanov Sergey Ivanovich',\r\n                age: '33',\r\n                col: 'yellow',\r\n                dob: '31/01/1990',\r\n                rating: 3, passed: true,\r\n                children: [\r\n                    {id: '1_3_1', name: 'Ivanova Olga Sergeevna', age: '1', col: 'blue', dob: '14/05/2022', rating: 1, passed: false},\r\n                    {id: '1_3_2', name: 'Ivanov Maksim Sergeevich', age: '2', col: 'green', dob: '22/05/2021', rating: 4, passed: true},\r\n                    {id: '1_3_3', name: 'Ivanov Danil Sergeevich', age: '3', col: 'orange', dob: '01/08/2020', rating: 2, passed: false},\r\n                ],\r\n            },\r\n            {id: '1_4', name: 'Ivanov Oleg Ivanovich', age: '11', col: 'red', dob: '30/12/2012', rating: 5, passed: true},\r\n        ],\r\n    },\r\n    {\r\n        id: '2',\r\n        name: 'Mary May1',\r\n        age: '1',\r\n        col: 'blue',\r\n        dob: '14/05/1982',\r\n        rating: 4, passed: true,\r\n        children: [\r\n            {id: '2_1', name: 'Mary May1 Child 1', age: '4', col: 'green', dob: '22/05/2019'},\r\n            {id: '2_2', name: 'Mary May1 Child 2', age: '2', col: 'orange', dob: '01/08/2021'},\r\n            {\r\n                id: '2_3',\r\n                name: 'Mary May1 Child 3',\r\n                age: '23',\r\n                col: 'yellow',\r\n                dob: '31/01/2000',\r\n                children: [\r\n                    {id: '2_3_1', name: 'Mary May1 Grandson 1', age: '1', col: 'blue', dob: '14/05/2022'},\r\n                    {id: '2_3_2', name: 'Mary May1 Grandson 2', age: '2', col: 'green', dob: '22/05/2021'},\r\n                    {id: '2_3_3', name: 'Mary May1 Grandson 3', age: '3', col: 'orange', dob: '01/08/2020'},\r\n                ],\r\n            },\r\n            {id: '2_4', name: 'Mary May1 Child 4', age: '11', col: 'red', dob: '30/12/2012'},\r\n        ],\r\n    },\r\n    {id: '3', name: 'Christine Lobowski1', age: '42', col: 'green', dob: '22/05/1982', rating: 4, passed: true},\r\n    {id: '4', name: 'Brendon Philips1', age: '125', col: 'orange', dob: '05/08/1980', rating: 3, passed: false},\r\n    {id: '5', name: 'Margret Marmajuke1', age: '16', col: 'yellow', dob: '04/02/1999', rating: 5, passed: true},\r\n    {id: '6', name: 'Oli Bob2', age: '12', col: 'red', dob: '', rating: 2, passed: true},\r\n    {id: '7', name: 'Mary May2', age: '1', col: 'blue', dob: '14/05/1982', rating: 1, passed: true},\r\n    {id: '8', name: 'Christine Lobowski2', age: '42', col: 'green', dob: '21/04/1982', rating: 0, passed: false},\r\n    {id: '9', name: 'Brendon Philips2', age: '125', col: 'orange', dob: '01/08/1980', rating: 4, passed: true},\r\n    {id: '10', name: 'Margret Marmajuke2', age: '16', col: 'yellow', dob: '17/01/1999', rating: 2, passed: false},\r\n    {id: '11', name: 'Oli Bob3', age: '12', col: 'red', dob: '', rating: 4, passed: false},\r\n    {id: '12', name: 'Mary May3', age: '1', col: 'blue', dob: '14/05/1982', rating: 5, passed: true},\r\n    {id: '13', name: 'Christine Lobowski3', age: '42', col: 'green', dob: '15/05/1982', rating: 3, passed: true},\r\n    {id: '14', name: 'Brendon Philips3', age: '125', col: 'orange', dob: '01/08/1980', rating: 1, passed: true},\r\n    {id: '15', name: 'Margret Marmajuke3', age: '16', col: 'yellow', dob: '11/02/1999', rating: 0, passed: false},\r\n    {id: '16', name: 'Oli Bob4', age: '12', col: 'red', dob: '', rating: 3, passed: false},\r\n    {id: '17', name: 'Mary May4', age: '1', col: 'blue', dob: '14/05/1982', rating: 4, passed: true},\r\n    {id: '18', name: 'Christine Lobowski4', age: '42', col: 'green', dob: '22/03/1982', rating: 4, passed: true},\r\n    {id: '19', name: 'Brendon Philips4', age: '125', col: 'orange', dob: '17/06/1980', rating: 5, passed: false},\r\n    {id: '20', name: 'Margret Marmajuke4', age: '16', col: 'yellow', dob: '20/01/1999', rating: 4, passed: true},\r\n];\r\n\r\nexport const TabulatorGridColumns: ITabulatorColumn[] = [\r\n    {title: 'Name', field: 'name', headerFilter: true, headerFilterFunc: 'like', frozen: true},\r\n    {title: 'Age', field: 'age', hozAlign: 'left', formatter: 'progress', bottomCalc: \"avg\", bottomCalcParams: {precision: 3}, topCalc: 'sum'},\r\n    {title: 'Favourite Color', field: 'col', headerFilter: true, headerFilterFunc: 'like'},\r\n    {\r\n        title: 'Results',\r\n        columns: [\r\n            {title: 'Rating', field: 'rating', hozAlign: 'center', formatter: 'star', headerFilter: 'star', headerFilterFunc: '='},\r\n            {title: 'Passed?', field: 'passed', hozAlign: 'center', formatter: 'tickCross', headerFilter: 'tickCross', headerFilterFunc: '='},\r\n        ]\r\n    },\r\n\r\n    {\r\n        title: 'Date Of Birth', field: 'dob', hozAlign: 'center',\r\n        formatter: DateTimeFormatter, formatterParams: {inputFormat: 'DD/MM/YYYY', outputFormat: 'DD.MM.YYYY'},\r\n        sorter: DateTimeSorter, sorterParams: {format: 'DD/MM/YYYY'},\r\n        headerFilter: true, headerFilterFunc: 'like'\r\n    }\r\n]"],"names":["DateTimeFormatter","cell","formatterParams","value","inputFormat","outputFormat","invalid","dt","dayjs","DateTimeSorter","a","b","aRow","bRow","column","dir","params","format","alignEmptyValues","emptyAlign","valA","valB","TabulatorTreeDataset","TabulatorGridColumns"],"mappings":"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"}