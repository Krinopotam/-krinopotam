import{N as jt,L as qt,H as A,S as Ot,F as W,U as Mt,J as he,_ as Ct}from"./useToken-DuQNFAH6.js";import{F as Gt,G as It,y as xt,z as Lt,B as ct,t as Ut,H as _t,p as Re,c as ar,x as Nt,q as Jt,J as Kt,K as ft,L as Qt,M as dt,_ as Zt}from"./compact-item-B2r7eKHn.js";import{b as pt,P as Wt}from"./motion-D1Ok7SUs.js";import{_ as yt}from"./extends-CKwpSh1k.js";import{r as i}from"./index-CTjT7uj6.js";var ht=i.createContext(null);function Yt(e){var t=e.children,r=e.onBatchResize,n=i.useRef(0),a=i.useRef([]),o=i.useContext(ht),u=i.useCallback(function(c,l,v){n.current+=1;var y=n.current;a.current.push({size:c,element:l,data:v}),Promise.resolve().then(function(){y===n.current&&(r==null||r(a.current),a.current=[])}),o==null||o(c,l,v)},[r,o]);return i.createElement(ht.Provider,{value:u},t)}var Ht=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(a,o){return a[0]===r?(n=o,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),a=this.__entries__[n];return a&&a[1]},t.prototype.set=function(r,n){var a=e(this.__entries__,r);~a?this.__entries__[a][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,a=e(n,r);~a&&n.splice(a,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var a=0,o=this.__entries__;a<o.length;a++){var u=o[a];r.call(n,u[1],u[0])}},t}()}(),mt=typeof window<"u"&&typeof document<"u"&&window.document===document,jr=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Xt=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(jr):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),en=2;function rn(e,t){var r=!1,n=!1,a=0;function o(){r&&(r=!1,e()),n&&c()}function u(){Xt(o)}function c(){var l=Date.now();if(r){if(l-a<en)return;n=!0}else r=!0,n=!1,setTimeout(u,t);a=l}return c}var tn=20,nn=["top","right","bottom","left","width","height","size","weight"],an=typeof MutationObserver<"u",on=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=rn(this.refresh.bind(this),tn)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!mt||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),an?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!mt||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,a=nn.some(function(o){return!!~n.indexOf(o)});a&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),$t=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},ir=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||jr},At=Or(0,0,0,0);function qr(e){return parseFloat(e)||0}function St(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,a){var o=e["border-"+a+"-width"];return n+qr(o)},0)}function sn(e){for(var t=["top","right","bottom","left"],r={},n=0,a=t;n<a.length;n++){var o=a[n],u=e["padding-"+o];r[o]=qr(u)}return r}function un(e){var t=e.getBBox();return Or(0,0,t.width,t.height)}function ln(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return At;var n=ir(e).getComputedStyle(e),a=sn(n),o=a.left+a.right,u=a.top+a.bottom,c=qr(n.width),l=qr(n.height);if(n.boxSizing==="border-box"&&(Math.round(c+o)!==t&&(c-=St(n,"left","right")+o),Math.round(l+u)!==r&&(l-=St(n,"top","bottom")+u)),!vn(e)){var v=Math.round(c+o)-t,y=Math.round(l+u)-r;Math.abs(v)!==1&&(c-=v),Math.abs(y)!==1&&(l-=y)}return Or(a.left,a.top,c,l)}var cn=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof ir(e).SVGGraphicsElement}:function(e){return e instanceof ir(e).SVGElement&&typeof e.getBBox=="function"}}();function vn(e){return e===ir(e).document.documentElement}function fn(e){return mt?cn(e)?un(e):ln(e):At}function dn(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,u=Object.create(o.prototype);return $t(u,{x:t,y:r,width:n,height:a,top:r,right:t+n,bottom:a+r,left:t}),u}function Or(e,t,r,n){return{x:e,y:t,width:r,height:n}}var hn=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Or(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=fn(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),mn=function(){function e(t,r){var n=dn(r);$t(this,{target:t,contentRect:n})}return e}(),gn=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new Ht,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof ir(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new hn(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof ir(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new mn(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Bt=typeof WeakMap<"u"?new WeakMap:new Ht,Ft=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=on.getInstance(),n=new gn(t,r,this);Bt.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){Ft.prototype[e]=function(){var t;return(t=Bt.get(this))[e].apply(t,arguments)}});var yn=function(){return typeof jr.ResizeObserver<"u"?jr.ResizeObserver:Ft}(),Ne=new Map;function bn(e){e.forEach(function(t){var r,n=t.target;(r=Ne.get(n))===null||r===void 0||r.forEach(function(a){return a(n)})})}var Vt=new yn(bn);function wn(e,t){Ne.has(e)||(Ne.set(e,new Set),Vt.observe(e)),Ne.get(e).add(t)}function Mn(e,t){Ne.has(e)&&(Ne.get(e).delete(t),Ne.get(e).size||(Vt.unobserve(e),Ne.delete(e)))}var Cn=function(e){Gt(r,e);var t=It(r);function r(){return jt(this,r),t.apply(this,arguments)}return qt(r,[{key:"render",value:function(){return this.props.children}}]),r}(i.Component);function _n(e,t){var r=e.children,n=e.disabled,a=i.useRef(null),o=i.useRef(null),u=i.useContext(ht),c=typeof r=="function",l=c?r(a):r,v=i.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),y=!c&&i.isValidElement(l)&&xt(l),h=y?l.ref:null,x=Lt(h,a),m=function(){var C;return ct(a.current)||(a.current&&Ot(a.current)==="object"?ct((C=a.current)===null||C===void 0?void 0:C.nativeElement):null)||ct(o.current)};i.useImperativeHandle(t,function(){return m()});var R=i.useRef(e);R.current=e;var z=i.useCallback(function(g){var C=R.current,D=C.onResize,w=C.data,f=g.getBoundingClientRect(),B=f.width,J=f.height,V=g.offsetWidth,O=g.offsetHeight,ue=Math.floor(B),X=Math.floor(J);if(v.current.width!==ue||v.current.height!==X||v.current.offsetWidth!==V||v.current.offsetHeight!==O){var le={width:ue,height:X,offsetWidth:V,offsetHeight:O};v.current=le;var ee=V===Math.round(B)?B:V,re=O===Math.round(J)?J:O,G=A(A({},le),{},{offsetWidth:ee,offsetHeight:re});u==null||u(G,g,w),D&&Promise.resolve().then(function(){D(G,g)})}},[]);return i.useEffect(function(){var g=m();return g&&!n&&wn(g,z),function(){return Mn(g,z)}},[a.current,n]),i.createElement(Cn,{ref:o},y?i.cloneElement(l,{ref:x}):l)}var Sn=i.forwardRef(_n),Rn="rc-observer-key";function Pn(e,t){var r=e.children,n=typeof r=="function"?[r]:Ut(r);return n.map(function(a,o){var u=(a==null?void 0:a.key)||"".concat(Rn,"-").concat(o);return i.createElement(Sn,yt({},e,{key:u,ref:o===0?t:void 0}),a)})}var bt=i.forwardRef(Pn);bt.Collection=Yt;function vt(e){return e!==void 0}function In(e,t){var r=t||{},n=r.defaultValue,a=r.value,o=r.onChange,u=r.postState,c=_t(function(){return vt(a)?a:vt(n)?typeof n=="function"?n():n:typeof e=="function"?e():e}),l=W(c,2),v=l[0],y=l[1],h=a!==void 0?a:v,x=u?u(h):h,m=Re(o),R=_t([h]),z=W(R,2),g=z[0],C=z[1];Mt(function(){var w=g[0];v!==w&&m(v,w)},[g]),Mt(function(){vt(a)||y(a)},[a]);var D=Re(function(w,f){y(w,f),C([h],f)});return[x,D]}const kn=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};function En(e){var t=e.prefixCls,r=e.align,n=e.arrow,a=e.arrowPos,o=n||{},u=o.className,c=o.content,l=a.x,v=l===void 0?0:l,y=a.y,h=y===void 0?0:y,x=i.useRef();if(!r||!r.points)return null;var m={position:"absolute"};if(r.autoArrow!==!1){var R=r.points[0],z=r.points[1],g=R[0],C=R[1],D=z[0],w=z[1];g===D||!["t","b"].includes(g)?m.top=h:g==="t"?m.top=0:m.bottom=0,C===w||!["l","r"].includes(C)?m.left=v:C==="l"?m.left=0:m.right=0}return i.createElement("div",{ref:x,className:ar("".concat(t,"-arrow"),u),style:m},c)}function zn(e){var t=e.prefixCls,r=e.open,n=e.zIndex,a=e.mask,o=e.motion;return a?i.createElement(Nt,yt({},o,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(u){var c=u.className;return i.createElement("div",{style:{zIndex:n},className:ar("".concat(t,"-mask"),c)})}):null}var Dn=i.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),Tn=i.forwardRef(function(e,t){var r=e.popup,n=e.className,a=e.prefixCls,o=e.style,u=e.target,c=e.onVisibleChanged,l=e.open,v=e.keepDom,y=e.fresh,h=e.onClick,x=e.mask,m=e.arrow,R=e.arrowPos,z=e.align,g=e.motion,C=e.maskMotion,D=e.forceRender,w=e.getPopupContainer,f=e.autoDestroy,B=e.portal,J=e.zIndex,V=e.onMouseEnter,O=e.onMouseLeave,ue=e.onPointerEnter,X=e.ready,le=e.offsetX,ee=e.offsetY,re=e.offsetR,G=e.offsetB,me=e.onAlign,L=e.onPrepare,H=e.stretch,b=e.targetWidth,K=e.targetHeight,_=typeof r=="function"?r():r,ce=l||v,te=(w==null?void 0:w.length)>0,or=i.useState(!w||!te),Ue=W(or,2),ge=Ue[0],Je=Ue[1];if(he(function(){!ge&&te&&u&&Je(!0)},[ge,te,u]),!ge)return null;var ne="auto",$={left:"-1000vw",top:"-1000vh",right:ne,bottom:ne};if(X||!l){var Q,ve=z.points,fe=z.dynamicInset||((Q=z._experimental)===null||Q===void 0?void 0:Q.dynamicInset),Ke=fe&&ve[0][1]==="r",sr=fe&&ve[0][0]==="b";Ke?($.right=re,$.left=ne):($.left=le,$.right=ne),sr?($.bottom=G,$.top=ne):($.top=ee,$.bottom=ne)}var F={};return H&&(H.includes("height")&&K?F.height=K:H.includes("minHeight")&&K&&(F.minHeight=K),H.includes("width")&&b?F.width=b:H.includes("minWidth")&&b&&(F.minWidth=b)),l||(F.pointerEvents="none"),i.createElement(B,{open:D||ce,getContainer:w&&function(){return w(u)},autoDestroy:f},i.createElement(zn,{prefixCls:a,open:l,zIndex:J,mask:x,motion:C}),i.createElement(bt,{onResize:me,disabled:!l},function(Qe){return i.createElement(Nt,yt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:D,leavedClassName:"".concat(a,"-hidden")},g,{onAppearPrepare:L,onEnterPrepare:L,visible:l,onVisibleChanged:function(I){var ye;g==null||(ye=g.onVisibleChanged)===null||ye===void 0||ye.call(g,I),c(I)}}),function(Pe,I){var ye=Pe.className,M=Pe.style,We=ar(a,ye,n);return i.createElement("div",{ref:Jt(Qe,t,I),className:We,style:A(A(A(A({"--arrow-x":"".concat(R.x||0,"px"),"--arrow-y":"".concat(R.y||0,"px")},$),F),M),{},{boxSizing:"border-box",zIndex:J},o),onMouseEnter:V,onMouseLeave:O,onPointerEnter:ue,onClick:h},m&&i.createElement(En,{prefixCls:a,arrow:m,arrowPos:R,align:z}),i.createElement(Dn,{cache:!l&&!y},_))})}))}),xn=i.forwardRef(function(e,t){var r=e.children,n=e.getTriggerDOMNode,a=xt(r),o=i.useCallback(function(c){Kt(t,n?n(c):c)},[n]),u=Lt(o,r.ref);return a?i.cloneElement(r,{ref:u}):r}),Rt=i.createContext(null);function Pt(e){return e?Array.isArray(e)?e:[e]:[]}function Ln(e,t,r,n){return i.useMemo(function(){var a=Pt(r??t),o=Pt(n??t),u=new Set(a),c=new Set(o);return e&&(u.has("hover")&&(u.delete("hover"),u.add("click")),c.has("hover")&&(c.delete("hover"),c.add("click"))),[u,c]},[e,t,r,n])}function Nn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Wn(e,t,r,n){for(var a=r.points,o=Object.keys(e),u=0;u<o.length;u+=1){var c,l=o[u];if(Nn((c=e[l])===null||c===void 0?void 0:c.points,a,n))return"".concat(t,"-placement-").concat(l)}return""}function kt(e,t,r,n){return t||(r?{motionName:"".concat(e,"-").concat(r)}:n?{motionName:n}:null)}function Cr(e){return e.ownerDocument.defaultView}function gt(e){for(var t=[],r=e==null?void 0:e.parentElement,n=["hidden","scroll","clip","auto"];r;){var a=Cr(r).getComputedStyle(r),o=a.overflowX,u=a.overflowY,c=a.overflow;[o,u,c].some(function(l){return n.includes(l)})&&t.push(r),r=r.parentElement}return t}function Mr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function wr(e){return Mr(parseFloat(e),0)}function Et(e,t){var r=A({},e);return(t||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var a=Cr(n).getComputedStyle(n),o=a.overflow,u=a.overflowClipMargin,c=a.borderTopWidth,l=a.borderBottomWidth,v=a.borderLeftWidth,y=a.borderRightWidth,h=n.getBoundingClientRect(),x=n.offsetHeight,m=n.clientHeight,R=n.offsetWidth,z=n.clientWidth,g=wr(c),C=wr(l),D=wr(v),w=wr(y),f=Mr(Math.round(h.width/R*1e3)/1e3),B=Mr(Math.round(h.height/x*1e3)/1e3),J=(R-z-D-w)*f,V=(x-m-g-C)*B,O=g*B,ue=C*B,X=D*f,le=w*f,ee=0,re=0;if(o==="clip"){var G=wr(u);ee=G*f,re=G*B}var me=h.x+X-ee,L=h.y+O-re,H=me+h.width+2*ee-X-le-J,b=L+h.height+2*re-O-ue-V;r.left=Math.max(r.left,me),r.top=Math.max(r.top,L),r.right=Math.min(r.right,H),r.bottom=Math.min(r.bottom,b)}}),r}function zt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(t),n=r.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(r)}function Dt(e,t){var r=t||[],n=W(r,2),a=n[0],o=n[1];return[zt(e.width,a),zt(e.height,o)]}function Tt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function nr(e,t){var r=t[0],n=t[1],a,o;return r==="t"?o=e.y:r==="b"?o=e.y+e.height:o=e.y+e.height/2,n==="l"?a=e.x:n==="r"?a=e.x+e.width:a=e.x+e.width/2,{x:a,y:o}}function Le(e,t){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(n,a){return a===t?r[n]||"c":n}).join("")}function Hn(e,t,r,n,a,o,u){var c=i.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[n]||{}}),l=W(c,2),v=l[0],y=l[1],h=i.useRef(0),x=i.useMemo(function(){return t?gt(t):[]},[t]),m=i.useRef({}),R=function(){m.current={}};e||R();var z=Re(function(){if(t&&r&&e){let Y=function(Se,Ie){var rr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:We,tr=_.x+Se,yr=_.y+Ie,br=tr+Q,Br=yr+$,it=Math.max(tr,rr.left),ot=Math.max(yr,rr.top),st=Math.min(br,rr.right),ut=Math.min(Br,rr.bottom);return Math.max(0,(st-it)*(ut-ot))},Ar=function(){Be=_.y+S,Fe=Be+$,Me=_.x+P,Ve=Me+Q};var D,w,f=t,B=f.ownerDocument,J=Cr(f),V=J.getComputedStyle(f),O=V.width,ue=V.height,X=V.position,le=f.style.left,ee=f.style.top,re=f.style.right,G=f.style.bottom,me=f.style.overflow,L=A(A({},a[n]),o),H=B.createElement("div");(D=f.parentElement)===null||D===void 0||D.appendChild(H),H.style.left="".concat(f.offsetLeft,"px"),H.style.top="".concat(f.offsetTop,"px"),H.style.position=X,H.style.height="".concat(f.offsetHeight,"px"),H.style.width="".concat(f.offsetWidth,"px"),f.style.left="0",f.style.top="0",f.style.right="auto",f.style.bottom="auto",f.style.overflow="hidden";var b;if(Array.isArray(r))b={x:r[0],y:r[1],width:0,height:0};else{var K=r.getBoundingClientRect();b={x:K.x,y:K.y,width:K.width,height:K.height}}var _=f.getBoundingClientRect(),ce=B.documentElement,te=ce.clientWidth,or=ce.clientHeight,Ue=ce.scrollWidth,ge=ce.scrollHeight,Je=ce.scrollTop,ne=ce.scrollLeft,$=_.height,Q=_.width,ve=b.height,fe=b.width,Ke={left:0,top:0,right:te,bottom:or},sr={left:-ne,top:-Je,right:Ue-ne,bottom:ge-Je},F=L.htmlRegion,Qe="visible",Pe="visibleFirst";F!=="scroll"&&F!==Pe&&(F=Qe);var I=F===Pe,ye=Et(sr,x),M=Et(Ke,x),We=F===Qe?M:ye,Z=I?M:We;f.style.left="auto",f.style.top="auto",f.style.right="0",f.style.bottom="0";var _r=f.getBoundingClientRect();f.style.left=le,f.style.top=ee,f.style.right=re,f.style.bottom=G,f.style.overflow=me,(w=f.parentElement)===null||w===void 0||w.removeChild(H);var ke=Mr(Math.round(Q/parseFloat(O)*1e3)/1e3),Ee=Mr(Math.round($/parseFloat(ue)*1e3)/1e3);if(ke===0||Ee===0||ft(r)&&!Qt(r))return;var Sr=L.offset,j=L.targetOffset,Gr=Dt(_,Sr),ur=W(Gr,2),ae=ur[0],ie=ur[1],Rr=Dt(b,j),oe=W(Rr,2),Ir=oe[0],Pr=oe[1];b.x-=Ir,b.y-=Pr;var Ur=L.points||[],He=W(Ur,2),p=He[0],ze=He[1],be=Tt(ze),U=Tt(p),kr=nr(b,be),Er=nr(_,U),we=A({},L),P=kr.x-Er.x+ae,S=kr.y-Er.y+ie,T=Y(P,S),Ze=Y(P,S,M),De=nr(b,["t","l"]),$e=nr(_,["t","l"]),lr=nr(b,["b","r"]),cr=nr(_,["b","r"]),Ae=L.overflow||{},se=Ae.adjustX,Jr=Ae.adjustY,vr=Ae.shiftX,pe=Ae.shiftY,fr=function(Ie){return typeof Ie=="boolean"?Ie:Ie>=0},Be,Fe,Me,Ve;Ar();var zr=fr(Jr),dr=U[0]===be[0];if(zr&&U[0]==="t"&&(Fe>Z.bottom||m.current.bt)){var Te=S;dr?Te-=$-ve:Te=De.y-cr.y-ie;var Dr=Y(P,Te),Ye=Y(P,Te,M);Dr>T||Dr===T&&(!I||Ye>=Ze)?(m.current.bt=!0,S=Te,ie=-ie,we.points=[Le(U,0),Le(be,0)]):m.current.bt=!1}if(zr&&U[0]==="b"&&(Be<Z.top||m.current.tb)){var je=S;dr?je+=$-ve:je=lr.y-$e.y-ie;var q=Y(P,je),Kr=Y(P,je,M);q>T||q===T&&(!I||Kr>=Ze)?(m.current.tb=!0,S=je,ie=-ie,we.points=[Le(U,0),Le(be,0)]):m.current.tb=!1}var Tr=fr(se),xr=U[1]===be[1];if(Tr&&U[1]==="l"&&(Ve>Z.right||m.current.rl)){var qe=P;xr?qe-=Q-fe:qe=De.x-cr.x-ae;var Lr=Y(qe,S),Qr=Y(qe,S,M);Lr>T||Lr===T&&(!I||Qr>=Ze)?(m.current.rl=!0,P=qe,ae=-ae,we.points=[Le(U,1),Le(be,1)]):m.current.rl=!1}if(Tr&&U[1]==="r"&&(Me<Z.left||m.current.lr)){var Oe=P;xr?Oe+=Q-fe:Oe=lr.x-$e.x-ae;var Nr=Y(Oe,S),Zr=Y(Oe,S,M);Nr>T||Nr===T&&(!I||Zr>=Ze)?(m.current.lr=!0,P=Oe,ae=-ae,we.points=[Le(U,1),Le(be,1)]):m.current.lr=!1}Ar();var de=vr===!0?0:vr;typeof de=="number"&&(Me<M.left&&(P-=Me-M.left-ae,b.x+fe<M.left+de&&(P+=b.x-M.left+fe-de)),Ve>M.right&&(P-=Ve-M.right-ae,b.x>M.right-de&&(P+=b.x-M.right+de)));var Ce=pe===!0?0:pe;typeof Ce=="number"&&(Be<M.top&&(S-=Be-M.top-ie,b.y+ve<M.top+Ce&&(S+=b.y-M.top+ve-Ce)),Fe>M.bottom&&(S-=Fe-M.bottom-ie,b.y>M.bottom-Ce&&(S+=b.y-M.bottom+Ce)));var hr=_.x+P,Wr=hr+Q,xe=_.y+S,Ge=xe+$,mr=b.x,Xe=mr+fe,_e=b.y,pr=_e+ve,Yr=Math.max(hr,mr),Xr=Math.min(Wr,Xe),Hr=(Yr+Xr)/2,et=Hr-hr,rt=Math.max(xe,_e),tt=Math.min(Ge,pr),$r=(rt+tt)/2,nt=$r-xe;u==null||u(t,we);var gr=_r.right-_.x-(P+_.width),er=_r.bottom-_.y-(S+_.height);ke===1&&(P=Math.round(P),gr=Math.round(gr)),Ee===1&&(S=Math.round(S),er=Math.round(er));var at={ready:!0,offsetX:P/ke,offsetY:S/Ee,offsetR:gr/ke,offsetB:er/Ee,arrowX:et/ke,arrowY:nt/Ee,scaleX:ke,scaleY:Ee,align:we};y(at)}}),g=function(){h.current+=1;var w=h.current;Promise.resolve().then(function(){h.current===w&&z()})},C=function(){y(function(w){return A(A({},w),{},{ready:!1})})};return he(C,[n]),he(function(){e||C()},[e]),[v.ready,v.offsetX,v.offsetY,v.offsetR,v.offsetB,v.arrowX,v.arrowY,v.scaleX,v.scaleY,v.align,g]}function $n(e,t,r,n,a){he(function(){if(e&&t&&r){let h=function(){n(),a()};var o=t,u=r,c=gt(o),l=gt(u),v=Cr(u),y=new Set([v].concat(Ct(c),Ct(l)));return y.forEach(function(x){x.addEventListener("scroll",h,{passive:!0})}),v.addEventListener("resize",h,{passive:!0}),n(),function(){y.forEach(function(x){x.removeEventListener("scroll",h),v.removeEventListener("resize",h)})}}},[e,t,r])}function An(e,t,r,n,a,o,u,c){var l=i.useRef(e);l.current=e,i.useEffect(function(){if(t&&n&&(!a||o)){var v=function(m){var R=m.target;l.current&&!u(R)&&c(!1)},y=Cr(n);y.addEventListener("mousedown",v,!0),y.addEventListener("contextmenu",v,!0);var h=dt(r);return h&&(h.addEventListener("mousedown",v,!0),h.addEventListener("contextmenu",v,!0)),function(){y.removeEventListener("mousedown",v,!0),y.removeEventListener("contextmenu",v,!0),h&&(h.removeEventListener("mousedown",v,!0),h.removeEventListener("contextmenu",v,!0))}}},[t,r,n,a,o])}var Bn=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Fn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wt,t=i.forwardRef(function(r,n){var a=r.prefixCls,o=a===void 0?"rc-trigger-popup":a,u=r.children,c=r.action,l=c===void 0?"hover":c,v=r.showAction,y=r.hideAction,h=r.popupVisible,x=r.defaultPopupVisible,m=r.onPopupVisibleChange,R=r.afterPopupVisibleChange,z=r.mouseEnterDelay,g=r.mouseLeaveDelay,C=g===void 0?.1:g,D=r.focusDelay,w=r.blurDelay,f=r.mask,B=r.maskClosable,J=B===void 0?!0:B,V=r.getPopupContainer,O=r.forceRender,ue=r.autoDestroy,X=r.destroyPopupOnHide,le=r.popup,ee=r.popupClassName,re=r.popupStyle,G=r.popupPlacement,me=r.builtinPlacements,L=me===void 0?{}:me,H=r.popupAlign,b=r.zIndex,K=r.stretch,_=r.getPopupClassNameFromAlign,ce=r.fresh,te=r.alignPoint,or=r.onPopupClick,Ue=r.onPopupAlign,ge=r.arrow,Je=r.popupMotion,ne=r.maskMotion,$=r.popupTransitionName,Q=r.popupAnimation,ve=r.maskTransitionName,fe=r.maskAnimation,Ke=r.className,sr=r.getTriggerDOMNode,F=Zt(r,Bn),Qe=ue||X||!1,Pe=i.useState(!1),I=W(Pe,2),ye=I[0],M=I[1];he(function(){M(kn())},[]);var We=i.useRef({}),Z=i.useContext(Rt),_r=i.useMemo(function(){return{registerSubPopup:function(d,k){We.current[d]=k,Z==null||Z.registerSubPopup(d,k)}}},[Z]),ke=pt(),Ee=i.useState(null),Sr=W(Ee,2),j=Sr[0],Gr=Sr[1],ur=i.useRef(null),ae=Re(function(s){ur.current=s,ft(s)&&j!==s&&Gr(s),Z==null||Z.registerSubPopup(ke,s)}),ie=i.useState(null),Rr=W(ie,2),oe=Rr[0],Ir=Rr[1],Pr=i.useRef(null),Ur=Re(function(s){ft(s)&&oe!==s&&(Ir(s),Pr.current=s)}),He=i.Children.only(u),p=(He==null?void 0:He.props)||{},ze={},be=Re(function(s){var d,k,N=oe;return(N==null?void 0:N.contains(s))||((d=dt(N))===null||d===void 0?void 0:d.host)===s||s===N||(j==null?void 0:j.contains(s))||((k=dt(j))===null||k===void 0?void 0:k.host)===s||s===j||Object.values(We.current).some(function(E){return(E==null?void 0:E.contains(s))||s===E})}),U=kt(o,Je,Q,$),kr=kt(o,ne,fe,ve),Er=i.useState(x||!1),we=W(Er,2),P=we[0],S=we[1],T=h??P,Ze=Re(function(s){h===void 0&&S(s)});he(function(){S(h||!1)},[h]);var De=i.useRef(T);De.current=T;var $e=i.useRef([]);$e.current=[];var lr=Re(function(s){var d;Ze(s),((d=$e.current[$e.current.length-1])!==null&&d!==void 0?d:T)!==s&&($e.current.push(s),m==null||m(s))}),cr=i.useRef(),Ae=function(){clearTimeout(cr.current)},se=function(d){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ae(),k===0?lr(d):cr.current=setTimeout(function(){lr(d)},k*1e3)};i.useEffect(function(){return Ae},[]);var Jr=i.useState(!1),vr=W(Jr,2),pe=vr[0],fr=vr[1];he(function(s){(!s||T)&&fr(!0)},[T]);var Be=i.useState(null),Fe=W(Be,2),Me=Fe[0],Ve=Fe[1],zr=i.useState([0,0]),dr=W(zr,2),Te=dr[0],Dr=dr[1],Ye=function(d){Dr([d.clientX,d.clientY])},je=Hn(T,j,te?Te:oe,G,L,H,Ue),q=W(je,11),Kr=q[0],Tr=q[1],xr=q[2],qe=q[3],Lr=q[4],Qr=q[5],Oe=q[6],Nr=q[7],Zr=q[8],de=q[9],Ce=q[10],hr=Ln(ye,l,v,y),Wr=W(hr,2),xe=Wr[0],Ge=Wr[1],mr=xe.has("click"),Xe=Ge.has("click")||Ge.has("contextMenu"),_e=Re(function(){pe||Ce()}),pr=function(){De.current&&te&&Xe&&se(!1)};$n(T,oe,j,_e,pr),he(function(){_e()},[Te,G]),he(function(){T&&!(L!=null&&L[G])&&_e()},[JSON.stringify(H)]);var Yr=i.useMemo(function(){var s=Wn(L,o,de,te);return ar(s,_==null?void 0:_(de))},[de,_,L,o,te]);i.useImperativeHandle(n,function(){return{nativeElement:Pr.current,popupElement:ur.current,forceAlign:_e}});var Xr=i.useState(0),Hr=W(Xr,2),et=Hr[0],rt=Hr[1],tt=i.useState(0),$r=W(tt,2),nt=$r[0],gr=$r[1],er=function(){if(K&&oe){var d=oe.getBoundingClientRect();rt(d.width),gr(d.height)}},at=function(){er(),_e()},Y=function(d){fr(!1),Ce(),R==null||R(d)},Ar=function(){return new Promise(function(d){er(),Ve(function(){return d})})};he(function(){Me&&(Ce(),Me(),Ve(null))},[Me]);function Se(s,d,k,N){ze[s]=function(E){var Fr;N==null||N(E),se(d,k);for(var lt=arguments.length,wt=new Array(lt>1?lt-1:0),Vr=1;Vr<lt;Vr++)wt[Vr-1]=arguments[Vr];(Fr=p[s])===null||Fr===void 0||Fr.call.apply(Fr,[p,E].concat(wt))}}(mr||Xe)&&(ze.onClick=function(s){var d;De.current&&Xe?se(!1):!De.current&&mr&&(Ye(s),se(!0));for(var k=arguments.length,N=new Array(k>1?k-1:0),E=1;E<k;E++)N[E-1]=arguments[E];(d=p.onClick)===null||d===void 0||d.call.apply(d,[p,s].concat(N))}),An(T,Xe,oe,j,f,J,be,se);var Ie=xe.has("hover"),rr=Ge.has("hover"),tr,yr;Ie&&(Se("onMouseEnter",!0,z,function(s){Ye(s)}),Se("onPointerEnter",!0,z,function(s){Ye(s)}),tr=function(d){(T||pe)&&j!==null&&j!==void 0&&j.contains(d.target)&&se(!0,z)},te&&(ze.onMouseMove=function(s){var d;(d=p.onMouseMove)===null||d===void 0||d.call(p,s)})),rr&&(Se("onMouseLeave",!1,C),Se("onPointerLeave",!1,C),yr=function(){se(!1,C)}),xe.has("focus")&&Se("onFocus",!0,D),Ge.has("focus")&&Se("onBlur",!1,w),xe.has("contextMenu")&&(ze.onContextMenu=function(s){var d;De.current&&Ge.has("contextMenu")?se(!1):(Ye(s),se(!0)),s.preventDefault();for(var k=arguments.length,N=new Array(k>1?k-1:0),E=1;E<k;E++)N[E-1]=arguments[E];(d=p.onContextMenu)===null||d===void 0||d.call.apply(d,[p,s].concat(N))}),Ke&&(ze.className=ar(p.className,Ke));var br=A(A({},p),ze),Br={},it=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];it.forEach(function(s){F[s]&&(Br[s]=function(){for(var d,k=arguments.length,N=new Array(k),E=0;E<k;E++)N[E]=arguments[E];(d=br[s])===null||d===void 0||d.call.apply(d,[br].concat(N)),F[s].apply(F,N)})});var ot=i.cloneElement(He,A(A({},br),Br)),st={x:Qr,y:Oe},ut=ge?A({},ge!==!0?ge:{}):null;return i.createElement(i.Fragment,null,i.createElement(bt,{disabled:!T,ref:Ur,onResize:at},i.createElement(xn,{getTriggerDOMNode:sr},ot)),i.createElement(Rt.Provider,{value:_r},i.createElement(Tn,{portal:e,ref:ae,prefixCls:o,popup:le,className:ar(ee,Yr),style:re,target:oe,onMouseEnter:tr,onMouseLeave:yr,onPointerEnter:tr,zIndex:b,open:T,keepDom:pe,fresh:ce,onClick:or,mask:f,motion:U,maskMotion:kr,onVisibleChanged:Y,onPrepare:Ar,forceRender:O,autoDestroy:Qe,getPopupContainer:V,align:de,arrow:ut,arrowPos:st,ready:Kr,offsetX:Tr,offsetY:xr,offsetR:qe,offsetB:Lr,onAlign:_e,stretch:K,targetWidth:et/Nr,targetHeight:nt/Zr})))});return t}const Un=Fn(Wt);export{bt as R,Un as T,kn as i,In as u};
