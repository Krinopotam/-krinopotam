import{t as Ot,r as Gt,c as H,v as It,_ as bt,o as N,x as Ct,q as Ce,a as _t}from"./useToken-C7r1PZCj.js";import{A as Ut,B as Kt,J as Lt,K as Nt,E as Wt,G as ct,t as Jt,M as Pt,v as ke,c as nr,z as At,s as Qt,O as Zt,Q as vt,S as pt,U as ht,_ as Yt}from"./compact-item-DA-GXfnI.js";import{b as Xt,P as Ht}from"./context-55JlqysY.js";import{r as i}from"./index-C9MQhBv9.js";var mt=i.createContext(null);function en(e){var t=e.children,r=e.onBatchResize,n=i.useRef(0),a=i.useRef([]),o=i.useContext(mt),s=i.useCallback(function(c,l,d){n.current+=1;var C=n.current;a.current.push({size:c,element:l,data:d}),Promise.resolve().then(function(){C===n.current&&(r==null||r(a.current),a.current=[])}),o==null||o(c,l,d)},[r,o]);return i.createElement(mt.Provider,{value:s},t)}var Bt=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(a,o){return a[0]===r?(n=o,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),a=this.__entries__[n];return a&&a[1]},t.prototype.set=function(r,n){var a=e(this.__entries__,r);~a?this.__entries__[a][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,a=e(n,r);~a&&n.splice(a,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var a=0,o=this.__entries__;a<o.length;a++){var s=o[a];r.call(n,s[1],s[0])}},t}()}(),gt=typeof window<"u"&&typeof document<"u"&&window.document===document,$r=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),rn=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind($r):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),tn=2;function nn(e,t){var r=!1,n=!1,a=0;function o(){r&&(r=!1,e()),n&&c()}function s(){rn(o)}function c(){var l=Date.now();if(r){if(l-a<tn)return;n=!0}else r=!0,n=!1,setTimeout(s,t);a=l}return c}var an=20,on=["top","right","bottom","left","width","height","size","weight"],un=typeof MutationObserver<"u",sn=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=nn(this.refresh.bind(this),an)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!gt||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),un?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!gt||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,a=on.some(function(o){return!!~n.indexOf(o)});a&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),$t=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},ar=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||$r},Ft=Vr(0,0,0,0);function Fr(e){return parseFloat(e)||0}function St(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,a){var o=e["border-"+a+"-width"];return n+Fr(o)},0)}function ln(e){for(var t=["top","right","bottom","left"],r={},n=0,a=t;n<a.length;n++){var o=a[n],s=e["padding-"+o];r[o]=Fr(s)}return r}function fn(e){var t=e.getBBox();return Vr(0,0,t.width,t.height)}function cn(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return Ft;var n=ar(e).getComputedStyle(e),a=ln(n),o=a.left+a.right,s=a.top+a.bottom,c=Fr(n.width),l=Fr(n.height);if(n.boxSizing==="border-box"&&(Math.round(c+o)!==t&&(c-=St(n,"left","right")+o),Math.round(l+s)!==r&&(l-=St(n,"top","bottom")+s)),!vn(e)){var d=Math.round(c+o)-t,C=Math.round(l+s)-r;Math.abs(d)!==1&&(c-=d),Math.abs(C)!==1&&(l-=C)}return Vr(a.left,a.top,c,l)}var dn=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof ar(e).SVGGraphicsElement}:function(e){return e instanceof ar(e).SVGElement&&typeof e.getBBox=="function"}}();function vn(e){return e===ar(e).document.documentElement}function hn(e){return gt?dn(e)?fn(e):cn(e):Ft}function mn(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(o.prototype);return $t(s,{x:t,y:r,width:n,height:a,top:r,right:t+n,bottom:a+r,left:t}),s}function Vr(e,t,r,n){return{x:e,y:t,width:r,height:n}}var gn=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Vr(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=hn(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),yn=function(){function e(t,r){var n=mn(r);$t(this,{target:t,contentRect:n})}return e}(),bn=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new Bt,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof ar(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new gn(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof ar(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new yn(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Vt=typeof WeakMap<"u"?new WeakMap:new Bt,jt=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=sn.getInstance(),n=new bn(t,r,this);Vt.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){jt.prototype[e]=function(){var t;return(t=Vt.get(this))[e].apply(t,arguments)}});var wn=function(){return typeof $r.ResizeObserver<"u"?$r.ResizeObserver:jt}(),Be=new Map;function Mn(e){e.forEach(function(t){var r,n=t.target;(r=Be.get(n))===null||r===void 0||r.forEach(function(a){return a(n)})})}var qt=new wn(Mn);function Cn(e,t){Be.has(e)||(Be.set(e,new Set),qt.observe(e)),Be.get(e).add(t)}function _n(e,t){Be.has(e)&&(Be.get(e).delete(t),Be.get(e).size||(qt.unobserve(e),Be.delete(e)))}var Pn=function(e){Ut(r,e);var t=Kt(r);function r(){return Ot(this,r),t.apply(this,arguments)}return Gt(r,[{key:"render",value:function(){return this.props.children}}]),r}(i.Component);function Sn(e,t){var r=e.children,n=e.disabled,a=i.useRef(null),o=i.useRef(null),s=i.useContext(mt),c=typeof r=="function",l=c?r(a):r,d=i.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),C=!c&&i.isValidElement(l)&&Lt(l),m=C?Nt(l):null,w=Wt(m,a),v=function(){var y;return ct(a.current)||(a.current&&It(a.current)==="object"?ct((y=a.current)===null||y===void 0?void 0:y.nativeElement):null)||ct(o.current)};i.useImperativeHandle(t,function(){return v()});var _=i.useRef(e);_.current=e;var z=i.useCallback(function(g){var y=_.current,T=y.onResize,M=y.data,x=g.getBoundingClientRect(),W=x.width,h=x.height,G=g.offsetWidth,I=g.offsetHeight,p=Math.floor(W),ae=Math.floor(h);if(d.current.width!==p||d.current.height!==ae||d.current.offsetWidth!==G||d.current.offsetHeight!==I){var ve={width:p,height:ae,offsetWidth:G,offsetHeight:I};d.current=ve;var ie=G===Math.round(W)?W:G,oe=I===Math.round(h)?h:I,U=H(H({},ve),{},{offsetWidth:ie,offsetHeight:oe});s==null||s(U,g,M),T&&Promise.resolve().then(function(){T(U,g)})}},[]);return i.useEffect(function(){var g=v();return g&&!n&&Cn(g,z),function(){return _n(g,z)}},[a.current,n]),i.createElement(Pn,{ref:o},C?i.cloneElement(l,{ref:w}):l)}var Rn=i.forwardRef(Sn),En="rc-observer-key";function kn(e,t){var r=e.children,n=typeof r=="function"?[r]:Jt(r);return n.map(function(a,o){var s=(a==null?void 0:a.key)||"".concat(En,"-").concat(o);return i.createElement(Rn,bt({},e,{key:s,ref:o===0?t:void 0}),a)})}var wt=i.forwardRef(kn);wt.Collection=en;function dt(e){return e!==void 0}function Un(e,t){var r=t||{},n=r.defaultValue,a=r.value,o=r.onChange,s=r.postState,c=Pt(function(){return dt(a)?a:dt(n)?typeof n=="function"?n():n:typeof e=="function"?e():e}),l=N(c,2),d=l[0],C=l[1],m=a!==void 0?a:d,w=s?s(m):m,v=ke(o),_=Pt([m]),z=N(_,2),g=z[0],y=z[1];Ct(function(){var M=g[0];d!==M&&v(d,M)},[g]),Ct(function(){dt(a)||C(a)},[a]);var T=ke(function(M,x){C(M,x),y([m],x)});return[w,T]}const zn=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};function Dn(e){var t=e.prefixCls,r=e.align,n=e.arrow,a=e.arrowPos,o=n||{},s=o.className,c=o.content,l=a.x,d=l===void 0?0:l,C=a.y,m=C===void 0?0:C,w=i.useRef();if(!r||!r.points)return null;var v={position:"absolute"};if(r.autoArrow!==!1){var _=r.points[0],z=r.points[1],g=_[0],y=_[1],T=z[0],M=z[1];g===T||!["t","b"].includes(g)?v.top=m:g==="t"?v.top=0:v.bottom=0,y===M||!["l","r"].includes(y)?v.left=d:y==="l"?v.left=0:v.right=0}return i.createElement("div",{ref:w,className:nr("".concat(t,"-arrow"),s),style:v},c)}function Tn(e){var t=e.prefixCls,r=e.open,n=e.zIndex,a=e.mask,o=e.motion;return a?i.createElement(At,bt({},o,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(s){var c=s.className;return i.createElement("div",{style:{zIndex:n},className:nr("".concat(t,"-mask"),c)})}):null}var xn=i.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),Ln=i.forwardRef(function(e,t){var r=e.popup,n=e.className,a=e.prefixCls,o=e.style,s=e.target,c=e.onVisibleChanged,l=e.open,d=e.keepDom,C=e.fresh,m=e.onClick,w=e.mask,v=e.arrow,_=e.arrowPos,z=e.align,g=e.motion,y=e.maskMotion,T=e.forceRender,M=e.getPopupContainer,x=e.autoDestroy,W=e.portal,h=e.zIndex,G=e.onMouseEnter,I=e.onMouseLeave,p=e.onPointerEnter,ae=e.onPointerDownCapture,ve=e.ready,ie=e.offsetX,oe=e.offsetY,U=e.offsetR,_e=e.offsetB,K=e.onAlign,Pe=e.onPrepare,B=e.stretch,F=e.targetWidth,b=e.targetHeight,$e=typeof r=="function"?r():r,ue=l||d,$=(M==null?void 0:M.length)>0,P=i.useState(!M||!$),J=N(P,2),Fe=J[0],ir=J[1];if(Ce(function(){!Fe&&$&&s&&ir(!0)},[Fe,$,s]),!Fe)return null;var he="auto",Q={left:"-1000vw",top:"-1000vh",right:he,bottom:he};if(ve||!l){var ze,Ve=z.points,Y=z.dynamicInset||((ze=z._experimental)===null||ze===void 0?void 0:ze.dynamicInset),me=Y&&Ve[0][1]==="r",se=Y&&Ve[0][0]==="b";me?(Q.right=U,Q.left=he):(Q.left=ie,Q.right=he),se?(Q.bottom=_e,Q.top=he):(Q.top=oe,Q.bottom=he)}var O={};return B&&(B.includes("height")&&b?O.height=b:B.includes("minHeight")&&b&&(O.minHeight=b),B.includes("width")&&F?O.width=F:B.includes("minWidth")&&F&&(O.minWidth=F)),l||(O.pointerEvents="none"),i.createElement(W,{open:T||ue,getContainer:M&&function(){return M(s)},autoDestroy:x},i.createElement(Tn,{prefixCls:a,open:l,zIndex:h,mask:w,motion:y}),i.createElement(wt,{onResize:K,disabled:!l},function(or){return i.createElement(At,bt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:T,leavedClassName:"".concat(a,"-hidden")},g,{onAppearPrepare:Pe,onEnterPrepare:Pe,visible:l,onVisibleChanged:function(X){var ge;g==null||(ge=g.onVisibleChanged)===null||ge===void 0||ge.call(g,X),c(X)}}),function(De,X){var ge=De.className,je=De.style,V=nr(a,ge,n);return i.createElement("div",{ref:Qt(or,t,X),className:V,style:H(H(H(H({"--arrow-x":"".concat(_.x||0,"px"),"--arrow-y":"".concat(_.y||0,"px")},Q),O),je),{},{boxSizing:"border-box",zIndex:h},o),onMouseEnter:G,onMouseLeave:I,onPointerEnter:p,onClick:m,onPointerDownCapture:ae},v&&i.createElement(Dn,{prefixCls:a,arrow:v,arrowPos:_,align:z}),i.createElement(xn,{cache:!l&&!C},$e))})}))}),Nn=i.forwardRef(function(e,t){var r=e.children,n=e.getTriggerDOMNode,a=Lt(r),o=i.useCallback(function(c){Zt(t,n?n(c):c)},[n]),s=Wt(o,Nt(r));return a?i.cloneElement(r,{ref:s}):r}),Rt=i.createContext(null);function Et(e){return e?Array.isArray(e)?e:[e]:[]}function Wn(e,t,r,n){return i.useMemo(function(){var a=Et(r??t),o=Et(n??t),s=new Set(a),c=new Set(o);return e&&(s.has("hover")&&(s.delete("hover"),s.add("click")),c.has("hover")&&(c.delete("hover"),c.add("click"))),[s,c]},[e,t,r,n])}function An(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Hn(e,t,r,n){for(var a=r.points,o=Object.keys(e),s=0;s<o.length;s+=1){var c,l=o[s];if(An((c=e[l])===null||c===void 0?void 0:c.points,a,n))return"".concat(t,"-placement-").concat(l)}return""}function kt(e,t,r,n){return t||(r?{motionName:"".concat(e,"-").concat(r)}:n?{motionName:n}:null)}function yr(e){return e.ownerDocument.defaultView}function yt(e){for(var t=[],r=e==null?void 0:e.parentElement,n=["hidden","scroll","clip","auto"];r;){var a=yr(r).getComputedStyle(r),o=a.overflowX,s=a.overflowY,c=a.overflow;[o,s,c].some(function(l){return n.includes(l)})&&t.push(r),r=r.parentElement}return t}function gr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function mr(e){return gr(parseFloat(e),0)}function zt(e,t){var r=H({},e);return(t||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var a=yr(n).getComputedStyle(n),o=a.overflow,s=a.overflowClipMargin,c=a.borderTopWidth,l=a.borderBottomWidth,d=a.borderLeftWidth,C=a.borderRightWidth,m=n.getBoundingClientRect(),w=n.offsetHeight,v=n.clientHeight,_=n.offsetWidth,z=n.clientWidth,g=mr(c),y=mr(l),T=mr(d),M=mr(C),x=gr(Math.round(m.width/_*1e3)/1e3),W=gr(Math.round(m.height/w*1e3)/1e3),h=(_-z-T-M)*x,G=(w-v-g-y)*W,I=g*W,p=y*W,ae=T*x,ve=M*x,ie=0,oe=0;if(o==="clip"){var U=mr(s);ie=U*x,oe=U*W}var _e=m.x+ae-ie,K=m.y+I-oe,Pe=_e+m.width+2*ie-ae-ve-h,B=K+m.height+2*oe-I-p-G;r.left=Math.max(r.left,_e),r.top=Math.max(r.top,K),r.right=Math.min(r.right,Pe),r.bottom=Math.min(r.bottom,B)}}),r}function Dt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(t),n=r.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(r)}function Tt(e,t){var r=t||[],n=N(r,2),a=n[0],o=n[1];return[Dt(e.width,a),Dt(e.height,o)]}function xt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function tr(e,t){var r=t[0],n=t[1],a,o;return r==="t"?o=e.y:r==="b"?o=e.y+e.height:o=e.y+e.height/2,n==="l"?a=e.x:n==="r"?a=e.x+e.width:a=e.x+e.width/2,{x:a,y:o}}function He(e,t){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(n,a){return a===t?r[n]||"c":n}).join("")}function Bn(e,t,r,n,a,o,s){var c=i.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[n]||{}}),l=N(c,2),d=l[0],C=l[1],m=i.useRef(0),w=i.useMemo(function(){return t?yt(t):[]},[t]),v=i.useRef({}),_=function(){v.current={}};e||_();var z=ke(function(){if(t&&r&&e){let ne=function(rr,We){var Ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:br,hr=P.x+rr,Ar=P.y+We,ut=hr+me,st=Ar+Y,lt=Math.max(hr,Ae.left),u=Math.max(Ar,Ae.top),f=Math.min(ut,Ae.right),k=Math.min(st,Ae.bottom);return Math.max(0,(f-lt)*(k-u))},Wr=function(){Ie=P.y+E,Ue=Ie+Y,Re=P.x+S,pe=Re+me};var T,M,x,W,h=t,G=h.ownerDocument,I=yr(h),p=I.getComputedStyle(h),ae=p.width,ve=p.height,ie=p.position,oe=h.style.left,U=h.style.top,_e=h.style.right,K=h.style.bottom,Pe=h.style.overflow,B=H(H({},a[n]),o),F=G.createElement("div");(T=h.parentElement)===null||T===void 0||T.appendChild(F),F.style.left="".concat(h.offsetLeft,"px"),F.style.top="".concat(h.offsetTop,"px"),F.style.position=ie,F.style.height="".concat(h.offsetHeight,"px"),F.style.width="".concat(h.offsetWidth,"px"),h.style.left="0",h.style.top="0",h.style.right="auto",h.style.bottom="auto",h.style.overflow="hidden";var b;if(Array.isArray(r))b={x:r[0],y:r[1],width:0,height:0};else{var $e,ue,$=r.getBoundingClientRect();$.x=($e=$.x)!==null&&$e!==void 0?$e:$.left,$.y=(ue=$.y)!==null&&ue!==void 0?ue:$.top,b={x:$.x,y:$.y,width:$.width,height:$.height}}var P=h.getBoundingClientRect();P.x=(M=P.x)!==null&&M!==void 0?M:P.left,P.y=(x=P.y)!==null&&x!==void 0?x:P.top;var J=G.documentElement,Fe=J.clientWidth,ir=J.clientHeight,he=J.scrollWidth,Q=J.scrollHeight,ze=J.scrollTop,Ve=J.scrollLeft,Y=P.height,me=P.width,se=b.height,O=b.width,or={left:0,top:0,right:Fe,bottom:ir},De={left:-Ve,top:-ze,right:he-Ve,bottom:Q-ze},X=B.htmlRegion,ge="visible",je="visibleFirst";X!=="scroll"&&X!==je&&(X=ge);var V=X===je,jr=zt(De,w),R=zt(or,w),br=X===ge?R:jr,qe=V?R:br;h.style.left="auto",h.style.top="auto",h.style.right="0",h.style.bottom="0";var j=h.getBoundingClientRect();h.style.left=oe,h.style.top=U,h.style.right=_e,h.style.bottom=K,h.style.overflow=Pe,(W=h.parentElement)===null||W===void 0||W.removeChild(F);var Te=gr(Math.round(me/parseFloat(ae)*1e3)/1e3),Se=gr(Math.round(Y/parseFloat(ve)*1e3)/1e3);if(Te===0||Se===0||vt(r)&&!pt(r))return;var qr=B.offset,Or=B.targetOffset,wr=Tt(P,qr),le=N(wr,2),fe=le[0],ee=le[1],Gr=Tt(b,Or),Oe=N(Gr,2),re=Oe[0],xe=Oe[1];b.x-=re,b.y-=xe;var Ir=B.points||[],Mr=N(Ir,2),Ur=Mr[0],Kr=Mr[1],ye=xt(Kr),Z=xt(Ur),ur=tr(b,ye),q=tr(P,Z),Le=H({},B),S=ur.x-q.x+fe,E=ur.y-q.y+ee,ce=ne(S,E),Ge=ne(S,E,R),sr=tr(b,["t","l"]),te=tr(P,["t","l"]),Cr=tr(b,["b","r"]),lr=tr(P,["b","r"]),Ne=B.overflow||{},_r=Ne.adjustX,Jr=Ne.adjustY,fr=Ne.shiftX,Ze=Ne.shiftY,cr=function(We){return typeof We=="boolean"?We:We>=0},Ie,Ue,Re,pe;Wr();var Ke=cr(Jr),Pr=Z[0]===ye[0];if(Ke&&Z[0]==="t"&&(Ue>qe.bottom||v.current.bt)){var A=E;Pr?A-=Y-se:A=sr.y-lr.y-ee;var Sr=ne(S,A),Qr=ne(S,A,R);Sr>ce||Sr===ce&&(!V||Qr>=Ge)?(v.current.bt=!0,E=A,ee=-ee,Le.points=[He(Z,0),He(ye,0)]):v.current.bt=!1}if(Ke&&Z[0]==="b"&&(Ie<qe.top||v.current.tb)){var Je=E;Pr?Je+=Y-se:Je=Cr.y-te.y-ee;var Rr=ne(S,Je),Zr=ne(S,Je,R);Rr>ce||Rr===ce&&(!V||Zr>=Ge)?(v.current.tb=!0,E=Je,ee=-ee,Le.points=[He(Z,0),He(ye,0)]):v.current.tb=!1}var Er=cr(_r),kr=Z[1]===ye[1];if(Er&&Z[1]==="l"&&(pe>qe.right||v.current.rl)){var Qe=S;kr?Qe-=me-O:Qe=sr.x-lr.x-fe;var zr=ne(Qe,E),Ye=ne(Qe,E,R);zr>ce||zr===ce&&(!V||Ye>=Ge)?(v.current.rl=!0,S=Qe,fe=-fe,Le.points=[He(Z,1),He(ye,1)]):v.current.rl=!1}if(Er&&Z[1]==="r"&&(Re<qe.left||v.current.lr)){var Ee=S;kr?Ee+=me-O:Ee=Cr.x-te.x-fe;var Dr=ne(Ee,E),Tr=ne(Ee,E,R);Dr>ce||Dr===ce&&(!V||Tr>=Ge)?(v.current.lr=!0,S=Ee,fe=-fe,Le.points=[He(Z,1),He(ye,1)]):v.current.lr=!1}Wr();var be=fr===!0?0:fr;typeof be=="number"&&(Re<R.left&&(S-=Re-R.left-fe,b.x+O<R.left+be&&(S+=b.x-R.left+O-be)),pe>R.right&&(S-=pe-R.right-fe,b.x>R.right-be&&(S+=b.x-R.right+be)));var de=Ze===!0?0:Ze;typeof de=="number"&&(Ie<R.top&&(E-=Ie-R.top-ee,b.y+se<R.top+de&&(E+=b.y-R.top+se-de)),Ue>R.bottom&&(E-=Ue-R.bottom-ee,b.y>R.bottom-de&&(E+=b.y-R.bottom+de)));var Xe=P.x+S,er=Xe+me,we=P.y+E,pr=we+Y,xr=b.x,Yr=xr+O,dr=b.y,Xr=dr+se,et=Math.max(Xe,xr),rt=Math.min(er,Yr),Lr=(et+rt)/2,tt=Lr-Xe,nt=Math.max(we,dr),Nr=Math.min(pr,Xr),at=(nt+Nr)/2,it=at-we;s==null||s(t,Le);var vr=j.right-P.x-(S+P.width),Me=j.bottom-P.y-(E+P.height);Te===1&&(S=Math.round(S),vr=Math.round(vr)),Se===1&&(E=Math.round(E),Me=Math.round(Me));var ot={ready:!0,offsetX:S/Te,offsetY:E/Se,offsetR:vr/Te,offsetB:Me/Se,arrowX:tt/Te,arrowY:it/Se,scaleX:Te,scaleY:Se,align:Le};C(ot)}}),g=function(){m.current+=1;var M=m.current;Promise.resolve().then(function(){m.current===M&&z()})},y=function(){C(function(M){return H(H({},M),{},{ready:!1})})};return Ce(y,[n]),Ce(function(){e||y()},[e]),[d.ready,d.offsetX,d.offsetY,d.offsetR,d.offsetB,d.arrowX,d.arrowY,d.scaleX,d.scaleY,d.align,g]}function $n(e,t,r,n,a){Ce(function(){if(e&&t&&r){let m=function(){n(),a()};var o=t,s=r,c=yt(o),l=yt(s),d=yr(s),C=new Set([d].concat(_t(c),_t(l)));return C.forEach(function(w){w.addEventListener("scroll",m,{passive:!0})}),d.addEventListener("resize",m,{passive:!0}),n(),function(){C.forEach(function(w){w.removeEventListener("scroll",m),d.removeEventListener("resize",m)})}}},[e,t,r])}function Fn(e,t,r,n,a,o,s,c){var l=i.useRef(e);l.current=e;var d=i.useRef(!1);i.useEffect(function(){if(t&&n&&(!a||o)){var m=function(){d.current=!1},w=function(g){var y;l.current&&!s(((y=g.composedPath)===null||y===void 0||(y=y.call(g))===null||y===void 0?void 0:y[0])||g.target)&&!d.current&&c(!1)},v=yr(n);v.addEventListener("pointerdown",m,!0),v.addEventListener("mousedown",w,!0),v.addEventListener("contextmenu",w,!0);var _=ht(r);return _&&(_.addEventListener("mousedown",w,!0),_.addEventListener("contextmenu",w,!0)),function(){v.removeEventListener("pointerdown",m,!0),v.removeEventListener("mousedown",w,!0),v.removeEventListener("contextmenu",w,!0),_&&(_.removeEventListener("mousedown",w,!0),_.removeEventListener("contextmenu",w,!0))}}},[t,r,n,a,o]);function C(){d.current=!0}return C}var Vn=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function jn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ht,t=i.forwardRef(function(r,n){var a=r.prefixCls,o=a===void 0?"rc-trigger-popup":a,s=r.children,c=r.action,l=c===void 0?"hover":c,d=r.showAction,C=r.hideAction,m=r.popupVisible,w=r.defaultPopupVisible,v=r.onPopupVisibleChange,_=r.afterPopupVisibleChange,z=r.mouseEnterDelay,g=r.mouseLeaveDelay,y=g===void 0?.1:g,T=r.focusDelay,M=r.blurDelay,x=r.mask,W=r.maskClosable,h=W===void 0?!0:W,G=r.getPopupContainer,I=r.forceRender,p=r.autoDestroy,ae=r.destroyPopupOnHide,ve=r.popup,ie=r.popupClassName,oe=r.popupStyle,U=r.popupPlacement,_e=r.builtinPlacements,K=_e===void 0?{}:_e,Pe=r.popupAlign,B=r.zIndex,F=r.stretch,b=r.getPopupClassNameFromAlign,$e=r.fresh,ue=r.alignPoint,$=r.onPopupClick,P=r.onPopupAlign,J=r.arrow,Fe=r.popupMotion,ir=r.maskMotion,he=r.popupTransitionName,Q=r.popupAnimation,ze=r.maskTransitionName,Ve=r.maskAnimation,Y=r.className,me=r.getTriggerDOMNode,se=Yt(r,Vn),O=p||ae||!1,or=i.useState(!1),De=N(or,2),X=De[0],ge=De[1];Ce(function(){ge(zn())},[]);var je=i.useRef({}),V=i.useContext(Rt),jr=i.useMemo(function(){return{registerSubPopup:function(f,k){je.current[f]=k,V==null||V.registerSubPopup(f,k)}}},[V]),R=Xt(),br=i.useState(null),qe=N(br,2),j=qe[0],Te=qe[1],Se=i.useRef(null),qr=ke(function(u){Se.current=u,vt(u)&&j!==u&&Te(u),V==null||V.registerSubPopup(R,u)}),Or=i.useState(null),wr=N(Or,2),le=wr[0],fe=wr[1],ee=i.useRef(null),Gr=ke(function(u){vt(u)&&le!==u&&(fe(u),ee.current=u)}),Oe=i.Children.only(s),re=(Oe==null?void 0:Oe.props)||{},xe={},Ir=ke(function(u){var f,k,L=le;return(L==null?void 0:L.contains(u))||((f=ht(L))===null||f===void 0?void 0:f.host)===u||u===L||(j==null?void 0:j.contains(u))||((k=ht(j))===null||k===void 0?void 0:k.host)===u||u===j||Object.values(je.current).some(function(D){return(D==null?void 0:D.contains(u))||u===D})}),Mr=kt(o,Fe,Q,he),Ur=kt(o,ir,Ve,ze),Kr=i.useState(w||!1),ye=N(Kr,2),Z=ye[0],ur=ye[1],q=m??Z,Le=ke(function(u){m===void 0&&ur(u)});Ce(function(){ur(m||!1)},[m]);var S=i.useRef(q);S.current=q;var E=i.useRef([]);E.current=[];var ce=ke(function(u){var f;Le(u),((f=E.current[E.current.length-1])!==null&&f!==void 0?f:q)!==u&&(E.current.push(u),v==null||v(u))}),Ge=i.useRef(),sr=function(){clearTimeout(Ge.current)},te=function(f){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;sr(),k===0?ce(f):Ge.current=setTimeout(function(){ce(f)},k*1e3)};i.useEffect(function(){return sr},[]);var Cr=i.useState(!1),lr=N(Cr,2),Ne=lr[0],_r=lr[1];Ce(function(u){(!u||q)&&_r(!0)},[q]);var Jr=i.useState(null),fr=N(Jr,2),Ze=fr[0],cr=fr[1],Ie=i.useState(null),Ue=N(Ie,2),Re=Ue[0],pe=Ue[1],Ke=function(f){pe([f.clientX,f.clientY])},Pr=Bn(q,j,ue&&Re!==null?Re:le,U,K,Pe,P),A=N(Pr,11),Sr=A[0],Qr=A[1],Je=A[2],Rr=A[3],Zr=A[4],Er=A[5],kr=A[6],Qe=A[7],zr=A[8],Ye=A[9],Ee=A[10],Dr=Wn(X,l,d,C),Tr=N(Dr,2),be=Tr[0],de=Tr[1],Xe=be.has("click"),er=de.has("click")||de.has("contextMenu"),we=ke(function(){Ne||Ee()}),pr=function(){S.current&&ue&&er&&te(!1)};$n(q,le,j,we,pr),Ce(function(){we()},[Re,U]),Ce(function(){q&&!(K!=null&&K[U])&&we()},[JSON.stringify(Pe)]);var xr=i.useMemo(function(){var u=Hn(K,o,Ye,ue);return nr(u,b==null?void 0:b(Ye))},[Ye,b,K,o,ue]);i.useImperativeHandle(n,function(){return{nativeElement:ee.current,popupElement:Se.current,forceAlign:we}});var Yr=i.useState(0),dr=N(Yr,2),Xr=dr[0],et=dr[1],rt=i.useState(0),Lr=N(rt,2),tt=Lr[0],nt=Lr[1],Nr=function(){if(F&&le){var f=le.getBoundingClientRect();et(f.width),nt(f.height)}},at=function(){Nr(),we()},it=function(f){_r(!1),Ee(),_==null||_(f)},vr=function(){return new Promise(function(f){Nr(),cr(function(){return f})})};Ce(function(){Ze&&(Ee(),Ze(),cr(null))},[Ze]);function Me(u,f,k,L){xe[u]=function(D){var Hr;L==null||L(D),te(f,k);for(var ft=arguments.length,Mt=new Array(ft>1?ft-1:0),Br=1;Br<ft;Br++)Mt[Br-1]=arguments[Br];(Hr=re[u])===null||Hr===void 0||Hr.call.apply(Hr,[re,D].concat(Mt))}}(Xe||er)&&(xe.onClick=function(u){var f;S.current&&er?te(!1):!S.current&&Xe&&(Ke(u),te(!0));for(var k=arguments.length,L=new Array(k>1?k-1:0),D=1;D<k;D++)L[D-1]=arguments[D];(f=re.onClick)===null||f===void 0||f.call.apply(f,[re,u].concat(L))});var ot=Fn(q,er,le,j,x,h,Ir,te),ne=be.has("hover"),Wr=de.has("hover"),rr,We;ne&&(Me("onMouseEnter",!0,z,function(u){Ke(u)}),Me("onPointerEnter",!0,z,function(u){Ke(u)}),rr=function(f){(q||Ne)&&j!==null&&j!==void 0&&j.contains(f.target)&&te(!0,z)},ue&&(xe.onMouseMove=function(u){var f;(f=re.onMouseMove)===null||f===void 0||f.call(re,u)})),Wr&&(Me("onMouseLeave",!1,y),Me("onPointerLeave",!1,y),We=function(){te(!1,y)}),be.has("focus")&&Me("onFocus",!0,T),de.has("focus")&&Me("onBlur",!1,M),be.has("contextMenu")&&(xe.onContextMenu=function(u){var f;S.current&&de.has("contextMenu")?te(!1):(Ke(u),te(!0)),u.preventDefault();for(var k=arguments.length,L=new Array(k>1?k-1:0),D=1;D<k;D++)L[D-1]=arguments[D];(f=re.onContextMenu)===null||f===void 0||f.call.apply(f,[re,u].concat(L))}),Y&&(xe.className=nr(re.className,Y));var Ae=H(H({},re),xe),hr={},Ar=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Ar.forEach(function(u){se[u]&&(hr[u]=function(){for(var f,k=arguments.length,L=new Array(k),D=0;D<k;D++)L[D]=arguments[D];(f=Ae[u])===null||f===void 0||f.call.apply(f,[Ae].concat(L)),se[u].apply(se,L)})});var ut=i.cloneElement(Oe,H(H({},Ae),hr)),st={x:Er,y:kr},lt=J?H({},J!==!0?J:{}):null;return i.createElement(i.Fragment,null,i.createElement(wt,{disabled:!q,ref:Gr,onResize:at},i.createElement(Nn,{getTriggerDOMNode:me},ut)),i.createElement(Rt.Provider,{value:jr},i.createElement(Ln,{portal:e,ref:qr,prefixCls:o,popup:ve,className:nr(ie,xr),style:oe,target:le,onMouseEnter:rr,onMouseLeave:We,onPointerEnter:rr,zIndex:B,open:q,keepDom:Ne,fresh:$e,onClick:$,onPointerDownCapture:ot,mask:x,motion:Mr,maskMotion:Ur,onVisibleChanged:it,onPrepare:vr,forceRender:I,autoDestroy:O,getPopupContainer:G,align:Ye,arrow:lt,arrowPos:st,ready:Sr,offsetX:Qr,offsetY:Je,offsetR:Rr,offsetB:Zr,onAlign:we,stretch:F,targetWidth:Xr/Qe,targetHeight:tt/zr})))});return t}const Kn=jn(Ht);export{wt as R,Kn as T,zn as i,Un as u};
