import{L as Ot,J as jt,_ as B,S as qt,H as D,V as wt,I as he,a as Ct}from"./useToken-a9416e4a.js";import{K as It,M as Gt,v as Dt,x as Lt,P as ct,t as Ut,Q as Mt,s as _e,c as tr,k as Wt,n as Kt,R as Jt,S as vt,T as Qt,w as _t,U as ft,_ as Zt}from"./compact-item-065385a4.js";import{b as pt,P as Nt}from"./motion-98dddd30.js";import{_ as gt}from"./extends-98964cd2.js";import{r as i}from"./index-76fb7be0.js";var dt=i.createContext(null);function Yt(e){var t=e.children,r=e.onBatchResize,n=i.useRef(0),a=i.useRef([]),o=i.useContext(dt),u=i.useCallback(function(v,l,d){n.current+=1;var w=n.current;a.current.push({size:v,element:l,data:d}),Promise.resolve().then(function(){w===n.current&&(r==null||r(a.current),a.current=[])}),o==null||o(v,l,d)},[r,o]);return i.createElement(dt.Provider,{value:u},t)}var Ht=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(a,o){return a[0]===r?(n=o,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),a=this.__entries__[n];return a&&a[1]},t.prototype.set=function(r,n){var a=e(this.__entries__,r);~a?this.__entries__[a][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,a=e(n,r);~a&&n.splice(a,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var a=0,o=this.__entries__;a<o.length;a++){var u=o[a];r.call(n,u[1],u[0])}},t}()}(),ht=typeof window<"u"&&typeof document<"u"&&window.document===document,Fr=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Xt=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Fr):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),en=2;function rn(e,t){var r=!1,n=!1,a=0;function o(){r&&(r=!1,e()),n&&v()}function u(){Xt(o)}function v(){var l=Date.now();if(r){if(l-a<en)return;n=!0}else r=!0,n=!1,setTimeout(u,t);a=l}return v}var tn=20,nn=["top","right","bottom","left","width","height","size","weight"],an=typeof MutationObserver<"u",on=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=rn(this.refresh.bind(this),tn)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!ht||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),an?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!ht||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,a=nn.some(function(o){return!!~n.indexOf(o)});a&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),$t=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},nr=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Fr},At=jr(0,0,0,0);function Or(e){return parseFloat(e)||0}function Rt(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,a){var o=e["border-"+a+"-width"];return n+Or(o)},0)}function sn(e){for(var t=["top","right","bottom","left"],r={},n=0,a=t;n<a.length;n++){var o=a[n],u=e["padding-"+o];r[o]=Or(u)}return r}function un(e){var t=e.getBBox();return jr(0,0,t.width,t.height)}function cn(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return At;var n=nr(e).getComputedStyle(e),a=sn(n),o=a.left+a.right,u=a.top+a.bottom,v=Or(n.width),l=Or(n.height);if(n.boxSizing==="border-box"&&(Math.round(v+o)!==t&&(v-=Rt(n,"left","right")+o),Math.round(l+u)!==r&&(l-=Rt(n,"top","bottom")+u)),!vn(e)){var d=Math.round(v+o)-t,w=Math.round(l+u)-r;Math.abs(d)!==1&&(v-=d),Math.abs(w)!==1&&(l-=w)}return jr(a.left,a.top,v,l)}var ln=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof nr(e).SVGGraphicsElement}:function(e){return e instanceof nr(e).SVGElement&&typeof e.getBBox=="function"}}();function vn(e){return e===nr(e).document.documentElement}function fn(e){return ht?ln(e)?un(e):cn(e):At}function dn(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,u=Object.create(o.prototype);return $t(u,{x:t,y:r,width:n,height:a,top:r,right:t+n,bottom:a+r,left:t}),u}function jr(e,t,r,n){return{x:e,y:t,width:r,height:n}}var hn=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=jr(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=fn(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),mn=function(){function e(t,r){var n=dn(r);$t(this,{target:t,contentRect:n})}return e}(),gn=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new Ht,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof nr(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new hn(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof nr(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new mn(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Bt=typeof WeakMap<"u"?new WeakMap:new Ht,Vt=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=on.getInstance(),n=new gn(t,r,this);Bt.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){Vt.prototype[e]=function(){var t;return(t=Bt.get(this))[e].apply(t,arguments)}});var yn=function(){return typeof Fr.ResizeObserver<"u"?Fr.ResizeObserver:Vt}(),De=new Map;function bn(e){e.forEach(function(t){var r,n=t.target;(r=De.get(n))===null||r===void 0||r.forEach(function(a){return a(n)})})}var Ft=new yn(bn);function wn(e,t){De.has(e)||(De.set(e,new Set),Ft.observe(e)),De.get(e).add(t)}function Cn(e,t){De.has(e)&&(De.get(e).delete(t),De.get(e).size||(Ft.unobserve(e),De.delete(e)))}var Mn=function(e){It(r,e);var t=Gt(r);function r(){return Ot(this,r),t.apply(this,arguments)}return jt(r,[{key:"render",value:function(){return this.props.children}}]),r}(i.Component);function _n(e,t){var r=e.children,n=e.disabled,a=i.useRef(null),o=i.useRef(null),u=i.useContext(dt),v=typeof r=="function",l=v?r(a):r,d=i.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),w=!v&&i.isValidElement(l)&&Dt(l),m=w?l.ref:null,E=Lt(m,a),h=function(){var M;return ct(a.current)||(a.current&&qt(a.current)==="object"?ct((M=a.current)===null||M===void 0?void 0:M.nativeElement):null)||ct(o.current)};i.useImperativeHandle(t,function(){return h()});var S=i.useRef(e);S.current=e;var k=i.useCallback(function(y){var M=S.current,R=M.onResize,g=M.data,c=y.getBoundingClientRect(),$=c.width,O=c.height,V=y.offsetWidth,j=y.offsetHeight,Z=Math.floor($),q=Math.floor(O);if(d.current.width!==Z||d.current.height!==q||d.current.offsetWidth!==V||d.current.offsetHeight!==j){var I={width:Z,height:q,offsetWidth:V,offsetHeight:j};d.current=I;var te=V===Math.round($)?$:V,ne=j===Math.round(O)?O:j,U=B(B({},I),{},{offsetWidth:te,offsetHeight:ne});u==null||u(U,y,g),R&&Promise.resolve().then(function(){R(U,y)})}},[]);return i.useEffect(function(){var y=h();return y&&!n&&wn(y,k),function(){return Cn(y,k)}},[a.current,n]),i.createElement(Mn,{ref:o},w?i.cloneElement(l,{ref:E}):l)}var Rn=i.forwardRef(_n),Sn="rc-observer-key";function kn(e,t){var r=e.children,n=typeof r=="function"?[r]:Ut(r);return n.map(function(a,o){var u=(a==null?void 0:a.key)||"".concat(Sn,"-").concat(o);return i.createElement(Rn,gt({},e,{key:u,ref:o===0?t:void 0}),a)})}var yt=i.forwardRef(kn);yt.Collection=Yt;function lt(e){return e!==void 0}function Gn(e,t){var r=t||{},n=r.defaultValue,a=r.value,o=r.onChange,u=r.postState,v=Mt(function(){return lt(a)?a:lt(n)?typeof n=="function"?n():n:typeof e=="function"?e():e}),l=D(v,2),d=l[0],w=l[1],m=a!==void 0?a:d,E=u?u(m):m,h=_e(o),S=Mt([m]),k=D(S,2),y=k[0],M=k[1];wt(function(){var g=y[0];d!==g&&h(d,g)},[y]),wt(function(){lt(a)||w(a)},[a]);var R=_e(function(g,c){w(g,c),M([m],c)});return[E,R]}const Pn=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};function En(e){var t=e.prefixCls,r=e.align,n=e.arrow,a=e.arrowPos,o=n||{},u=o.className,v=o.content,l=a.x,d=l===void 0?0:l,w=a.y,m=w===void 0?0:w,E=i.useRef();if(!r||!r.points)return null;var h={position:"absolute"};if(r.autoArrow!==!1){var S=r.points[0],k=r.points[1],y=S[0],M=S[1],R=k[0],g=k[1];y===R||!["t","b"].includes(y)?h.top=m:y==="t"?h.top=0:h.bottom=0,M===g||!["l","r"].includes(M)?h.left=d:M==="l"?h.left=0:h.right=0}return i.createElement("div",{ref:E,className:tr("".concat(t,"-arrow"),u),style:h},v)}function zn(e){var t=e.prefixCls,r=e.open,n=e.zIndex,a=e.mask,o=e.motion;return a?i.createElement(Wt,gt({},o,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(u){var v=u.className;return i.createElement("div",{style:{zIndex:n},className:tr("".concat(t,"-mask"),v)})}):null}var Tn=i.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),xn=i.forwardRef(function(e,t){var r=e.popup,n=e.className,a=e.prefixCls,o=e.style,u=e.target,v=e.onVisibleChanged,l=e.open,d=e.keepDom,w=e.fresh,m=e.onClick,E=e.mask,h=e.arrow,S=e.arrowPos,k=e.align,y=e.motion,M=e.maskMotion,R=e.forceRender,g=e.getPopupContainer,c=e.autoDestroy,$=e.portal,O=e.zIndex,V=e.onMouseEnter,j=e.onMouseLeave,Z=e.onPointerEnter,q=e.ready,I=e.offsetX,te=e.offsetY,ne=e.offsetR,U=e.offsetB,me=e.onAlign,L=e.onPrepare,N=e.stretch,C=e.targetWidth,p=e.targetHeight,P=typeof r=="function"?r():r,ue=l||d,ae=(g==null?void 0:g.length)>0,ar=i.useState(!g||!ae),qe=D(ar,2),ge=qe[0],Ie=qe[1];if(he(function(){!ge&&ae&&u&&Ie(!0)},[ge,ae,u]),!ge)return null;var ie="auto",H={left:"-1000vw",top:"-1000vh",right:ie,bottom:ie};if(q||!l){var Y,ce=k.points,le=k.dynamicInset||((Y=k._experimental)===null||Y===void 0?void 0:Y.dynamicInset),Ge=le&&ce[0][1]==="r",ir=le&&ce[0][0]==="b";Ge?(H.right=ne,H.left=ie):(H.left=I,H.right=ie),ir?(H.bottom=U,H.top=ie):(H.top=te,H.bottom=ie)}var F={};return N&&(N.includes("height")&&p?F.height=p:N.includes("minHeight")&&p&&(F.minHeight=p),N.includes("width")&&C?F.width=C:N.includes("minWidth")&&C&&(F.minWidth=C)),l||(F.pointerEvents="none"),i.createElement($,{open:R||ue,getContainer:g&&function(){return g(u)},autoDestroy:c},i.createElement(zn,{prefixCls:a,open:l,zIndex:O,mask:E,motion:M}),i.createElement(yt,{onResize:me,disabled:!l},function(Ue){return i.createElement(Wt,gt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:R,leavedClassName:"".concat(a,"-hidden")},y,{onAppearPrepare:L,onEnterPrepare:L,visible:l,onVisibleChanged:function(K){var ye;y==null||(ye=y.onVisibleChanged)===null||ye===void 0||ye.call(y,K),v(K)}}),function(Re,K){var ye=Re.className,_=Re.style,Le=tr(a,ye,n);return i.createElement("div",{ref:Kt(Ue,t,K),className:Le,style:B(B(B(B({"--arrow-x":"".concat(S.x||0,"px"),"--arrow-y":"".concat(S.y||0,"px")},H),F),_),{},{boxSizing:"border-box",zIndex:O},o),onMouseEnter:V,onMouseLeave:j,onPointerEnter:Z,onClick:m},h&&i.createElement(En,{prefixCls:a,arrow:h,arrowPos:S,align:k}),i.createElement(Tn,{cache:!l&&!w},P))})}))}),Dn=i.forwardRef(function(e,t){var r=e.children,n=e.getTriggerDOMNode,a=Dt(r),o=i.useCallback(function(v){Jt(t,n?n(v):v)},[n]),u=Lt(o,r.ref);return a?i.cloneElement(r,{ref:u}):r}),St=i.createContext(null);function kt(e){return e?Array.isArray(e)?e:[e]:[]}function Ln(e,t,r,n){return i.useMemo(function(){var a=kt(r??t),o=kt(n??t),u=new Set(a),v=new Set(o);return e&&(u.has("hover")&&(u.delete("hover"),u.add("click")),v.has("hover")&&(v.delete("hover"),v.add("click"))),[u,v]},[e,t,r,n])}function Wn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Nn(e,t,r,n){for(var a=r.points,o=Object.keys(e),u=0;u<o.length;u+=1){var v,l=o[u];if(Wn((v=e[l])===null||v===void 0?void 0:v.points,a,n))return"".concat(t,"-placement-").concat(l)}return""}function Pt(e,t,r,n){return t||(r?{motionName:"".concat(e,"-").concat(r)}:n?{motionName:n}:null)}function yr(e){return e.ownerDocument.defaultView}function mt(e){for(var t=[],r=e==null?void 0:e.parentElement,n=["hidden","scroll","clip","auto"];r;){var a=yr(r).getComputedStyle(r),o=a.overflowX,u=a.overflowY,v=a.overflow;[o,u,v].some(function(l){return n.includes(l)})&&t.push(r),r=r.parentElement}return t}function gr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function mr(e){return gr(parseFloat(e),0)}function Et(e,t){var r=B({},e);return(t||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var a=yr(n).getComputedStyle(n),o=a.overflow,u=a.overflowClipMargin,v=a.borderTopWidth,l=a.borderBottomWidth,d=a.borderLeftWidth,w=a.borderRightWidth,m=n.getBoundingClientRect(),E=n.offsetHeight,h=n.clientHeight,S=n.offsetWidth,k=n.clientWidth,y=mr(v),M=mr(l),R=mr(d),g=mr(w),c=gr(Math.round(m.width/S*1e3)/1e3),$=gr(Math.round(m.height/E*1e3)/1e3),O=(S-k-R-g)*c,V=(E-h-y-M)*$,j=y*$,Z=M*$,q=R*c,I=g*c,te=0,ne=0;if(o==="clip"){var U=mr(u);te=U*c,ne=U*$}var me=m.x+q-te,L=m.y+j-ne,N=me+m.width+2*te-q-I-O,C=L+m.height+2*ne-j-Z-V;r.left=Math.max(r.left,me),r.top=Math.max(r.top,L),r.right=Math.min(r.right,N),r.bottom=Math.min(r.bottom,C)}}),r}function zt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(t),n=r.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(r)}function Tt(e,t){var r=t||[],n=D(r,2),a=n[0],o=n[1];return[zt(e.width,a),zt(e.height,o)]}function xt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function rr(e,t){var r=t[0],n=t[1],a,o;return r==="t"?o=e.y:r==="b"?o=e.y+e.height:o=e.y+e.height/2,n==="l"?a=e.x:n==="r"?a=e.x+e.width:a=e.x+e.width/2,{x:a,y:o}}function xe(e,t){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(n,a){return a===t?r[n]||"c":n}).join("")}function Hn(e,t,r,n,a,o,u){var v=i.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[n]||{}}),l=D(v,2),d=l[0],w=l[1],m=i.useRef(0),E=i.useMemo(function(){return t?mt(t):[]},[t]),h=i.useRef({}),S=function(){h.current={}};e||S();var k=_e(function(){if(t&&r&&e){let re=function(Me,je){var Xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Le,er=P.x+Me,dr=P.y+je,hr=er+Y,Ar=dr+H,at=Math.max(er,Xe.left),it=Math.max(dr,Xe.top),ot=Math.min(hr,Xe.right),st=Math.min(Ar,Xe.bottom);return Math.max(0,(ot-at)*(st-it))},$r=function(){Pe=P.y+b,Ee=Pe+H,ze=P.x+x,Qe=ze+Y};var R,g,c=t,$=c.ownerDocument,O=yr(c),V=O.getComputedStyle(c),j=V.width,Z=V.height,q=V.position,I=c.style.left,te=c.style.top,ne=c.style.right,U=c.style.bottom,me=c.style.overflow,L=B(B({},a[n]),o),N=$.createElement("div");(R=c.parentElement)===null||R===void 0||R.appendChild(N),N.style.left="".concat(c.offsetLeft,"px"),N.style.top="".concat(c.offsetTop,"px"),N.style.position=q,N.style.height="".concat(c.offsetHeight,"px"),N.style.width="".concat(c.offsetWidth,"px"),c.style.left="0",c.style.top="0",c.style.right="auto",c.style.bottom="auto",c.style.overflow="hidden";var C;if(Array.isArray(r))C={x:r[0],y:r[1],width:0,height:0};else{var p=r.getBoundingClientRect();C={x:p.x,y:p.y,width:p.width,height:p.height}}var P=c.getBoundingClientRect(),ue=$.documentElement,ae=ue.clientWidth,ar=ue.clientHeight,qe=ue.scrollWidth,ge=ue.scrollHeight,Ie=ue.scrollTop,ie=ue.scrollLeft,H=P.height,Y=P.width,ce=C.height,le=C.width,Ge={left:0,top:0,right:ae,bottom:ar},ir={left:-ie,top:-Ie,right:qe-ie,bottom:ge-Ie},F=L.htmlRegion,Ue="visible",Re="visibleFirst";F!=="scroll"&&F!==Re&&(F=Ue);var K=F===Re,ye=Et(ir,E),_=Et(Ge,E),Le=F===Ue?_:ye,X=K?_:Le;c.style.left="auto",c.style.top="auto",c.style.right="0",c.style.bottom="0";var br=c.getBoundingClientRect();c.style.left=I,c.style.top=te,c.style.right=ne,c.style.bottom=U,c.style.overflow=me,(g=c.parentElement)===null||g===void 0||g.removeChild(N);var We=gr(Math.round(Y/parseFloat(j)*1e3)/1e3),Ne=gr(Math.round(H/parseFloat(Z)*1e3)/1e3);if(We===0||Ne===0||vt(r)&&!Qt(r))return;var wr=L.offset,oe=L.targetOffset,qr=Tt(P,wr),Cr=D(qr,2),se=Cr[0],ee=Cr[1],ve=Tt(C,oe),Mr=D(ve,2),_r=Mr[0],Ir=Mr[1];C.x-=_r,C.y-=Ir;var Ke=L.points||[],J=D(Ke,2),Se=J[0],Gr=J[1],be=xt(Gr),Q=xt(Se),Rr=rr(C,be),or=rr(P,Q),ke=B({},L),x=Rr.x-or.x+se,b=Rr.y-or.y+ee,fe=re(x,b),de=re(x,b,_),He=rr(C,["t","l"]),sr=rr(P,["t","l"]),ur=rr(C,["b","r"]),cr=rr(P,["b","r"]),G=L.overflow||{},Ur=G.adjustX,Sr=G.adjustY,Je=G.shiftX,lr=G.shiftY,kr=function(je){return typeof je=="boolean"?je:je>=0},Pe,Ee,ze,Qe;$r();var vr=kr(Sr),fr=Q[0]===be[0];if(vr&&Q[0]==="t"&&(Ee>X.bottom||h.current.bt)){var $e=b;fr?$e-=H-ce:$e=He.y-cr.y-ee;var Ae=re(x,$e),Kr=re(x,$e,_);Ae>fe||Ae===fe&&(!K||Kr>=de)?(h.current.bt=!0,b=$e,ee=-ee,ke.points=[xe(Q,0),xe(be,0)]):h.current.bt=!1}if(vr&&Q[0]==="b"&&(Pe<X.top||h.current.tb)){var A=b;fr?A+=H-ce:A=ur.y-sr.y-ee;var Pr=re(x,A),Jr=re(x,A,_);Pr>fe||Pr===fe&&(!K||Jr>=de)?(h.current.tb=!0,b=A,ee=-ee,ke.points=[xe(Q,0),xe(be,0)]):h.current.tb=!1}var Er=kr(Ur),zr=Q[1]===be[1];if(Er&&Q[1]==="l"&&(Qe>X.right||h.current.rl)){var Be=x;zr?Be-=Y-le:Be=He.x-cr.x-se;var Tr=re(Be,b),Qr=re(Be,b,_);Tr>fe||Tr===fe&&(!K||Qr>=de)?(h.current.rl=!0,x=Be,se=-se,ke.points=[xe(Q,1),xe(be,1)]):h.current.rl=!1}if(Er&&Q[1]==="r"&&(ze<X.left||h.current.lr)){var Ve=x;zr?Ve+=Y-le:Ve=ur.x-sr.x-se;var xr=re(Ve,b),Ze=re(Ve,b,_);xr>fe||xr===fe&&(!K||Ze>=de)?(h.current.lr=!0,x=Ve,se=-se,ke.points=[xe(Q,1),xe(be,1)]):h.current.lr=!1}$r();var we=Je===!0?0:Je;typeof we=="number"&&(ze<_.left&&(x-=ze-_.left-se,C.x+le<_.left+we&&(x+=C.x-_.left+le-we)),Qe>_.right&&(x-=Qe-_.right-se,C.x>_.right-we&&(x+=C.x-_.right+we)));var Fe=lr===!0?0:lr;typeof Fe=="number"&&(Pe<_.top&&(b-=Pe-_.top-ee,C.y+ce<_.top+Fe&&(b+=C.y-_.top+ce-Fe)),Ee>_.bottom&&(b-=Ee-_.bottom-ee,C.y>_.bottom-Fe&&(b+=C.y-_.bottom+Fe)));var pe=P.x+x,Ye=pe+Y,Ce=P.y+b,Dr=Ce+H,Oe=C.x,Te=Oe+le,Lr=C.y,Zr=Lr+ce,pr=Math.max(pe,Oe),Wr=Math.min(Ye,Te),Yr=(pr+Wr)/2,Xr=Yr-pe,et=Math.max(Ce,Lr),Nr=Math.min(Dr,Zr),rt=(et+Nr)/2,tt=rt-Ce;u==null||u(t,ke);var Hr=br.right-P.x-(x+P.width),nt=br.bottom-P.y-(b+P.height);w({ready:!0,offsetX:x/We,offsetY:b/Ne,offsetR:Hr/We,offsetB:nt/Ne,arrowX:Xr/We,arrowY:tt/Ne,scaleX:We,scaleY:Ne,align:ke})}}),y=function(){m.current+=1;var g=m.current;Promise.resolve().then(function(){m.current===g&&k()})},M=function(){w(function(g){return B(B({},g),{},{ready:!1})})};return he(M,[n]),he(function(){e||M()},[e]),[d.ready,d.offsetX,d.offsetY,d.offsetR,d.offsetB,d.arrowX,d.arrowY,d.scaleX,d.scaleY,d.align,y]}function $n(e,t,r,n,a){he(function(){if(e&&t&&r){let m=function(){n(),a()};var o=t,u=r,v=mt(o),l=mt(u),d=yr(u),w=new Set([d].concat(Ct(v),Ct(l)));return w.forEach(function(E){E.addEventListener("scroll",m,{passive:!0})}),d.addEventListener("resize",m,{passive:!0}),n(),function(){w.forEach(function(E){E.removeEventListener("scroll",m),d.removeEventListener("resize",m)})}}},[e,t,r])}function An(e,t,r,n,a,o,u,v){var l=i.useRef(e),d=i.useRef(!1);l.current!==e&&(d.current=!0,l.current=e),i.useEffect(function(){var w=_t(function(){d.current=!1});return function(){_t.cancel(w)}},[e]),i.useEffect(function(){if(t&&n&&(!a||o)){var w=function(){var O=!1,V=function(q){var I=q.target;O=u(I)},j=function(q){var I=q.target;!d.current&&l.current&&!O&&!u(I)&&v(!1)};return[V,j]},m=w(),E=D(m,2),h=E[0],S=E[1],k=w(),y=D(k,2),M=y[0],R=y[1],g=yr(n);g.addEventListener("mousedown",h,!0),g.addEventListener("click",S,!0),g.addEventListener("contextmenu",S,!0);var c=ft(r);return c&&(c.addEventListener("mousedown",M,!0),c.addEventListener("click",R,!0),c.addEventListener("contextmenu",R,!0)),function(){g.removeEventListener("mousedown",h,!0),g.removeEventListener("click",S,!0),g.removeEventListener("contextmenu",S,!0),c&&(c.removeEventListener("mousedown",M,!0),c.removeEventListener("click",R,!0),c.removeEventListener("contextmenu",R,!0))}}},[t,r,n,a,o])}var Bn=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Vn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nt,t=i.forwardRef(function(r,n){var a=r.prefixCls,o=a===void 0?"rc-trigger-popup":a,u=r.children,v=r.action,l=v===void 0?"hover":v,d=r.showAction,w=r.hideAction,m=r.popupVisible,E=r.defaultPopupVisible,h=r.onPopupVisibleChange,S=r.afterPopupVisibleChange,k=r.mouseEnterDelay,y=r.mouseLeaveDelay,M=y===void 0?.1:y,R=r.focusDelay,g=r.blurDelay,c=r.mask,$=r.maskClosable,O=$===void 0?!0:$,V=r.getPopupContainer,j=r.forceRender,Z=r.autoDestroy,q=r.destroyPopupOnHide,I=r.popup,te=r.popupClassName,ne=r.popupStyle,U=r.popupPlacement,me=r.builtinPlacements,L=me===void 0?{}:me,N=r.popupAlign,C=r.zIndex,p=r.stretch,P=r.getPopupClassNameFromAlign,ue=r.fresh,ae=r.alignPoint,ar=r.onPopupClick,qe=r.onPopupAlign,ge=r.arrow,Ie=r.popupMotion,ie=r.maskMotion,H=r.popupTransitionName,Y=r.popupAnimation,ce=r.maskTransitionName,le=r.maskAnimation,Ge=r.className,ir=r.getTriggerDOMNode,F=Zt(r,Bn),Ue=Z||q||!1,Re=i.useState(!1),K=D(Re,2),ye=K[0],_=K[1];he(function(){_(Pn())},[]);var Le=i.useRef({}),X=i.useContext(St),br=i.useMemo(function(){return{registerSubPopup:function(f,z){Le.current[f]=z,X==null||X.registerSubPopup(f,z)}}},[X]),We=pt(),Ne=i.useState(null),wr=D(Ne,2),oe=wr[0],qr=wr[1],Cr=_e(function(s){vt(s)&&oe!==s&&qr(s),X==null||X.registerSubPopup(We,s)}),se=i.useState(null),ee=D(se,2),ve=ee[0],Mr=ee[1],_r=i.useRef(null),Ir=_e(function(s){vt(s)&&ve!==s&&(Mr(s),_r.current=s)}),Ke=i.Children.only(u),J=(Ke==null?void 0:Ke.props)||{},Se={},Gr=_e(function(s){var f,z,W=ve;return(W==null?void 0:W.contains(s))||((f=ft(W))===null||f===void 0?void 0:f.host)===s||s===W||(oe==null?void 0:oe.contains(s))||((z=ft(oe))===null||z===void 0?void 0:z.host)===s||s===oe||Object.values(Le.current).some(function(T){return(T==null?void 0:T.contains(s))||s===T})}),be=Pt(o,Ie,Y,H),Q=Pt(o,ie,le,ce),Rr=i.useState(E||!1),or=D(Rr,2),ke=or[0],x=or[1],b=m??ke,fe=_e(function(s){m===void 0&&x(s)});he(function(){x(m||!1)},[m]);var de=i.useRef(b);de.current=b;var He=i.useRef([]);He.current=[];var sr=_e(function(s){var f;fe(s),((f=He.current[He.current.length-1])!==null&&f!==void 0?f:b)!==s&&(He.current.push(s),h==null||h(s))}),ur=i.useRef(),cr=function(){clearTimeout(ur.current)},G=function(f){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;cr(),z===0?sr(f):ur.current=setTimeout(function(){sr(f)},z*1e3)};i.useEffect(function(){return cr},[]);var Ur=i.useState(!1),Sr=D(Ur,2),Je=Sr[0],lr=Sr[1];he(function(s){(!s||b)&&lr(!0)},[b]);var kr=i.useState(null),Pe=D(kr,2),Ee=Pe[0],ze=Pe[1],Qe=i.useState([0,0]),vr=D(Qe,2),fr=vr[0],$e=vr[1],Ae=function(f){$e([f.clientX,f.clientY])},Kr=Hn(b,oe,ae?fr:ve,U,L,N,qe),A=D(Kr,11),Pr=A[0],Jr=A[1],Er=A[2],zr=A[3],Be=A[4],Tr=A[5],Qr=A[6],Ve=A[7],xr=A[8],Ze=A[9],we=A[10],Fe=Ln(ye,l,d,w),pe=D(Fe,2),Ye=pe[0],Ce=pe[1],Dr=Ye.has("click"),Oe=Ce.has("click")||Ce.has("contextMenu"),Te=_e(function(){Je||we()}),Lr=function(){de.current&&ae&&Oe&&G(!1)};$n(b,ve,oe,Te,Lr),he(function(){Te()},[fr,U]),he(function(){b&&!(L!=null&&L[U])&&Te()},[JSON.stringify(N)]);var Zr=i.useMemo(function(){var s=Nn(L,o,Ze,ae);return tr(s,P==null?void 0:P(Ze))},[Ze,P,L,o,ae]);i.useImperativeHandle(n,function(){return{nativeElement:_r.current,forceAlign:Te}});var pr=i.useState(0),Wr=D(pr,2),Yr=Wr[0],Xr=Wr[1],et=i.useState(0),Nr=D(et,2),rt=Nr[0],tt=Nr[1],Hr=function(){if(p&&ve){var f=ve.getBoundingClientRect();Xr(f.width),tt(f.height)}},nt=function(){Hr(),Te()},re=function(f){lr(!1),we(),S==null||S(f)},$r=function(){return new Promise(function(f){Hr(),ze(function(){return f})})};he(function(){Ee&&(we(),Ee(),ze(null))},[Ee]);function Me(s,f,z,W){Se[s]=function(T){var Br;W==null||W(T),G(f,z);for(var ut=arguments.length,bt=new Array(ut>1?ut-1:0),Vr=1;Vr<ut;Vr++)bt[Vr-1]=arguments[Vr];(Br=J[s])===null||Br===void 0||Br.call.apply(Br,[J,T].concat(bt))}}(Dr||Oe)&&(Se.onClick=function(s){var f;de.current&&Oe?G(!1):!de.current&&Dr&&(Ae(s),G(!0));for(var z=arguments.length,W=new Array(z>1?z-1:0),T=1;T<z;T++)W[T-1]=arguments[T];(f=J.onClick)===null||f===void 0||f.call.apply(f,[J,s].concat(W))}),An(b,Oe,ve,oe,c,O,Gr,G);var je=Ye.has("hover"),Xe=Ce.has("hover"),er,dr;je&&(Me("onMouseEnter",!0,k,function(s){Ae(s)}),Me("onPointerEnter",!0,k,function(s){Ae(s)}),er=function(){(b||Je)&&G(!0,k)},ae&&(Se.onMouseMove=function(s){var f;(f=J.onMouseMove)===null||f===void 0||f.call(J,s)})),Xe&&(Me("onMouseLeave",!1,M),Me("onPointerLeave",!1,M),dr=function(){G(!1,M)}),Ye.has("focus")&&Me("onFocus",!0,R),Ce.has("focus")&&Me("onBlur",!1,g),Ye.has("contextMenu")&&(Se.onContextMenu=function(s){var f;de.current&&Ce.has("contextMenu")?G(!1):(Ae(s),G(!0)),s.preventDefault();for(var z=arguments.length,W=new Array(z>1?z-1:0),T=1;T<z;T++)W[T-1]=arguments[T];(f=J.onContextMenu)===null||f===void 0||f.call.apply(f,[J,s].concat(W))}),Ge&&(Se.className=tr(J.className,Ge));var hr=B(B({},J),Se),Ar={},at=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];at.forEach(function(s){F[s]&&(Ar[s]=function(){for(var f,z=arguments.length,W=new Array(z),T=0;T<z;T++)W[T]=arguments[T];(f=hr[s])===null||f===void 0||f.call.apply(f,[hr].concat(W)),F[s].apply(F,W)})});var it=i.cloneElement(Ke,B(B({},hr),Ar)),ot={x:Tr,y:Qr},st=ge?B({},ge!==!0?ge:{}):null;return i.createElement(i.Fragment,null,i.createElement(yt,{disabled:!b,ref:Ir,onResize:nt},i.createElement(Dn,{getTriggerDOMNode:ir},it)),i.createElement(St.Provider,{value:br},i.createElement(xn,{portal:e,ref:Cr,prefixCls:o,popup:I,className:tr(te,Zr),style:ne,target:ve,onMouseEnter:er,onMouseLeave:dr,onPointerEnter:er,zIndex:C,open:b,keepDom:Je,fresh:ue,onClick:ar,mask:c,motion:be,maskMotion:Q,onVisibleChanged:re,onPrepare:$r,forceRender:j,autoDestroy:Ue,getPopupContainer:V,align:Ze,arrow:st,arrowPos:ot,ready:Pr,offsetX:Jr,offsetY:Er,offsetR:zr,offsetB:Be,onAlign:Te,stretch:p,targetWidth:Yr/Ve,targetHeight:rt/xr})))});return t}const Un=Vn(Nt);export{yt as R,Un as T,Pn as i,Gn as u};
