import{_ as z,w as Ge,c as j,G as ae,a as fe,p as K,o as ne,r as Le,t as gt,v as ht,u as Ve}from"./useToken-C9qwXZKU.js";import{I as Ne,o as yt,t as pt,_ as Be,c as V,B as mt,E as bt,F as Kt,S as D,g as xt,m as Ct,r as kt,a as Nt,R as Et,z as Ye}from"./compact-item-Cxv0YLF9.js";import{K as ke}from"./KeyCode-lh1qUinJ.js";import{p as dt}from"./pickAttrs-DOtYDQG6.js";import{r as x,R}from"./index-iW-139IE.js";import{L as St}from"./List-mPb_Fs88.js";import{K as Dt}from"./context-u9dygr8g.js";import{g as wt}from"./index-BspaYdSE.js";import{g as $t}from"./row-Bq2vx5ix.js";import{v as Ot}from"./v4-CtRu48qb.js";import{j as ge}from"./jsx-runtime-D_zvdyIk.js";import{R as Pt}from"./EyeOutlined-BdSgb3nL.js";import{R as Tt,b as Rt}from"./dForm-B_UCrNLh.js";import{R as Mt}from"./DeleteOutlined-S5uC3Dcu.js";var It={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},Lt=function(t,o){return x.createElement(Ne,z({},t,{ref:o,icon:It}))},At=x.forwardRef(Lt);function q(n,t){return n[t]}var _t=["children"];function lt(n,t){return"".concat(n,"-").concat(t)}function Bt(n){return n&&n.type&&n.type.isTreeNode}function Te(n,t){return n??t}function Ae(n){var t=n||{},o=t.title,e=t._title,i=t.key,c=t.children,y=o||"title";return{title:y,_title:e||[y],key:i||"key",children:c||"children"}}function Ht(n){function t(o){var e=pt(o);return e.map(function(i){if(!Bt(i))return ae(!i,"Tree/TreeNode can only accept TreeNode as children."),null;var c=i.key,y=i.props,a=y.children,d=Be(y,_t),r=j({key:c},d),s=t(a);return s.length&&(r.children=s),r}).filter(function(i){return i})}return t(n)}function Fe(n,t,o){var e=Ae(o),i=e._title,c=e.key,y=e.children,a=new Set(t===!0?[]:t),d=[];function r(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s.map(function(v,g){for(var p=lt(f?f.pos:"0",g),m=Te(v[c],p),u,h=0;h<i.length;h+=1){var N=i[h];if(v[N]!==void 0){u=v[N];break}}var b=Object.assign(yt(v,[].concat(fe(i),[c,y])),{title:u,key:m,parent:f,pos:p,children:null,data:v,isStart:[].concat(fe(f?f.isStart:[]),[g===0]),isEnd:[].concat(fe(f?f.isEnd:[]),[g===s.length-1])});return d.push(b),t===!0||a.has(m)?b.children=r(v[y]||[],b):b.children=[],b})}return r(n),d}function jt(n,t,o){var e={};Ge(o)==="object"?e=o:e={externalGetKey:o},e=e||{};var i=e,c=i.childrenPropName,y=i.externalGetKey,a=i.fieldNames,d=Ae(a),r=d.key,s=d.children,f=c||s,v;y?typeof y=="string"?v=function(m){return m[y]}:typeof y=="function"&&(v=function(m){return y(m)}):v=function(m,u){return Te(m[r],u)};function g(p,m,u,h){var N=p?p[f]:n,b=p?lt(u.pos,m):"0",C=p?[].concat(fe(h),[p]):[];if(p){var E=v(p,b),S={node:p,index:m,pos:b,key:E,parentPos:u.node?u.pos:null,level:u.level+1,nodes:C};t(S)}N&&N.forEach(function(w,l){g(w,l,{node:p,pos:b,level:u?u.level+1:-1},C)})}g(null)}function Ft(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.initWrapper,e=t.processEntity,i=t.onProcessFinished,c=t.externalGetKey,y=t.childrenPropName,a=t.fieldNames,d=arguments.length>2?arguments[2]:void 0,r=c||d,s={},f={},v={posEntities:s,keyEntities:f};return o&&(v=o(v)||v),jt(n,function(g){var p=g.node,m=g.index,u=g.pos,h=g.key,N=g.parentPos,b=g.level,C=g.nodes,E={node:p,nodes:C,index:m,key:h,pos:u,level:b},S=Te(h,u);s[u]=E,f[S]=E,E.parent=s[N],E.parent&&(E.parent.children=E.parent.children||[],E.parent.children.push(E)),e&&e(E,v)},{externalGetKey:r,childrenPropName:y,fieldNames:a}),i&&i(v),v}function Pe(n,t){var o=t.expandedKeys,e=t.selectedKeys,i=t.loadedKeys,c=t.loadingKeys,y=t.checkedKeys,a=t.halfCheckedKeys,d=t.dragOverNodeKey,r=t.dropPosition,s=t.keyEntities,f=q(s,n),v={eventKey:n,expanded:o.indexOf(n)!==-1,selected:e.indexOf(n)!==-1,loaded:i.indexOf(n)!==-1,loading:c.indexOf(n)!==-1,checked:y.indexOf(n)!==-1,halfChecked:a.indexOf(n)!==-1,pos:String(f?f.pos:""),dragOver:d===n&&r===0,dragOverGapTop:d===n&&r===-1,dragOverGapBottom:d===n&&r===1};return v}function B(n){var t=n.data,o=n.expanded,e=n.selected,i=n.checked,c=n.loaded,y=n.loading,a=n.halfChecked,d=n.dragOver,r=n.dragOverGapTop,s=n.dragOverGapBottom,f=n.pos,v=n.active,g=n.eventKey,p=j(j({},t),{},{expanded:o,selected:e,checked:i,loaded:c,loading:y,halfChecked:a,dragOver:d,dragOverGapTop:r,dragOverGapBottom:s,pos:f,active:v,key:g});return"props"in p||Object.defineProperty(p,"props",{get:function(){return ae(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),n}}),p}function st(n,t){var o=new Set;return n.forEach(function(e){t.has(e)||o.add(e)}),o}function qt(n){var t=n||{},o=t.disabled,e=t.disableCheckbox,i=t.checkable;return!!(o||e)||i===!1}function zt(n,t,o,e){for(var i=new Set(n),c=new Set,y=0;y<=o;y+=1){var a=t.get(y)||new Set;a.forEach(function(f){var v=f.key,g=f.node,p=f.children,m=p===void 0?[]:p;i.has(v)&&!e(g)&&m.filter(function(u){return!e(u.node)}).forEach(function(u){i.add(u.key)})})}for(var d=new Set,r=o;r>=0;r-=1){var s=t.get(r)||new Set;s.forEach(function(f){var v=f.parent,g=f.node;if(!(e(g)||!f.parent||d.has(f.parent.key))){if(e(f.parent.node)){d.add(v.key);return}var p=!0,m=!1;(v.children||[]).filter(function(u){return!e(u.node)}).forEach(function(u){var h=u.key,N=i.has(h);p&&!N&&(p=!1),!m&&(N||c.has(h))&&(m=!0)}),p&&i.add(v.key),m&&c.add(v.key),d.add(v.key)}})}return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(st(c,i))}}function Vt(n,t,o,e,i){for(var c=new Set(n),y=new Set(t),a=0;a<=e;a+=1){var d=o.get(a)||new Set;d.forEach(function(v){var g=v.key,p=v.node,m=v.children,u=m===void 0?[]:m;!c.has(g)&&!y.has(g)&&!i(p)&&u.filter(function(h){return!i(h.node)}).forEach(function(h){c.delete(h.key)})})}y=new Set;for(var r=new Set,s=e;s>=0;s-=1){var f=o.get(s)||new Set;f.forEach(function(v){var g=v.parent,p=v.node;if(!(i(p)||!v.parent||r.has(v.parent.key))){if(i(v.parent.node)){r.add(g.key);return}var m=!0,u=!1;(g.children||[]).filter(function(h){return!i(h.node)}).forEach(function(h){var N=h.key,b=c.has(N);m&&!b&&(m=!1),!u&&(b||y.has(N))&&(u=!0)}),m||c.delete(g.key),u&&y.add(g.key),r.add(g.key)}})}return{checkedKeys:Array.from(c),halfCheckedKeys:Array.from(st(y,c))}}function qe(n,t,o,e){var i=[],c;c=qt;var y=new Set(n.filter(function(s){var f=!!q(o,s);return f||i.push(s),f})),a=new Map,d=0;Object.keys(o).forEach(function(s){var f=o[s],v=f.level,g=a.get(v);g||(g=new Set,a.set(v,g)),g.add(f),d=Math.max(d,v)}),ae(!i.length,"Tree missing follow keys: ".concat(i.slice(0,100).map(function(s){return"'".concat(s,"'")}).join(", ")));var r;return t===!0?r=zt(y,a,d,c):r=Vt(y,t.halfCheckedKeys,a,d,c),r}var Ut={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},Gt=function(t,o){return x.createElement(Ne,z({},t,{ref:o,icon:Ut}))},Wt=x.forwardRef(Gt),Xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},Yt=function(t,o){return x.createElement(Ne,z({},t,{ref:o,icon:Xt}))},Qt=x.forwardRef(Yt),Jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"},Zt=function(t,o){return x.createElement(Ne,z({},t,{ref:o,icon:Jt}))},en=x.forwardRef(Zt),tn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},nn=function(t,o){return x.createElement(Ne,z({},t,{ref:o,icon:tn}))},an=x.forwardRef(nn),rn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},on=function(t,o){return x.createElement(Ne,z({},t,{ref:o,icon:rn}))},ct=x.forwardRef(on),We=x.createContext(null),dn=x.createContext({}),ln=function(t){for(var o=t.prefixCls,e=t.level,i=t.isStart,c=t.isEnd,y="".concat(o,"-indent-unit"),a=[],d=0;d<e;d+=1)a.push(x.createElement("span",{key:d,className:V(y,K(K({},"".concat(y,"-start"),i[d]),"".concat(y,"-end"),c[d]))}));return x.createElement("span",{"aria-hidden":"true",className:"".concat(o,"-indent")},a)};const sn=x.memo(ln);var cn=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],Qe="open",Je="close",un="---",_e=function(t){var o,e,i=t.eventKey,c=t.className,y=t.style,a=t.dragOver,d=t.dragOverGapTop,r=t.dragOverGapBottom,s=t.isLeaf,f=t.isStart,v=t.isEnd,g=t.expanded,p=t.selected,m=t.checked,u=t.halfChecked,h=t.loading,N=t.domRef,b=t.active,C=t.data,E=t.onMouseMove,S=t.selectable,w=Be(t,cn),l=R.useContext(We),O=R.useContext(dn),P=R.useRef(null),M=R.useState(!1),L=ne(M,2),_=L[0],I=L[1],T=R.useMemo(function(){var $;return!!(l.disabled||t.disabled||($=O.nodeDisabled)!==null&&$!==void 0&&$.call(O,C))},[l.disabled,t.disabled,O.nodeDisabled,C]),H=R.useMemo(function(){return!l.checkable||t.checkable===!1?!1:l.checkable},[l.checkable,t.checkable]),F=function(k){T||l.onNodeSelect(k,B(t))},re=function(k){T||!H||t.disableCheckbox||l.onNodeCheck(k,B(t),!m)},Ee=R.useMemo(function(){return typeof S=="boolean"?S:l.selectable},[S,l.selectable]),he=function(k){l.onNodeClick(k,B(t)),Ee?F(k):re(k)},ye=function(k){l.onNodeDoubleClick(k,B(t))},oe=function(k){l.onNodeMouseEnter(k,B(t))},G=function(k){l.onNodeMouseLeave(k,B(t))},ie=function(k){l.onNodeContextMenu(k,B(t))},U=R.useMemo(function(){return!!(l.draggable&&(!l.draggable.nodeDraggable||l.draggable.nodeDraggable(C)))},[l.draggable,C]),pe=function(k){k.stopPropagation(),I(!0),l.onNodeDragStart(k,t);try{k.dataTransfer.setData("text/plain","")}catch{}},Se=function(k){k.preventDefault(),k.stopPropagation(),l.onNodeDragEnter(k,t)},Z=function(k){k.preventDefault(),k.stopPropagation(),l.onNodeDragOver(k,t)},De=function(k){k.stopPropagation(),l.onNodeDragLeave(k,t)},me=function(k){k.stopPropagation(),I(!1),l.onNodeDragEnd(k,t)},ee=function(k){k.preventDefault(),k.stopPropagation(),I(!1),l.onNodeDrop(k,t)},de=function(k){h||l.onNodeExpand(k,B(t))},we=R.useMemo(function(){var $=q(l.keyEntities,i)||{},k=$.children;return!!(k||[]).length},[l.keyEntities,i]),Y=R.useMemo(function(){return s===!1?!1:s||!l.loadData&&!we||l.loadData&&t.loaded&&!we},[s,l.loadData,we,t.loaded]);R.useEffect(function(){h||typeof l.loadData=="function"&&g&&!Y&&!t.loaded&&l.onNodeLoad(B(t))},[h,l.loadData,l.onNodeLoad,g,Y,t]);var He=R.useMemo(function(){var $;return($=l.draggable)!==null&&$!==void 0&&$.icon?R.createElement("span",{className:"".concat(l.prefixCls,"-draggable-icon")},l.draggable.icon):null},[l.draggable]),be=function(k){var X=t.switcherIcon||l.switcherIcon;return typeof X=="function"?X(j(j({},t),{},{isLeaf:k})):X},Re=function(){if(Y){var k=be(!0);return k!==!1?R.createElement("span",{className:V("".concat(l.prefixCls,"-switcher"),"".concat(l.prefixCls,"-switcher-noop"))},k):null}var X=be(!1);return X!==!1?R.createElement("span",{onClick:de,className:V("".concat(l.prefixCls,"-switcher"),"".concat(l.prefixCls,"-switcher_").concat(g?Qe:Je))},X):null},$e=R.useMemo(function(){if(!H)return null;var $=typeof H!="boolean"?H:null;return R.createElement("span",{className:V("".concat(l.prefixCls,"-checkbox"),K(K(K({},"".concat(l.prefixCls,"-checkbox-checked"),m),"".concat(l.prefixCls,"-checkbox-indeterminate"),!m&&u),"".concat(l.prefixCls,"-checkbox-disabled"),T||t.disableCheckbox)),onClick:re,role:"checkbox","aria-checked":u?"mixed":m,"aria-disabled":T||t.disableCheckbox,"aria-label":"Select ".concat(typeof t.title=="string"?t.title:"tree node")},$)},[H,m,u,T,t.disableCheckbox,t.title]),Ke=R.useMemo(function(){return Y?null:g?Qe:Je},[Y,g]),xe=R.useMemo(function(){return R.createElement("span",{className:V("".concat(l.prefixCls,"-iconEle"),"".concat(l.prefixCls,"-icon__").concat(Ke||"docu"),K({},"".concat(l.prefixCls,"-icon_loading"),h))})},[l.prefixCls,Ke,h]),A=R.useMemo(function(){var $=!!l.draggable,k=!t.disabled&&$&&l.dragOverNodeKey===i;return k?l.dropIndicatorRender({dropPosition:l.dropPosition,dropLevelOffset:l.dropLevelOffset,indent:l.indent,prefixCls:l.prefixCls,direction:l.direction}):null},[l.dropPosition,l.dropLevelOffset,l.indent,l.prefixCls,l.direction,l.draggable,l.dragOverNodeKey,l.dropIndicatorRender]),W=R.useMemo(function(){var $=t.title,k=$===void 0?un:$,X="".concat(l.prefixCls,"-node-content-wrapper"),je;if(l.showIcon){var Me=t.icon||l.icon;je=Me?R.createElement("span",{className:V("".concat(l.prefixCls,"-iconEle"),"".concat(l.prefixCls,"-icon__customize"))},typeof Me=="function"?Me(t):Me):xe}else l.loadData&&h&&(je=xe);var Ie;return typeof k=="function"?Ie=k(C):l.titleRender?Ie=l.titleRender(C):Ie=k,R.createElement("span",{ref:P,title:typeof k=="string"?k:"",className:V(X,"".concat(X,"-").concat(Ke||"normal"),K({},"".concat(l.prefixCls,"-node-selected"),!T&&(p||_))),onMouseEnter:oe,onMouseLeave:G,onContextMenu:ie,onClick:he,onDoubleClick:ye},je,R.createElement("span",{className:"".concat(l.prefixCls,"-title")},Ie),A)},[l.prefixCls,l.showIcon,t,l.icon,xe,l.titleRender,C,Ke,oe,G,ie,he,ye]),Q=dt(w,{aria:!0,data:!0}),Ce=q(l.keyEntities,i)||{},le=Ce.level,Oe=v[v.length-1],se=!T&&U,ce=l.draggingNodeKey===i,ue=S!==void 0?{"aria-selected":!!S}:void 0;return R.createElement("div",z({ref:N,role:"treeitem","aria-expanded":s?void 0:g,className:V(c,"".concat(l.prefixCls,"-treenode"),(e={},K(K(K(K(K(K(K(K(K(K(e,"".concat(l.prefixCls,"-treenode-disabled"),T),"".concat(l.prefixCls,"-treenode-switcher-").concat(g?"open":"close"),!s),"".concat(l.prefixCls,"-treenode-checkbox-checked"),m),"".concat(l.prefixCls,"-treenode-checkbox-indeterminate"),u),"".concat(l.prefixCls,"-treenode-selected"),p),"".concat(l.prefixCls,"-treenode-loading"),h),"".concat(l.prefixCls,"-treenode-active"),b),"".concat(l.prefixCls,"-treenode-leaf-last"),Oe),"".concat(l.prefixCls,"-treenode-draggable"),U),"dragging",ce),K(K(K(K(K(K(K(e,"drop-target",l.dropTargetKey===i),"drop-container",l.dropContainerKey===i),"drag-over",!T&&a),"drag-over-gap-top",!T&&d),"drag-over-gap-bottom",!T&&r),"filter-node",(o=l.filterTreeNode)===null||o===void 0?void 0:o.call(l,B(t))),"".concat(l.prefixCls,"-treenode-leaf"),Y))),style:y,draggable:se,onDragStart:se?pe:void 0,onDragEnter:U?Se:void 0,onDragOver:U?Z:void 0,onDragLeave:U?De:void 0,onDrop:U?ee:void 0,onDragEnd:U?me:void 0,onMouseMove:E},ue,Q),R.createElement(sn,{prefixCls:l.prefixCls,level:le,isStart:f,isEnd:v}),He,Re(),$e,W)};_e.isTreeNode=1;function J(n,t){if(!n)return[];var o=n.slice(),e=o.indexOf(t);return e>=0&&o.splice(e,1),o}function te(n,t){var o=(n||[]).slice();return o.indexOf(t)===-1&&o.push(t),o}function Xe(n){return n.split("-")}function fn(n,t){var o=[],e=q(t,n);function i(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];c.forEach(function(y){var a=y.key,d=y.children;o.push(a),i(d)})}return i(e.children),o}function vn(n){if(n.parent){var t=Xe(n.pos);return Number(t[t.length-1])===n.parent.children.length-1}return!1}function gn(n){var t=Xe(n.pos);return Number(t[t.length-1])===0}function Ze(n,t,o,e,i,c,y,a,d,r){var s,f=n.clientX,v=n.clientY,g=n.target.getBoundingClientRect(),p=g.top,m=g.height,u=(r==="rtl"?-1:1)*(((i==null?void 0:i.x)||0)-f),h=(u-12)/e,N=d.filter(function(H){var F;return(F=a[H])===null||F===void 0||(F=F.children)===null||F===void 0?void 0:F.length}),b=q(a,o.eventKey);if(v<p+m/2){var C=y.findIndex(function(H){return H.key===b.key}),E=C<=0?0:C-1,S=y[E].key;b=q(a,S)}var w=b.key,l=b,O=b.key,P=0,M=0;if(!N.includes(w))for(var L=0;L<h&&vn(b);L+=1)b=b.parent,M+=1;var _=t.data,I=b.node,T=!0;return gn(b)&&b.level===0&&v<p+m/2&&c({dragNode:_,dropNode:I,dropPosition:-1})&&b.key===o.eventKey?P=-1:(l.children||[]).length&&N.includes(O)?c({dragNode:_,dropNode:I,dropPosition:0})?P=0:T=!1:M===0?h>-1.5?c({dragNode:_,dropNode:I,dropPosition:1})?P=1:T=!1:c({dragNode:_,dropNode:I,dropPosition:0})?P=0:c({dragNode:_,dropNode:I,dropPosition:1})?P=1:T=!1:c({dragNode:_,dropNode:I,dropPosition:1})?P=1:T=!1,{dropPosition:P,dropLevelOffset:M,dropTargetKey:b.key,dropTargetPos:b.pos,dragOverNodeKey:O,dropContainerKey:P===0?null:((s=b.parent)===null||s===void 0?void 0:s.key)||null,dropAllowed:T}}function et(n,t){if(n){var o=t.multiple;return o?n.slice():n.length?[n[0]]:n}}function ze(n){if(!n)return null;var t;if(Array.isArray(n))t={checkedKeys:n,halfCheckedKeys:void 0};else if(Ge(n)==="object")t={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};else return ae(!1,"`checkedKeys` is not an array or an object"),null;return t}function tt(n,t){var o=new Set;function e(i){if(!o.has(i)){var c=q(t,i);if(c){o.add(i);var y=c.parent,a=c.node;a.disabled||y&&e(y.key)}}}return(n||[]).forEach(function(i){e(i)}),fe(o)}var hn=function(t){var o=t.dropPosition,e=t.dropLevelOffset,i=t.indent,c={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(o){case-1:c.top=0,c.left=-e*i;break;case 1:c.bottom=0,c.left=-e*i;break;case 0:c.bottom=0,c.left=i;break}return R.createElement("div",{style:c})};function ut(n){if(n==null)throw new TypeError("Cannot destructure "+n)}function yn(n,t){var o=x.useState(!1),e=ne(o,2),i=e[0],c=e[1];Le(function(){if(i)return n(),function(){t()}},[i]),Le(function(){return c(!0),function(){c(!1)}},[])}var pn=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],mn=x.forwardRef(function(n,t){var o=n.className,e=n.style,i=n.motion,c=n.motionNodes,y=n.motionType,a=n.onMotionStart,d=n.onMotionEnd,r=n.active,s=n.treeNodeRequiredProps,f=Be(n,pn),v=x.useState(!0),g=ne(v,2),p=g[0],m=g[1],u=x.useContext(We),h=u.prefixCls,N=c&&y!=="hide";Le(function(){c&&N!==p&&m(N)},[c]);var b=function(){c&&a()},C=x.useRef(!1),E=function(){c&&!C.current&&(C.current=!0,d())};yn(b,E);var S=function(l){N===l&&E()};return c?x.createElement(mt,z({ref:t,visible:p},i,{motionAppear:y==="show",onVisibleChanged:S}),function(w,l){var O=w.className,P=w.style;return x.createElement("div",{ref:l,className:V("".concat(h,"-treenode-motion"),O),style:P},c.map(function(M){var L=Object.assign({},(ut(M.data),M.data)),_=M.title,I=M.key,T=M.isStart,H=M.isEnd;delete L.children;var F=Pe(I,s);return x.createElement(_e,z({},L,F,{title:_,active:r,data:M.data,key:I,isStart:T,isEnd:H}))}))}):x.createElement(_e,z({domRef:t,className:o,style:e},f,{active:r}))});function bn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=n.length,e=t.length;if(Math.abs(o-e)!==1)return{add:!1,key:null};function i(c,y){var a=new Map;c.forEach(function(r){a.set(r,!0)});var d=y.filter(function(r){return!a.has(r)});return d.length===1?d[0]:null}return o<e?{add:!0,key:i(n,t)}:{add:!1,key:i(t,n)}}function nt(n,t,o){var e=n.findIndex(function(a){return a.key===o}),i=n[e+1],c=t.findIndex(function(a){return a.key===o});if(i){var y=t.findIndex(function(a){return a.key===i.key});return t.slice(c+1,y)}return t.slice(c+1)}var Kn=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],at={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},xn=function(){},ve="RC_TREE_MOTION_".concat(Math.random()),Ue={key:ve},ft={key:ve,level:0,index:0,pos:"0",node:Ue,nodes:[Ue]},rt={parent:null,children:[],pos:ft.pos,data:Ue,title:null,key:ve,isStart:[],isEnd:[]};function ot(n,t,o,e){return t===!1||!o?n:n.slice(0,Math.ceil(o/e)+1)}function it(n){var t=n.key,o=n.pos;return Te(t,o)}function Cn(n){for(var t=String(n.data.key),o=n;o.parent;)o=o.parent,t="".concat(o.data.key," > ").concat(t);return t}var kn=x.forwardRef(function(n,t){var o=n.prefixCls,e=n.data;n.selectable,n.checkable;var i=n.expandedKeys,c=n.selectedKeys,y=n.checkedKeys,a=n.loadedKeys,d=n.loadingKeys,r=n.halfCheckedKeys,s=n.keyEntities,f=n.disabled,v=n.dragging,g=n.dragOverNodeKey,p=n.dropPosition,m=n.motion,u=n.height,h=n.itemHeight,N=n.virtual,b=n.scrollWidth,C=n.focusable,E=n.activeItem,S=n.focused,w=n.tabIndex,l=n.onKeyDown,O=n.onFocus,P=n.onBlur,M=n.onActiveChange,L=n.onListChangeStart,_=n.onListChangeEnd,I=Be(n,Kn),T=x.useRef(null),H=x.useRef(null);x.useImperativeHandle(t,function(){return{scrollTo:function(W){T.current.scrollTo(W)},getIndentWidth:function(){return H.current.offsetWidth}}});var F=x.useState(i),re=ne(F,2),Ee=re[0],he=re[1],ye=x.useState(e),oe=ne(ye,2),G=oe[0],ie=oe[1],U=x.useState(e),pe=ne(U,2),Se=pe[0],Z=pe[1],De=x.useState([]),me=ne(De,2),ee=me[0],de=me[1],we=x.useState(null),Y=ne(we,2),He=Y[0],be=Y[1],Re=x.useRef(e);Re.current=e;function $e(){var A=Re.current;ie(A),Z(A),de([]),be(null),_()}Le(function(){he(i);var A=bn(Ee,i);if(A.key!==null)if(A.add){var W=G.findIndex(function(ce){var ue=ce.key;return ue===A.key}),Q=ot(nt(G,e,A.key),N,u,h),Ce=G.slice();Ce.splice(W+1,0,rt),Z(Ce),de(Q),be("show")}else{var le=e.findIndex(function(ce){var ue=ce.key;return ue===A.key}),Oe=ot(nt(e,G,A.key),N,u,h),se=e.slice();se.splice(le+1,0,rt),Z(se),de(Oe),be("hide")}else G!==e&&(ie(e),Z(e))},[i,e]),x.useEffect(function(){v||$e()},[v]);var Ke=m?Se:e,xe={expandedKeys:i,selectedKeys:c,loadedKeys:a,loadingKeys:d,checkedKeys:y,halfCheckedKeys:r,dragOverNodeKey:g,dropPosition:p,keyEntities:s};return x.createElement(x.Fragment,null,S&&E&&x.createElement("span",{style:at,"aria-live":"assertive"},Cn(E)),x.createElement("div",null,x.createElement("input",{style:at,disabled:C===!1||f,tabIndex:C!==!1?w:null,onKeyDown:l,onFocus:O,onBlur:P,value:"",onChange:xn,"aria-label":"for screen reader"})),x.createElement("div",{className:"".concat(o,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},x.createElement("div",{className:"".concat(o,"-indent")},x.createElement("div",{ref:H,className:"".concat(o,"-indent-unit")}))),x.createElement(St,z({},I,{data:Ke,itemKey:it,height:u,fullHeight:!1,virtual:N,itemHeight:h,scrollWidth:b,prefixCls:"".concat(o,"-list"),ref:T,role:"tree",onVisibleChange:function(W){W.every(function(Q){return it(Q)!==ve})&&$e()}}),function(A){var W=A.pos,Q=Object.assign({},(ut(A.data),A.data)),Ce=A.title,le=A.key,Oe=A.isStart,se=A.isEnd,ce=Te(le,W);delete Q.key,delete Q.children;var ue=Pe(ce,xe);return x.createElement(mn,z({},Q,ue,{title:Ce,active:!!E&&le===E.key,pos:W,data:A.data,isStart:Oe,isEnd:se,motion:m,motionNodes:le===ve?ee:null,motionType:He,onMotionStart:L,onMotionEnd:$e,treeNodeRequiredProps:xe,onMouseMove:function(){M(null)}}))}))}),Nn=10,vt=function(n){bt(o,n);var t=Kt(o);function o(){var e;ht(this,o);for(var i=arguments.length,c=new Array(i),y=0;y<i;y++)c[y]=arguments[y];return e=t.call.apply(t,[this].concat(c)),K(D(e),"destroyed",!1),K(D(e),"delayedDragEnterLogic",void 0),K(D(e),"loadingRetryTimes",{}),K(D(e),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:Ae()}),K(D(e),"dragStartMousePosition",null),K(D(e),"dragNodeProps",null),K(D(e),"currentMouseOverDroppableNodeKey",null),K(D(e),"listRef",x.createRef()),K(D(e),"onNodeDragStart",function(a,d){var r=e.state,s=r.expandedKeys,f=r.keyEntities,v=e.props.onDragStart,g=d.eventKey;e.dragNodeProps=d,e.dragStartMousePosition={x:a.clientX,y:a.clientY};var p=J(s,g);e.setState({draggingNodeKey:g,dragChildrenKeys:fn(g,f),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(p),window.addEventListener("dragend",e.onWindowDragEnd),v==null||v({event:a,node:B(d)})}),K(D(e),"onNodeDragEnter",function(a,d){var r=e.state,s=r.expandedKeys,f=r.keyEntities,v=r.dragChildrenKeys,g=r.flattenNodes,p=r.indent,m=e.props,u=m.onDragEnter,h=m.onExpand,N=m.allowDrop,b=m.direction,C=d.pos,E=d.eventKey;if(e.currentMouseOverDroppableNodeKey!==E&&(e.currentMouseOverDroppableNodeKey=E),!e.dragNodeProps){e.resetDragState();return}var S=Ze(a,e.dragNodeProps,d,p,e.dragStartMousePosition,N,g,f,s,b),w=S.dropPosition,l=S.dropLevelOffset,O=S.dropTargetKey,P=S.dropContainerKey,M=S.dropTargetPos,L=S.dropAllowed,_=S.dragOverNodeKey;if(v.includes(O)||!L){e.resetDragState();return}if(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(I){clearTimeout(e.delayedDragEnterLogic[I])}),e.dragNodeProps.eventKey!==d.eventKey&&(a.persist(),e.delayedDragEnterLogic[C]=window.setTimeout(function(){if(e.state.draggingNodeKey!==null){var I=fe(s),T=q(f,d.eventKey);T&&(T.children||[]).length&&(I=te(s,d.eventKey)),e.props.hasOwnProperty("expandedKeys")||e.setExpandedKeys(I),h==null||h(I,{node:B(d),expanded:!0,nativeEvent:a.nativeEvent})}},800)),e.dragNodeProps.eventKey===O&&l===0){e.resetDragState();return}e.setState({dragOverNodeKey:_,dropPosition:w,dropLevelOffset:l,dropTargetKey:O,dropContainerKey:P,dropTargetPos:M,dropAllowed:L}),u==null||u({event:a,node:B(d),expandedKeys:s})}),K(D(e),"onNodeDragOver",function(a,d){var r=e.state,s=r.dragChildrenKeys,f=r.flattenNodes,v=r.keyEntities,g=r.expandedKeys,p=r.indent,m=e.props,u=m.onDragOver,h=m.allowDrop,N=m.direction;if(e.dragNodeProps){var b=Ze(a,e.dragNodeProps,d,p,e.dragStartMousePosition,h,f,v,g,N),C=b.dropPosition,E=b.dropLevelOffset,S=b.dropTargetKey,w=b.dropContainerKey,l=b.dropTargetPos,O=b.dropAllowed,P=b.dragOverNodeKey;s.includes(S)||!O||(e.dragNodeProps.eventKey===S&&E===0?e.state.dropPosition===null&&e.state.dropLevelOffset===null&&e.state.dropTargetKey===null&&e.state.dropContainerKey===null&&e.state.dropTargetPos===null&&e.state.dropAllowed===!1&&e.state.dragOverNodeKey===null||e.resetDragState():C===e.state.dropPosition&&E===e.state.dropLevelOffset&&S===e.state.dropTargetKey&&w===e.state.dropContainerKey&&l===e.state.dropTargetPos&&O===e.state.dropAllowed&&P===e.state.dragOverNodeKey||e.setState({dropPosition:C,dropLevelOffset:E,dropTargetKey:S,dropContainerKey:w,dropTargetPos:l,dropAllowed:O,dragOverNodeKey:P}),u==null||u({event:a,node:B(d)}))}}),K(D(e),"onNodeDragLeave",function(a,d){e.currentMouseOverDroppableNodeKey===d.eventKey&&!a.currentTarget.contains(a.relatedTarget)&&(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var r=e.props.onDragLeave;r==null||r({event:a,node:B(d)})}),K(D(e),"onWindowDragEnd",function(a){e.onNodeDragEnd(a,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)}),K(D(e),"onNodeDragEnd",function(a,d){var r=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),r==null||r({event:a,node:B(d)}),e.dragNodeProps=null,window.removeEventListener("dragend",e.onWindowDragEnd)}),K(D(e),"onNodeDrop",function(a,d){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=e.state,v=f.dragChildrenKeys,g=f.dropPosition,p=f.dropTargetKey,m=f.dropTargetPos,u=f.dropAllowed;if(u){var h=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),p!==null){var N=j(j({},Pe(p,e.getTreeNodeRequiredProps())),{},{active:((r=e.getActiveItem())===null||r===void 0?void 0:r.key)===p,data:q(e.state.keyEntities,p).node}),b=v.includes(p);ae(!b,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var C=Xe(m),E={event:a,node:B(N),dragNode:e.dragNodeProps?B(e.dragNodeProps):null,dragNodesKeys:[e.dragNodeProps.eventKey].concat(v),dropToGap:g!==0,dropPosition:g+Number(C[C.length-1])};s||h==null||h(E),e.dragNodeProps=null}}}),K(D(e),"cleanDragState",function(){var a=e.state.draggingNodeKey;a!==null&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null}),K(D(e),"triggerExpandActionExpand",function(a,d){var r=e.state,s=r.expandedKeys,f=r.flattenNodes,v=d.expanded,g=d.key,p=d.isLeaf;if(!(p||a.shiftKey||a.metaKey||a.ctrlKey)){var m=f.filter(function(h){return h.key===g})[0],u=B(j(j({},Pe(g,e.getTreeNodeRequiredProps())),{},{data:m.data}));e.setExpandedKeys(v?J(s,g):te(s,g)),e.onNodeExpand(a,u)}}),K(D(e),"onNodeClick",function(a,d){var r=e.props,s=r.onClick,f=r.expandAction;f==="click"&&e.triggerExpandActionExpand(a,d),s==null||s(a,d)}),K(D(e),"onNodeDoubleClick",function(a,d){var r=e.props,s=r.onDoubleClick,f=r.expandAction;f==="doubleClick"&&e.triggerExpandActionExpand(a,d),s==null||s(a,d)}),K(D(e),"onNodeSelect",function(a,d){var r=e.state.selectedKeys,s=e.state,f=s.keyEntities,v=s.fieldNames,g=e.props,p=g.onSelect,m=g.multiple,u=d.selected,h=d[v.key],N=!u;N?m?r=te(r,h):r=[h]:r=J(r,h);var b=r.map(function(C){var E=q(f,C);return E?E.node:null}).filter(Boolean);e.setUncontrolledState({selectedKeys:r}),p==null||p(r,{event:"select",selected:N,node:d,selectedNodes:b,nativeEvent:a.nativeEvent})}),K(D(e),"onNodeCheck",function(a,d,r){var s=e.state,f=s.keyEntities,v=s.checkedKeys,g=s.halfCheckedKeys,p=e.props,m=p.checkStrictly,u=p.onCheck,h=d.key,N,b={event:"check",node:d,checked:r,nativeEvent:a.nativeEvent};if(m){var C=r?te(v,h):J(v,h),E=J(g,h);N={checked:C,halfChecked:E},b.checkedNodes=C.map(function(M){return q(f,M)}).filter(Boolean).map(function(M){return M.node}),e.setUncontrolledState({checkedKeys:C})}else{var S=qe([].concat(fe(v),[h]),!0,f),w=S.checkedKeys,l=S.halfCheckedKeys;if(!r){var O=new Set(w);O.delete(h);var P=qe(Array.from(O),{halfCheckedKeys:l},f);w=P.checkedKeys,l=P.halfCheckedKeys}N=w,b.checkedNodes=[],b.checkedNodesPositions=[],b.halfCheckedKeys=l,w.forEach(function(M){var L=q(f,M);if(L){var _=L.node,I=L.pos;b.checkedNodes.push(_),b.checkedNodesPositions.push({node:_,pos:I})}}),e.setUncontrolledState({checkedKeys:w},!1,{halfCheckedKeys:l})}u==null||u(N,b)}),K(D(e),"onNodeLoad",function(a){var d,r=a.key,s=e.state.keyEntities,f=q(s,r);if(!(f!=null&&(d=f.children)!==null&&d!==void 0&&d.length)){var v=new Promise(function(g,p){e.setState(function(m){var u=m.loadedKeys,h=u===void 0?[]:u,N=m.loadingKeys,b=N===void 0?[]:N,C=e.props,E=C.loadData,S=C.onLoad;if(!E||h.includes(r)||b.includes(r))return null;var w=E(a);return w.then(function(){var l=e.state.loadedKeys,O=te(l,r);S==null||S(O,{event:"load",node:a}),e.setUncontrolledState({loadedKeys:O}),e.setState(function(P){return{loadingKeys:J(P.loadingKeys,r)}}),g()}).catch(function(l){if(e.setState(function(P){return{loadingKeys:J(P.loadingKeys,r)}}),e.loadingRetryTimes[r]=(e.loadingRetryTimes[r]||0)+1,e.loadingRetryTimes[r]>=Nn){var O=e.state.loadedKeys;ae(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:te(O,r)}),g()}p(l)}),{loadingKeys:te(b,r)}})});return v.catch(function(){}),v}}),K(D(e),"onNodeMouseEnter",function(a,d){var r=e.props.onMouseEnter;r==null||r({event:a,node:d})}),K(D(e),"onNodeMouseLeave",function(a,d){var r=e.props.onMouseLeave;r==null||r({event:a,node:d})}),K(D(e),"onNodeContextMenu",function(a,d){var r=e.props.onRightClick;r&&(a.preventDefault(),r({event:a,node:d}))}),K(D(e),"onFocus",function(){var a=e.props.onFocus;e.setState({focused:!0});for(var d=arguments.length,r=new Array(d),s=0;s<d;s++)r[s]=arguments[s];a==null||a.apply(void 0,r)}),K(D(e),"onBlur",function(){var a=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var d=arguments.length,r=new Array(d),s=0;s<d;s++)r[s]=arguments[s];a==null||a.apply(void 0,r)}),K(D(e),"getTreeNodeRequiredProps",function(){var a=e.state,d=a.expandedKeys,r=a.selectedKeys,s=a.loadedKeys,f=a.loadingKeys,v=a.checkedKeys,g=a.halfCheckedKeys,p=a.dragOverNodeKey,m=a.dropPosition,u=a.keyEntities;return{expandedKeys:d||[],selectedKeys:r||[],loadedKeys:s||[],loadingKeys:f||[],checkedKeys:v||[],halfCheckedKeys:g||[],dragOverNodeKey:p,dropPosition:m,keyEntities:u}}),K(D(e),"setExpandedKeys",function(a){var d=e.state,r=d.treeData,s=d.fieldNames,f=Fe(r,a,s);e.setUncontrolledState({expandedKeys:a,flattenNodes:f},!0)}),K(D(e),"onNodeExpand",function(a,d){var r=e.state.expandedKeys,s=e.state,f=s.listChanging,v=s.fieldNames,g=e.props,p=g.onExpand,m=g.loadData,u=d.expanded,h=d[v.key];if(!f){var N=r.includes(h),b=!u;if(ae(u&&N||!u&&!N,"Expand state not sync with index check"),r=b?te(r,h):J(r,h),e.setExpandedKeys(r),p==null||p(r,{node:d,expanded:b,nativeEvent:a.nativeEvent}),b&&m){var C=e.onNodeLoad(d);C&&C.then(function(){var E=Fe(e.state.treeData,r,v);e.setUncontrolledState({flattenNodes:E})}).catch(function(){var E=e.state.expandedKeys,S=J(E,h);e.setExpandedKeys(S)})}}}),K(D(e),"onListChangeStart",function(){e.setUncontrolledState({listChanging:!0})}),K(D(e),"onListChangeEnd",function(){setTimeout(function(){e.setUncontrolledState({listChanging:!1})})}),K(D(e),"onActiveChange",function(a){var d=e.state.activeKey,r=e.props,s=r.onActiveChange,f=r.itemScrollOffset,v=f===void 0?0:f;d!==a&&(e.setState({activeKey:a}),a!==null&&e.scrollTo({key:a,offset:v}),s==null||s(a))}),K(D(e),"getActiveItem",function(){var a=e.state,d=a.activeKey,r=a.flattenNodes;return d===null?null:r.find(function(s){var f=s.key;return f===d})||null}),K(D(e),"offsetActiveKey",function(a){var d=e.state,r=d.flattenNodes,s=d.activeKey,f=r.findIndex(function(p){var m=p.key;return m===s});f===-1&&a<0&&(f=r.length),f=(f+a+r.length)%r.length;var v=r[f];if(v){var g=v.key;e.onActiveChange(g)}else e.onActiveChange(null)}),K(D(e),"onKeyDown",function(a){var d=e.state,r=d.activeKey,s=d.expandedKeys,f=d.checkedKeys,v=d.fieldNames,g=e.props,p=g.onKeyDown,m=g.checkable,u=g.selectable;switch(a.which){case ke.UP:{e.offsetActiveKey(-1),a.preventDefault();break}case ke.DOWN:{e.offsetActiveKey(1),a.preventDefault();break}}var h=e.getActiveItem();if(h&&h.data){var N=e.getTreeNodeRequiredProps(),b=h.data.isLeaf===!1||!!(h.data[v.children]||[]).length,C=B(j(j({},Pe(r,N)),{},{data:h.data,active:!0}));switch(a.which){case ke.LEFT:{b&&s.includes(r)?e.onNodeExpand({},C):h.parent&&e.onActiveChange(h.parent.key),a.preventDefault();break}case ke.RIGHT:{b&&!s.includes(r)?e.onNodeExpand({},C):h.children&&h.children.length&&e.onActiveChange(h.children[0].key),a.preventDefault();break}case ke.ENTER:case ke.SPACE:{m&&!C.disabled&&C.checkable!==!1&&!C.disableCheckbox?e.onNodeCheck({},C,!f.includes(r)):!m&&u&&!C.disabled&&C.selectable!==!1&&e.onNodeSelect({},C);break}}}p==null||p(a)}),K(D(e),"setUncontrolledState",function(a){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e.destroyed){var s=!1,f=!0,v={};Object.keys(a).forEach(function(g){if(e.props.hasOwnProperty(g)){f=!1;return}s=!0,v[g]=a[g]}),s&&(!d||f)&&e.setState(j(j({},v),r))}}),K(D(e),"scrollTo",function(a){e.listRef.current.scrollTo(a)}),e}return gt(o,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var i=this.props,c=i.activeKey,y=i.itemScrollOffset,a=y===void 0?0:y;c!==void 0&&c!==this.state.activeKey&&(this.setState({activeKey:c}),c!==null&&this.scrollTo({key:c,offset:a}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var i=this.state,c=i.focused,y=i.flattenNodes,a=i.keyEntities,d=i.draggingNodeKey,r=i.activeKey,s=i.dropLevelOffset,f=i.dropContainerKey,v=i.dropTargetKey,g=i.dropPosition,p=i.dragOverNodeKey,m=i.indent,u=this.props,h=u.prefixCls,N=u.className,b=u.style,C=u.showLine,E=u.focusable,S=u.tabIndex,w=S===void 0?0:S,l=u.selectable,O=u.showIcon,P=u.icon,M=u.switcherIcon,L=u.draggable,_=u.checkable,I=u.checkStrictly,T=u.disabled,H=u.motion,F=u.loadData,re=u.filterTreeNode,Ee=u.height,he=u.itemHeight,ye=u.scrollWidth,oe=u.virtual,G=u.titleRender,ie=u.dropIndicatorRender,U=u.onContextMenu,pe=u.onScroll,Se=u.direction,Z=u.rootClassName,De=u.rootStyle,me=dt(this.props,{aria:!0,data:!0}),ee;L&&(Ge(L)==="object"?ee=L:typeof L=="function"?ee={nodeDraggable:L}:ee={});var de={prefixCls:h,selectable:l,showIcon:O,icon:P,switcherIcon:M,draggable:ee,draggingNodeKey:d,checkable:_,checkStrictly:I,disabled:T,keyEntities:a,dropLevelOffset:s,dropContainerKey:f,dropTargetKey:v,dropPosition:g,dragOverNodeKey:p,indent:m,direction:Se,dropIndicatorRender:ie,loadData:F,filterTreeNode:re,titleRender:G,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return x.createElement(We.Provider,{value:de},x.createElement("div",{className:V(h,N,Z,K(K(K({},"".concat(h,"-show-line"),C),"".concat(h,"-focused"),c),"".concat(h,"-active-focused"),r!==null)),style:De},x.createElement(kn,z({ref:this.listRef,prefixCls:h,style:b,data:y,disabled:T,selectable:l,checkable:!!_,motion:H,dragging:d!==null,height:Ee,itemHeight:he,virtual:oe,focusable:E,focused:c,tabIndex:w,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:U,onScroll:pe,scrollWidth:ye},this.getTreeNodeRequiredProps(),me))))}}],[{key:"getDerivedStateFromProps",value:function(i,c){var y=c.prevProps,a={prevProps:i};function d(w){return!y&&i.hasOwnProperty(w)||y&&y[w]!==i[w]}var r,s=c.fieldNames;if(d("fieldNames")&&(s=Ae(i.fieldNames),a.fieldNames=s),d("treeData")?r=i.treeData:d("children")&&(ae(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),r=Ht(i.children)),r){a.treeData=r;var f=Ft(r,{fieldNames:s});a.keyEntities=j(K({},ve,ft),f.keyEntities)}var v=a.keyEntities||c.keyEntities;if(d("expandedKeys")||y&&d("autoExpandParent"))a.expandedKeys=i.autoExpandParent||!y&&i.defaultExpandParent?tt(i.expandedKeys,v):i.expandedKeys;else if(!y&&i.defaultExpandAll){var g=j({},v);delete g[ve];var p=[];Object.keys(g).forEach(function(w){var l=g[w];l.children&&l.children.length&&p.push(l.key)}),a.expandedKeys=p}else!y&&i.defaultExpandedKeys&&(a.expandedKeys=i.autoExpandParent||i.defaultExpandParent?tt(i.defaultExpandedKeys,v):i.defaultExpandedKeys);if(a.expandedKeys||delete a.expandedKeys,r||a.expandedKeys){var m=Fe(r||c.treeData,a.expandedKeys||c.expandedKeys,s);a.flattenNodes=m}if(i.selectable&&(d("selectedKeys")?a.selectedKeys=et(i.selectedKeys,i):!y&&i.defaultSelectedKeys&&(a.selectedKeys=et(i.defaultSelectedKeys,i))),i.checkable){var u;if(d("checkedKeys")?u=ze(i.checkedKeys)||{}:!y&&i.defaultCheckedKeys?u=ze(i.defaultCheckedKeys)||{}:r&&(u=ze(i.checkedKeys)||{checkedKeys:c.checkedKeys,halfCheckedKeys:c.halfCheckedKeys}),u){var h=u,N=h.checkedKeys,b=N===void 0?[]:N,C=h.halfCheckedKeys,E=C===void 0?[]:C;if(!i.checkStrictly){var S=qe(b,!0,v);b=S.checkedKeys,E=S.halfCheckedKeys}a.checkedKeys=b,a.halfCheckedKeys=E}}return d("loadedKeys")&&(a.loadedKeys=i.loadedKeys),a}}]),o}(x.Component);K(vt,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:hn,allowDrop:function(){return!0},expandAction:!1});K(vt,"TreeNode",_e);const En=n=>{let{treeCls:t,treeNodeCls:o,directoryNodeSelectedBg:e,directoryNodeSelectedColor:i,motionDurationMid:c,borderRadius:y,controlItemBgHover:a}=n;return{[`${t}${t}-directory ${o}`]:{[`${t}-node-content-wrapper`]:{position:"static",[`> *:not(${t}-drop-indicator)`]:{position:"relative"},"&:hover":{background:"transparent"},"&:before":{position:"absolute",inset:0,transition:`background-color ${c}`,content:'""',borderRadius:y},"&:hover:before":{background:a}},[`${t}-switcher, ${t}-checkbox, ${t}-draggable-icon`]:{zIndex:1},"&-selected":{[`${t}-switcher, ${t}-draggable-icon`]:{color:i},[`${t}-node-content-wrapper`]:{color:i,background:"transparent","&:before, &:hover:before":{background:e}}}}}},Sn=new Dt("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),Dn=(n,t)=>({[`.${n}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),wn=(n,t)=>({[`.${n}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${Ve(t.lineWidthBold)} solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),$n=(n,t)=>{const{treeCls:o,treeNodeCls:e,treeNodePadding:i,titleHeight:c,indentSize:y,nodeSelectedBg:a,nodeHoverBg:d,colorTextQuaternary:r,controlItemBgActiveDisabled:s}=t;return{[o]:Object.assign(Object.assign({},kt(t)),{background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,"&-rtl":{direction:"rtl"},[`&${o}-rtl ${o}-switcher_close ${o}-switcher-icon svg`]:{transform:"rotate(90deg)"},[`&-focused:not(:hover):not(${o}-active-focused)`]:Object.assign({},Nt(t)),[`${o}-list-holder-inner`]:{alignItems:"flex-start"},[`&${o}-block-node`]:{[`${o}-list-holder-inner`]:{alignItems:"stretch",[`${o}-node-content-wrapper`]:{flex:"auto"},[`${e}.dragging:after`]:{position:"absolute",inset:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:Sn,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none",borderRadius:t.borderRadius}}},[e]:{display:"flex",alignItems:"flex-start",marginBottom:i,lineHeight:Ve(c),position:"relative","&:before":{content:'""',position:"absolute",zIndex:1,insetInlineStart:0,width:"100%",top:"100%",height:i},[`&-disabled ${o}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}},[`${o}-checkbox-disabled + ${o}-node-selected,&${e}-disabled${e}-selected ${o}-node-content-wrapper`]:{backgroundColor:s},[`${o}-checkbox-disabled`]:{pointerEvents:"unset"},[`&:not(${e}-disabled)`]:{[`${o}-node-content-wrapper`]:{"&:hover":{color:t.nodeHoverColor}}},[`&-active ${o}-node-content-wrapper`]:{background:t.controlItemBgHover},[`&:not(${e}-disabled).filter-node ${o}-title`]:{color:t.colorPrimary,fontWeight:500},"&-draggable":{cursor:"grab",[`${o}-draggable-icon`]:{flexShrink:0,width:c,textAlign:"center",visibility:"visible",color:r},[`&${e}-disabled ${o}-draggable-icon`]:{visibility:"hidden"}}},[`${o}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:y}},[`${o}-draggable-icon`]:{visibility:"hidden"},[`${o}-switcher, ${o}-checkbox`]:{marginInlineEnd:t.calc(t.calc(c).sub(t.controlInteractiveSize)).div(2).equal()},[`${o}-switcher`]:Object.assign(Object.assign({},Dn(n,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:c,textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${t.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:c,height:c,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`},[`&:not(${o}-switcher-noop):hover:before`]:{backgroundColor:t.colorBgTextHover},[`&_close ${o}-switcher-icon svg`]:{transform:"rotate(-90deg)"},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(c).div(2).equal(),bottom:t.calc(i).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:t.calc(t.calc(c).div(2).equal()).mul(.8).equal(),height:t.calc(c).div(2).equal(),borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${o}-node-content-wrapper`]:Object.assign(Object.assign({position:"relative",minHeight:c,paddingBlock:0,paddingInline:t.paddingXS,background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`},wn(n,t)),{"&:hover":{backgroundColor:d},[`&${o}-node-selected`]:{color:t.nodeSelectedColor,backgroundColor:a},[`${o}-iconEle`]:{display:"inline-block",width:c,height:c,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}}),[`${o}-unselectable ${o}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${e}.drop-container > [draggable]`]:{boxShadow:`0 0 0 2px ${t.colorPrimary}`},"&-show-line":{[`${o}-indent-unit`]:{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(c).div(2).equal(),bottom:t.calc(i).mul(-1).equal(),borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end:before":{display:"none"}},[`${o}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${e}-leaf-last ${o}-switcher-leaf-line:before`]:{top:"auto !important",bottom:"auto !important",height:`${Ve(t.calc(c).div(2).equal())} !important`}})}},On=(n,t)=>{const o=`.${n}`,e=`${o}-treenode`,i=t.calc(t.paddingXS).div(2).equal(),c=Ct(t,{treeCls:o,treeNodeCls:e,treeNodePadding:i});return[$n(n,c),En(c)]},Pn=n=>{const{controlHeightSM:t,controlItemBgHover:o,controlItemBgActive:e}=n,i=t;return{titleHeight:i,indentSize:i,nodeHoverBg:o,nodeHoverColor:n.colorText,nodeSelectedBg:e,nodeSelectedColor:n.colorText}},Tn=n=>{const{colorTextLightSolid:t,colorPrimary:o}=n;return Object.assign(Object.assign({},Pn(n)),{directoryNodeSelectedColor:t,directoryNodeSelectedBg:o})},Gn=xt("Tree",(n,t)=>{let{prefixCls:o}=t;return[{[n.componentCls]:wt(`${o}-checkbox`,n)},On(o,n),$t(n)]},Tn),Wn=n=>{const{prefixCls:t,switcherIcon:o,treeNodeProps:e,showLine:i,switcherLoadingIcon:c}=n,{isLeaf:y,expanded:a,loading:d}=e;if(d)return x.isValidElement(c)?c:x.createElement(Et,{className:`${t}-switcher-loading-icon`});let r;if(i&&typeof i=="object"&&(r=i.showLeafIcon),y){if(!i)return null;if(typeof r!="boolean"&&r){const v=typeof r=="function"?r(e):r,g=`${t}-switcher-line-custom-icon`;return x.isValidElement(v)?Ye(v,{className:V(v.props.className||"",g)}):v}return r?x.createElement(Qt,{className:`${t}-switcher-line-icon`}):x.createElement("span",{className:`${t}-switcher-leaf-line`})}const s=`${t}-switcher-icon`,f=typeof o=="function"?o(e):o;return x.isValidElement(f)?Ye(f,{className:V(f.props.className||"",s)}):f!==void 0?f:i?a?x.createElement(an,{className:`${t}-switcher-line-icon`}):x.createElement(ct,{className:`${t}-switcher-line-icon`}):x.createElement(Wt,{className:s})},Xn=()=>Ot(),Yn={weight:1,type:"element",position:"left"},Qn={weight:90,icon:ge.jsx(ct,{}),hotKeys:[{key:"Insert"}]},Jn={weight:100,icon:ge.jsx(Pt,{}),hotKeys:[{key:"Enter"}]},Zn={weight:110,icon:ge.jsx(At,{}),hotKeys:[{key:"Insert"}]},ea={weight:120,icon:ge.jsx(en,{})},ta={weight:130,icon:ge.jsx(Tt,{}),hotKeys:[{key:"F9"}]},na={weight:140,icon:ge.jsx(Rt,{}),hotKeys:[{key:"Enter"},{key:"F2"}]},aa={weight:150,icon:ge.jsx(Mt,{}),color:"danger",hotKeys:[{key:"Delete",ctrl:!0}]};export{Qt as R,Wn as S,vt as T,dn as U,tt as a,Ht as b,Ft as c,_e as d,Yn as e,Ae as f,Jn as g,Zn as h,ta as i,na as j,aa as k,Qn as l,qe as m,Pn as n,Xn as o,On as p,ea as q,Gn as u};
