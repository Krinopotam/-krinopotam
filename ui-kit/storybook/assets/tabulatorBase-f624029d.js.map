{"version":3,"file":"tabulatorBase-f624029d.js","sources":["../../../../node_modules/@krinopotam/common-hooks/isDebugMode.js","../../../../node_modules/tabulator-tables/dist/js/tabulator_esm.js","../../../../src/tabulatorBase/modules/activeSelectionModule.ts","../../../../src/tabulatorBase/modules/advancedHeaderFilterModule.ts","../../../../src/tabulatorBase/parts/icons.tsx","../../../../src/tabulatorBase/patches/scrollToRowPositionPatсh.js","../../../../src/tabulatorBase/patches/findRowPatch.js","../../../../src/tabulatorBase/patches/disableErrorOverlay.js","../../../../src/tabulatorBase/patches/ajaxRequestDataCheck.js","../../../../src/tabulatorBase/patches/setPatches.js","../../../../src/tabulatorBase/parts/baseHOC.tsx","../../../../src/tabulatorBase/hooks/init.tsx","../../../../src/tabulatorBase/stylization.tsx","../../../../src/tabulatorBase/tabulatorBase.tsx"],"sourcesContent":["export const IsDebugMode = () => {\n    return import.meta.env.MODE === \"development\" || import.meta.env.MODE === \"demo\";\n};\nexport const useIsDebugMode = () => {\n    return IsDebugMode();\n};\n","/* Tabulator v5.5.2 (c) Oliver Folkerd 2023 */\nclass CoreFeature{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\t}\n\n\t//////////////////////////////////////////\n\t/////////////// DataLoad /////////////////\n\t//////////////////////////////////////////\n\n\treloadData(data, silent, columnsChanged){\n\t\treturn this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged);\n\t}\n\n\t//////////////////////////////////////////\n\t///////////// Localization ///////////////\n\t//////////////////////////////////////////\n\n\tlangText(){\n\t\treturn this.table.modules.localize.getText(...arguments);\n\t}\n\n\tlangBind(){\n\t\treturn this.table.modules.localize.bind(...arguments);\n\t}\n\n\tlangLocale(){\n\t\treturn this.table.modules.localize.getLocale(...arguments);\n\t}\n\n\n\t//////////////////////////////////////////\n\t////////// Inter Table Comms /////////////\n\t//////////////////////////////////////////\n\n\tcommsConnections(){\n\t\treturn this.table.modules.comms.getConnections(...arguments);\n\t}\n\n\tcommsSend(){\n\t\treturn this.table.modules.comms.send(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Layout  /////////////////\n\t//////////////////////////////////////////\n\n\tlayoutMode(){\n\t\treturn this.table.modules.layout.getMode();\n\t}\n\n\tlayoutRefresh(force){\n\t\treturn this.table.modules.layout.layout(force);\n\t}\n\n\n\t//////////////////////////////////////////\n\t/////////////// Event Bus ////////////////\n\t//////////////////////////////////////////\n\n\tsubscribe(){\n\t\treturn this.table.eventBus.subscribe(...arguments);\n\t}\n\n\tunsubscribe(){\n\t\treturn this.table.eventBus.unsubscribe(...arguments);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.table.eventBus.subscribed(key);\n\t}\n\n\tsubscriptionChange(){\n\t\treturn this.table.eventBus.subscriptionChange(...arguments);\n\t}\n\n\tdispatch(){\n\t\treturn this.table.eventBus.dispatch(...arguments);\n\t}\n\n\tchain(){\n\t\treturn this.table.eventBus.chain(...arguments);\n\t}\n\n\tconfirm(){\n\t\treturn this.table.eventBus.confirm(...arguments);\n\t}\n\n\tdispatchExternal(){\n\t\treturn this.table.externalEvents.dispatch(...arguments);\n\t}\n\n\tsubscribedExternal(key){\n\t\treturn this.table.externalEvents.subscribed(key);\n\t}\n\n\tsubscriptionChangeExternal(){\n\t\treturn this.table.externalEvents.subscriptionChange(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Options /////////////////\n\t//////////////////////////////////////////\n\n\toptions(key){\n\t\treturn this.table.options[key];\n\t}\n\n\tsetOption(key, value){\n\t\tif(typeof value !== \"undefined\"){\n\t\t\tthis.table.options[key] = value;\n\t\t}\n\n\t\treturn this.table.options[key];\n\t}\n\n\t//////////////////////////////////////////\n\t/////////// Deprecation Checks ///////////\n\t//////////////////////////////////////////\n\n\tdeprecationCheck(oldOption, newOption){\n\t\treturn this.table.deprecationAdvisor.check(oldOption, newOption);\n\t}\n\n\tdeprecationCheckMsg(oldOption, msg){\n\t\treturn this.table.deprecationAdvisor.checkMsg(oldOption, msg);\n\t}\n\n\tdeprecationMsg(msg){\n\t\treturn this.table.deprecationAdvisor.msg(msg);\n\t}\n\t//////////////////////////////////////////\n\t//////////////// Modules /////////////////\n\t//////////////////////////////////////////\n\n\tmodule(key){\n\t\treturn this.table.module(key);\n\t}\n}\n\nclass Helpers{\n\n\tstatic elVisible(el){\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t}\n\n\tstatic elOffset(el){\n\t\tvar box = el.getBoundingClientRect();\n\n\t\treturn {\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\t\t};\n\t}\n\n\tstatic deepClone(obj, clone, list = []){\n\t\tvar objectProto = {}.__proto__,\n\t\tarrayProto = [].__proto__;\n\n\t\tif (!clone){\n\t\t\tclone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n\t\t}\n\n\t\tfor(var i in obj) {\n\t\t\tlet subject = obj[i],\n\t\t\tmatch, copy;\n\n\t\t\tif(subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)){\n\t\t\t\tmatch = list.findIndex((item) => {\n\t\t\t\t\treturn item.subject === subject;\n\t\t\t\t});\n\n\t\t\t\tif(match > -1){\n\t\t\t\t\tclone[i] = list[match].copy;\n\t\t\t\t}else {\n\t\t\t\t\tcopy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\n\n\t\t\t\t\tlist.unshift({subject, copy});\n\n\t\t\t\t\tclone[i] = this.deepClone(subject, copy, list);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n}\n\nclass Popup extends CoreFeature{\n\tconstructor(table, element, parent){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = element;\n\t\tthis.container = this._lookupContainer();\n\t\t\n\t\tthis.parent = parent;\n\t\t\n\t\tthis.reversedX = false;\n\t\tthis.childPopup = null;\n\t\tthis.blurable = false;\n\t\tthis.blurCallback = null;\n\t\tthis.blurEventsBound = false;\n\t\tthis.renderedCallback = null;\n\t\t\n\t\tthis.visible = false;\n\t\tthis.hideable = true;\n\t\t\n\t\tthis.element.classList.add(\"tabulator-popup-container\");\n\t\t\n\t\tthis.blurEvent = this.hide.bind(this, false);\n\t\tthis.escEvent = this._escapeCheck.bind(this);\n\t\t\n\t\tthis.destroyBinding = this.tableDestroyed.bind(this);\n\t\tthis.destroyed = false;\n\t}\n\t\n\ttableDestroyed(){\n\t\tthis.destroyed = true;\n\t\tthis.hide(true);\n\t}\n\t\n\t_lookupContainer(){\n\t\tvar container = this.table.options.popupContainer;\n\t\t\n\t\tif(typeof container === \"string\"){\n\t\t\tcontainer = document.querySelector(container);\n\t\t\t\n\t\t\tif(!container){\n\t\t\t\tconsole.warn(\"Menu Error - no container element found matching selector:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t\t}\n\t\t}else if (container === true){\n\t\t\tcontainer = this.table.element;\n\t\t}\n\t\t\n\t\tif(container && !this._checkContainerIsParent(container)){\n\t\t\tcontainer = false;\n\t\t\tconsole.warn(\"Menu Error - container element does not contain this table:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t}\n\t\t\n\t\tif(!container){\n\t\t\tcontainer = document.body;\n\t\t}\n\t\t\n\t\treturn container;\n\t}\n\t\n\t_checkContainerIsParent(container, element = this.table.element){\n\t\tif(container === element){\n\t\t\treturn true;\n\t\t}else {\n\t\t\treturn element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\n\t\t}\n\t}\n\t\n\trenderCallback(callback){\n\t\tthis.renderedCallback = callback;\n\t}\n\t\n\tcontainerEventCoords(e){\n\t\tvar touch = !(e instanceof MouseEvent);\n\t\t\n\t\tvar x = touch ? e.touches[0].pageX : e.pageX;\n\t\tvar y = touch ? e.touches[0].pageY : e.pageY;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tlet parentOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\tx -= parentOffset.left;\n\t\t\ty -= parentOffset.top;\n\t\t}\n\t\t\n\t\treturn {x, y};\n\t}\n\t\n\telementPositionCoords(element, position = \"right\"){\n\t\tvar offset = Helpers.elOffset(element),\n\t\tcontainerOffset, x, y;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tcontainerOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\toffset.left -= containerOffset.left;\n\t\t\toffset.top -= containerOffset.top;\n\t\t}\n\t\t\n\t\tswitch(position){\n\t\t\tcase \"right\":\n\t\t\t\tx = offset.left + element.offsetWidth;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"bottom\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top + element.offsetHeight;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"left\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"top\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"center\":\n\t\t\t\tx = offset.left + (element.offsetWidth / 2);\n\t\t\t\ty = offset.top + (element.offsetHeight / 2);\n\t\t\t\tbreak;\n\t\t\t\n\t\t}\n\t\t\n\t\treturn {x, y, offset};\n\t}\n\t\n\tshow(origin, position){\n\t\tvar x, y, parentEl, parentOffset, coords;\n\t\t\n\t\tif(this.destroyed || this.table.destroyed){\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tif(origin instanceof HTMLElement){\n\t\t\tparentEl = origin;\n\t\t\tcoords = this.elementPositionCoords(origin, position);\n\t\t\t\n\t\t\tparentOffset = coords.offset;\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t}else if(typeof origin === \"number\"){\n\t\t\tparentOffset = {top:0, left:0};\n\t\t\tx = origin;\n\t\t\ty = position;\n\t\t}else {\n\t\t\tcoords = this.containerEventCoords(origin);\n\t\t\t\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t\tthis.reversedX = false;\n\t\t}\n\t\t\n\t\tthis.element.style.top = y + \"px\";\n\t\tthis.element.style.left = x + \"px\";\n\t\t\n\t\tthis.container.appendChild(this.element);\n\t\t\n\t\tif(typeof this.renderedCallback === \"function\"){\n\t\t\tthis.renderedCallback();\n\t\t}\n\t\t\n\t\tthis._fitToScreen(x, y, parentEl, parentOffset, position);\n\t\t\n\t\tthis.visible = true;\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.destroyBinding);\n\t\t\n\t\tthis.element.addEventListener(\"mousedown\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_fitToScreen(x, y, parentEl, parentOffset, position){\n\t\tvar scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n\t\t\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\n\t\tif((x + this.element.offsetWidth) >= this.container.offsetWidth || this.reversedX){\n\t\t\tthis.element.style.left = \"\";\n\t\t\t\n\t\t\tif(parentEl){\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - parentOffset.left) + \"px\";\n\t\t\t}else {\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - x) + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.reversedX = true;\n\t\t}\n\t\t\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\n\t\tif((y + this.element.offsetHeight) > Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0)) {\n\t\t\tif(parentEl){\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"bottom\":\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1) + \"px\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1) + \"px\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight) + \"px\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisVisible(){\n\t\treturn this.visible;\n\t}\n\t\n\thideOnBlur(callback){\n\t\tthis.blurable = true;\n\t\t\n\t\tif(this.visible){\n\t\t\tsetTimeout(() => {\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n\t\t\t\t\tthis.subscribe(\"cell-editing\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\n\n\t\t\t\t\tthis.blurEventsBound = true;\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t\t\n\t\t\tthis.blurCallback = callback;\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_escapeCheck(e){\n\t\tif(e.keyCode == 27){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t\n\tblockHide(){\n\t\tthis.hideable = false;\n\t}\n\t\n\trestoreHide(){\n\t\tthis.hideable = true;\n\t}\n\t\n\thide(silent = false){\n\t\tif(this.visible && this.hideable){\n\t\t\tif(this.blurable && this.blurEventsBound){\n\t\t\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\n\t\t\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\twindow.removeEventListener(\"resize\", this.blurEvent);\n\t\t\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n\t\t\t\tthis.unsubscribe(\"cell-editing\", this.blurEvent);\n\n\t\t\t\tthis.blurEventsBound = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.childPopup){\n\t\t\t\tthis.childPopup.hide();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.childPopup = null;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.visible = false;\n\t\t\t\n\t\t\tif(this.blurCallback && !silent){\n\t\t\t\tthis.blurCallback();\n\t\t\t}\n\t\t\t\n\t\t\tthis.unsubscribe(\"table-destroy\", this.destroyBinding);\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\tchild(element){\n\t\tif(this.childPopup){\n\t\t\tthis.childPopup.hide();\n\t\t}\n\t\t\n\t\tthis.childPopup = new Popup(this.table, element, this);\n\t\t\n\t\treturn this.childPopup;\n\t}\n}\n\nclass Module extends CoreFeature{\n\t\n\tconstructor(table, name){\n\t\tsuper(table);\n\t\t\n\t\tthis._handler = null;\n\t}\n\t\n\tinitialize(){\n\t\t// setup module when table is initialized, to be overridden in module\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Options Registration ///////\n\t///////////////////////////////////\n\t\n\tregisterTableOption(key, value){\n\t\tthis.table.optionsList.register(key, value);\n\t}\n\t\n\tregisterColumnOption(key, value){\n\t\tthis.table.columnManager.optionsList.register(key, value);\n\t}\n\t\n\t///////////////////////////////////\n\t/// Public Function Registration ///\n\t///////////////////////////////////\n\t\n\tregisterTableFunction(name, func){\n\t\tif(typeof this.table[name] === \"undefined\"){\n\t\t\tthis.table[name] = (...args) => {\n\t\t\t\tthis.table.initGuard(name);\n\t\t\t\t\n\t\t\t\treturn func(...args);\n\t\t\t};\n\t\t}else {\n\t\t\tconsole.warn(\"Unable to bind table function, name already in use\", name);\n\t\t}\n\t}\n\t\n\tregisterComponentFunction(component, func, handler){\n\t\treturn this.table.componentFunctionBinder.bind(component, func, handler);\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Data Pipeline //////////\n\t///////////////////////////////////\n\t\n\tregisterDataHandler(handler, priority){\n\t\tthis.table.rowManager.registerDataPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tregisterDisplayHandler(handler, priority){\n\t\tthis.table.rowManager.registerDisplayPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tdisplayRows(adjust){\n\t\tvar index = this.table.rowManager.displayRows.length - 1, \n\t\tlookupIndex;\n\t\t\n\t\tif(this._handler){\n\t\t\tlookupIndex = this.table.rowManager.displayPipeline.findIndex((item) => {\n\t\t\t\treturn item.handler === this._handler;\n\t\t\t});\n\n\t\t\tif(lookupIndex > -1){\n\t\t\t\tindex = lookupIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(adjust){\n\t\t\tindex = index + adjust;\n\t\t}\n\n\t\tif(this._handler){\n\t\t\tif(index > -1){\n\t\t\t\treturn this.table.rowManager.getDisplayRows(index);\n\t\t\t}else {\n\t\t\t\treturn this.activeRows();\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tactiveRows(){\n\t\treturn this.table.rowManager.activeRows;\n\t}\n\t\n\trefreshData(renderInPosition, handler){\n\t\tif(!handler){\n\t\t\thandler = this._handler;\n\t\t}\n\t\t\n\t\tif(handler){\n\t\t\tthis.table.rowManager.refreshActiveData(handler, false, renderInPosition);\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Footer Management ////////\n\t///////////////////////////////////\n\t\n\tfooterAppend(element){\n\t\treturn this.table.footerManager.append(element);\n\t}\n\t\n\tfooterPrepend(element){\n\t\treturn this.table.footerManager.prepend(element);\n\t}\n\t\n\tfooterRemove(element){\n\t\treturn this.table.footerManager.remove(element);\n\t} \n\t\n\t///////////////////////////////////\n\t//////// Popups Management ////////\n\t///////////////////////////////////\n\t\n\tpopup(menuEl, menuContainer){\n\t\treturn new Popup(this.table, menuEl, menuContainer);\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Alert Management ////////\n\t///////////////////////////////////\n\t\n\talert(content, type){\n\t\treturn this.table.alertManager.alert(content, type);\n\t}\n\t\n\tclearAlert(){\n\t\treturn this.table.alertManager.clear();\n\t}\n\t\n}\n\nvar defaultAccessors = {};\n\nclass Accessor extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\n\t\tthis.registerColumnOption(\"accessor\");\n\t\tthis.registerColumnOption(\"accessorParams\");\n\t\tthis.registerColumnOption(\"accessorData\");\n\t\tthis.registerColumnOption(\"accessorDataParams\");\n\t\tthis.registerColumnOption(\"accessorDownload\");\n\t\tthis.registerColumnOption(\"accessorDownloadParams\");\n\t\tthis.registerColumnOption(\"accessorClipboard\");\n\t\tthis.registerColumnOption(\"accessorClipboardParams\");\n\t\tthis.registerColumnOption(\"accessorPrint\");\n\t\tthis.registerColumnOption(\"accessorPrintParams\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutput\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutputParams\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n\t}\n\n\t//initialize column accessor\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\taccessor;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\taccessor:accessor,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.accessor = config;\n\t\t}\n\t}\n\n\tlookupAccessor(value){\n\t\tvar accessor = false;\n\n\t\t//set column accessor\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Accessor.accessors[value]){\n\t\t\t\t\taccessor = Accessor.accessors[value];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\taccessor = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn accessor;\n\t}\n\n\t//apply accessor to row\n\ttransformRow(row, type){\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\trowComponent = row.getComponent();\n\n\t\t//clone data object with deep copy to isolate internal data from returned result\n\t\tvar data = Helpers.deepClone(row.data || {});\n\n\t\tthis.table.columnManager.traverse(function(column){\n\t\t\tvar value, accessor, params, colComponent;\n\n\t\t\tif(column.modules.accessor){\n\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\t\tif(value != \"undefined\"){\n\t\t\t\t\t\tcolComponent = column.getComponent();\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colComponent, rowComponent) : accessor.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n}\n\n//load defaults\nAccessor.moduleName = \"accessor\";\nAccessor.accessors = defaultAccessors;\n\nvar defaultConfig = {\n\tmethod: \"GET\",\n};\n\nfunction generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else {\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nfunction serializeParams(params){\n\tvar output = generateParamsList(params),\n\tencoded = [];\n\n\toutput.forEach(function(item){\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t});\n\n\treturn encoded.join(\"&\");\n}\n\nfunction urlBuilder(url, config, params){\n\tif(url){\n\t\tif(params && Object.keys(params).length){\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\n\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn url;\n}\n\nfunction defaultLoaderPromise(url, config, params){\n\tvar contentType;\n\n\treturn new Promise((resolve, reject) => {\n\t\t//set url\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\n\n\t\t//set body content if not GET request\n\t\tif(config.method.toUpperCase() != \"GET\"){\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\n\t\t\tif(contentType){\n\n\t\t\t\tfor(var key in contentType.headers){\n\t\t\t\t\tif(!config.headers){\n\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\n\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n\t\t\t}\n\t\t}\n\n\t\tif(url){\n\t\t\t//configure headers\n\t\t\tif(typeof config.headers === \"undefined\"){\n\t\t\t\tconfig.headers = {};\n\t\t\t}\n\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\n\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t}\n\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t}\n\n\t\t\tif(typeof config.mode === \"undefined\"){\n\t\t\t\tconfig.mode = \"cors\";\n\t\t\t}\n\n\t\t\tif(config.mode == \"cors\"){\n\t\t\t\tif(typeof config.headers[\"Origin\"] === \"undefined\"){\n\t\t\t\t\tconfig.headers[\"Origin\"] = window.location.origin;\n\t\t\t\t}\n        \n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//send request\n\t\t\tfetch(url, config)\n\t\t\t\t.then((response)=>{\n\t\t\t\t\tif(response.ok) {\n\t\t\t\t\t\tresponse.json()\n\t\t\t\t\t\t\t.then((data)=>{\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t}).catch((error)=>{\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error)=>{\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t}else {\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\tresolve([]);\n\t\t}\n\t});\n}\n\nfunction generateParamsList$1(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList$1(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList$1(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else {\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nvar defaultContentTypeFormatters = {\n\t\"json\":{\n\t\theaders:{\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody:function(url, config, params){\n\t\t\treturn JSON.stringify(params);\n\t\t},\n\t},\n\t\"form\":{\n\t\theaders:{\n\t\t},\n\t\tbody:function(url, config, params){\n\n\t\t\tvar output = generateParamsList$1(params),\n\t\t\tform = new FormData();\n\n\t\t\toutput.forEach(function(item){\n\t\t\t\tform.append(item.key, item.value);\n\t\t\t});\n\n\t\t\treturn form;\n\t\t},\n\t},\n};\n\nclass Ajax extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {}; //hold config object for ajax request\n\t\tthis.url = \"\"; //request URL\n\t\tthis.urlGenerator = false;\n\t\tthis.params = false; //request parameters\n\t\t\n\t\tthis.loaderPromise = false;\n\t\t\n\t\tthis.registerTableOption(\"ajaxURL\", false); //url for ajax loading\n\t\tthis.registerTableOption(\"ajaxURLGenerator\", false);\n\t\tthis.registerTableOption(\"ajaxParams\", {});  //params for ajax loading\n\t\tthis.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxRequestFunc\", false); //promise function\n\t\t\n\t\tthis.registerTableOption(\"ajaxRequesting\", function(){});\n\t\tthis.registerTableOption(\"ajaxResponse\", false);\n\t\t\n\t\tthis.contentTypeFormatters = Ajax.contentTypeFormatters;\n\t}\n\t\n\t//initialize setup options\n\tinitialize(){\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\n\t\t\n\t\tif(this.table.options.ajaxURL){\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\n\t\t}\n\n\n\t\tthis.setDefaultConfig(this.table.options.ajaxConfig);\n\t\t\n\t\tthis.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\n\t\tthis.subscribe(\"data-params\", this.requestParams.bind(this));\n\t\tthis.subscribe(\"data-load\", this.requestData.bind(this));\n\t}\n\t\n\trequestParams(data, config, silent, params){\n\t\tvar ajaxParams = this.table.options.ajaxParams;\n\t\t\n\t\tif(ajaxParams){\n\t\t\tif(typeof ajaxParams === \"function\"){\n\t\t\t\tajaxParams = ajaxParams.call(this.table);\n\t\t\t}\n\t\t\t\n\t\t\tparams = Object.assign(params, ajaxParams);\n\t\t}\t\t\n\t\t\n\t\treturn params;\n\t}\n\t\n\trequestDataCheck(data, params, config, silent){\n\t\treturn !!((!data && this.url) || typeof data === \"string\");\n\t}\n\t\n\trequestData(url, params, config, silent, previousData){\n\t\tvar ajaxConfig;\n\t\t\n\t\tif(!previousData && this.requestDataCheck(url)){\n\t\t\tif(url){\n\t\t\t\tthis.setUrl(url);\n\t\t\t}\n\t\t\t\n\t\t\tajaxConfig = this.generateConfig(config);\n\t\t\t\n\t\t\treturn this.sendRequest(this.url, params, ajaxConfig);\n\t\t}else {\n\t\t\treturn previousData;\n\t\t}\n\t}\n\t\n\tsetDefaultConfig(config = {}){\n\t\tthis.config = Object.assign({}, Ajax.defaultConfig);\n\n\t\tif(typeof config == \"string\"){\n\t\t\tthis.config.method = config;\n\t\t}else {\n\t\t\tObject.assign(this.config, config);\n\t\t}\n\t}\n\t\n\t//load config object\n\tgenerateConfig(config = {}){\n\t\tvar ajaxConfig = Object.assign({}, this.config);\n\t\t\n\t\tif(typeof config == \"string\"){\n\t\t\tajaxConfig.method = config;\n\t\t}else {\n\t\t\tObject.assign(ajaxConfig, config);\n\t\t}\n\t\t\n\t\treturn ajaxConfig;\n\t}\n\t\n\t//set request url\n\tsetUrl(url){\n\t\tthis.url = url;\n\t}\n\t\n\t//get request url\n\tgetUrl(){\n\t\treturn this.url;\n\t}\n\t\n\t//send ajax request\n\tsendRequest(url, params, config){\n\t\tif(this.table.options.ajaxRequesting.call(this.table, url, params) !== false){\n\t\t\treturn this.loaderPromise(url, config, params)\n\t\t\t\t.then((data)=>{\n\t\t\t\t\tif(this.table.options.ajaxResponse){\n\t\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, url, params, data);\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\treturn data;\n\t\t\t\t});\n\t\t}else {\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n}\n\nAjax.moduleName = \"ajax\";\n\n//load defaults\nAjax.defaultConfig = defaultConfig;\nAjax.defaultURLGenerator = urlBuilder;\nAjax.defaultLoaderPromise = defaultLoaderPromise;\nAjax.contentTypeFormatters = defaultContentTypeFormatters;\n\nvar defaultPasteActions = {\n\treplace:function(rows){\n\t\treturn this.table.setData(rows);\n\t},\n\tupdate:function(rows){\n\t\treturn this.table.updateOrAddData(rows);\n\t},\n\tinsert:function(rows){\n\t\treturn this.table.addData(rows);\n\t},\n};\n\nvar defaultPasteParsers = {\n\ttable:function(clipboard){\n\t\tvar data = [],\n\t\theaderFindSuccess = true,\n\t\tcolumns = this.table.columnManager.columns,\n\t\tcolumnMap = [],\n\t\trows = [];\n\n\t\t//get data from clipboard into array of columns and rows.\n\t\tclipboard = clipboard.split(\"\\n\");\n\n\t\tclipboard.forEach(function(row){\n\t\t\tdata.push(row.split(\"\\t\"));\n\t\t});\n\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\n\n\t\t\t//check if headers are present by title\n\t\t\tdata[0].forEach(function(value){\n\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t});\n\n\t\t\t\tif(column){\n\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t}else {\n\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//check if column headers are present by field\n\t\t\tif(!headerFindSuccess){\n\t\t\t\theaderFindSuccess = true;\n\t\t\t\tcolumnMap = [];\n\n\t\t\t\tdata[0].forEach(function(value){\n\t\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t});\n\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t}else {\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(!headerFindSuccess){\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//remove header row if found\n\t\t\tif(headerFindSuccess){\n\t\t\t\tdata.shift();\n\t\t\t}\n\n\t\t\tdata.forEach(function(item){\n\t\t\t\tvar row = {};\n\n\t\t\t\titem.forEach(function(value, i){\n\t\t\t\t\tif(columnMap[i]){\n\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trows.push(row);\n\t\t\t});\n\n\t\t\treturn rows;\n\t\t}else {\n\t\t\treturn false;\n\t\t}\n\t}\n};\n\nclass Clipboard extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = true;\n\t\tthis.pasteParser = function(){};\n\t\tthis.pasteAction = function(){};\n\t\tthis.customSelection = false;\n\t\tthis.rowRange = false;\n\t\tthis.blocked = true; //block copy actions not originating from this command\n\n\t\tthis.registerTableOption(\"clipboard\", false); //enable clipboard\n\t\tthis.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\n\t\tthis.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\n\t\tthis.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRECATED - REMOVE in 5.0\n\t\tthis.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\n\t\tthis.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\n\t\tthis.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\n\n\t\tthis.registerColumnOption(\"clipboard\");\n\t\tthis.registerColumnOption(\"titleClipboard\");\n\t}\n\n\tinitialize(){\n\t\tthis.mode = this.table.options.clipboard;\n\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\t\tif(this.mode === true || this.mode === \"copy\"){\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\n\t\t\t\tvar plain, html, list;\n\n\t\t\t\tif(!this.blocked){\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif(this.customSelection){\n\t\t\t\t\t\tplain = this.customSelection;\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\n\t\t\t\t\t\tlist = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\n\n\t\t\t\t\t\thtml = this.table.modules.export.generateHTMLTable(list);\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchExternal(\"clipboardCopied\", plain, html);\n\n\t\t\t\t\tthis.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif(this.mode === true || this.mode === \"paste\"){\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\n\t\t\t\tthis.paste(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n\n\t\tthis.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n\t}\n\n\treset(){\n\t\tthis.blocked = true;\n\t\tthis.customSelection = false;\n\t}\n\n\tgeneratePlainContent (list) {\n\t\tvar output = [];\n\n\t\tlist.forEach((row) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach((col) => {\n\t\t\t\tvar value = \"\";\n\n\t\t\t\tif(col){\n\n\t\t\t\t\tif(row.type === \"group\"){\n\t\t\t\t\t\tcol.value = col.component.getKey();\n\t\t\t\t\t}\n\n\t\t\t\t\tif(col.value === null){\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}else {\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tvalue = col.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowData.push(value);\n\t\t\t});\n\n\t\t\toutput.push(rowData.join(\"\\t\"));\n\t\t});\n\n\t\treturn output.join(\"\\n\");\n\t}\n\n\tcopy (range, internal) {\n\t\tvar sel, textRange;\n\t\tthis.blocked = false;\n\t\tthis.customSelection = false;\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNodeContents(this.table.element);\n\t\t\t\tsel = window.getSelection();\n\n\t\t\t\tif (sel.toString() && internal) {\n\t\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t\t}\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\t\ttextRange = document.body.createTextRange();\n\t\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\n\t\t\tdocument.execCommand('copy');\n\n\t\t\tif (sel) {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t}\n\t\t}\n\t}\n\n\t//PASTE EVENT HANDLING\n\tsetPasteAction(action){\n\n\t\tswitch(typeof action){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\n\n\t\t\t\tif(!this.pasteAction){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteAction = action;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetPasteParser(parser){\n\t\tswitch(typeof parser){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\n\n\t\t\t\tif(!this.pasteParser){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteParser = parser;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaste(e){\n\t\tvar data, rowData, rows;\n\n\t\tif(this.checkPaseOrigin(e)){\n\n\t\t\tdata = this.getPasteData(e);\n\n\t\t\trowData = this.pasteParser.call(this, data);\n\n\t\t\tif(rowData){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif(this.table.modExists(\"mutator\")){\n\t\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t\t}\n\n\t\t\t\trows = this.pasteAction.call(this, rowData);\n\n\t\t\t\tthis.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\n\t\t\t}else {\n\t\t\t\tthis.dispatchExternal(\"clipboardPasteError\", data);\n\t\t\t}\n\t\t}\n\t}\n\n\tmutateData(data){\n\t\tvar output = [];\n\n\t\tif(Array.isArray(data)){\n\t\t\tdata.forEach((row) => {\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t\t});\n\t\t}else {\n\t\t\toutput = data;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\n\tcheckPaseOrigin(e){\n\t\tvar valid = true;\n\n\t\tif(e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell){\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn valid;\n\t}\n\n\tgetPasteData(e){\n\t\tvar data;\n\n\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\tdata = window.clipboardData.getData('Text');\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tdata = e.clipboardData.getData('text/plain');\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t\t}\n\n\t\treturn data;\n\t}\n}\n\nClipboard.moduleName = \"clipboard\";\n\n//load defaults\nClipboard.pasteActions = defaultPasteActions;\nClipboard.pasteParsers = defaultPasteParsers;\n\nclass CalcComponent{\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else {\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n}\n\n//public cell object\nclass CellComponent {\n\n\tconstructor (cell){\n\t\tthis._cell = cell;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else {\n\t\t\t\t\treturn target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetValue(){\n\t\treturn this._cell.getValue();\n\t}\n\n\tgetOldValue(){\n\t\treturn this._cell.getOldValue();\n\t}\n\n\tgetInitialValue(){\n\t\treturn this._cell.initialValue;\n\t}\n\n\tgetElement(){\n\t\treturn this._cell.getElement();\n\t}\n\n\tgetRow(){\n\t\treturn this._cell.row.getComponent();\n\t}\n\n\tgetData(transform){\n\t\treturn this._cell.row.getData(transform);\n\t}\n\tgetType(){\n\t\treturn \"cell\";\n\t}\n\tgetField(){\n\t\treturn this._cell.column.getField();\n\t}\n\n\tgetColumn(){\n\t\treturn this._cell.column.getComponent();\n\t}\n\n\tsetValue(value, mutate){\n\t\tif(typeof mutate == \"undefined\"){\n\t\t\tmutate = true;\n\t\t}\n\n\t\tthis._cell.setValue(value, mutate);\n\t}\n\n\trestoreOldValue(){\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\n\t}\n\n\trestoreInitialValue(){\n\t\tthis._cell.setValueActual(this._cell.initialValue);\n\t}\n\n\tcheckHeight(){\n\t\tthis._cell.checkHeight();\n\t}\n\n\tgetTable(){\n\t\treturn this._cell.table;\n\t}\n\n\t_getSelf(){\n\t\treturn this._cell;\n\t}\n}\n\nclass Cell extends CoreFeature{\n\tconstructor(column, row){\n\t\tsuper(column.table);\n\n\t\tthis.table = column.table;\n\t\tthis.column = column;\n\t\tthis.row = row;\n\t\tthis.element = null;\n\t\tthis.value = null;\n\t\tthis.initialValue;\n\t\tthis.oldValue = null;\n\t\tthis.modules = {};\n\n\t\tthis.height = null;\n\t\tthis.width = null;\n\t\tthis.minWidth = null;\n\n\t\tthis.component = null;\n\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\n\n\t\tthis.build();\n\t}\n\n\t//////////////// Setup Functions /////////////////\n\t//generate element\n\tbuild(){\n\t\tthis.generateElement();\n\n\t\tthis.setWidth();\n\n\t\tthis._configureCell();\n\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\n\t\tthis.initialValue = this.value;\n\t}\n\n\tgenerateElement(){\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = \"tabulator-cell\";\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\n\t}\n\n\t_configureCell(){\n\t\tvar element = this.element,\n\t\tfield = this.column.getField(),\n\t\tvertAligns = {\n\t\t\ttop:\"flex-start\",\n\t\t\tbottom:\"flex-end\",\n\t\t\tmiddle:\"center\",\n\t\t},\n\t\thozAligns = {\n\t\t\tleft:\"flex-start\",\n\t\t\tright:\"flex-end\",\n\t\t\tcenter:\"center\",\n\t\t};\n\n\t\t//set text alignment\n\t\telement.style.textAlign = this.column.hozAlign;\n\n\t\tif(this.column.vertAlign){\n\t\t\telement.style.display = \"inline-flex\";\n\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\n\n\t\t\tif(this.column.hozAlign){\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\n\t\t\t}\n\t\t}\n\n\t\tif(field){\n\t\t\telement.setAttribute(\"tabulator-field\", field);\n\t\t}\n\n\t\t//add class to cell if needed\n\t\tif(this.column.definition.cssClass){\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\telement.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.dispatch(\"cell-init\", this);\n\n\t\t//hide cell if not visible\n\t\tif(!this.column.visible){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//generate cell contents\n\t_generateContents(){\n\t\tvar val;\n\n\t\tval = this.chain(\"cell-format\", this, null, () => {\n\t\t\treturn this.element.innerHTML = this.value;\n\t\t});\n\n\t\tswitch(typeof val){\n\t\t\tcase \"object\":\n\t\t\t\tif(val instanceof Node){\n\n\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\t\t\t\tthis.element.appendChild(val);\n\t\t\t\t}else {\n\t\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\t\tif(val != null){\n\t\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tthis.element.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.element.innerHTML = val;\n\t\t}\n\t}\n\n\tcellRendered(){\n\t\tthis.dispatch(\"cell-rendered\", this);\n\t}\n\n\t//////////////////// Getters ////////////////////\n\tgetElement(containerOnly){\n\t\tif(!this.loaded){\n\t\t\tthis.loaded = true;\n\t\t\tif(!containerOnly){\n\t\t\t\tthis.layoutElement();\n\t\t\t}\n\t\t}\n\n\t\treturn this.element;\n\t}\n\n\tgetValue(){\n\t\treturn this.value;\n\t}\n\n\tgetOldValue(){\n\t\treturn this.oldValue;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tsetValue(value, mutate, force){\n\t\tvar changed = this.setValueProcessData(value, mutate, force);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-updated\", this);\n\n\t\t\tthis.cellRendered();\n\n\t\t\tif(this.column.definition.cellEdited){\n\t\t\t\tthis.column.definition.cellEdited.call(this.table, this.getComponent());\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"cellEdited\", this.getComponent());\n\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValueProcessData(value, mutate, force){\n\t\tvar changed = false;\n\n\t\tif(this.value !== value || force){\n\n\t\t\tchanged = true;\n\n\t\t\tif(mutate){\n\t\t\t\tvalue = this.chain(\"cell-value-changing\", [this, value], null, value);\n\t\t\t}\n\t\t}\n\n\t\tthis.setValueActual(value);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-changed\", this);\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tsetValueActual(value){\n\t\tthis.oldValue = this.value;\n\n\t\tthis.value = value;\n\n\t\tthis.dispatch(\"cell-value-save-before\", this);\n\n\t\tthis.column.setFieldValue(this.row.data, value);\n\n\t\tthis.dispatch(\"cell-value-save-after\", this);\n\n\t\tif(this.loaded){\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\n\tlayoutElement(){\n\t\tthis._generateContents();\n\n\t\tthis.dispatch(\"cell-layout\", this);\n\t}\n\n\tsetWidth(){\n\t\tthis.width = this.column.width;\n\t\tthis.element.style.width = this.column.widthStyled;\n\t}\n\n\tclearWidth(){\n\t\tthis.width = \"\";\n\t\tthis.element.style.width = \"\";\n\t}\n\n\tgetWidth(){\n\t\treturn this.width || this.element.offsetWidth;\n\t}\n\n\tsetMinWidth(){\n\t\tthis.minWidth = this.column.minWidth;\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\n\t}\n\n\tsetMaxWidth(){\n\t\tthis.maxWidth = this.column.maxWidth;\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\n\t}\n\n\tcheckHeight(){\n\t\t// var height = this.element.css(\"height\");\n\t\tthis.row.reinitializeHeight();\n\t}\n\n\tclearHeight(){\n\t\tthis.element.style.height = \"\";\n\t\tthis.height = null;\n\n\t\tthis.dispatch(\"cell-height\", this, \"\");\n\t}\n\n\tsetHeight(){\n\t\tthis.height = this.row.height;\n\t\tthis.element.style.height = this.row.heightStyled;\n\n\t\tthis.dispatch(\"cell-height\", this, this.row.heightStyled);\n\t}\n\n\tgetHeight(){\n\t\treturn this.height || this.element.offsetHeight;\n\t}\n\n\tshow(){\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n\t}\n\n\thide(){\n\t\tthis.element.style.display = \"none\";\n\t}\n\n\tdelete(){\n\t\tthis.dispatch(\"cell-delete\", this);\n\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\n\t\tthis.element = false;\n\t\tthis.column.deleteCell(this);\n\t\tthis.row.deleteCell(this);\n\t\tthis.calcs = {};\n\t}\n\n\tgetIndex(){\n\t\treturn this.row.getCellIndex(this);\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new CellComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n\n//public column object\nclass ColumnComponent {\n\tconstructor (column){\n\t\tthis._column = column;\n\t\tthis.type = \"ColumnComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else {\n\t\t\t\t\treturn target._column.table.componentFunctionBinder.handle(\"column\", target._column, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetElement(){\n\t\treturn this._column.getElement();\n\t}\n\n\tgetDefinition(){\n\t\treturn this._column.getDefinition();\n\t}\n\n\tgetField(){\n\t\treturn this._column.getField();\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this._column.getTitleDownload();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._column.cells.forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tisVisible(){\n\t\treturn this._column.visible;\n\t}\n\n\tshow(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.show();\n\t\t\t});\n\t\t}else {\n\t\t\tthis._column.show();\n\t\t}\n\t}\n\n\thide(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.hide();\n\t\t\t});\n\t\t}else {\n\t\t\tthis._column.hide();\n\t\t}\n\t}\n\n\ttoggle(){\n\t\tif(this._column.visible){\n\t\t\tthis.hide();\n\t\t}else {\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tdelete(){\n\t\treturn this._column.delete();\n\t}\n\n\tgetSubColumns(){\n\t\tvar output = [];\n\n\t\tif(this._column.columns.length){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\toutput.push(column.getComponent());\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetParentColumn(){\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._column;\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column, position, ifVisible);\n\t}\n\n\tgetTable(){\n\t\treturn this._column.table;\n\t}\n\n\tmove(to, after){\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\t\tif(toColumn){\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\n\t\t}else {\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t}\n\n\tgetNextColumn(){\n\t\tvar nextCol = this._column.nextColumn();\n\n\t\treturn nextCol ? nextCol.getComponent() : false;\n\t}\n\n\tgetPrevColumn(){\n\t\tvar prevCol = this._column.prevColumn();\n\n\t\treturn prevCol ? prevCol.getComponent() : false;\n\t}\n\n\tupdateDefinition(updates){\n\t\treturn this._column.updateDefinition(updates);\n\t}\n\n\tgetWidth(){\n\t\treturn this._column.getWidth();\n\t}\n\n\tsetWidth(width){\n\t\tvar result;\n\n\t\tif(width === true){\n\t\t\tresult =  this._column.reinitializeWidth(true);\n\t\t}else {\n\t\t\tresult =  this._column.setWidth(width);\n\t\t}\n\n\t\tthis._column.table.columnManager.rerenderColumns(true);\n\n\t\treturn result;\n\t}\n}\n\nvar defaultColumnOptions = {\n\t\"title\": undefined,\n\t\"field\": undefined,\n\t\"columns\": undefined,\n\t\"visible\": undefined,\n\t\"hozAlign\": undefined,\n\t\"vertAlign\": undefined,\n\t\"width\": undefined,\n\t\"minWidth\": 40,\n\t\"maxWidth\": undefined,\n\t\"maxInitialWidth\": undefined,\n\t\"cssClass\": undefined,\n\t\"variableHeight\": undefined,\n\t\"headerVertical\": undefined,\n\t\"headerHozAlign\": undefined,\n\t\"headerWordWrap\": false,\n\t\"editableTitle\": undefined,\n};\n\nclass Column extends CoreFeature{\n\n\tconstructor(def, parent){\n\t\tsuper(parent.table);\n\n\t\tthis.definition = def; //column definition\n\t\tthis.parent = parent; //hold parent object\n\t\tthis.type = \"column\"; //type of element\n\t\tthis.columns = []; //child columns\n\t\tthis.cells = []; //cells bound to this column\n\t\tthis.element = this.createElement(); //column header element\n\t\tthis.contentElement = false;\n\t\tthis.titleHolderElement = false;\n\t\tthis.titleElement = false;\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\n\t\tthis.isGroup = false;\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\n\t\tthis.vertAlign = \"\"; //vert text alignment\n\n\t\t//multi dimensional filed handling\n\t\tthis.field =\"\";\n\t\tthis.fieldStructure = \"\";\n\t\tthis.getFieldValue = \"\";\n\t\tthis.setFieldValue = \"\";\n\n\t\tthis.titleDownload = null;\n\t\tthis.titleFormatterRendered = false;\n\n\t\tthis.mapDefinitions();\n\n\t\tthis.setField(this.definition.field);\n\n\t\tthis.modules = {}; //hold module variables;\n\n\t\tthis.width = null; //column width\n\t\tthis.widthStyled = \"\"; //column width pre-styled to improve render efficiency\n\t\tthis.maxWidth = null; //column maximum width\n\t\tthis.maxWidthStyled = \"\"; //column maximum pre-styled to improve render efficiency\n\t\tthis.maxInitialWidth = null;\n\t\tthis.minWidth = null; //column minimum width\n\t\tthis.minWidthStyled = \"\"; //column minimum pre-styled to improve render efficiency\n\t\tthis.widthFixed = false; //user has specified a width for this column\n\n\t\tthis.visible = true; //default visible state\n\n\t\tthis.component = null;\n\n\t\t//initialize column\n\t\tif(this.definition.columns){\n\n\t\t\tthis.isGroup = true;\n\n\t\t\tthis.definition.columns.forEach((def, i) => {\n\t\t\t\tvar newCol = new Column(def, this);\n\t\t\t\tthis.attachColumn(newCol);\n\t\t\t});\n\n\t\t\tthis.checkColumnVisibility();\n\t\t}else {\n\t\t\tparent.registerColumnField(this);\n\t\t}\n\n\t\tthis._initialize();\n\t}\n\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.setAttribute(\"role\", \"columnheader\");\n\t\tel.setAttribute(\"aria-sort\", \"none\");\n\n\t\tswitch(this.table.options.columnHeaderVertAlign){\n\t\t\tcase \"middle\":\n\t\t\t\tel.style.justifyContent = \"center\";\n\t\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tel.style.justifyContent = \"flex-end\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn el;\n\t}\n\n\tcreateGroupElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col-group-cols\");\n\n\t\treturn el;\n\t}\n\n\tmapDefinitions(){\n\t\tvar defaults = this.table.options.columnDefaults;\n\n\t\t//map columnDefaults onto column definitions\n\t\tif(defaults){\n\t\t\tfor(let key in defaults){\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\n\t\t\t\t\tthis.definition[key] = defaults[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition);\n\t}\n\n\tcheckDefinition(){\n\t\tObject.keys(this.definition).forEach((key) => {\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetField(field){\n\t\tthis.field = field;\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n\t}\n\n\t//register column position with column manager\n\tregisterColumnPosition(column){\n\t\tthis.parent.registerColumnPosition(column);\n\t}\n\n\t//register column position with column manager\n\tregisterColumnField(column){\n\t\tthis.parent.registerColumnField(column);\n\t}\n\n\t//trigger position registration\n\treRegisterPosition(){\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolumn.reRegisterPosition();\n\t\t\t});\n\t\t}else {\n\t\t\tthis.registerColumnPosition(this);\n\t\t}\n\t}\n\n\t//build header element\n\t_initialize(){\n\t\tvar def = this.definition;\n\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\tif(def.headerVertical){\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\n\n\t\t\tif(def.headerVertical === \"flip\"){\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t\t}\n\t\t}\n\n\t\tthis.contentElement = this._buildColumnHeaderContent();\n\n\t\tthis.element.appendChild(this.contentElement);\n\n\t\tif(this.isGroup){\n\t\t\tthis._buildGroupHeader();\n\t\t}else {\n\t\t\tthis._buildColumnHeader();\n\t\t}\n\n\t\tthis.dispatch(\"column-init\", this);\n\t}\n\n\t//build header element for header\n\t_buildColumnHeader(){\n\t\tvar def = this.definition;\n\n\t\tthis.dispatch(\"column-layout\", this);\n\n\t\t//set column visibility\n\t\tif(typeof def.visible != \"undefined\"){\n\t\t\tif(def.visible){\n\t\t\t\tthis.show(true);\n\t\t\t}else {\n\t\t\t\tthis.hide(true);\n\t\t\t}\n\t\t}\n\n\t\t//assign additional css classes to column header\n\t\tif(def.cssClass){\n\t\t\tvar classNames = def.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tif(def.field){\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t\t}\n\n\t\t//set min width if present\n\t\tthis.setMinWidth(parseInt(def.minWidth));\n\n\t\tif (def.maxInitialWidth) {\n\t\t\tthis.maxInitialWidth = parseInt(def.maxInitialWidth);\n\t\t}\n\t\t\n\t\tif(def.maxWidth){\n\t\t\tthis.setMaxWidth(parseInt(def.maxWidth));\n\t\t}\n\n\t\tthis.reinitializeWidth();\n\n\t\t//set horizontal text alignment\n\t\tthis.hozAlign = this.definition.hozAlign;\n\t\tthis.vertAlign = this.definition.vertAlign;\n\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t}\n\n\t_buildColumnHeaderContent(){\n\t\tvar contentElement = document.createElement(\"div\");\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\n\n\t\tthis.titleHolderElement = document.createElement(\"div\");\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n\n\t\tcontentElement.appendChild(this.titleHolderElement);\n\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\n\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\n\n\t\treturn contentElement;\n\t}\n\n\t//build title element of column\n\t_buildColumnHeaderTitle(){\n\t\tvar def = this.definition;\n\n\t\tvar titleHolderElement = document.createElement(\"div\");\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\t\t\n\t\tif(def.headerWordWrap){\n\t\t\ttitleHolderElement.classList.add(\"tabulator-col-title-wrap\");\n\t\t}\n\n\t\tif(def.editableTitle){\n\t\t\tvar titleElement = document.createElement(\"input\");\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttitleElement.focus();\n\t\t\t});\n\n\t\t\ttitleElement.addEventListener(\"change\", () => {\n\t\t\t\tdef.title = titleElement.value;\n\t\t\t\tthis.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n\t\t\t});\n\n\t\t\ttitleHolderElement.appendChild(titleElement);\n\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\n\t\t\t}\n\n\t\t}else {\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t\t}\n\t\t}\n\n\t\treturn titleHolderElement;\n\t}\n\n\t_formatColumnHeaderTitle(el, title){\n\t\tvar contents = this.chain(\"column-format\", [this, title, el], null, () => {\n\t\t\treturn title;\n\t\t});\n\n\t\tswitch(typeof contents){\n\t\t\tcase \"object\":\n\t\t\t\tif(contents instanceof Node){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else {\n\t\t\t\t\tel.innerHTML = \"\";\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tel.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tel.innerHTML = contents;\n\t\t}\n\t}\n\n\t//build header element for column group\n\t_buildGroupHeader(){\n\t\tthis.element.classList.add(\"tabulator-col-group\");\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\n\t\t//asign additional css classes to column header\n\t\tif(this.definition.cssClass){\n\t\t\tvar classNames = this.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\n\t\tthis.element.appendChild(this.groupElement);\n\t}\n\n\t//flat field lookup\n\t_getFlatData(data){\n\t\treturn data[this.field];\n\t}\n\n\t//nested field lookup\n\t_getNestedData(data){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length,\n\t\toutput;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tdataObj = dataObj[structure[i]];\n\n\t\t\toutput = dataObj;\n\n\t\t\tif(!dataObj){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//flat field set\n\t_setFlatData(data, value){\n\t\tif(this.field){\n\t\t\tdata[this.field] = value;\n\t\t}\n\t}\n\n\t//nested field set\n\t_setNestedData(data, value){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tif(i == length -1){\n\t\t\t\tdataObj[structure[i]] = value;\n\t\t\t}else {\n\t\t\t\tif(!dataObj[structure[i]]){\n\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\tdataObj[structure[i]] = {};\n\t\t\t\t\t}else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t}\n\t\t}\n\t}\n\n\t//attach column to this group\n\tattachColumn(column){\n\t\tif(this.groupElement){\n\t\t\tthis.columns.push(column);\n\t\t\tthis.groupElement.appendChild(column.getElement());\n\n\t\t\tcolumn.columnRendered();\n\t\t}else {\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t\t}\n\t}\n\n\t//vertically align header in column\n\tverticalAlign(alignment, height){\n\n\t\t//calculate height of column header and group holder element\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n\t\tthis.element.style.height = parentHeight + \"px\";\n\n\t\tthis.dispatch(\"column-height\", this, this.element.style.height);\n\n\t\tif(this.isGroup){\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t}\n\n\t\t//vertically align cell contents\n\t\t// if(!this.isGroup && alignment !== \"top\"){\n\t\t// \tif(alignment === \"bottom\"){\n\t\t// \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t// \t}else{\n\t\t// \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\n\t\t// \t}\n\t\t// }\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.verticalAlign(alignment);\n\t\t});\n\t}\n\n\t//clear vertical alignment\n\tclearVerticalAlign(){\n\t\tthis.element.style.paddingTop = \"\";\n\t\tthis.element.style.height = \"\";\n\t\tthis.element.style.minHeight = \"\";\n\t\tthis.groupElement.style.minHeight = \"\";\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.clearVerticalAlign();\n\t\t});\n\n\t\tthis.dispatch(\"column-height\", this, \"\");\n\t}\n\n\t//// Retrieve Column Information ////\n\t//return column header element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\t//return column group element\n\tgetGroupElement(){\n\t\treturn this.groupElement;\n\t}\n\n\t//return field name\n\tgetField(){\n\t\treturn this.field;\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this.titleDownload;\n\t}\n\n\t//return the first column in a group\n\tgetFirstColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else {\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[0].getFirstColumn();\n\t\t\t}else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//return the last column in a group\n\tgetLastColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else {\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\n\t\t\t}else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//return all columns in a group\n\tgetColumns(traverse){\n\t\tvar columns = [];\n\n\t\tif(traverse){\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumns.push(column);\n\t\t\t\t\t\n\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t});\n\t\t}else {\n\t\t\tcolumns = this.columns;\n\t\t}\n\t\t\n\t\treturn columns;\n\t}\n\n\t//return all columns in a group\n\tgetCells(){\n\t\treturn this.cells;\n\t}\n\n\t//retrieve the top column in a group of columns\n\tgetTopColumn(){\n\t\tif(this.parent.isGroup){\n\t\t\treturn this.parent.getTopColumn();\n\t\t}else {\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t//return column definition object\n\tgetDefinition(updateBranches){\n\t\tvar colDefs = [];\n\n\t\tif(this.isGroup && updateBranches){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t\t});\n\n\t\t\tthis.definition.columns = colDefs;\n\t\t}\n\n\t\treturn this.definition;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tcheckColumnVisibility(){\n\t\tvar visible = false;\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tif(column.visible){\n\t\t\t\tvisible = true;\n\t\t\t}\n\t\t});\n\n\t\tif(visible){\n\t\t\tthis.show();\n\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t}else {\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//show column\n\tshow(silent, responsiveToggle){\n\t\tif(!this.visible){\n\t\t\tthis.visible = true;\n\n\t\t\tthis.element.style.display = \"\";\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.show();\n\t\t\t});\n\n\t\t\tif(!this.isGroup && this.width === null){\n\t\t\t\tthis.reinitializeWidth();\n\t\t\t}\n\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\n\t\t\tthis.dispatch(\"column-show\", this, responsiveToggle);\n\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\n\t\t\t}\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\n\t//hide column\n\thide(silent, responsiveToggle){\n\t\tif(this.visible){\n\t\t\tthis.visible = false;\n\n\t\t\tthis.element.style.display = \"none\";\n\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.hide();\n\t\t\t});\n\n\t\t\tthis.dispatch(\"column-hide\", this, responsiveToggle);\n\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t\t}\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\n\tmatchChildWidths(){\n\t\tvar childWidth = 0;\n\n\t\tif(this.contentElement && this.columns.length){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\tchildWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveChild(child){\n\t\tvar index = this.columns.indexOf(child);\n\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\n\t\tif(!this.columns.length){\n\t\t\tthis.delete();\n\t\t}\n\t}\n\n\tsetWidth(width){\n\t\tthis.widthFixed = true;\n\t\tthis.setWidthActual(width);\n\t}\n\n\tsetWidthActual(width){\n\t\tif(isNaN(width)){\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\n\t\t}\n\n\t\twidth = Math.max(this.minWidth, width);\n\n\t\tif(this.maxWidth){\n\t\t\twidth = Math.min(this.maxWidth, width);\n\t\t}\n\n\t\tthis.width = width;\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\n\n\t\tthis.element.style.width = this.widthStyled;\n\n\t\tif(!this.isGroup){\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.setWidth();\n\t\t\t});\n\t\t}\n\n\t\tif(this.parent.isGroup){\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\n\t\tthis.dispatch(\"column-width\", this);\n\t}\n\n\tcheckCellHeights(){\n\t\tvar rows = [];\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tif(cell.row.heightInitialized){\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\n\t\t\t\t\trows.push(cell.row);\n\t\t\t\t\tcell.row.clearCellHeight();\n\t\t\t\t}else {\n\t\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\trows.forEach(function(row){\n\t\t\trow.calcHeight();\n\t\t});\n\n\t\trows.forEach(function(row){\n\t\t\trow.setCellHeight();\n\t\t});\n\t}\n\n\tgetWidth(){\n\t\tvar width = 0;\n\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\twidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\twidth = this.width;\n\t\t}\n\n\t\treturn width;\n\t}\n\n\tgetLeftOffset(){\n\t\tvar offset = this.element.offsetLeft;\n\n\t\tif(this.parent.isGroup){\n\t\t\toffset += this.parent.getLeftOffset();\n\t\t}\n\n\t\treturn offset;\n\t}\n\n\tgetHeight(){\n\t\treturn Math.ceil(this.element.getBoundingClientRect().height);\n\t}\n\n\tsetMinWidth(minWidth){\n\t\tif(this.maxWidth && minWidth > this.maxWidth){\n\t\t\tminWidth = this.maxWidth;\n\n\t\t\tconsole.warn(\"the minWidth (\"+ minWidth + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\"+ this.maxWidthStyled + \")\");\n\t\t}\n\n\t\tthis.minWidth = minWidth;\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\n\t\tthis.element.style.minWidth = this.minWidthStyled;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMinWidth();\n\t\t});\n\t}\n\n\tsetMaxWidth(maxWidth){\n\t\tif(this.minWidth && maxWidth < this.minWidth){\n\t\t\tmaxWidth = this.minWidth;\n\n\t\t\tconsole.warn(\"the maxWidth (\"+ maxWidth + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\"+ this.minWidthStyled + \")\");\n\t\t}\n\n\t\tthis.maxWidth = maxWidth;\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\n\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMaxWidth();\n\t\t});\n\t}\n\n\tdelete(){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(this.isGroup){\n\t\t\t\tthis.columns.forEach(function(column){\n\t\t\t\t\tcolumn.delete();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.dispatch(\"column-delete\", this);\n\n\t\t\tvar cellCount = this.cells.length;\n\n\t\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\t\tthis.cells[0].delete();\n\t\t\t}\n\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\n\t\t\tthis.element = false;\n\t\t\tthis.contentElement = false;\n\t\t\tthis.titleElement = false;\n\t\t\tthis.groupElement = false;\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.removeChild(this);\n\t\t\t}\n\n\t\t\tthis.table.columnManager.deregisterColumn(this);\n\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\n\t\t\tresolve();\n\t\t});\n\t}\n\n\tcolumnRendered(){\n\t\tif(this.titleFormatterRendered){\n\t\t\tthis.titleFormatterRendered();\n\t\t}\n\n\t\tthis.dispatch(\"column-rendered\", this);\n\t}\n\n\t//////////////// Cell Management /////////////////\n\t//generate cell for this column\n\tgenerateCell(row){\n\t\tvar cell = new Cell(this, row);\n\n\t\tthis.cells.push(cell);\n\n\t\treturn cell;\n\t}\n\n\tnextColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n\t}\n\n\t_nextVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n\t}\n\n\tprevColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n\t}\n\n\t_prevVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n\t}\n\n\treinitializeWidth(force){\n\t\tthis.widthFixed = false;\n\n\t\t//set width if present\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\n\t\t\t// maxInitialWidth ignored here as width specified\n\t\t\tthis.setWidth(this.definition.width);\n\t\t}\n\n\t\tthis.dispatch(\"column-width-fit-before\", this);\n\n\t\tthis.fitToData(force);\n\n\t\tthis.dispatch(\"column-width-fit-after\", this);\n\t}\n\n\t//set column width to maximum cell width for non group columns\n\tfitToData(force){\n\t\tif(this.isGroup){\n\t\t\treturn;\n\t\t}\n\n\t\tif(!this.widthFixed){\n\t\t\tthis.element.style.width = \"\";\n\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tcell.clearWidth();\n\t\t\t});\n\t\t}\n\n\t\tvar maxWidth = this.element.offsetWidth;\n\n\t\tif(!this.width || !this.widthFixed){\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tvar width = cell.getWidth();\n\n\t\t\t\tif(width > maxWidth){\n\t\t\t\t\tmaxWidth = width;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(maxWidth){\n\t\t\t\tvar setTo = maxWidth + 1;\n\t\t\t\tif (this.maxInitialWidth && !force) {\n\t\t\t\t\tsetTo = Math.min(setTo, this.maxInitialWidth);\n\t\t\t\t}\n\t\t\t\tthis.setWidthActual(setTo);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateDefinition(updates){\n\t\tvar definition;\n\n\t\tif(!this.isGroup){\n\t\t\tif(!this.parent.isGroup){\n\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\n\t\t\t\tdefinition = Object.assign(definition, updates);\n\n\t\t\t\treturn this.table.columnManager.addColumn(definition, false, this)\n\t\t\t\t\t.then((column) => {\n\n\t\t\t\t\t\tif(definition.field == this.field){\n\t\t\t\t\t\t\tthis.field = false; //clear field name to prevent deletion of duplicate column from arrays\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.delete()\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t}\n\t}\n\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new ColumnComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n\nColumn.defaultOptionList = defaultColumnOptions;\n\n//public row object\nclass RowComponent {\n\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else {\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\tgetIndex(){\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\n\t}\n\n\tgetPosition(){\n\t\treturn this._row.getPosition();\n\t}\n\n\twatchPosition(callback){\n\t\treturn this._row.watchPosition(callback);\n\t}\n\n\tdelete(){\n\t\treturn this._row.delete();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._row.table.rowManager.scrollToRow(this._row, position, ifVisible);\n\t}\n\n\tmove(to, after){\n\t\tthis._row.moveToRow(to, after);\n\t}\n\n\tupdate(data){\n\t\treturn this._row.updateData(data);\n\t}\n\n\tnormalizeHeight(){\n\t\tthis._row.normalizeHeight(true);\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n\n\treformat(){\n\t\treturn this._row.reinitialize();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetNextRow(){\n\t\tvar row = this._row.nextRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n\n\tgetPrevRow(){\n\t\tvar row = this._row.prevRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n}\n\nclass Row extends CoreFeature{\n\tconstructor (data, parent, type = \"row\"){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.parent = parent;\n\t\tthis.data = {};\n\t\tthis.type = type; //type of element\n\t\tthis.element = false;\n\t\tthis.modules = {}; //hold module variables;\n\t\tthis.cells = [];\n\t\tthis.height = 0; //hold element height\n\t\tthis.heightStyled = \"\"; //hold element height pre-styled to improve render efficiency\n\t\tthis.manualHeight = false; //user has manually set row height\n\t\tthis.outerHeight = 0; //hold elements outer height\n\t\tthis.initialized = false; //element has been rendered\n\t\tthis.heightInitialized = false; //element has resized cells to fit\n\t\tthis.position = 0; //store position of element in row list\n\t\tthis.positionWatchers = [];\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.created = false;\n\t\t\n\t\tthis.setData(data);\n\t}\n\t\n\tcreate(){\n\t\tif(!this.created){\n\t\t\tthis.created = true;\n\t\t\tthis.generateElement();\n\t\t}\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\tthis.element = el;\n\t}\n\t\n\tgetElement(){\n\t\tthis.create();\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.createElement();\n\t\tthis.dispatch(\"row-init\", this);\n\t}\n\t\n\tgenerateCells(){\n\t\tthis.cells = this.table.columnManager.generateCells(this);\n\t}\n\t\n\t//functions to setup on first render\n\tinitialize(force, inFragment){\n\t\tthis.create();\n\t\t\n\t\tif(!this.initialized || force){\n\t\t\t\n\t\t\tthis.deleteCells();\n\t\t\t\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-before\", this);\n\t\t\t\n\t\t\tthis.generateCells();\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t\t\n\t\t\tthis.table.columnManager.renderer.renderRowCells(this, inFragment);\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.normalizeHeight();\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout\", this);\n\t\t\t\n\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-after\", this);\n\t\t}else {\n\t\t\tthis.table.columnManager.renderer.rerenderRowCells(this, inFragment);\n\t\t}\n\t}\n\n\trendered(){\n\t\tthis.cells.forEach((cell) => {\n\t\t\tcell.cellRendered();\n\t\t});\n\t}\n\t\n\treinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.normalizeHeight(true);\n\t\t}\n\t}\n\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tdeinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t}\n\t\n\treinitialize(children){\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(!this.manualHeight){\n\t\t\tthis.height = 0;\n\t\t\tthis.heightStyled = \"\";\n\t\t}\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.initialize(true);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"row-relayout\", this);\n\t}\n\t\n\t//get heights when doing bulk row style calcs in virtual DOM\n\tcalcHeight(force){\n\t\tvar maxHeight = 0,\n\t\tminHeight;\n\t\t\n\t\tif(this.table.options.rowHeight){\n\t\t\tthis.height = this.table.options.rowHeight;\n\t\t}else {\n\t\t\tminHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tvar height = cell.getHeight();\n\t\t\t\tif(height > maxHeight){\n\t\t\t\t\tmaxHeight = height;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.height = Math.max(maxHeight, minHeight);\n\t\t\t}else {\n\t\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t}\n\t\n\t//set of cells\n\tsetCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setHeight();\n\t\t});\n\t\t\n\t\tthis.heightInitialized = true;\n\t}\n\t\n\tclearCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.clearHeight();\n\t\t});\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(force){\n\t\tif(force && !this.table.options.rowHeight){\n\t\t\tthis.clearCellHeight();\n\t\t}\n\t\t\n\t\tthis.calcHeight(force);\n\t\t\n\t\tthis.setCellHeight();\n\t}\n\t\n\t//set height of rows\n\tsetHeight(height, force){\n\t\tif(this.height != height || force){\n\t\t\t\n\t\t\tthis.manualHeight = true;\n\t\t\t\n\t\t\tthis.height = height;\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\t\t\t\n\t\t\tthis.setCellHeight();\n\t\t\t\n\t\t\t// this.outerHeight = this.element.outerHeight();\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\t//return rows outer Width\n\tgetWidth(){\n\t\treturn this.element.offsetWidth;\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Data Management /////////////////\n\tsetData(data){\n\t\tthis.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\n\t\t\n\t\tthis.dispatch(\"row-data-init-after\", this);\n\t}\n\t\n\t//update the rows data\n\tupdateData(updatedData){\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\n\t\ttempData = {},\n\t\tnewRowData;\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof updatedData === \"string\"){\n\t\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-before\", this);\n\t\t\t\n\t\t\tif(this.subscribed(\"row-data-changing\")){\n\t\t\t\ttempData = Object.assign(tempData, this.data);\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tnewRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\n\t\t\t\n\t\t\t//set data\n\t\t\tfor (let attrname in newRowData) {\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-after\", this);\n\t\t\t\n\t\t\t//update affected cells only\n\t\t\tfor (let attrname in updatedData) {\n\t\t\t\t\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\n\t\t\t\t\n\t\t\t\tcolumns.forEach((column) => {\n\t\t\t\t\tlet cell = this.getCell(column.getField());\n\t\t\t\t\t\n\t\t\t\t\tif(cell){\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\n\t\t\t\t\t\tif(cell.getValue() !== value){\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(visible){\n\t\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//Partial reinitialization if visible\n\t\t\tif(visible){\n\t\t\t\tthis.normalizeHeight(true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.initialized = false;\n\t\t\t\tthis.height = 0;\n\t\t\t\tthis.heightStyled = \"\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-changed\", this, visible, updatedData);\n\t\t\t\n\t\t\t//this.reinitialize();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"rowUpdated\", this.getComponent());\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tgetData(transform){\n\t\tif(transform){\n\t\t\treturn this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\tgetCell(column){\n\t\tvar match = false;\n\t\t\n\t\tcolumn = this.table.columnManager.findColumn(column);\n\t\t\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\tmatch = this.cells.find(function(cell){\n\t\t\treturn cell.column === column;\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetCellIndex(findCell){\n\t\treturn this.cells.findIndex(function(cell){\n\t\t\treturn cell === findCell;\n\t\t});\n\t}\n\t\n\tfindCell(subject){\n\t\treturn this.cells.find((cell) => {\n\t\t\treturn cell.element === subject;\n\t\t});\n\t}\n\t\n\tgetCells(){\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\treturn this.cells;\n\t}\n\t\n\tnextRow(){\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tprevRow(){\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tmoveToRow(to, before){\n\t\tvar toRow = this.table.rowManager.findRow(to);\n\t\t\n\t\tif(toRow){\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t\t}else {\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t\t}\n\t}\n\t\n\t///////////////////// Actions  /////////////////////\n\tdelete(){\n\t\tthis.dispatch(\"row-delete\", this);\n\t\t\n\t\tthis.deleteActual();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\tdeleteActual(blockRedraw){\n\t\tthis.detachModules();\n\t\t\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\t\t\n\t\tthis.deleteCells();\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\tthis.element = false;\n\t\t\n\t\tthis.dispatch(\"row-deleted\", this);\n\t}\n\t\n\tdetachModules(){\n\t\tthis.dispatch(\"row-deleting\", this);\n\t}\n\t\n\tdeleteCells(){\n\t\tvar cellCount = this.cells.length;\n\t\t\n\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\tthis.cells[0].delete();\n\t\t}\n\t}\n\t\n\twipe(){\n\t\tthis.detachModules();\n\t\tthis.deleteCells();\n\t\t\n\t\tif(this.element){\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.modules = {};\n\t}\n\n\tisDisplayed(){\n\t\treturn this.table.rowManager.getDisplayRows().includes(this);\n\t}\n\n\tgetPosition(){\n\t\treturn this.isDisplayed() ? this.position : false;\n\t}\n\n\tsetPosition(position){\n\t\tif(position != this.position){\n\t\t\tthis.position = position;\n\n\t\t\tthis.positionWatchers.forEach((callback) => {\n\t\t\t\tcallback(this.position);\n\t\t\t});\n\t\t}\n\t}\n\n\twatchPosition(callback){\n\t\tthis.positionWatchers.push(callback);\n\n\t\tcallback(this.position);\n\t}\n\t\n\tgetGroup(){\n\t\treturn this.modules.group || false;\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new RowComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n\nvar defaultCalculations = {\n\t\"avg\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn Number(sum) + Number(value);\n\t\t\t});\n\n\t\t\toutput = output / values.length;\n\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t}\n\n\t\treturn parseFloat(output).toString();\n\t},\n\t\"max\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value > output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"min\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value < output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"sum\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t});\n\t\t}\n\n\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t},\n\t\"concat\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn String(sum) + String(value);\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"count\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tif(value){\n\t\t\t\t\toutput ++;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"unique\":function(values, data, calcParams){\n\t\tvar unique = values.filter((value, index) => {\n\t\t\treturn (values || value === 0) && values.indexOf(value) === index;\n\t\t});\n\n\t\treturn unique.length;\n\t},\n};\n\nclass ColumnCalcs extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.topCalcs = [];\n\t\tthis.botCalcs = [];\n\t\tthis.genColumn = false;\n\t\tthis.topElement = this.createElement();\n\t\tthis.botElement = this.createElement();\n\t\tthis.topRow = false;\n\t\tthis.botRow = false;\n\t\tthis.topInitialized = false;\n\t\tthis.botInitialized = false;\n\t\t\n\t\tthis.blocked = false;\n\t\tthis.recalcAfterBlock = false;\n\t\t\n\t\tthis.registerTableOption(\"columnCalcs\", true);\n\t\t\n\t\tthis.registerColumnOption(\"topCalc\");\n\t\tthis.registerColumnOption(\"topCalcParams\");\n\t\tthis.registerColumnOption(\"topCalcFormatter\");\n\t\tthis.registerColumnOption(\"topCalcFormatterParams\");\n\t\tthis.registerColumnOption(\"bottomCalc\");\n\t\tthis.registerColumnOption(\"bottomCalcParams\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatter\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatterParams\");\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-calcs-holder\");\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\n\t\t\n\t\tthis.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t\t\n\t\tthis.subscribe(\"redraw-blocked\", this.blockRedraw.bind(this));\n\t\tthis.subscribe(\"redraw-restored\", this.restoreRedraw.bind(this));\n\n\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t\n\t\tthis.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\n\t\tthis.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\n\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\t\n\ttableRedraw(force){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t\t\n\t\tif(force){\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.blocked = true;\n\t\tthis.recalcAfterBlock = false;\n\t}\n\t\n\t\n\trestoreRedraw(){\n\t\tthis.blocked = false;\n\t\t\n\t\tif(this.recalcAfterBlock){\n\t\t\tthis.recalcAfterBlock = false;\n\t\t\tthis.recalcActiveRowsRefresh();\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tuserRecalc(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tblockCheck(){\n\t\tif(this.blocked){\n\t\t\tthis.recalcAfterBlock = true;\n\t\t}\n\t\t\n\t\treturn this.blocked;\n\t}\n\t\n\tvisibleRows(viewable, rows){\n\t\tif(this.topRow){\n\t\t\trows.unshift(this.topRow);\n\t\t}\n\t\t\n\t\tif(this.botRow){\n\t\t\trows.push(this.botRow);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.recalcRowGroup(row);\n\t\t}else {\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRowsRefresh(){\n\t\tif(this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree){\n\t\t\tthis.recalcAll();\n\t\t}else {\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRows(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\tcellValueChanged(cell){\n\t\tif(cell.column.definition.topCalc || cell.column.definition.bottomCalc){\n\t\t\tif(this.table.options.groupBy){\n\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\n\t\t\t\t\tthis.recalcActiveRows();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.recalcRowGroup(cell.row);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinitializeColumnCheck(column){\n\t\tif(column.definition.topCalc || column.definition.bottomCalc){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//initialize column calcs\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\tvar config = {\n\t\t\ttopCalcParams:def.topCalcParams || {},\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\n\t\t};\n\t\t\n\t\tif(def.topCalc){\n\t\t\t\n\t\t\tswitch(typeof def.topCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\n\t\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc];\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.topCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.topCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeTopRow();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(def.bottomCalc){\n\t\t\tswitch(typeof def.bottomCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\n\t\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc];\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.botCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.botCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeBottomRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t//dummy functions to handle being mock column manager\n\tregisterColumnField(){}\n\t\n\tremoveCalcs(){\n\t\tvar changed = false;\n\t\t\n\t\tif(this.topInitialized){\n\t\t\tthis.topInitialized = false;\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(this.botInitialized){\n\t\t\tthis.botInitialized = false;\n\t\t\tthis.footerRemove(this.botElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\treinitializeCalcs(){\n\t\tif(this.topCalcs.length){\n\t\t\tthis.initializeTopRow();\n\t\t}\n\n\t\tif(this.botCalcs.length){\n\t\t\tthis.initializeBottomRow();\n\t\t}\n\t}\n\t\n\tinitializeTopRow(){\n\t\tif(!this.topInitialized){\n\t\t\tthis.table.columnManager.getContentsElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\t\t\tthis.topInitialized = true;\n\t\t}\n\t}\n\t\n\tinitializeBottomRow(){\n\t\tif(!this.botInitialized){\n\t\t\tthis.footerPrepend(this.botElement);\n\t\t\tthis.botInitialized = true;\n\t\t}\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tif(this.botInitialized && this.botRow){\n\t\t\tthis.botElement.scrollLeft = left;\n\t\t}\n\t}\n\t\n\trecalc(rows){\n\t\tvar data, row;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(this.topInitialized || this.botInitialized){\n\t\t\t\tdata = this.rowsToData(rows);\n\t\t\t\t\n\t\t\t\tif(this.topInitialized){\n\t\t\t\t\tif(this.topRow){\n\t\t\t\t\t\tthis.topRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"top\", data);\n\t\t\t\t\tthis.topRow = row;\n\t\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\n\t\t\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.botInitialized){\n\t\t\t\t\tif(this.botRow){\n\t\t\t\t\t\tthis.botRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"bottom\", data);\n\t\t\t\t\tthis.botRow = row;\n\t\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\n\t\t\t\t\tthis.botElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t\t\t\n\t\t\t\t//set resizable handles\n\t\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcRowGroup(row){\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n\t}\n\t\n\trecalcAll(){\n\t\tif(this.topCalcs.length || this.botCalcs.length){\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\n\t\t\t\t\n\t\t\t\tvar groups = this.table.modules.groupRows.getChildGroups();\n\t\t\t\t\n\t\t\t\tgroups.forEach((group) => {\n\t\t\t\t\tthis.recalcGroup(group);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcGroup(group){\n\t\tvar data, rowData;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(group){\n\t\t\t\tif(group.calcs){\n\t\t\t\t\tif(group.calcs.bottom){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(group.calcs.top){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"top\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//generate top stats row\n\tgenerateTopRow(rows){\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\n\t}\n\t//generate bottom stats row\n\tgenerateBottomRow(rows){\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n\t}\n\t\n\trowsToData(rows){\n\t\tvar data = [];\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tdata.push(row.getData());\n\t\t\t\n\t\t\tif(this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs){\n\t\t\t\tif(row.modules.dataTree && row.modules.dataTree.open){\n\t\t\t\t\tvar children = this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(row));\n\t\t\t\t\tdata = data.concat(children);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\t//generate stats row\n\tgenerateRow(pos, data){\n\t\tvar rowData = this.generateRowData(pos, data),\n\t\trow;\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.disable();\n\t\t}\n\t\t\n\t\trow = new Row(rowData, this, \"calc\");\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.enable();\n\t\t}\n\t\t\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\t\t\n\t\trow.component = false;\n\t\t\n\t\trow.getComponent = () => {\n\t\t\tif(!row.component){\n\t\t\t\trow.component = new CalcComponent(row);\n\t\t\t}\n\t\t\t\n\t\t\treturn row.component;\n\t\t};\n\t\t\n\t\trow.generateCells = () => {\n\t\t\t\n\t\t\tvar cells = [];\n\t\t\t\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\t\n\t\t\t\t//set field name of mock column\n\t\t\t\tthis.genColumn.setField(column.getField());\n\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\n\t\t\t\t\n\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}else {\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(\"plaintext\"),\n\t\t\t\t\t\tparams:{}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//ensure css class definition is replicated to calculation cell\n\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\n\t\t\t\t\n\t\t\t\t//generate cell and assign to correct column\n\t\t\t\tvar cell = new Cell(this.genColumn, row);\n\t\t\t\tcell.getElement();\n\t\t\t\tcell.column = column;\n\t\t\t\tcell.setWidth();\n\t\t\t\t\n\t\t\t\tcolumn.cells.push(cell);\n\t\t\t\tcells.push(cell);\n\t\t\t\t\n\t\t\t\tif(!column.visible){\n\t\t\t\t\tcell.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\trow.cells = cells;\n\t\t};\n\t\t\n\t\treturn row;\n\t}\n\t\n\t//generate stats row\n\tgenerateRowData(pos, data){\n\t\tvar rowData = {},\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t\tparams, paramKey;\n\t\t\n\t\tcalcs.forEach(function(column){\n\t\t\tvar values = [];\n\t\t\t\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\n\t\t\t\tdata.forEach(function(item){\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tparamKey = type + \"Params\";\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\t\t\t\t\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowData;\n\t}\n\t\n\thasTopCalcs(){\n\t\treturn\t!!(this.topCalcs.length);\n\t}\n\t\n\thasBottomCalcs(){\n\t\treturn\t!!(this.botCalcs.length);\n\t}\n\t\n\t//handle table redraw\n\tredraw(){\n\t\tif(this.topRow){\n\t\t\tthis.topRow.normalizeHeight(true);\n\t\t}\n\t\tif(this.botRow){\n\t\t\tthis.botRow.normalizeHeight(true);\n\t\t}\n\t}\n\t\n\t//return the calculated\n\tgetResults(){\n\t\tvar results = {},\n\t\tgroups;\n\t\t\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\t\t\t\n\t\t\tgroups.forEach((group) => {\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\n\t\t\t});\n\t\t}else {\n\t\t\tresults = {\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\n\t\t\t};\n\t\t}\n\t\t\n\t\treturn results;\n\t}\n\t\n\t//get results from a group\n\tgetGroupResults(group){\n\t\tvar groupObj = group._getSelf(),\n\t\tsubGroups = group.getSubGroups(),\n\t\tsubGroupResults = {},\n\t\tresults = {};\n\t\t\n\t\tsubGroups.forEach((subgroup) => {\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\n\t\t});\n\t\t\n\t\tresults = {\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\t\tgroups: subGroupResults,\n\t\t};\n\t\t\n\t\treturn results;\n\t}\n\t\n\tadjustForScrollbar(width){\n\t\tif(this.botRow){\n\t\t\tif(this.table.rtl){\n\t\t\t\tthis.botElement.style.paddingLeft = width + \"px\";\n\t\t\t}else {\n\t\t\t\tthis.botElement.style.paddingRight = width + \"px\";\n\t\t\t}\n\t\t}\n\t}\n}\n\nColumnCalcs.moduleName = \"columnCalcs\";\n\n//load defaults\nColumnCalcs.calculations = defaultCalculations;\n\nclass DataTree extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.indent = 10;\n\t\tthis.field = \"\";\n\t\tthis.collapseEl = null;\n\t\tthis.expandEl = null;\n\t\tthis.branchEl = null;\n\t\tthis.elementField = false;\n\n\t\tthis.startOpen = function(){};\n\n\t\tthis.registerTableOption(\"dataTree\", false); //enable data tree\n\t\tthis.registerTableOption(\"dataTreeFilter\", true); //filter child rows\n\t\tthis.registerTableOption(\"dataTreeSort\", true); //sort child rows\n\t\tthis.registerTableOption(\"dataTreeElementColumn\", false);\n\t\tthis.registerTableOption(\"dataTreeBranchElement\", true);//show data tree branch element\n\t\tthis.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\n\t\tthis.registerTableOption(\"dataTreeChildField\", \"_children\");//data tre column field to look for child rows\n\t\tthis.registerTableOption(\"dataTreeCollapseElement\", false);//data tree row collapse element\n\t\tthis.registerTableOption(\"dataTreeExpandElement\", false);//data tree row expand element\n\t\tthis.registerTableOption(\"dataTreeStartExpanded\", false);\n\t\tthis.registerTableOption(\"dataTreeChildColumnCalcs\", false);//include visible data tree rows in column calculations\n\t\tthis.registerTableOption(\"dataTreeSelectPropagate\", false);//selecting a parent row selects its children\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.dataTree){\n\t\t\tvar dummyEl = null,\n\t\t\toptions = this.table.options;\n\n\t\t\tthis.field = options.dataTreeChildField;\n\t\t\tthis.indent = options.dataTreeChildIndent;\n\n\t\t\tif(this.options(\"movableRows\")){\n\t\t\t\tconsole.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeBranchElement){\n\n\t\t\t\tif(options.dataTreeBranchElement === true){\n\t\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t\t\t}else {\n\t\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\n\t\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch-empty\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeCollapseElement){\n\t\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t\t\t}else {\n\t\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.collapseEl = document.createElement(\"div\");\n\t\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.collapseEl.tabIndex = 0;\n\t\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t\t\t}\n\n\t\t\tif(options.dataTreeExpandElement){\n\t\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t\t\t}else {\n\t\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.expandEl = document.createElement(\"div\");\n\t\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.expandEl.tabIndex = 0;\n\t\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t\t\t}\n\n\n\t\t\tswitch(typeof options.dataTreeStartExpanded){\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowDelete.bind(this),0);\n\t\t\tthis.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.initializeElementField.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this));\n\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 30);\n\t\t}\n\t}\n\n\ttableRedrawing(force){\n\t\tvar rows;\n\n\t\tif(force){\n\t\t\trows = this.table.rowManager.getRows();\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.reinitializeRowChildren(row);\n\t\t\t});\n\t\t}\n\t}\n\n\tinitializeElementField(){\n\t\tvar firstCol = this.table.columnManager.getFirstVisibleColumn();\n\n\t\tthis.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\t}\n\t\n\tgetRowChildren(row){\n\t\treturn this.getTreeChildren(row, true);\n\t}\n\n\tcolumnMoving(){\n\t\tvar rows = [];\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trows = rows.concat(this.getTreeChildren(row, false, true));\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\trowDataChanged(row, visible, updatedData){\n\t\tif(this.redrawNeeded(updatedData)){\n\t\t\tthis.initializeRow(row);\n\n\t\t\tif(visible){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tcellValueChanged(cell){\n\t\tvar field = cell.column.getField();\n\n\t\tif(field === this.elementField){\n\t\t\tthis.layoutRow(cell.row);\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar childArray = row.getData()[this.field];\n\t\tvar isArray = Array.isArray(childArray);\n\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t\t}\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t\t}\n\n\t\trow.modules.dataTree = {\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\t\tchildren:children,\n\t\t};\n\t}\n\n\treinitializeRowChildren(row){\n\t\tvar children = this.getTreeChildren(row, false, true);\n\n\t\tchildren.forEach(function(child){\n\t\t\tchild.reinitialize(true);\n\t\t});\n\t}\n\n\tlayoutRow(row){\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t\tel = cell.getElement(),\n\t\tconfig = row.modules.dataTree;\n\n\t\tif(config.branchEl){\n\t\t\tif(config.branchEl.parentNode){\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t\t}\n\t\t\tconfig.branchEl = false;\n\t\t}\n\n\t\tif(config.controlEl){\n\t\t\tif(config.controlEl.parentNode){\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t\t}\n\t\t\tconfig.controlEl = false;\n\t\t}\n\n\t\tthis.generateControlElement(row, el);\n\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\n\n\t\tif(config.index){\n\t\t\tif(this.branchEl){\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}else {\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}\n\t\t\t}else {\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}else {\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateControlElement(row, el){\n\t\tvar config = row.modules.dataTree,\n\t\toldControl = config.controlEl;\n\n\t\tel = el || row.getCells()[0].getElement();\n\n\t\tif(config.children !== false){\n\n\t\t\tif(config.open){\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.collapseRow(row);\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.expandRow(row);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif(oldControl && oldControl.parentNode === el){\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\n\t\t\t}else {\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRows(rows){\n\t\tvar output = [];\n\n\t\trows.forEach((row, i) => {\n\t\t\tvar config, children;\n\n\t\t\toutput.push(row);\n\n\t\t\tif(row instanceof Row){\n\n\t\t\t\trow.create();\n\n\t\t\t\tconfig = row.modules.dataTree;\n\n\t\t\t\tif(!config.index && config.children !== false){\n\t\t\t\t\tchildren = this.getChildren(row);\n\n\t\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\t\tchild.create();\n\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tgetChildren(row, allChildren){\n\t\tvar config = row.modules.dataTree,\n\t\tchildren = [],\n\t\toutput = [];\n\n\t\tif(config.children !== false && (config.open || allChildren)){\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else {\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\n\t\t\t\tthis.table.modules.sort.sort(children);\n\t\t\t}\n\n\t\t\tchildren.forEach((child) => {\n\t\t\t\toutput.push(child);\n\n\t\t\t\tvar subChildren = this.getChildren(child);\n\n\t\t\t\tsubChildren.forEach((sub) => {\n\t\t\t\t\toutput.push(sub);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgenerateChildren(row){\n\t\tvar children = [];\n\n\t\tvar childArray = row.getData()[this.field];\n\n\t\tif(!Array.isArray(childArray)){\n\t\t\tchildArray = [childArray];\n\t\t}\n\n\t\tchildArray.forEach((childData) => {\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\n\n\t\t\tchildRow.create();\n\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\t\tchildRow.modules.dataTree.parent = row;\n\n\t\t\tif(childRow.modules.dataTree.children){\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t\t}\n\t\t\tchildren.push(childRow);\n\t\t});\n\n\t\treturn children;\n\t}\n\n\texpandRow(row, silent){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = true;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\tcollapseRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = false;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\ttoggleRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tif(config.open){\n\t\t\t\tthis.collapseRow(row);\n\t\t\t}else {\n\t\t\t\tthis.expandRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowExpanded(row){\n\t\treturn row.modules.dataTree.open;\n\t}\n\n\tgetTreeParent(row){\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n\t}\n\n\tgetTreeParentRoot(row){\n\t\treturn row.modules.dataTree && row.modules.dataTree.parent ? this.getTreeParentRoot(row.modules.dataTree.parent) : row;\n\t}\n\n\tgetFilteredTreeChildren(row){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [], children;\n\n\t\tif(config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else {\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tchildren.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(childRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\trowDelete(row){\n\t\tvar parent = row.modules.dataTree.parent,\n\t\tchildIndex;\n\n\t\tif(parent){\n\t\t\tchildIndex = this.findChildIndex(row, parent);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\n\t\t\t}\n\n\t\t\tif(!parent.data[this.field].length){\n\t\t\t\tdelete parent.data[this.field];\n\t\t\t}\n\n\t\t\tthis.initializeRow(parent);\n\t\t\tthis.layoutRow(parent);\n\t\t}\n\n\t\tthis.refreshData(true);\n\t}\n\n\taddTreeChildRow(row, data, top, index){\n\t\tvar childIndex = false;\n\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif(!Array.isArray(row.data[this.field])){\n\t\t\trow.data[this.field] = [];\n\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tchildIndex = this.findChildIndex(index, row);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\n\t\t\t}\n\t\t}\n\n\t\tif(childIndex === false){\n\t\t\tif(top){\n\t\t\t\trow.data[this.field].unshift(data);\n\t\t\t}else {\n\t\t\t\trow.data[this.field].push(data);\n\t\t\t}\n\t\t}\n\n\t\tthis.initializeRow(row);\n\t\tthis.layoutRow(row);\n\n\t\tthis.refreshData(true);\n\t}\n\n\tfindChildIndex(subject, parent){\n\t\tvar match = false;\n\n\t\tif(typeof subject == \"object\"){\n\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\tmatch = subject.data;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\tmatch = subject._getSelf().data;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\tif(parent.modules.dataTree){\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tmatch = match.data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else if(subject === null){\n\t\t\t\tmatch = false;\n\t\t\t}\n\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\tmatch = false;\n\t\t}else {\n\t\t\t//subject should be treated as the index of the row\n\t\t\tmatch = parent.data[this.field].find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t}\n\n\t\tif(match){\n\n\t\t\tif(Array.isArray(parent.data[this.field])){\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\n\t\t\t}\n\n\t\t\tif(match == -1){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\t\treturn match;\n\t}\n\n\tgetTreeChildren(row, component, recurse){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [];\n\n\t\tif(config && config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tconfig.children.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\n\n\t\t\t\t\tif(recurse){\n\t\t\t\t\t\toutput = output.concat(this.getTreeChildren(childRow, component, recurse));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetChildField(){\n\t\treturn this.field;\n\t}\n\n\tredrawNeeded(data){\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n\t}\n}\n\nDataTree.moduleName = \"dataTree\";\n\nfunction csv(list, options = {}, setFileContents){\n\tvar delimiter = options.delimiter ? options.delimiter : \",\",\n\tfileContents = [],\n\theaders = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = [];\n\n\t\tswitch(row.type){\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"header\":\n\t\t\t\trow.columns.forEach((col, i) => {\n\t\t\t\t\tif(col && col.depth === 1){\n\t\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\n\t\t\t\t\tif(col){\n\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item.join(delimiter));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(headers.length){\n\t\tfileContents.unshift(headers.join(delimiter));\n\t}\n\n\tfileContents = fileContents.join(\"\\n\");\n\n\tif(options.bom){\n\t\tfileContents = \"\\ufeff\" + fileContents;\n\t}\n\n\tsetFileContents(fileContents, \"text/csv\");\n}\n\nfunction json(list, options, setFileContents){\n\tvar fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = {};\n\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif(col){\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\n\n\tsetFileContents(fileContents, \"application/json\");\n}\n\nfunction pdf(list, options = {}, setFileContents){\n\tvar header = [],\n\tbody = [],\n\tautoTableParams = {},\n\trowGroupStyles = options.rowGroupStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 12,\n\t\tcellPadding: 6,\n\t\tfillColor: 220,\n\t},\n\trowCalcStyles = options.rowCalcStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 10,\n\t\tcellPadding: 4,\n\t\tfillColor: 232,\n\t},\n\tjsPDFParams = options.jsPDF || {},\n\ttitle = options.title ? options.title : \"\";\n\n\tif(!jsPDFParams.orientation){\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t}\n\n\tif(!jsPDFParams.unit){\n\t\tjsPDFParams.unit = \"pt\";\n\t}\n\n\t//parse row list\n\tlist.forEach((row) => {\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\theader.push(parseRow(row));\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tbody.push(parseRow(row, rowGroupStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tbody.push(parseRow(row, rowCalcStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\tbody.push(parseRow(row));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfunction parseRow(row, styles){\n\t\tvar rowData = [];\n\n\t\trow.columns.forEach((col) =>{\n\t\t\tvar cell;\n\n\t\t\tif(col){\n\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcell = {\n\t\t\t\t\tcontent:col.value,\n\t\t\t\t\tcolSpan:col.width,\n\t\t\t\t\trowSpan:col.height,\n\t\t\t\t};\n\n\t\t\t\tif(styles){\n\t\t\t\t\tcell.styles = styles;\n\t\t\t\t}\n\n\t\t\t\trowData.push(cell);\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t}\n\n\n\t//configure PDF\n\tvar doc = new jspdf.jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n\tif(options.autoTable){\n\t\tif(typeof options.autoTable === \"function\"){\n\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t}else {\n\t\t\tautoTableParams = options.autoTable;\n\t\t}\n\t}\n\n\tif(title){\n\t\tautoTableParams.didDrawPage = function(data) {\n\t\t\tdoc.text(title, 40, 30);\n\t\t};\n\t}\n\n\tautoTableParams.head = header;\n\tautoTableParams.body = body;\n\n\tdoc.autoTable(autoTableParams);\n\n\tif(options.documentProcessing){\n\t\toptions.documentProcessing(doc);\n\t}\n\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n}\n\nfunction xlsx(list, options, setFileContents){\n\tvar self = this,\n\tsheetName = options.sheetName || \"Sheet1\",\n\tworkbook = XLSX.utils.book_new(),\n\ttableFeatures = new CoreFeature(this),\n\tcompression =  'compress' in options ? options.compress : true,\n\twriteOptions = options.writeOptions || {bookType:'xlsx', bookSST:true, compression},\n\toutput;\n\n\twriteOptions.type = 'binary';\n\n\tworkbook.SheetNames = [];\n\tworkbook.Sheets = {};\n\n\tfunction generateSheet(){\n\t\tvar rows = [],\n\t\tmerges = [],\n\t\tworksheet = {},\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\n\n\t\t//parse row list\n\t\tlist.forEach((row, i) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach(function(col, j){\n\n\t\t\t\tif(col){\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\n\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\n\t\t\t\t\t\tif(col.height > 1 || col.width > 1){\n\t\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\trowData.push(\"\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trows.push(rowData);\n\t\t});\n\n\t\t//convert rows to worksheet\n\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\n\n\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\n\n\t\tif(merges.length){\n\t\t\tworksheet[\"!merges\"] = merges;\n\t\t}\n\n\t\treturn worksheet;\n\t}\n\n\tif(options.sheetOnly){\n\t\tsetFileContents(generateSheet());\n\t\treturn;\n\t}\n\n\tif(options.sheets){\n\t\tfor(var sheet in options.sheets){\n\n\t\t\tif(options.sheets[sheet] === true){\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t}else {\n\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\ttableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\",{\n\t\t\t\t\ttype:\"xlsx\",\n\t\t\t\t\toptions:{sheetOnly:true},\n\t\t\t\t\tactive:self.active,\n\t\t\t\t\tintercept:function(data){\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}else {\n\t\tworkbook.SheetNames.push(sheetName);\n\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t}\n\n\tif(options.documentProcessing){\n\t\tworkbook = options.documentProcessing(workbook);\n\t}\n\n\t//convert workbook to binary array\n\tfunction s2ab(s) {\n\t\tvar buf = new ArrayBuffer(s.length);\n\t\tvar view = new Uint8Array(buf);\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n\t\treturn buf;\n\t}\n\n\toutput = XLSX.write(workbook, writeOptions);\n\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\n}\n\nfunction html(list, options, setFileContents){\n\tif(this.modExists(\"export\", true)){\n\t\tsetFileContents(this.modules.export.generateHTMLTable(list), \"text/html\");\n\t}\n}\n\nfunction jsonLines (list, options, setFileContents) {\n\tconst fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tconst item = {};\n\n\t\tswitch (row.type) {\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif (col) {\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(JSON.stringify(item));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tsetFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\n}\n\nvar defaultDownloaders = {\n\tcsv:csv,\n\tjson:json,\n\tjsonLines:jsonLines,\n\tpdf:pdf,\n\txlsx:xlsx,\n\thtml:html,\n};\n\nclass Download extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.registerTableOption(\"downloadEncoder\", function(data, mimeType){\n\t\t\treturn new Blob([data],{type:mimeType});\n\t\t}); //function to manipulate download data\n\t\tthis.registerTableOption(\"downloadReady\", undefined); //warn of function deprecation\n\t\tthis.registerTableOption(\"downloadConfig\", {}); //download config\n\t\tthis.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\n\n\t\tthis.registerColumnOption(\"download\");\n\t\tthis.registerColumnOption(\"titleDownload\");\n\t}\n\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\n\t\tthis.registerTableFunction(\"download\", this.download.bind(this));\n\t\tthis.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n\t}\n\n\tdeprecatedOptionsCheck(){\n\t\tthis.deprecationCheck(\"downloadReady\", \"downloadEncoder\");\n\t}\t\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tdownloadToTab(type, filename, options, active){\n\t\tthis.download(type, filename, options, active, true);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//trigger file download\n\tdownload(type, filename, options, range, interceptCallback){\n\t\tvar downloadFunc = false;\n\n\t\tfunction buildLink(data, mime){\n\t\t\tif(interceptCallback){\n\t\t\t\tif(interceptCallback === true){\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\n\t\t\t\t}else {\n\t\t\t\t\tinterceptCallback(data);\n\t\t\t\t}\n\n\t\t\t}else {\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\n\t\t\t}\n\t\t}\n\n\t\tif(typeof type == \"function\"){\n\t\t\tdownloadFunc = type;\n\t\t}else {\n\t\t\tif(Download.downloaders[type]){\n\t\t\t\tdownloadFunc = Download.downloaders[type];\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t\t}\n\t\t}\n\n\t\tif(downloadFunc){\n\t\t\tvar list = this.generateExportList(range);\n\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink.bind(this));\n\t\t}\n\t}\n\n\tgenerateExportList(range){\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n\t\t//assign group header formatter\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\n\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\n\t\t\tgroupHeader = [groupHeader];\n\t\t}\n\n\t\tlist.forEach((row) => {\n\t\t\tvar group;\n\n\t\t\tif(row.type === \"group\"){\n\t\t\t\tgroup = row.columns[0];\n\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn list;\n\t}\n\n\ttriggerDownload(data, mime, type, filename, newTab){\n\t\tvar element = document.createElement('a'),\n\t\tblob = this.table.options.downloadEncoder(data, mime);\n\n\t\tif(blob){\n\t\t\tif(newTab){\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t\t}else {\n\t\t\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\t\t\t\t\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t\t}else {\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t\t//set file title\n\t\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t\t//trigger download\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\t\telement.click();\n\n\t\t\t\t\t//remove temporary link element\n\t\t\t\t\tdocument.body.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"downloadComplete\");\n\t\t}\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"intercept\":\n\t\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nDownload.moduleName = \"download\";\n\n//load defaults\nDownload.downloaders = defaultDownloaders;\n\nfunction maskInput(el, options){\n\tvar mask = options.mask,\n\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\";\n\n\tfunction fillSymbols(index){\n\t\tvar symbol = mask[index];\n\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\n\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\tfillSymbols(index+1);\n\t\t}\n\t}\n\n\tel.addEventListener(\"keydown\", (e) => {\n\t\tvar index = el.value.length,\n\t\tchar = e.key;\n\n\t\tif(e.keyCode > 46 && !e.ctrlKey && !e.metaKey){\n\t\t\tif(index >= mask.length){\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}else {\n\t\t\t\tswitch(mask[index]){\n\t\t\t\t\tcase maskLetter:\n\t\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskNumber:\n\t\t\t\t\t\tif(isNaN(char)){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(char !== mask[index]){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn;\n\t});\n\n\tel.addEventListener(\"keyup\", (e) => {\n\t\tif(e.keyCode > 46){\n\t\t\tif(options.maskAutoFill){\n\t\t\t\tfillSymbols(el.value.length);\n\t\t\t}\n\t\t}\n\t});\n\n\n\tif(!el.placeholder){\n\t\tel.placeholder = mask;\n\t}\n\n\tif(options.maskAutoFill){\n\t\tfillSymbols(el.value.length);\n\t}\n}\n\n//input element\nfunction input(cell, onRendered, success, cancel, editorParams){\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}\n\n//resizable text area element\nfunction textarea(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"hybrid\",\n\tvalue = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\n\tinput = document.createElement(\"textarea\"),\n\tscrollHeight = 0;\n\n\t//create and style input\n\tinput.style.display = \"block\";\n\tinput.style.padding = \"2px\";\n\tinput.style.height = \"100%\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\tinput.style.whiteSpace = \"pre-wrap\";\n\tinput.style.resize = \"none\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = value;\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tinput.scrollHeight;\n\t\t\tinput.style.height = input.scrollHeight + \"px\";\n\t\t\tcell.getRow().normalizeHeight();\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t},300);\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\tinput.addEventListener(\"keyup\", function(){\n\n\t\tinput.style.height = \"\";\n\n\t\tvar heightNow = input.scrollHeight;\n\n\t\tinput.style.height = heightNow + \"px\";\n\n\t\tif(heightNow != scrollHeight){\n\t\t\tscrollHeight = heightNow;\n\t\t\tcell.getRow().normalizeHeight();\n\t\t}\n\t});\n\n\tinput.addEventListener(\"keydown\", function(e){\n\n\t\tswitch(e.keyCode){\n\n\t\t\tcase 13:\n\t\t\t\tif(e.shiftKey && editorParams.shiftEnterSubmit){\n\t\t\t\t\tonChange();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}\n\n//input element with type of number\nfunction number(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", \"number\");\n\n\tif(typeof editorParams.max != \"undefined\"){\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\n\tif(typeof editorParams.min != \"undefined\"){\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\n\tif(typeof editorParams.step != \"undefined\"){\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = cellValue;\n\n\tvar blurFunc = function(e){\n\t\tonChange();\n\t};\n\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\t//submit new value on blur\n\t\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"blur\", blurFunc);\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(){\n\t\tvar value = input.value;\n\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\n\t\tif(value !== cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}\n\n//input element with type of number\nfunction range(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.setAttribute(\"type\", \"range\");\n\t\n\tif (typeof editorParams.max != \"undefined\") {\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\t\n\tif (typeof editorParams.min != \"undefined\") {\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\t\n\tif (typeof editorParams.step != \"undefined\") {\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\t\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value;\n\t\t\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\t\t\n\t\tif(value != cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e){\n\t\tonChange();\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n\n//input element\nfunction date(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tfunction convertDate(value){\n\t\tvar newDatetime;\n\t\t\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else {\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\t\t\n\t\treturn newDatetime.toFormat(\"yyyy-MM-dd\");\n\t}\n\t\n\tinput.type = \"date\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.max){\n\t\tinput.setAttribute(\"max\", inputFormat ? convertDate(editorParams.max) : editorParams.max);\n\t}\n\n\tif(editorParams.min){\n\t\tinput.setAttribute(\"min\", inputFormat ? convertDate(editorParams.min) : editorParams.min);\n\t}\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\t\t\n\t\t\tcellValue = convertDate(cellValue);\t\t\t\n\t\t}else {\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDate;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDate = DT.fromFormat(String(value), \"yyyy-MM-dd\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDate;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDate.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDate.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n\n//input element\nfunction time(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"time\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else {\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"hh:mm\");\n\t\t\t\n\t\t}else {\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() == \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxTime = DT.fromFormat(String(value), \"hh:mm\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n\n//input element\nfunction datetime(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"datetime-local\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else {\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"yyyy-MM-dd\")  + \"T\" + newDatetime.toFormat(\"hh:mm\");\n\t\t}else {\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDateTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDateTime = DT.fromISO(String(value));\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDateTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDateTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDateTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n\nclass Edit{\n\tconstructor(editor, cell, onRendered, success, cancel, editorParams){\n\t\tthis.edit = editor;\n\t\tthis.table = editor.table;\n\t\tthis.cell = cell;\n\t\tthis.params = this._initializeParams(editorParams);\n\t\t\n\t\tthis.data = [];\n\t\tthis.displayItems = [];\n\t\tthis.currentItems = [];\n\t\tthis.focusedItem = null;\n\t\t\n\t\tthis.input = this._createInputElement();\n\t\tthis.listEl = this._createListElement();\n\t\t\n\t\tthis.initialValues = null; \n\t\t\n\t\tthis.isFilter = cell.getType() === \"header\";\n\t\t\n\t\tthis.filterTimeout = null;\n\t\tthis.filtered = false;\n\t\tthis.typing = false;\n\t\t\n\t\tthis.values = []; \n\t\tthis.popup = null;  \n\t\t\n\t\tthis.listIteration = 0;\n\t\t\n\t\tthis.lastAction=\"\";\n\t\tthis.filterTerm=\"\";\n\t\t\n\t\tthis.blurable = true;\n\t\t\n\t\tthis.actions = {\n\t\t\tsuccess:success,\n\t\t\tcancel:cancel\n\t\t};\n\t\t\n\t\tthis._deprecatedOptionsCheck();\n\t\tthis._initializeValue();\n\t\t\n\t\tonRendered(this._onRendered.bind(this));\n\t}\n\t\n\t_deprecatedOptionsCheck(){\n\t\tif(this.params.listItemFormatter){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.sortValuesList){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.searchFunc){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.searchingPlaceholder){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t}\n\t\n\t_initializeValue(){\n\t\tvar initialValue = this.cell.getValue();\n\t\t\n\t\tif(typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\"){\n\t\t\tinitialValue = this.params.defaultValue;\n\t\t}\n\t\t\n\t\tthis.initialValues = this.params.multiselect ? initialValue : [initialValue];\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\";\n\t\t\tthis.headerFilterInitialListGen();            \n\t\t}\n\t}\n\t\n\t_onRendered(){\n\t\tvar cellEl = this.cell.getElement();\n\t\t\n\t\tfunction clickStop(e){\n\t\t\te.stopPropagation();\n\t\t}\t\n\t\t\n\t\tif(!this.isFilter){\n\t\t\tthis.input.style.height = \"100%\";\n\t\t\tthis.input.focus({preventScroll: true});\n\t\t}\n\t\t\n\t\t\n\t\tcellEl.addEventListener(\"click\", clickStop);\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tcellEl.removeEventListener(\"click\", clickStop);\n\t\t}, 1000);\n\t\t\n\t\tthis.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\n\t}\n\t\n\t_createListElement(){\n\t\tvar listEl = document.createElement(\"div\");\n\t\tlistEl.classList.add(\"tabulator-edit-list\");\n\t\t\n\t\tlistEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\tlistEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\t\n\t\treturn listEl;\n\t}\n\t\n\t_setListWidth(){\n\t\tvar element = this.isFilter ? this.input : this.cell.getElement();\n\t\t\n\t\tthis.listEl.style.minWidth = element.offsetWidth + \"px\";\n\t\t\n\t\tif(this.params.maxWidth){\n\t\t\tif(this.params.maxWidth === true){\n\t\t\t\tthis.listEl.style.maxWidth = element.offsetWidth + \"px\";\n\t\t\t}else if(typeof this.params.maxWidth === \"number\"){\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth + \"px\";\n\t\t\t}else {\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t_createInputElement(){\n\t\tvar attribs = this.params.elementAttributes;\n\t\tvar input = document.createElement(\"input\");\n\t\t\n\t\tinput.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\n\t\t\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\t\t\n\t\tif(!this.params.autocomplete){\n\t\t\tinput.style.cursor = \"default\";\n\t\t\tinput.style.caretColor = \"transparent\";\n\t\t\t// input.readOnly = (this.edit.currentCell != false);\n\t\t}\n\t\t\n\t\tif(attribs && typeof attribs == \"object\"){\n\t\t\tfor (let key in attribs){\n\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\n\t\t\t\t}else {\n\t\t\t\t\tinput.setAttribute(key, attribs[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(this.params.mask){\n\t\t\tmaskInput(input, this.params);\n\t\t}\n\t\t\n\t\tthis._bindInputEvents(input);\n\t\t\n\t\treturn input;\n\t}\n\t\n\t_initializeParams(params){\n\t\tvar valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\n\t\tvalueCheck;\n\t\t\n\t\tparams = Object.assign({}, params);\n\t\t\n\t\tparams.verticalNavigation = params.verticalNavigation || \"editor\";\n\t\tparams.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\n\t\tparams.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\n\t\tparams.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\n\t\t\n\t\tparams.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\n\t\t\n\t\tvalueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\n\t\t\n\t\tif(!valueCheck){\n\t\t\tconsole.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\");\n\t\t}else if(valueCheck > 1){\n\t\t\tconsole.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\");\n\t\t}\n\t\t\n\t\tif(params.autocomplete){\n\t\t\tif(params.multiselect){\n\t\t\t\tparams.multiselect = false;\n\t\t\t\tconsole.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\");\n\t\t\t}\n\t\t}else {\n\t\t\tif(params.freetext){\n\t\t\t\tparams.freetext = false;\n\t\t\t\tconsole.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterFunc){\n\t\t\t\tparams.filterFunc = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterRemote){\n\t\t\t\tparams.filterRemote = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.mask){\n\t\t\t\tparams.mask = false;\n\t\t\t\tconsole.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.allowEmpty){\n\t\t\t\tparams.allowEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.listOnEmpty){\n\t\t\t\tparams.listOnEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(params.filterRemote && !(typeof params.valuesLookup === \"function\" || params.valuesURL)){\n\t\t\tparams.filterRemote = false;\n\t\t\tconsole.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\n\t\t}\n\t\treturn params;\n\t}\n\t//////////////////////////////////////\n\t////////// Event Handling ////////////\n\t//////////////////////////////////////\n\t\n\t_bindInputEvents(input){\n\t\tinput.addEventListener(\"focus\", this._inputFocus.bind(this));\n\t\tinput.addEventListener(\"click\", this._inputClick.bind(this));\n\t\tinput.addEventListener(\"blur\", this._inputBlur.bind(this));\n\t\tinput.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\tinput.addEventListener(\"search\", this._inputSearch.bind(this));\n\t\t\n\t\tif(this.params.autocomplete){\n\t\t\tinput.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\t\t}\n\t}\n\t\n\t\n\t_inputFocus(e){\n\t\tthis.rebuildOptionsList();\n\t}\n\t\n\t_filter(){\n\t\tif(this.params.filterRemote){\n\t\t\tclearTimeout(this.filterTimeout);\n\t\t\t\n\t\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\t\tthis.rebuildOptionsList();\n\t\t\t}, this.params.filterDelay);\n\t\t}else {\n\t\t\tthis._filterList();\n\t\t}\n\t}\n\t\n\t_inputClick(e){\n\t\te.stopPropagation();\n\t}\n\t\n\t_inputBlur(e){\n\t\tif(this.blurable){\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.hide();\n\t\t\t}else {\n\t\t\t\tthis._resolveValue(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_inputSearch(){\n\t\tthis._clearChoices();\n\t}\n\t\n\t_inputKeyDown(e){\n\t\tswitch(e.keyCode){\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\t\tthis._keyUp(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 40: //down arrow\n\t\t\t\tthis._keyDown(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //right arrow\n\t\t\t\tthis._keySide(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 13: //enter\n\t\t\t\tthis._keyEnter();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27: //escape\n\t\t\t\tthis._keyEsc();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 36: //home\n\t\t\tcase 35: //end\n\t\t\t\tthis._keyHomeEnd(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 9: //tab\n\t\t\t\tthis._keyTab(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keySelectLetter(e);\n\t\t}\n\t}\n\t\n\t_inputKeyUp(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 38: //up arrow\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //up arrow\n\t\t\tcase 40: //right arrow\n\t\t\tcase 13: //enter\n\t\t\tcase 27: //escape\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keyAutoCompLetter(e);\n\t\t}\n\t}\n\t\n\t_preventPopupBlur(){\n\t\tif(this.popup){\n\t\t\tthis.popup.blockHide();\n\t\t}\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.restoreHide();\n\t\t\t}\n\t\t}, 10);\n\t}\n\t\n\t_preventBlur(){\n\t\tthis.blurable = false;\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tthis.blurable = true;\n\t\t}, 10);\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Keyboard Navigation /////////\n\t//////////////////////////////////////\n\t\n\t_keyTab(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else {\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyUp(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index > 0){\n\t\t\t\tthis._focusItem(this.displayItems[index - 1]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyDown(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index < this.displayItems.length - 1){\n\t\t\t\tif(index == -1){\n\t\t\t\t\tthis._focusItem(this.displayItems[0]);\n\t\t\t\t}else {\n\t\t\t\t\tthis._focusItem(this.displayItems[index + 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keySide(e){\n\t\tif(!this.params.autocomplete){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\t\n\t_keyEnter(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else {\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyEsc(e){\n\t\tthis._cancel();\n\t}\n\t\n\t_keyHomeEnd(e){\n\t\tif(this.params.autocomplete){\n\t\t\t//prevent table navigation while using input element\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n\t\n\t_keySelectLetter(e){\n\t\tif(!this.params.autocomplete){\n\t\t\t// if(this.edit.currentCell === false){\n\t\t\te.preventDefault();\n\t\t\t// }\n\t\t\t\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\n\t\t\t\tthis._scrollToValue(e.keyCode);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyAutoCompLetter(e){\n\t\tthis._filter();\n\t\tthis.lastAction = \"typing\";\n\t\tthis.typing = true;\n\t}\n\t\n\t\n\t_scrollToValue(char){\n\t\tclearTimeout(this.filterTimeout);\n\t\t\n\t\tvar character = String.fromCharCode(char).toLowerCase();\n\t\tthis.filterTerm += character.toLowerCase();\n\t\t\n\t\tvar match = this.displayItems.find((item) => {\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\n\t\t});\n\t\t\n\t\tif(match){\n\t\t\tthis._focusItem(match);\n\t\t}\n\t\t\n\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\tthis.filterTerm = \"\";\n\t\t}, 800);\n\t}\n\t\n\t_focusItem(item){\n\t\tthis.lastAction = \"focus\";\n\t\t\n\t\tif(this.focusedItem && this.focusedItem.element){\n\t\t\tthis.focusedItem.element.classList.remove(\"focused\");\n\t\t}\n\t\t\n\t\tthis.focusedItem = item;\n\t\t\n\t\tif(item && item.element){\n\t\t\titem.element.classList.add(\"focused\");\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\n\t\t}\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t/////// Data List Generation /////////\n\t//////////////////////////////////////\n\theaderFilterInitialListGen(){\n\t\tthis._generateOptions(true);\n\t}\n\t\n\trebuildOptionsList(){\n\t\tthis._generateOptions()\n\t\t\t.then(this._sortOptions.bind(this))\n\t\t\t.then(this._buildList.bind(this))\n\t\t\t.then(this._showList.bind(this))\n\t\t\t.catch((e) => {\n\t\t\t\tif(!Number.isInteger(e)){\n\t\t\t\t\tconsole.error(\"List generation error\", e);\n\t\t\t\t}\n\t\t\t});\n\t}\n\t\n\t_filterList(){\n\t\tthis._buildList(this._filterOptions());\n\t\tthis._showList();\n\t}\n\t\n\t_generateOptions(silent){\n\t\tvar values = [];\n\t\tvar iteration = ++ this.listIteration;\n\t\t\n\t\tthis.filtered = false;\n\t\t\n\t\tif(this.params.values){\n\t\t\tvalues = this.params.values;\n\t\t}else if (this.params.valuesURL){\n\t\t\tvalues = this._ajaxRequest(this.params.valuesURL, this.input.value);\n\t\t}else {\n\t\t\tif(typeof this.params.valuesLookup === \"function\"){\n\t\t\t\tvalues = this.params.valuesLookup(this.cell, this.input.value);\n\t\t\t}else if(this.params.valuesLookup){\n\t\t\t\tvalues = this._uniqueColumnValues(this.params.valuesLookupField);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(values instanceof Promise){\n\t\t\tif(!silent){\n\t\t\t\tthis._addPlaceholder(this.params.placeholderLoading);\n\t\t\t}\n\t\t\t\n\t\t\treturn values.then()\n\t\t\t\t.then((responseValues) => {\n\t\t\t\t\tif(this.listIteration === iteration){\n\t\t\t\t\t\treturn this._parseList(responseValues);\n\t\t\t\t\t}else {\n\t\t\t\t\t\treturn Promise.reject(iteration);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}else {\n\t\t\treturn Promise.resolve(this._parseList(values));\n\t\t}\n\t}\n\t\n\t_addPlaceholder(contents){\n\t\tvar placeholder = document.createElement(\"div\");\n\t\t\n\t\tif(typeof contents === \"function\"){\n\t\t\tcontents = contents(this.cell.getComponent(), this.listEl);\n\t\t}\n\t\t\n\t\tif(contents){\n\t\t\tthis._clearList();\n\t\t\t\n\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\tplaceholder = contents;\n\t\t\t}else {\n\t\t\t\tplaceholder.classList.add(\"tabulator-edit-list-placeholder\");\n\t\t\t\tplaceholder.innerHTML = contents;\n\t\t\t}\n\t\t\t\n\t\t\tthis.listEl.appendChild(placeholder);\n\t\t\t\n\t\t\tthis._showList();\n\t\t}\n\t}\n\t\n\t_ajaxRequest(url, term){\n\t\tvar params = this.params.filterRemote ? {term:term} : {};\n\t\turl = urlBuilder(url, {}, params);\n\t\t\n\t\treturn fetch(url)\n\t\t\t.then((response)=>{\n\t\t\t\tif(response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t.catch((error)=>{\n\t\t\t\t\t\t\tconsole.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\treturn Promise.reject(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error)=>{\n\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \", error);\n\t\t\t\treturn Promise.reject(error);\n\t\t\t});\n\t}\n\t\n\t_uniqueColumnValues(field){\n\t\tvar output = {},\n\t\tdata = this.table.getData(this.params.valuesLookup),\n\t\tcolumn;\n\t\t\n\t\tif(field){\n\t\t\tcolumn = this.table.columnManager.getColumnByField(field);\n\t\t}else {\n\t\t\tcolumn = this.cell.getColumn()._getSelf();\n\t\t}\n\t\t\n\t\tif(column){\n\t\t\tdata.forEach((row) => {\n\t\t\t\tvar val = column.getFieldValue(row);\n\t\t\t\t\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\n\t\t\t\t\toutput[val] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\n\t\t\toutput = [];\n\t\t}\n\t\t\n\t\treturn Object.keys(output);\n\t}\n\t\n\t\n\t_parseList(inputValues){\n\t\tvar data = [];\n\t\t\n\t\tif(!Array.isArray(inputValues)){\n\t\t\tinputValues = Object.entries(inputValues).map(([key, value]) => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:key,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\t\n\t\tinputValues.forEach((value) => {\n\t\t\tif(typeof value !== \"object\"){\n\t\t\t\tvalue = {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:value,\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tthis._parseListItem(value, data, 0);\n\t\t});\n\t\t\n\t\tif(!this.currentItems.length && this.params.freetext){\n\t\t\tthis.input.value = this.initialValues;\n\t\t\tthis.typing = true;\n\t\t\tthis.lastAction = \"typing\";\n\t\t}\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\treturn data;    \n\t}\n\t\n\t_parseListItem(option, data, level){\n\t\tvar item = {};\n\t\t\n\t\tif(option.options){\n\t\t\titem = this._parseListGroup(option, level + 1);\n\t\t}else {\n\t\t\titem = {\n\t\t\t\tlabel:option.label,\n\t\t\t\tvalue:option.value,\n\t\t\t\titemParams:option.itemParams,\n\t\t\t\telementAttributes: option.elementAttributes,\n\t\t\t\telement:false,\n\t\t\t\tselected:false,\n\t\t\t\tvisible:true,\n\t\t\t\tlevel:level,\n\t\t\t\toriginal:option,\n\t\t\t};\n\t\t\t\n\t\t\tif(this.initialValues && this.initialValues.indexOf(option.value) > -1){\n\t\t\t\tthis._chooseItem(item, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tdata.push(item);\n\t}\n\t\n\t_parseListGroup(option, level){\n\t\tvar item = {\n\t\t\tlabel:option.label,\n\t\t\tgroup:true,\n\t\t\titemParams:option.itemParams,\n\t\t\telementAttributes:option.elementAttributes,\n\t\t\telement:false,\n\t\t\tvisible:true,\n\t\t\tlevel:level,\n\t\t\toptions:[],\n\t\t\toriginal:option,\n\t\t};\n\t\t\n\t\toption.options.forEach((child) => {\n\t\t\tthis._parseListItem(child, item.options, level);\n\t\t});\n\t\t\n\t\treturn item;\n\t}\n\t\n\t_sortOptions(options){\n\t\tvar sorter;\n\t\t\n\t\tif(this.params.sort){\n\t\t\tsorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\n\t\t\t\n\t\t\tthis._sortGroup(sorter, options);\n\t\t}\n\t\t\n\t\treturn options;\n\t}\n\t\n\t_sortGroup(sorter, options){\n\t\toptions.sort((a,b) => {\n\t\t\treturn sorter(a.label, b.label, a.value, b.value, a.original, b.original);\n\t\t});\n\t\t\n\t\toptions.forEach((option) => {\n\t\t\tif(option.group){\n\t\t\t\tthis._sortGroup(sorter, option.options);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_defaultSortFunction(as, bs){\n\t\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\t\tvar emptyAlign = 0;\n\t\t\n\t\tif(this.params.sort === \"desc\"){\n\t\t\t[as, bs] = [bs, as];\n\t\t}\n\t\t\n\t\t//handle empty values\n\t\tif(!as && as!== 0){\n\t\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t\t}else if(!bs && bs!== 0){\n\t\t\temptyAlign =  1;\n\t\t}else {\n\t\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\t\ta = String(as).toLowerCase();\n\t\t\tb = String(bs).toLowerCase();\n\t\t\tif(a === b) return 0;\n\t\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\t\ta = a.match(rx);\n\t\t\tb = b.match(rx);\n\t\t\tL = a.length > b.length ? b.length : a.length;\n\t\t\twhile(i < L){\n\t\t\t\ta1= a[i];\n\t\t\t\tb1= b[i++];\n\t\t\t\tif(a1 !== b1){\n\t\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\t\treturn a1 - b1;\n\t\t\t\t\t}\n\t\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn a.length > b.length;\n\t\t}\n\t\t\n\t\treturn emptyAlign;\n\t}\n\t\n\t_filterOptions(){\n\t\tvar filterFunc = this.params.filterFunc || this._defaultFilterFunc,\n\t\tterm = this.input.value;\n\t\t\n\t\tif(term){\n\t\t\tthis.filtered = true;\n\t\t\t\n\t\t\tthis.data.forEach((item) => {\n\t\t\t\tthis._filterItem(filterFunc, term, item);\n\t\t\t});\n\t\t}else {\n\t\t\tthis.filtered = false;\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\t_filterItem(func, term, item){\n\t\tvar matches = false;\n\t\t\n\t\tif(!item.group){\n\t\t\titem.visible = func(term, item.label, item.value, item.original);\n\t\t}else {\n\t\t\titem.options.forEach((option) => {\n\t\t\t\tif(this._filterItem(func, term, option)){\n\t\t\t\t\tmatches = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\titem.visible = matches;\n\t\t}\n\t\t\n\t\treturn item.visible;\n\t}\n\t\n\t_defaultFilterFunc(term, label, value, item){\n\t\tterm = String(term).toLowerCase();\n\t\t\n\t\tif(label !== null && typeof label !== \"undefined\"){\n\t\t\tif(String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\t//////////////////////////////////////\n\t/////////// Display List /////////////\n\t//////////////////////////////////////\n\t\n\t_clearList(){\n\t\twhile(this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\n\t\t\n\t\tthis.displayItems = [];\n\t}\n\t\n\t_buildList(data){\n\t\tthis._clearList();\n\t\t\n\t\tdata.forEach((option) => {\n\t\t\tthis._buildItem(option);\n\t\t});\n\t\t\n\t\tif(!this.displayItems.length){\n\t\t\tthis._addPlaceholder(this.params.placeholderEmpty);\n\t\t}  \n\t}\n\t\n\t_buildItem(item){\n\t\tvar el = item.element,\n\t\tcontents;\n\t\t\n\t\tif(!this.filtered || item.visible){\n\t\t\t\n\t\t\tif(!el){\n\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\n\t\t\t\tcontents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\n\t\t\t\t\n\t\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else {\n\t\t\t\t\tel.innerHTML = contents;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-group\");\n\t\t\t\t}else {\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-item\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\n\t\t\t\t\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\n\t\t\t\t\tfor (let key in item.elementAttributes){\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\t\tel.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.addEventListener(\"click\", this._groupClick.bind(this, item));\n\t\t\t\t}else {\n\t\t\t\t\tel.addEventListener(\"click\", this._itemClick.bind(this, item));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\t\t\t\n\t\t\t\titem.element = el;\n\t\t\t}\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tthis.listEl.appendChild(el);\n\t\t\t\n\t\t\tif(item.group){\n\t\t\t\titem.options.forEach((option) => {\n\t\t\t\t\tthis._buildItem(option);\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tthis.displayItems.push(item);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_showList(){\n\t\tvar startVis = this.popup && this.popup.isVisible();\n\t\t\n\t\tif(this.input.parentNode){\n\t\t\tif(this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty){\n\t\t\t\tif(this.popup){\n\t\t\t\t\tthis.popup.hide(true);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._setListWidth();\n\t\t\t\n\t\t\tif(!this.popup){\n\t\t\t\tthis.popup = this.edit.popup(this.listEl);\n\t\t\t}\n\t\t\t\n\t\t\tthis.popup.show(this.cell.getElement(), \"bottom\");\n\t\t\t\n\t\t\tif(!startVis){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.hideOnBlur(this._resolveValue.bind(this, true));\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_styleItem(item){\n\t\tif(item && item.element){\n\t\t\tif(item.selected){\n\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t}else {\n\t\t\t\titem.element.classList.remove(\"active\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// User Interaction ///////////\n\t//////////////////////////////////////\n\t\n\t_itemClick(item, e){\n\t\te.stopPropagation();\n\t\t\n\t\tthis._chooseItem(item);\n\t}\n\t\n\t_groupClick(item, e){\n\t\te.stopPropagation();\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t////// Current Item Management ///////\n\t//////////////////////////////////////\n\t\n\t_cancel(){\n\t\tthis.popup.hide(true);\n\t\tthis.actions.cancel();\n\t}\n\t\n\t_clearChoices(){\n\t\tthis.typing = true;\n\t\t\n\t\tthis.currentItems.forEach((item) => {\n\t\t\titem.selected = false;\n\t\t\tthis._styleItem(item);\n\t\t});\n\t\t\n\t\tthis.currentItems = [];\n\t\t\n\t\tthis.focusedItem = null;\n\t}\n\t\n\t_chooseItem(item, silent){\n\t\tvar index;\n\t\t\n\t\tthis.typing = false;\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\tindex = this.currentItems.indexOf(item);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.currentItems.splice(index, 1);\n\t\t\t\titem.selected = false;\n\t\t\t}else {\n\t\t\t\tthis.currentItems.push(item);\n\t\t\t\titem.selected = true;\n\t\t\t}\n\t\t\t\n\t\t\tthis.input.value = this.currentItems.map(item => item.label).join(\",\");\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t}else {\n\t\t\tthis.currentItems = [item];\n\t\t\titem.selected = true;\n\t\t\t\n\t\t\tthis.input.value = item.label;\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis._resolveValue();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis._focusItem(item);\n\t}\n\t\n\t_resolveValue(blur){\n\t\tvar output, initialValue;\n\t\t\n\t\tif(this.popup){\n\t\t\tthis.popup.hide(true);\n\t\t}\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\toutput = this.currentItems.map(item => item.value);\n\t\t}else {\n\t\t\tif(blur && this.params.autocomplete && this.typing){\n\t\t\t\tif(this.params.freetext || (this.params.allowEmpty && this.input.value === \"\")){\n\t\t\t\t\toutput = this.input.value;\n\t\t\t\t}else {\n\t\t\t\t\tthis.actions.cancel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(this.currentItems[0]){\n\t\t\t\t\toutput = this.currentItems[0].value;\n\t\t\t\t}else {\n\t\t\t\t\tinitialValue = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues;\n\t\t\t\t\t\n\t\t\t\t\tif(initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\"){\n\t\t\t\t\t\toutput = initialValue;\n\t\t\t\t\t}else {\n\t\t\t\t\t\toutput = this.params.emptyValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(output === \"\"){\n\t\t\toutput = this.params.emptyValue;\n\t\t}\n\t\t\n\t\tthis.actions.success(output);\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.initialValues = output && !Array.isArray(output) ? [output] : output;\n\t\t\tthis.currentItems = [];\n\t\t}\n\t}\n\t\n}\n\nfunction select(cell, onRendered, success, cancel, editorParams){\n\n\tthis.deprecationMsg(\"The select editor has been deprecated, please use the new list editor\");\n\n\tvar list = new Edit(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}\n\nfunction list(cell, onRendered, success, cancel, editorParams){\n\tvar list = new Edit(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}\n\nfunction autocomplete(cell, onRendered, success, cancel, editorParams){\n\n\tthis.deprecationMsg(\"The autocomplete editor has been deprecated, please use the new list editor with the 'autocomplete' editorParam\");\n\n\teditorParams.autocomplete = true;\n\n\tvar list = new Edit(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}\n\n//star rating\nfunction star(cell, onRendered, success, cancel, editorParams){\n\tvar self = this,\n\telement = cell.getElement(),\n\tvalue = cell.getValue(),\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\tstars = [],\n\tstarsHolder = document.createElement(\"div\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\n\t//change star type\n\tfunction starChange(val){\n\t\tstars.forEach(function(star, i){\n\t\t\tif(i < val){\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t}else {\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}else {\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t}else {\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}\n\t\t});\n\t}\n\n\t//build stars\n\tfunction buildStar(i){\n\n\t\tvar starHolder =  document.createElement(\"span\");\n\t\tvar nextStar = star.cloneNode(true);\n\n\t\tstars.push(nextStar);\n\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tstarChange(i);\n\t\t});\n\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t});\n\n\t\tstarHolder.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tsuccess(i);\n\t\t\telement.blur();\n\t\t});\n\n\t\tstarHolder.appendChild(nextStar);\n\t\tstarsHolder.appendChild(starHolder);\n\n\t}\n\n\t//handle keyboard navigation value change\n\tfunction changeValue(val){\n\t\tvalue = val;\n\t\tstarChange(val);\n\t}\n\n\t//style cell\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\t//style holding element\n\tstarsHolder.style.verticalAlign = \"middle\";\n\tstarsHolder.style.display = \"inline-block\";\n\tstarsHolder.style.padding = \"4px\";\n\n\t//style star\n\tstar.setAttribute(\"width\", size);\n\tstar.setAttribute(\"height\", size);\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//create correct number of stars\n\tfor(var i=1;i<= maxStars;i++){\n\t\tbuildStar(i);\n\t}\n\n\t//ensure value does not exceed number of stars\n\tvalue = Math.min(parseInt(value), maxStars);\n\n\t// set initial styling of stars\n\tstarChange(value);\n\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\n\t\tstarChange(0);\n\t});\n\n\tstarsHolder.addEventListener(\"click\", function(e){\n\t\tsuccess(0);\n\t});\n\n\telement.addEventListener(\"blur\", function(e){\n\t\tcancel();\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\tchangeValue(value + 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\tchangeValue(value - 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 13: //enter\n\t\t\t\tsuccess(value);\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\treturn starsHolder;\n}\n\n//draggable progress bar\nfunction progress(cell, onRendered, success, cancel, editorParams){\n\tvar element = cell.getElement(),\n\tmax = typeof editorParams.max === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\")) || 100) : editorParams.max,\n\tmin = typeof editorParams.min === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\")) || 0) : editorParams.min,\n\tpercent = (max - min) / 100,\n\tvalue = cell.getValue() || 0,\n\thandle = document.createElement(\"div\"),\n\tbar = document.createElement(\"div\"),\n\tmouseDrag, mouseDragWidth;\n\n\t//set new value\n\tfunction updateValue(){\n\t\tvar style = window.getComputedStyle(element, null);\n\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\n\t\tsuccess(calcVal);\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\telement.setAttribute(\"aria-label\", value);\n\t}\n\n\t//style handle\n\thandle.style.position = \"absolute\";\n\thandle.style.right = \"0\";\n\thandle.style.top = \"0\";\n\thandle.style.bottom = \"0\";\n\thandle.style.width = \"5px\";\n\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t//style bar\n\tbar.style.display = \"inline-block\";\n\tbar.style.position = \"relative\";\n\t// bar.style.top = \"8px\";\n\t// bar.style.bottom = \"8px\";\n\t// bar.style.left = \"4px\";\n\t// bar.style.marginRight = \"4px\";\n\tbar.style.height = \"100%\";\n\tbar.style.backgroundColor = \"#488CE9\";\n\tbar.style.maxWidth = \"100%\";\n\tbar.style.minWidth = \"0%\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//style cell\n\telement.style.padding = \"4px 4px\";\n\n\t//make sure value is in range\n\tvalue = Math.min(parseFloat(value), max);\n\tvalue = Math.max(parseFloat(value), min);\n\n\t//workout percentage\n\tvalue = Math.round((value - min) / percent);\n\t// bar.style.right = value + \"%\";\n\tbar.style.width = value + \"%\";\n\n\telement.setAttribute(\"aria-valuemin\", min);\n\telement.setAttribute(\"aria-valuemax\", max);\n\n\tbar.appendChild(handle);\n\n\thandle.addEventListener(\"mousedown\", function(e){\n\t\tmouseDrag = e.screenX;\n\t\tmouseDragWidth = bar.offsetWidth;\n\t});\n\n\thandle.addEventListener(\"mouseover\", function(){\n\t\thandle.style.cursor = \"ew-resize\";\n\t});\n\n\telement.addEventListener(\"mousemove\", function(e){\n\t\tif(mouseDrag){\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\n\t\t}\n\t});\n\n\telement.addEventListener(\"mouseup\", function(e){\n\t\tif(mouseDrag){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tmouseDrag = false;\n\t\t\tmouseDragWidth = false;\n\n\t\t\tupdateValue();\n\t\t}\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 9: //tab\n\t\t\tcase 13: //enter\n\t\t\t\tupdateValue();\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t}\n\t});\n\n\telement.addEventListener(\"blur\", function(){\n\t\tcancel();\n\t});\n\n\treturn bar;\n}\n\n//checkbox\nfunction tickCross(cell, onRendered, success, cancel, editorParams){\n\tvar value = cell.getValue(),\n\tinput = document.createElement(\"input\"),\n\ttristate = editorParams.tristate,\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\tindetermState = false,\n\ttrueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\n\tfalseValueSet = Object.keys(editorParams).includes(\"falseValue\");\n\t\n\tinput.setAttribute(\"type\", \"checkbox\");\n\tinput.style.marginTop = \"5px\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = value;\n\t\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\n\t\tindetermState = true;\n\t\tinput.indeterminate = true;\n\t}\n\t\n\tif(this.table.browser != \"firefox\" && this.table.browser != \"safari\"){ //prevent blur issue on mac firefox\n\t\tonRendered(function(){\n\t\t\tif(cell.getType() === \"cell\"){\n\t\t\t\tinput.focus({preventScroll: true});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tinput.checked = trueValueSet ? value === editorParams.trueValue : (value === true || value === \"true\" || value === \"True\" || value === 1);\n\t\n\tfunction setValue(blur){\n\t\tvar checkedValue = input.checked;\n\t\t\n\t\tif(trueValueSet && checkedValue){\n\t\t\tcheckedValue = editorParams.trueValue;\n\t\t}else if(falseValueSet && !checkedValue){\n\t\t\tcheckedValue = editorParams.falseValue;\n\t\t}\n\t\t\n\t\tif(tristate){\n\t\t\tif(!blur){\n\t\t\t\tif(input.checked && !indetermState){\n\t\t\t\t\tinput.checked = false;\n\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\tindetermState = true;\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else {\n\t\t\t\t\tindetermState = false;\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(indetermState){\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else {\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\treturn checkedValue;\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"change\", function(e){\n\t\tsuccess(setValue());\n\t});\n\n\tinput.addEventListener(\"blur\", function(e){\n\t\tsuccess(setValue(true));\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tif(e.keyCode == 13){\n\t\t\tsuccess(setValue());\n\t\t}\n\t\tif(e.keyCode == 27){\n\t\t\tcancel();\n\t\t}\n\t});\n\t\n\treturn input;\n}\n\nvar defaultEditors = {\n\tinput:input,\n\ttextarea:textarea,\n\tnumber:number,\n\trange:range,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tselect:select,\n\tlist:list,\n\tautocomplete:autocomplete,\n\tstar:star,\n\tprogress:progress,\n\ttickCross:tickCross,\n};\n\nclass Edit$1 extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.currentCell = false; //hold currently editing cell\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overridden by editor opening\n\t\tthis.recursionBlock = false; //prevent focus recursion\n\t\tthis.invalidEdit = false;\n\t\tthis.editedCells = [];\n\t\t\n\t\tthis.editors = Edit$1.editors;\n\t\t\n\t\tthis.registerColumnOption(\"editable\");\n\t\tthis.registerColumnOption(\"editor\");\n\t\tthis.registerColumnOption(\"editorParams\");\n\t\t\n\t\tthis.registerColumnOption(\"cellEditing\");\n\t\tthis.registerColumnOption(\"cellEdited\");\n\t\tthis.registerColumnOption(\"cellEditCancelled\");\n\t\t\n\t\tthis.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\n\t\tthis.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-init\", this.bindEditor.bind(this));\n\t\tthis.subscribe(\"cell-delete\", this.clearEdited.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-layout\", this.rowEditableCheck.bind(this));\n\t\tthis.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\n\t\t\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\n\t\tthis.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Keybinding Functions ///////\n\t///////////////////////////////////\n\t\n\tkeybindingNavigateNext(e){\n\t\tvar cell = this.currentCell,\n\t\tnewRow = this.options(\"tabEndNewRow\");\n\t\t\n\t\tif(cell){\n\t\t\tif(!this.navigateNext(cell, e)){\n\t\t\t\tif(newRow){\n\t\t\t\t\tcell.getElement().firstChild.blur();\n\t\t\t\t\t\n\t\t\t\t\tif(newRow === true){\n\t\t\t\t\t\tnewRow = this.table.addRow({});\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(typeof newRow == \"function\"){\n\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tnewRow.then(() => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tcell.getComponent().navigateNext();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Cell Functions //////////\n\t///////////////////////////////////\n\t\n\tcellIsEdited(cell){\n\t\treturn !! cell.modules.edit && cell.modules.edit.edited;\n\t}\n\t\n\tcellCancelEdit(cell){\n\t\tif(cell === this.currentCell){\n\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t}else {\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tupdateCellClass(cell){\n\t\tif(this.allowEdit(cell)) {\n\t\t\tcell.getElement().classList.add(\"tabulator-editable\");\n\t\t}\n\t\telse {\n\t\t\tcell.getElement().classList.remove(\"tabulator-editable\");\n\t\t}\n\t}\n\t\n\tclearCellEdited(cells){\n\t\tif(!cells){\n\t\t\tcells = this.table.modules.edit.getEditedCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.table.modules.edit.clearEdited(cell._getSelf());\n\t\t});\n\t}\n\t\n\tnavigatePrev(cell = this.currentCell, e){\n\t\tvar nextCell, prevRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateLeft();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else {\n\t\t\t\tprevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(prevRow){\n\t\t\t\t\tnextCell = this.findPrevEditableCell(prevRow, prevRow.cells.length);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateNext(cell = this.currentCell, e){\n\t\tvar nextCell, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateRight();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else {\n\t\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(nextRow){\n\t\t\t\t\tnextCell = this.findNextEditableCell(nextRow, -1);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateLeft(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findPrevEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateRight(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findNextEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateUp(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateDown(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tfindNextEditableCell(row, index){\n\t\tvar nextCell = false;\n\t\t\n\t\tif(index < row.cells.length-1){\n\t\t\tfor(var i = index+1; i < row.cells.length; i++){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tnextCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn nextCell;\n\t}\n\t\n\tfindPrevEditableCell(row, index){\n\t\tvar prevCell = false;\n\t\t\n\t\tif(index > 0){\n\t\t\tfor(var i = index-1; i >= 0; i--){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tprevCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn prevCell;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.editor !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\tcolumnDeleteCheck(column){\n\t\tif(this.currentCell && this.currentCell.column === column){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\t\n\trowDeleteCheck(row){\n\t\tif(this.currentCell && this.currentCell.row === row){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\n\trowEditableCheck(row){\n\t\trow.getCells().forEach((cell) => {\n\t\t\tif(cell.column.modules.edit && typeof cell.column.modules.edit.check === \"function\"){\n\t\t\t\tthis.updateCellClass(cell);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//initialize column editor\n\tinitializeColumn(column){\n\t\tvar config = {\n\t\t\teditor:false,\n\t\t\tblocked:false,\n\t\t\tcheck:column.definition.editable,\n\t\t\tparams:column.definition.editorParams || {}\n\t\t};\n\t\t\n\t\t//set column editor\n\t\tswitch(typeof column.definition.editor){\n\t\t\tcase \"string\":\n\t\t\t\tif(this.editors[column.definition.editor]){\n\t\t\t\t\tconfig.editor = this.editors[column.definition.editor];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tconfig.editor = column.definition.editor;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"boolean\":\n\t\t\t\tif(column.definition.editor === true){\n\t\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\n\t\t\t\t\t\tif(this.editors[column.definition.formatter]){\n\t\t\t\t\t\t\tconfig.editor = this.editors[column.definition.formatter];\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tconfig.editor = this.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\tif(config.editor){\n\t\t\tcolumn.modules.edit = config;\n\t\t}\n\t}\n\t\n\tgetCurrentCell(){\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\n\t}\n\t\n\tclearEditor(cancel){\n\t\tvar cell = this.currentCell,\n\t\tcellEl;\n\t\t\n\t\tthis.invalidEdit = false;\n\t\t\n\t\tif(cell){\n\t\t\tthis.currentCell = false;\n\t\t\t\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tthis.dispatch(\"edit-editor-clear\", cell, cancel);\n\t\t\t\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\n\t\t\t\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\tcell.table.element.classList.remove(\"tabulator-editing\");\n\t\t}\n\t}\n\t\n\tcancelEdit(){\n\t\tif(this.currentCell){\n\t\t\tvar cell = this.currentCell;\n\t\t\tvar component = this.currentCell.getComponent();\n\t\t\t\n\t\t\tthis.clearEditor(true);\n\t\t\tcell.setValueActual(cell.getValue());\n\t\t\tcell.cellRendered();\n\t\t\t\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\n\t\t\t\tcell.row.normalizeHeight(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(cell.column.definition.cellEditCancelled){\n\t\t\t\tcell.column.definition.cellEditCancelled.call(this.table, component);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"edit-cancelled\", cell);\n\t\t\tthis.dispatchExternal(\"cellEditCancelled\", component);\n\t\t}\n\t}\n\t\n\t//return a formatted value for a cell\n\tbindEditor(cell){\n\t\tif(cell.column.modules.edit){\n\t\t\tvar self = this,\n\t\t\telement = cell.getElement(true);\n\t\t\t\n\t\t\tthis.updateCellClass(cell);\n\t\t\telement.setAttribute(\"tabindex\", 0);\n\t\t\t\n\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif (e.button === 2) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}else {\n\t\t\t\t\tself.mouseClick = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\telement.addEventListener(\"focus\", function(e){\n\t\t\t\tif(!self.recursionBlock){\n\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tfocusCellNoEvent(cell, block){\n\t\tthis.recursionBlock = true;\n\t\t\n\t\tif(!(block && this.table.browser === \"ie\")){\n\t\t\tcell.getElement().focus({preventScroll: true});\n\t\t}\n\t\t\n\t\tthis.recursionBlock = false;\n\t}\n\t\n\teditCell(cell, forceEdit){\n\t\tthis.focusCellNoEvent(cell);\n\t\tthis.edit(cell, false, forceEdit);\n\t}\n\t\n\tfocusScrollAdjust(cell){\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t\trowEl = cell.row.getElement();\n\t\t\t\n\t\t\tif(rowEl.offsetTop < topEdge){\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\n\t\t\t}else {\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin || 0);\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin || 0);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t\trightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t}\n\t\t\t\n\t\t\tif(cellEl.offsetLeft < leftEdge){\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\n\t\t\t}else {\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tallowEdit(cell) {\n\t\tvar check = cell.column.modules.edit ? true : false;\n\n\t\tif(cell.column.modules.edit){\n\t\t\tswitch(typeof cell.column.modules.edit.check){\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif(cell.row.initialized){\n\t\t\t\t\t\tcheck = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcheck = !!cell.row.data[cell.column.modules.edit.check];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tcheck = cell.column.modules.edit.check;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn check;\n\t}\n\t\n\tedit(cell, e, forceEdit){\n\t\tvar self = this,\n\t\tallowEdit = true,\n\t\trendered = function(){},\n\t\telement = cell.getElement(),\n\t\tcellEditor, component, params;\n\t\t\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\n\t\tif(this.currentCell){\n\t\t\tif(!this.invalidEdit && this.currentCell !== cell){\n\t\t\t\tthis.cancelEdit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//handle successful value change\n\t\tfunction success(value){\n\t\t\tif(self.currentCell === cell){\n\t\t\t\tvar valid = self.chain(\"edit-success\", [cell, value], true, true);\n\t\t\t\t\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\n\t\t\t\t\tself.clearEditor();\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif(!cell.modules.edit){\n\t\t\t\t\t\tcell.modules.edit = {};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.modules.edit.edited = true;\n\t\t\t\t\t\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\n\t\t\t\t\t\tself.editedCells.push(cell);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.setValue(value, true);\n\t\t\t\t\t\n\t\t\t\t\treturn valid === true;\n\t\t\t\t}else {\n\t\t\t\t\tself.invalidEdit = true;\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\t\trendered();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t//handle aborted edit\n\t\tfunction cancel(){\n\t\t\tif(self.currentCell === cell){\n\t\t\t\tself.cancelEdit();\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\trendered = callback;\n\t\t}\n\t\t\n\t\tif(!cell.column.modules.edit.blocked){\n\t\t\tif(e){\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t\t\n\t\t\tallowEdit = this.allowEdit(cell);\n\t\t\t\n\t\t\tif(allowEdit || forceEdit){\n\t\t\t\t\n\t\t\t\tself.cancelEdit();\n\t\t\t\t\n\t\t\t\tself.currentCell = cell;\n\t\t\t\t\n\t\t\t\tthis.focusScrollAdjust(cell);\n\t\t\t\t\n\t\t\t\tcomponent = cell.getComponent();\n\t\t\t\t\n\t\t\t\tif(this.mouseClick){\n\t\t\t\t\tthis.mouseClick = false;\n\t\t\t\t\t\n\t\t\t\t\tif(cell.column.definition.cellClick){\n\t\t\t\t\t\tcell.column.definition.cellClick.call(this.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(cell.column.definition.cellEditing){\n\t\t\t\t\tcell.column.definition.cellEditing.call(this.table, component);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"cell-editing\", cell);\n\t\t\t\tthis.dispatchExternal(\"cellEditing\", component);\n\t\t\t\t\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\t\t\t\t\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\t\t\t\t\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\t\tif(this.currentCell && cellEditor !== false){\n\t\t\t\t\tif(cellEditor instanceof Node){\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.table.element.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\t\t\t\telement.appendChild(cellEditor);\n\t\t\t\t\t\t\n\t\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\t\trendered();\n\t\t\t\t\t\t\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\t\tvar children = element.children;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\t\telement.blur();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\telement.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t}else {\n\t\t\t\tthis.mouseClick = false;\n\t\t\t\telement.blur();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else {\n\t\t\tthis.mouseClick = false;\n\t\t\telement.blur();\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetEditedCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.editedCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearEdited(cell){\n\t\tvar editIndex;\n\t\t\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\n\t\t\tcell.modules.edit.edited = false;\n\t\t\t\n\t\t\tthis.dispatch(\"edit-edited-clear\", cell);\n\t\t}\n\t\t\n\t\teditIndex = this.editedCells.indexOf(cell);\n\t\t\n\t\tif(editIndex > -1){\n\t\t\tthis.editedCells.splice(editIndex, 1);\n\t\t}\n\t}\n}\n\nEdit$1.moduleName = \"edit\";\n\n//load defaults\nEdit$1.editors = defaultEditors;\n\nclass ExportRow{\n\tconstructor(type, columns, component, indent){\n\t\tthis.type = type;\n\t\tthis.columns = columns;\n\t\tthis.component = component || false;\n\t\tthis.indent = indent || 0;\n\t}\n}\n\nclass ExportColumn{\n\tconstructor(value, component, width, height, depth){\n\t\tthis.value = value;\n\t\tthis.component = component || false;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = depth;\n\t}\n}\n\nclass Export extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {};\n\t\tthis.cloneTableStyle = true;\n\t\tthis.colVisProp = \"\";\n\t\t\n\t\tthis.registerTableOption(\"htmlOutputConfig\", false); //html output config\n\t\t\n\t\tthis.registerColumnOption(\"htmlOutput\");\n\t\tthis.registerColumnOption(\"titleHtmlOutput\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tgenerateExportList(config, style, range, colVisProp){\n\t\tthis.cloneTableStyle = style;\n\t\tthis.config = config || {};\n\t\tthis.colVisProp = colVisProp;\n\t\t\n\t\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\n\t\tvar body = this.bodyToExportRows(this.rowLookup(range));\n\t\t\n\t\treturn headers.concat(body);\n\t}\n\t\n\tgenerateTable(config, style, range, colVisProp){\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\n\t\t\n\t\treturn this.generateTableElement(list);\n\t}\n\t\n\trowLookup(range){\n\t\tvar rows = [];\n\t\t\n\t\tif(typeof range == \"function\"){\n\t\t\trange.call(this.table).forEach((row) =>{\n\t\t\t\trow = this.table.rowManager.findRow(row);\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\tswitch(range){\n\t\t\t\tcase true:\n\t\t\t\tcase \"visible\":\n\t\t\t\t\trows = this.table.rowManager.getVisibleRows(false, true);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"all\":\n\t\t\t\t\trows = this.table.rowManager.rows;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"selected\":\n\t\t\t\t\trows = this.table.modules.selectRow.selectedRows;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"active\":\n\t\t\t\tdefault:\n\t\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\t\trows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\n\t\t\t\t\t}else {\n\t\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Object.assign([], rows);\n\t}\n\t\n\tgenerateColumnGroupHeaders(){\n\t\tvar output = [];\n\t\t\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\tvar colData = this.processColumnGroup(column);\n\t\t\t\n\t\t\tif(colData){\n\t\t\t\toutput.push(colData);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tprocessColumnGroup(column){\n\t\tvar subGroups = column.columns,\n\t\tmaxDepth = 0,\n\t\ttitle = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\n\t\t\n\t\tvar groupData = {\n\t\t\ttitle:title,\n\t\t\tcolumn:column,\n\t\t\tdepth:1,\n\t\t};\n\t\t\n\t\tif(subGroups.length){\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\t\t\t\n\t\t\tsubGroups.forEach((subGroup) => {\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\n\t\t\t\t\n\t\t\t\tif(subGroupData){\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\t\t\t\t\t\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tgroupData.depth += maxDepth;\n\t\t\t\n\t\t\tif(!groupData.width){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else {\n\t\t\tif(this.columnVisCheck(column)){\n\t\t\t\tgroupData.width = 1;\n\t\t\t}else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn groupData;\n\t}\n\t\n\tcolumnVisCheck(column){\n\t\tvar visProp = column.definition[this.colVisProp];\n\t\t\n\t\tif(typeof visProp === \"function\"){\n\t\t\tvisProp = visProp.call(this.table, column.getComponent());\n\t\t}\n\t\t\n\t\treturn visProp !== false && (column.visible || (!column.visible && visProp));\n\t}\n\t\n\theadersToExportRows(columns){\n\t\tvar headers = [],\n\t\theaderDepth = 0,\n\t\texportRows = [];\n\t\t\n\t\tfunction parseColumnGroup(column, level){\n\t\t\t\n\t\t\tvar depth = headerDepth - level;\n\t\t\t\n\t\t\tif(typeof headers[level] === \"undefined\"){\n\t\t\t\theaders[level] = [];\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\n\t\t\t\n\t\t\theaders[level].push(column);\n\t\t\t\n\t\t\tif(column.height > 1){\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\n\t\t\t\t\t\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\n\t\t\t\t\t\theaders[level + i] = [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\theaders[level + i].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.width > 1){\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\n\t\t\t\t\theaders[level].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.subGroups){\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\t//calculate maximum header depth\n\t\tcolumns.forEach(function(column){\n\t\t\tif(column.depth > headerDepth){\n\t\t\t\theaderDepth = column.depth;\n\t\t\t}\n\t\t});\n\t\t\n\t\tcolumns.forEach(function(column){\n\t\t\tparseColumnGroup(column,0);\n\t\t});\n\t\t\n\t\theaders.forEach((header) => {\n\t\t\tvar columns = [];\n\t\t\t\n\t\t\theader.forEach((col) => {\n\t\t\t\tif(col){\n\t\t\t\t\tlet title = typeof col.title === \"undefined\" ? \"\" : col.title;\n\t\t\t\t\tcolumns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\n\t\t\t\t}else {\n\t\t\t\t\tcolumns.push(null);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tbodyToExportRows(rows){\n\t\t\n\t\tvar columns = [];\n\t\tvar exportRows = [];\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif (this.columnVisCheck(column)) {\n\t\t\t\tcolumns.push(column.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\t\t\n\t\trows = rows.filter((row) => {\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn this.config.rowGroups !== false;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\treturn this.config.columnCalcs !== false;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t});\n\t\t\n\t\trows.forEach((row, i) => {\n\t\t\tvar rowData = row.getData(this.colVisProp);\n\t\t\tvar exportCols = [];\n\t\t\tvar indent = 0;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\tindent = row.level;\n\t\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\" :\n\t\t\t\tcase \"row\" :\n\t\t\t\t\tcolumns.forEach((col) => {\n\t\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\t\tindent = row.modules.dataTree.index;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tgenerateTableElement(list){\n\t\tvar table = document.createElement(\"table\"),\n\t\theaderEl = document.createElement(\"thead\"),\n\t\tbodyEl = document.createElement(\"tbody\"),\n\t\tstyles = this.lookupTableStyles(),\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\n\t\tsetup = {};\n\t\t\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\t\t\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\n\t\t}\n\t\t\n\t\t//assign group header formatter\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n\t\t\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\n\t\t\tsetup.groupHeader = [setup.groupHeader];\n\t\t}\n\t\t\n\t\ttable.classList.add(\"tabulator-print-table\");\n\t\t\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\n\t\t\n\t\tif(list.length > 1000){\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t\t}\n\t\t\n\t\tlist.forEach((row, i) => {\n\t\t\tlet rowEl;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"header\":\n\t\t\t\t\theaderEl.appendChild(this.generateHeaderElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"group\":\n\t\t\t\t\tbodyEl.appendChild(this.generateGroupElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tbodyEl.appendChild(this.generateCalcElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\trowEl = this.generateRowElement(row, setup, styles);\n\t\t\t\t\n\t\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\t\tbodyEl.appendChild(rowEl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(headerEl.innerHTML){\n\t\t\ttable.appendChild(headerEl);\n\t\t}\n\t\t\n\t\ttable.appendChild(bodyEl);\n\t\t\n\t\t\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\t\treturn table;\n\t}\n\t\n\tlookupTableStyles(){\n\t\tvar styles = {};\n\t\t\n\t\t//lookup row styles\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\t\t\t\n\t\t\tif(styles.firstRow){\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn styles;\n\t}\n\t\n\tgenerateHeaderElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trow.columns.forEach((column) => {\n\t\t\tif(column){\n\t\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tcellEl.colSpan = column.width;\n\t\t\t\tcellEl.rowSpan = column.height;\n\t\t\t\t\n\t\t\t\tcellEl.innerHTML = column.value;\n\t\t\t\t\n\t\t\t\tif(this.cloneTableStyle){\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\t\t\n\t\t\t\tif(column.component._column.visible){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n\t\t\t\t}else {\n\t\t\t\t\tif(column.component._column.definition.width){\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.component._column.parent){\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateGroupElement(row, setup, styles){\n\t\t\n\t\tvar rowEl = document.createElement(\"tr\"),\n\t\tcellEl = document.createElement(\"td\"),\n\t\tgroup = row.columns[0];\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t}else {\n\t\t\tif(setup.groupHeader !== false){\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t}\n\t\t}\n\t\t\n\t\tcellEl.colSpan = group.width;\n\t\tcellEl.innerHTML = group.value;\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\t\t\n\t\tif(group.component.isVisible()){\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\n\t\trowEl.appendChild(cellEl);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateCalcElement(row, setup, styles){\n\t\tvar rowEl = this.generateRowElement(row, setup, styles);\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateRowElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\trow.columns.forEach((col, i) => {\n\t\t\tif(col){\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\n\t\t\t\tcolumn = col.component._column,\n\t\t\t\tindex = this.table.columnManager.findColumnIndex(column),\n\t\t\t\tvalue = col.value,\n\t\t\t\tcellStyle;\n\t\t\t\t\n\t\t\t\tvar cellWrapper = {\n\t\t\t\t\tmodules:{},\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn cellEl;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\treturn row.component.getData();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn row.component;\n\t\t\t\t\t},\n\t\t\t\t\tgetComponent:function(){\n\t\t\t\t\t\treturn cellWrapper;\n\t\t\t\t\t},\n\t\t\t\t\tcolumn:column,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\n\t\t\t\t}else {\n\t\t\t\t\tswitch(typeof value){\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = value !== null ? JSON.stringify(value) : \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(value instanceof Node){\n\t\t\t\t\tcellEl.appendChild(value);\n\t\t\t\t}else {\n\t\t\t\t\tcellEl.innerHTML = value;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell;\n\t\t\t\t\n\t\t\t\tif(cellStyle){\n\t\t\t\t\tthis.mapElementStyles(cellStyle, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"]);\n\t\t\t\t\t\n\t\t\t\t\tif(column.definition.align){\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t\t\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(setup.rowFormatter && row.type === \"row\" && this.config.formatCells !== false){\n\t\t\tlet formatComponent = Object.assign(row.component);\n\n\t\t\tformatComponent.getElement = function(){return rowEl;};\n\n\t\t\tsetup.rowFormatter(row.component);\n\t\t}\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateHTMLTable(list){\n\t\tvar holder = document.createElement(\"div\");\n\t\t\n\t\tholder.appendChild(this.generateTableElement(list));\n\t\t\n\t\treturn holder.innerHTML;\n\t}\n\t\n\tgetHtml(visible, style, config, colVisProp){\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n\t\t\n\t\treturn this.generateHTMLTable(list);\n\t}\n\t\n\tmapElementStyles(from, to, props){\n\t\tif(this.cloneTableStyle && from && to){\n\t\t\t\n\t\t\tvar lookup = {\n\t\t\t\t\"background-color\" : \"backgroundColor\",\n\t\t\t\t\"color\" : \"fontColor\",\n\t\t\t\t\"width\" : \"width\",\n\t\t\t\t\"font-weight\" : \"fontWeight\",\n\t\t\t\t\"font-family\" : \"fontFamily\",\n\t\t\t\t\"font-size\" : \"fontSize\",\n\t\t\t\t\"text-align\" : \"textAlign\",\n\t\t\t\t\"border-top\" : \"borderTop\",\n\t\t\t\t\"border-left\" : \"borderLeft\",\n\t\t\t\t\"border-right\" : \"borderRight\",\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\n\t\t\t\t\"padding-top\" : \"paddingTop\",\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\n\t\t\t\t\"padding-right\" : \"paddingRight\",\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\n\t\t\t};\n\t\t\t\n\t\t\tif(window.getComputedStyle){\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\n\t\t\t\t\n\t\t\t\tprops.forEach(function(prop){\n\t\t\t\t\tif(!to.style[lookup[prop]]){\n\t\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nExport.moduleName = \"export\";\n\nvar defaultFilters = {\n\n\t//equal to\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal == filterVal ? true : false;\n\t},\n\n\t//less than\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal < filterVal ? true : false;\n\t},\n\n\t//less than or equal to\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal <= filterVal ? true : false;\n\t},\n\n\t//greater than\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal > filterVal ? true : false;\n\t},\n\n\t//greater than or equal to\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal >= filterVal ? true : false;\n\t},\n\n\t//not equal to\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal != filterVal ? true : false;\n\t},\n\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\n\n\t\tif(typeof filterVal == \"string\"){\n\t\t\tfilterVal = new RegExp(filterVal);\n\t\t}\n\n\t\treturn filterVal.test(rowVal);\n\t},\n\n\t//contains the string\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else {\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//contains the keywords\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n\t\tmatches = [];\n\n\t\tkeywords.forEach((keyword) =>{\n\t\t\tif(value.includes(keyword)){\n\t\t\t\tmatches.push(true);\n\t\t\t}\n\t\t});\n\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n\t},\n\n\t//starts with the string\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else {\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//ends with the string\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else {\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//in array\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(Array.isArray(filterVal)){\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n\t\t}else {\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\treturn false;\n\t\t}\n\t},\n};\n\nclass Filter extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.filterList = []; //hold filter list\n\t\tthis.headerFilters = {}; //hold column filters\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.changed = false; //has filtering changed since last render\n\t\tthis.tableInitialized = false;\n\n\t\tthis.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\n\n\t\tthis.registerTableOption(\"initialFilter\", false); //initial filtering criteria\n\t\tthis.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\n\t\tthis.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\n\t\tthis.registerTableOption(\"placeholderHeaderFilter\", false); //placeholder when header filter is empty\n\n\t\tthis.registerColumnOption(\"headerFilter\");\n\t\tthis.registerColumnOption(\"headerFilterPlaceholder\");\n\t\tthis.registerColumnOption(\"headerFilterParams\");\n\t\tthis.registerColumnOption(\"headerFilterEmptyCheck\");\n\t\tthis.registerColumnOption(\"headerFilterFunc\");\n\t\tthis.registerColumnOption(\"headerFilterFuncParams\");\n\t\tthis.registerColumnOption(\"headerFilterLiveFilter\");\n\n\t\tthis.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\n\t\tthis.registerTableFunction(\"searchData\", this.searchData.bind(this));\n\n\t\tthis.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\n\t\tthis.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\n\t\tthis.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\n\t\tthis.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\n\t\tthis.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\n\n\t\tthis.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\n\t\tthis.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.subscribe(\"placeholder\", this.generatePlaceholder.bind(this));\n\n\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\n\t\t}\n\n\t\tthis.registerDataHandler(this.filter.bind(this), 10);\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialFilter){\n\t\t\tthis.setFilter(this.table.options.initialFilter);\n\t\t}\n\n\t\tif(this.table.options.initialHeaderFilter){\n\t\t\tthis.table.options.initialHeaderFilter.forEach((item) => {\n\n\t\t\t\tvar column = this.table.columnManager.findColumn(item.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.setHeaderFilterValue(column, item.value);\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.tableInitialized = true;\n\t}\n\n\tremoteFilterParams(data, config, silent, params){\n\t\tparams.filter = this.getFilters(true, true);\n\t\treturn params;\n\t}\n\n\tgeneratePlaceholder(text){\n\t\tif(this.table.options.placeholderHeaderFilter && Object.keys(this.headerFilters).length){\n\t\t\treturn this.table.options.placeholderHeaderFilter;\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t//set standard filters\n\tuserSetFilter(field, type, value, params){\n\t\tthis.setFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\t//set standard filters\n\tuserRefreshFilter(){\n\t\tthis.refreshFilter();\n\t}\n\n\t//add filter to array\n\tuserAddFilter(field, type, value, params){\n\t\tthis.addFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\tuserSetHeaderFilterFocus(field){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterFocus(column);\n\t\t}else {\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tuserGetHeaderFilterValue(field) {\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\treturn this.getHeaderFilterValue(column);\n\t\t}else {\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t}\n\t}\n\n\tuserSetHeaderFilterValue(field, value){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterValue(column, value);\n\t\t}else {\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//remove filter from array\n\tuserRemoveFilter(field, type, value){\n\t\tthis.removeFilter(field, type, value);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear filters\n\tuserClearFilter(all){\n\t\tthis.clearFilter(all);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear header filters\n\tuserClearHeaderFilter(){\n\t\tthis.clearHeaderFilter();\n\t\tthis.refreshFilter();\n\t}\n\n\n\t//search for specific row components\n\tsearchRows(field, type, value){\n\t\treturn this.search(\"rows\", field, type, value);\n\t}\n\n\t//search for specific data\n\tsearchData(field, type, value){\n\t\treturn this.search(\"data\", field, type, value);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumnHeaderFilter(column){\n\t\tvar def = column.definition;\n\n\t\tif(def.headerFilter){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\n\t//initialize column header filter\n\tinitializeColumn(column, value){\n\t\tvar self = this,\n\t\tfield = column.getField();\n\n\t\t//handle successfully value change\n\t\tfunction success(value){\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t\ttype = \"\",\n\t\t\tfilterChangeCheck = \"\",\n\t\t\tfilterFunc;\n\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\n\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\n\t\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\n\t\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!filterFunc){\n\t\t\t\t\t\tswitch(filterType){\n\t\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\n\t\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type};\n\t\t\t\t}else {\n\t\t\t\t\tdelete self.headerFilters[field];\n\t\t\t\t}\n\n\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\t\tself.trackChanges();\n\t\t\t\t\tself.refreshFilter();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tcolumn.modules.filter = {\n\t\t\tsuccess:success,\n\t\t\tattrType:false,\n\t\t\ttagType:false,\n\t\t\temptyFunc:false,\n\t\t};\n\n\t\tthis.generateHeaderFilterElement(column);\n\t}\n\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\n\t\tvar self = this,\n\t\tsuccess = column.modules.filter.success,\n\t\tfield = column.getField(),\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params, onRenderedCallback;\n\n\t\tcolumn.modules.filter.value = initialValue;\n\n\t\t//handle aborted edit\n\t\tfunction cancel(){}\n\n\t\tfunction onRendered(callback){\n\t\t\tonRenderedCallback = callback;\n\t\t}\n\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t\t}\n\n\t\tif(field){\n\n\t\t\t//set empty value function\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\n\t\t\t\treturn !value && value !== 0;\n\t\t\t};\n\n\t\t\tfilterElement = document.createElement(\"div\");\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t\t//set column editor\n\t\t\tswitch(typeof column.definition.headerFilter){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\n\t\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(editor){\n\n\t\t\t\tcellWrapper = {\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn filterElement;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:() => {\n\t\t\t\t\t\treturn \"header\";\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tnormalizeHeight:function(){\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\n\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, onRendered, success, cancel, params);\n\n\t\t\t\tif(!editorElement){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(!(editorElement instanceof Node)){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//set Placeholder Text\n\t\t\t\tself.langBind(\"headerFilters|columns|\" + column.definition.field, function(value){\n\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : (column.definition.headerFilterPlaceholder || self.langText(\"headerFilters|default\")));\n\t\t\t\t});\n\n\t\t\t\t//focus on element on click\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\teditorElement.focus();\n\t\t\t\t});\n\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\n\t\t\t\t\tvar left = this.table.columnManager.contentsElement.scrollLeft;\n\n\t\t\t\t\tvar headerPos = this.table.rowManager.element.scrollLeft;\n\n\t\t\t\t\tif(left !== headerPos){\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//live update filters as user types\n\t\t\t\ttypingTimer = false;\n\n\t\t\t\tsearchTrigger = function(e){\n\t\t\t\t\tif(typingTimer){\n\t\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t\t}\n\n\t\t\t\t\ttypingTimer = setTimeout(function(){\n\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\n\t\t\t\t};\n\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\n\t\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\n\t\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\n\t\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\n\t\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//prevent input and select elements from propagating click to column sorters etc\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\t\tif(!reinitialize){\n\t\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t\t}\n\n\t\t\t\tif(onRenderedCallback){\n\t\t\t\t\tonRenderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t\t}\n\t}\n\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\thideHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t\t}\n\t\t});\n\t}\n\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tshowHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t\t}\n\t\t});\n\t}\n\n\t//programmatically set focus of header filter\n\tsetHeaderFilterFocus(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\tcolumn.modules.filter.headerElement.focus();\n\t\t}else {\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically get value of header filter\n\tgetHeaderFilterValue(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\treturn column.modules.filter.value;\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically set value of header filter\n\tsetHeaderFilterValue(column, value){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\t\tcolumn.modules.filter.success(value);\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\treloadHeaderFilter(column){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshFilter(){\n\t\tif(this.tableInitialized){\n\t\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\t\tthis.reloadData(null, false, false);\n\t\t\t}else {\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the filters has changed since last use\n\ttrackChanges(){\n\t\tthis.changed = true;\n\t\tthis.dispatch(\"filter-changed\");\n\t}\n\n\t//check if the filters has changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//set standard filters\n\tsetFilter(field, type, value, params){\n\t\tthis.filterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tthis.addFilter(field);\n\t}\n\n\t//add filter to array\n\taddFilter(field, type, value, params){\n\t\tvar changed = false;\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tthis.filterList.push(filter);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\n\t\tif(changed){\n\t\t\tthis.trackChanges();\n\t\t}\n\t}\n\n\tfindFilter(filter){\n\t\tvar column;\n\n\t\tif(Array.isArray(filter)){\n\t\t\treturn this.findSubFilters(filter);\n\t\t}\n\n\t\tvar filterFunc = false;\n\n\t\tif(typeof filter.field == \"function\"){\n\t\t\tfilterFunc = function(data){\n\t\t\t\treturn filter.field(data, filter.type || {});// pass params to custom filter function\n\t\t\t};\n\t\t}else {\n\n\t\t\tif(Filter.filters[filter.type]){\n\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(filter.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}else {\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}\n\n\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t}\n\n\t\tfilter.func = filterFunc;\n\n\t\treturn filter.func ? filter : false;\n\t}\n\n\tfindSubFilters(filters){\n\t\tvar output = [];\n\n\t\tfilters.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\toutput.push(filter);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : false;\n\t}\n\n\t//get all filters\n\tgetFilters(all, ajax){\n\t\tvar output = [];\n\n\t\tif(all){\n\t\t\toutput = this.getHeaderFilters();\n\t\t}\n\n\t\tif(ajax){\n\t\t\toutput.forEach(function(item){\n\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\t\treturn output;\n\t}\n\n\t//filter to Object\n\tfiltersToArray(filterList, ajax){\n\t\tvar output = [];\n\n\t\tfilterList.forEach((filter) => {\n\t\t\tvar item;\n\n\t\t\tif(Array.isArray(filter)){\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\n\t\t\t}else {\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value};\n\n\t\t\t\tif(ajax){\n\t\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\t\titem.type = \"function\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//get all filters\n\tgetHeaderFilters(){\n\t\tvar output = [];\n\n\t\tfor(var key in this.headerFilters){\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//remove filter from array\n\tremoveFilter(field, type, value){\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tvar index = -1;\n\n\t\t\tif(typeof filter.field == \"object\"){\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter === element;\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.filterList.splice(index, 1);\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear filters\n\tclearFilter(all){\n\t\tthis.filterList = [];\n\n\t\tif(all){\n\t\t\tthis.clearHeaderFilter();\n\t\t}\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear header filters\n\tclearHeaderFilter(){\n\t\tthis.headerFilters = {};\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.headerFilterColumns.forEach((column) => {\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\n\t\t\t\tdelete column.modules.filter.value;\n\t\t\t}\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\t\tthis.reloadHeaderFilter(column);\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//search data and return matching rows\n\tsearch (searchType, field, type, value){\n\t\tvar activeRows = [],\n\t\tfilterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tfilterList.push(filter);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\tvar match = true;\n\n\t\t\tfilterList.forEach((filter) => {\n\t\t\t\tif(!this.filterRecurse(filter, row.getData())){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t\t}\n\n\t\t});\n\n\t\treturn activeRows;\n\t}\n\n\t//filter row array\n\tfilter(rowList, filters){\n\t\tvar activeRows = [],\n\t\tactiveRowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataFiltering\")){\n\t\t\tthis.dispatchExternal(\"dataFiltering\", this.getFilters(true));\n\t\t}\n\n\t\tif(this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)){\n\n\t\t\trowList.forEach((row) => {\n\t\t\t\tif(this.filterRow(row)){\n\t\t\t\t\tactiveRows.push(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}else {\n\t\t\tactiveRows = rowList.slice(0);\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataFiltered\")){\n\n\t\t\tactiveRows.forEach((row) => {\n\t\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\n\t\t}\n\n\t\treturn activeRows;\n\t}\n\n\t//filter individual row\n\tfilterRow(row, filters){\n\t\tvar match = true,\n\t\tdata = row.getData();\n\n\t\tthis.filterList.forEach((filter) => {\n\t\t\tif(!this.filterRecurse(filter, data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\n\t\tfor(var field in this.headerFilters){\n\t\t\tif(!this.headerFilters[field].func(data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t}\n\n\tfilterRecurse(filter, data){\n\t\tvar match = false;\n\n\t\tif(Array.isArray(filter)){\n\t\t\tfilter.forEach((subFilter) => {\n\t\t\t\tif(this.filterRecurse(subFilter, data)){\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\tmatch = filter.func(data);\n\t\t}\n\n\t\treturn match;\n\t}\n}\n\nFilter.moduleName = \"filter\";\n\n//load defaults\nFilter.filters = defaultFilters;\n\nfunction plaintext(cell, formatterParams, onRendered){\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}\n\nfunction html$1(cell, formatterParams, onRendered){\n\treturn cell.getValue();\n}\n\nfunction textarea$1(cell, formatterParams, onRendered){\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}\n\nfunction money(cell, formatterParams, onRendered){\n\tvar floatVal = parseFloat(cell.getValue()),\n\tsign = \"\",\n\tnumber, integer, decimal, rgx, value;\n\n\tvar decimalSym = formatterParams.decimal || \".\";\n\tvar thousandSym = formatterParams.thousand || \",\";\n\tvar negativeSign = formatterParams.negativeSign || \"-\";\n\tvar symbol = formatterParams.symbol || \"\";\n\tvar after = !!formatterParams.symbolAfter;\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\tif(isNaN(floatVal)){\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t}\n\n\tif(floatVal < 0){\n\t\tfloatVal = Math.abs(floatVal);\n\t\tsign = negativeSign;\n\t}\n\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\tnumber = String(number).split(\".\");\n\n\tinteger = number[0];\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\tif (formatterParams.thousand !== false) {\n\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\twhile (rgx.test(integer)){\n\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t}\n\t}\n\n\tvalue = integer + decimal;\n\t\n\tif(sign === true){\n\t\tvalue = \"(\" + value  + \")\";\n\t\treturn after ? value + symbol : symbol + value;\n\t}else {\n\t\treturn after ? sign + value + symbol : sign + symbol + value;\n\t}\n}\n\nfunction link(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\turlPrefix = formatterParams.urlPrefix || \"\",\n\tdownload = formatterParams.download,\n\tlabel = value,\n\tel = document.createElement(\"a\"),\n\tdata;\n\n\tfunction labelTraverse(path, data){\n\t\tvar item = path.shift(),\n\t\tvalue = data[item];\n\t\t\n\t\tif(path.length && typeof value === \"object\"){\n\t\t\treturn labelTraverse(path, value);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tif(formatterParams.labelField){\n\t\tdata = cell.getData();\n\t\tlabel = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\n\t}\n\n\tif(formatterParams.label){\n\t\tswitch(typeof formatterParams.label){\n\t\t\tcase \"string\":\n\t\t\t\tlabel = formatterParams.label;\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tlabel = formatterParams.label(cell);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(label){\n\t\tif(formatterParams.urlField){\n\t\t\tdata = cell.getData();\n\t\t\tvalue = data[formatterParams.urlField];\n\t\t}\n\n\t\tif(formatterParams.url){\n\t\t\tswitch(typeof formatterParams.url){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tvalue = formatterParams.url;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\tif(formatterParams.target){\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t}\n\n\t\tif(formatterParams.download){\n\n\t\t\tif(typeof download == \"function\"){\n\t\t\t\tdownload = download(cell);\n\t\t\t}else {\n\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t}\n\n\t\t\tel.setAttribute(\"download\", download);\n\t\t}\n\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\treturn el;\n\t}else {\n\t\treturn \"&nbsp;\";\n\t}\n}\n\nfunction image(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"img\"),\n\tsrc = cell.getValue();\n\n\tif(formatterParams.urlPrefix){\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\n\t}\n\n\tif(formatterParams.urlSuffix){\n\t\tsrc = src + formatterParams.urlSuffix;\n\t}\n\n\tel.setAttribute(\"src\", src);\n\n\tswitch(typeof formatterParams.height){\n\t\tcase \"number\":\n\t\t\tel.style.height = formatterParams.height + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.height = formatterParams.height;\n\t\t\tbreak;\n\t}\n\n\tswitch(typeof formatterParams.width){\n\t\tcase \"number\":\n\t\t\tel.style.width = formatterParams.width + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.width = formatterParams.width;\n\t\t\tbreak;\n\t}\n\n\tel.addEventListener(\"load\", function(){\n\t\tcell.getRow().normalizeHeight();\n\t});\n\n\treturn el;\n}\n\nfunction tickCross$1(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tempty = formatterParams.allowEmpty,\n\ttruthy = formatterParams.allowTruthy,\n\ttrueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\tif((trueValueSet && value === formatterParams.trueValue) || (!trueValueSet && ((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")))){\n\t\telement.setAttribute(\"aria-checked\", true);\n\t\treturn tick || \"\";\n\t}else {\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\treturn \"\";\n\t\t}else {\n\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\treturn cross || \"\";\n\t\t}\n\t}\n}\n\nfunction datetime$1(cell, formatterParams, onRendered){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar\toutputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else {\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif(newDatetime.isValid){\n\t\t\tif(formatterParams.timezone){\n\t\t\t\tnewDatetime = newDatetime.setZone(formatterParams.timezone);\n\t\t\t}\n\n\t\t\treturn newDatetime.toFormat(outputFormat);\n\t\t}else {\n\t\t\tif(invalid === true || !value){\n\t\t\t\treturn value;\n\t\t\t}else if(typeof invalid === \"function\"){\n\t\t\t\treturn invalid(value);\n\t\t\t}else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else {\n\t\tconsole.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n\t}\n}\n\nfunction datetimediff (cell, formatterParams, onRendered) {\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else {\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif (newDatetime.isValid){\n\t\t\tif(humanize){\n\t\t\t\treturn newDatetime.diff(date, unit).toHuman()  + (suffix ? \" \" + suffix : \"\");\n\t\t\t}else {\n\t\t\t\treturn parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (invalid === true) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\treturn invalid(value);\n\t\t\t} else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else {\n\t\tconsole.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n\t}\n}\n\nfunction lookup (cell, formatterParams, onRendered) {\n\tvar value = cell.getValue();\n\n\tif (typeof formatterParams[value] === \"undefined\") {\n\t\tconsole.warn('Missing display value for ' + value);\n\t\treturn value;\n\t}\n\n\treturn formatterParams[value];\n}\n\nfunction star$1(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\tstars = document.createElement(\"span\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t//style stars holder\n\tstars.style.verticalAlign = \"middle\";\n\n\t//style star\n\tstar.setAttribute(\"width\", \"14\");\n\tstar.setAttribute(\"height\", \"14\");\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\tfor(var i=1;i<= maxStars;i++){\n\t\tvar nextStar = star.cloneNode(true);\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\tstars.appendChild(nextStar);\n\t}\n\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\telement.setAttribute(\"aria-label\", value);\n\n\treturn stars;\n}\n\nfunction traffic(cell, formatterParams, onRendered){\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\tel = document.createElement(\"span\"),\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\tcolor = \"#666666\",\n\tpercent, percentValue;\n\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\n\t\treturn;\n\t}\n\n\tel.classList.add(\"tabulator-traffic-light\");\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set color\n\tswitch(typeof colors){\n\t\tcase \"string\":\n\t\t\tcolor = colors;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = colors(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(colors)){\n\t\t\t\tvar unit = 100 / colors.length;\n\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = colors[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t}\n\n\tel.style.backgroundColor = color;\n\n\treturn el;\n}\n\nfunction progress$1(cell, formatterParams = {}, onRendered){ //progress bar\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\telement = cell.getElement(),\n\tmax = formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams.min ? formatterParams.min : 0,\n\tlegendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\tpercent, percentValue, color, legend, legendColor;\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set bar color\n\tswitch(typeof formatterParams.color){\n\t\tcase \"string\":\n\t\t\tcolor = formatterParams.color;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = formatterParams.color(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.color)){\n\t\t\t\tlet unit = 100 / formatterParams.color.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = formatterParams.color[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\tdefault:\n\t\t\tcolor = \"#2DC214\";\n\t}\n\n\t//generate legend\n\tswitch(typeof formatterParams.legend){\n\t\tcase \"string\":\n\t\t\tlegend = formatterParams.legend;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegend = formatterParams.legend(value);\n\t\t\tbreak;\n\t\tcase \"boolean\":\n\t\t\tlegend = value;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegend = false;\n\t}\n\n\t//set legend color\n\tswitch(typeof formatterParams.legendColor){\n\t\tcase \"string\":\n\t\t\tlegendColor = formatterParams.legendColor;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegendColor = formatterParams.legendColor(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.legendColor)){\n\t\t\t\tlet unit = 100 / formatterParams.legendColor.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegendColor = \"#000\";\n\t}\n\n\telement.style.minWidth = \"30px\";\n\telement.style.position = \"relative\";\n\n\telement.setAttribute(\"aria-label\", percentValue);\n\n\tvar barEl = document.createElement(\"div\");\n\tbarEl.style.display = \"inline-block\";\n\tbarEl.style.width = percentValue + \"%\";\n\tbarEl.style.backgroundColor = color;\n\tbarEl.style.height = \"100%\";\n\n\tbarEl.setAttribute('data-max', max);\n\tbarEl.setAttribute('data-min', min);\n\n\tvar barContainer = document.createElement(\"div\");\n\tbarContainer.style.position = \"relative\";\n\tbarContainer.style.width = \"100%\";\n\tbarContainer.style.height = \"100%\";\n\n\tif(legend){\n\t\tvar legendEl = document.createElement(\"div\");\n\t\tlegendEl.style.position = \"absolute\";\n\t\tlegendEl.style.top = 0;\n\t\tlegendEl.style.left = 0;\n\t\tlegendEl.style.textAlign = legendAlign;\n\t\tlegendEl.style.width = \"100%\";\n\t\tlegendEl.style.color = legendColor;\n\t\tlegendEl.innerHTML = legend;\n\t}\n\n\tonRendered(function(){\n\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\tif(!(cell instanceof CellComponent)){\n\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\tholderEl.style.position = \"absolute\";\n\t\t\tholderEl.style.top = \"4px\";\n\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\tholderEl.style.left = \"4px\";\n\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\telement.appendChild(holderEl);\n\n\t\t\telement = holderEl;\n\t\t}\n\n\t\telement.appendChild(barContainer);\n\t\tbarContainer.appendChild(barEl);\n\n\t\tif(legend){\n\t\t\tbarContainer.appendChild(legendEl);\n\t\t}\n\t});\n\n\treturn \"\";\n}\n\nfunction color(cell, formatterParams, onRendered){\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\treturn \"\";\n}\n\nfunction buttonTick(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n}\n\nfunction buttonCross(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n}\n\nfunction rownum(cell, formatterParams, onRendered){\n\tvar content = document.createElement(\"span\");\n\tvar row = cell.getRow();\n\n\trow.watchPosition((position) => {\n\t\tcontent.innerText = position;\n\t});\n\t\n\treturn content;\n}\n\nfunction handle(cell, formatterParams, onRendered){\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n}\n\nfunction responsiveCollapse(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"div\"),\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\n\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\t\n\tel.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>\n\n<svg class='tabulator-responsive-collapse-toggle-close' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>`;\n\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\tfunction toggleList(isOpen){\n\t\tvar collapseEl = config.element;\n\n\t\tconfig.open = isOpen;\n\n\t\tif(collapseEl){\n\n\t\t\tif(config.open){\n\t\t\t\tel.classList.add(\"open\");\n\t\t\t\tcollapseEl.style.display = '';\n\t\t\t}else {\n\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tel.addEventListener(\"click\", function(e){\n\t\te.stopImmediatePropagation();\n\t\ttoggleList(!config.open);\n\t\tcell.getTable().rowManager.adjustTableSize();\n\t});\n\n\ttoggleList(config.open);\n\n\treturn el;\n}\n\nfunction rowSelection(cell, formatterParams, onRendered){\n\tvar checkbox = document.createElement(\"input\");\n\tvar blocked = false;\n\n\tcheckbox.type = 'checkbox';\n\n\tcheckbox.setAttribute(\"aria-label\", \"Select Row\");\n\t\n\tif(this.table.modExists(\"selectRow\", true)){\n\n\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(typeof cell.getRow == 'function'){\n\t\t\tvar row = cell.getRow();\n\n\t\t\tif(row instanceof RowComponent){\n\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\t\tif(!blocked){\n\t\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tblocked = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\tblocked = true;\n\t\t\t\t\t\tthis.table.modules.selectRow.handleComplexRowClick(row._row, e);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t}else {\n\t\t\t\tcheckbox = \"\";\n\t\t\t}\n\t\t}else {\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\n\t\t\t\t\tthis.table.deselectRow();\n\t\t\t\t}else {\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t}\n\t}\n\n\treturn checkbox;\n}\n\nvar defaultFormatters = {\n\tplaintext:plaintext,\n\thtml:html$1,\n\ttextarea:textarea$1,\n\tmoney:money,\n\tlink:link,\n\timage:image,\n\ttickCross:tickCross$1,\n\tdatetime:datetime$1,\n\tdatetimediff:datetimediff,\n\tlookup:lookup,\n\tstar:star$1,\n\ttraffic:traffic,\n\tprogress:progress$1,\n\tcolor:color,\n\tbuttonTick:buttonTick,\n\tbuttonCross:buttonCross,\n\trownum:rownum,\n\thandle:handle,\n\tresponsiveCollapse:responsiveCollapse,\n\trowSelection:rowSelection,\n};\n\nclass Format extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.registerColumnOption(\"formatter\");\n\t\tthis.registerColumnOption(\"formatterParams\");\n\t\t\n\t\tthis.registerColumnOption(\"formatterPrint\");\n\t\tthis.registerColumnOption(\"formatterPrintParams\");\n\t\tthis.registerColumnOption(\"formatterClipboard\");\n\t\tthis.registerColumnOption(\"formatterClipboardParams\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutput\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutputParams\");\n\t\tthis.registerColumnOption(\"titleFormatter\");\n\t\tthis.registerColumnOption(\"titleFormatterParams\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-format\", this.formatValue.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-format\", this.formatHeader.bind(this));\n\t}\n\t\n\t//initialize column formatter\n\tinitializeColumn(column){\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\n\t\t\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n\t\t}\n\t}\n\t\n\tlookupFormatter(column, type){\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\n\t\tformatter = column.definition[\"formatter\" + type];\n\t\t\n\t\t//set column formatter\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tconfig.formatter = Format.formatters[formatter];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tconfig.formatter = formatter;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn config;\n\t}\n\t\n\tcellRendered(cell){\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\n\t\t\tcell.modules.format.renderedCallback();\n\t\t\tcell.modules.format.rendered = true;\n\t\t}\n\t}\n\t\n\t//return a formatted value for a column header\n\tformatHeader(column, title, el){\n\t\tvar formatter, params, onRendered, mockCell;\n\t\t\n\t\tif(column.definition.titleFormatter){\n\t\t\tformatter = this.getFormatter(column.definition.titleFormatter);\n\t\t\t\n\t\t\tonRendered = (callback) => {\n\t\t\t\tcolumn.titleFormatterRendered = callback;\n\t\t\t};\n\t\t\t\n\t\t\tmockCell = {\n\t\t\t\tgetValue:function(){\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\t\t\t\tgetElement:function(){\n\t\t\t\t\treturn el;\n\t\t\t\t},\n\t\t\t\tgetType:function(){\n\t\t\t\t\treturn \"header\";\n\t\t\t\t},\n\t\t\t\tgetColumn:function(){\n\t\t\t\t\treturn column.getComponent();\n\t\t\t\t},\n\t\t\t\tgetTable:() => {\n\t\t\t\t\treturn this.table;\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tparams = column.definition.titleFormatterParams || {};\n\t\t\t\n\t\t\tparams = typeof params === \"function\" ? params() : params;\n\t\t\t\n\t\t\treturn formatter.call(this, mockCell, params, onRendered);\n\t\t}else {\n\t\t\treturn title;\n\t\t}\n\t}\n\t\n\t\n\t//return a formatted value for a cell\n\tformatValue(cell){\n\t\tvar component = cell.getComponent(),\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\tif(!cell.modules.format){\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\t\t\t\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\tcell.modules.format.rendered = false;\n\t\t}\n\t\t\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n\t}\n\t\n\tformatExportValue(cell, type){\n\t\tvar formatter = cell.column.modules.format[type],\n\t\tparams;\n\t\t\n\t\tif(formatter){\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(cell.getComponent()) : formatter.params;\n\t\t\t\n\t\t\tfunction onRendered(callback){\n\t\t\t\tif(!cell.modules.format){\n\t\t\t\t\tcell.modules.format = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\t\tcell.modules.format.rendered = false;\n\t\t\t}\n\t\t\t\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\t\t\t\n\t\t}else {\n\t\t\treturn this.formatValue(cell);\n\t\t}\n\t}\n\t\n\tsanitizeHTML(value){\n\t\tif(value){\n\t\t\tvar entityMap = {\n\t\t\t\t'&': '&amp;',\n\t\t\t\t'<': '&lt;',\n\t\t\t\t'>': '&gt;',\n\t\t\t\t'\"': '&quot;',\n\t\t\t\t\"'\": '&#39;',\n\t\t\t\t'/': '&#x2F;',\n\t\t\t\t'`': '&#x60;',\n\t\t\t\t'=': '&#x3D;'\n\t\t\t};\n\t\t\t\n\t\t\treturn String(value).replace(/[&<>\"'`=/]/g, function (s) {\n\t\t\t\treturn entityMap[s];\n\t\t\t});\n\t\t}else {\n\t\t\treturn value;\n\t\t}\n\t}\n\t\n\temptyToSpace(value){\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n\t}\n\t\n\t//get formatter for cell\n\tgetFormatter(formatter){\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tformatter = Format.formatters[formatter];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t//Custom formatter Function, do nothing\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn formatter;\n\t}\n}\n\nFormat.moduleName = \"format\";\n\n//load defaults\nFormat.formatters = defaultFormatters;\n\nclass FrozenColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.initializationMode = \"left\";\n\t\tthis.active = false;\n\t\tthis.blocked = true;\n\t\t\n\t\tthis.registerColumnOption(\"frozen\");\n\t}\n\t\n\t//reset initial state\n\treset(){\n\t\tthis.initializationMode = \"left\";\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.active = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layout.bind(this));\n\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\tthis.subscribe(\"table-layout\", this.layout.bind(this));\n\t\tthis.subscribe(\"columns-loading\", this.reset.bind(this));\n\t\t\n\t\tthis.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.reinitializeColumns.bind(this));\n\t\t\n\t\tthis.subscribe(\"table-redraw\", this.layout.bind(this));\n\t\tthis.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\n\t\tthis.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t}\n\t\n\tblockLayout(){\n\t\tthis.blocked = true;\n\t}\n\t\n\tunblockLayout(){\n\t\tthis.blocked = false;\n\t}\n\t\n\tlayoutCell(cell){\n\t\tthis.layoutElement(cell.element, cell.column);\n\t}\n\t\n\treinitializeColumns(){\n\t\tthis.reset();\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tthis.initializeColumn(column);\n\t\t});\n\t}\n\t\n\t//initialize specific column\n\tinitializeColumn(column){\n\t\tvar config = {margin:0, edge:false};\n\t\t\n\t\tif(!column.isGroup){\n\t\t\t\n\t\t\tif(this.frozenCheck(column)){\n\t\t\t\t\n\t\t\t\tconfig.position = this.initializationMode;\n\t\t\t\t\n\t\t\t\tif(this.initializationMode == \"left\"){\n\t\t\t\t\tthis.leftColumns.push(column);\n\t\t\t\t}else {\n\t\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.active = true;\n\t\t\t\t\n\t\t\t\tcolumn.modules.frozen = config;\n\t\t\t}else {\n\t\t\t\tthis.initializationMode = \"right\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfrozenCheck(column){\n\t\tif(column.parent.isGroup && column.definition.frozen){\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t\t}\n\t\t\n\t\tif(column.parent.isGroup){\n\t\t\treturn this.frozenCheck(column.parent);\n\t\t}else {\n\t\t\treturn column.definition.frozen;\n\t\t}\n\t}\n\t\n\t//layout calculation rows\n\tlayoutCalcRows(){\n\t\tif(this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modExists(\"groupRows\")){\n\t\t\t\tthis.layoutGroupCalcs(this.table.modules.groupRows.getGroups());\n\t\t\t}\n\t\t}\n\t}\n\t\n\tlayoutGroupCalcs(groups){\n\t\tgroups.forEach((group) => {\n\t\t\tif(group.calcs.top){\n\t\t\t\tthis.layoutRow(group.calcs.top);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.calcs.bottom){\n\t\t\t\tthis.layoutRow(group.calcs.bottom);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.groupList && group.groupList.length){\n\t\t\t\tthis.layoutGroupCalcs(group.groupList);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//calculate column positions and layout headers\n\tlayoutColumnPosition(allCells){\n\t\tvar leftParents = [];\n\t\t\n\t\tvar leftMargin = 0;\n\t\tvar rightMargin = 0;\n\t\t\n\t\tthis.leftColumns.forEach((column, i) => {\t\n\t\t\tcolumn.modules.frozen.marginValue = leftMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tleftMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.leftColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else {\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\n\t\t\t\tif(!leftParents.includes(parentEl)){\n\t\t\t\t\tthis.layoutElement(parentEl, column);\n\t\t\t\t\tleftParents.push(parentEl);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.modules.frozen.edge){\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column, i) => {\n\t\t\t\n\t\t\tcolumn.modules.frozen.marginValue = rightMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\trightMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.rightColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else {\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\n\t\t\t}else {\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tgetColGroupParentElement(column){\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n\t}\n\t\n\t//layout columns appropriately\n\tlayout(){\t\n\t\tif(this.active && !this.blocked){\n\t\t\n\t\t\t//calculate left columns\n\t\t\tthis.layoutColumnPosition();\n\t\t\t\n\t\t\tthis.reinitializeRows();\n\t\t\t\n\t\t\tthis.layoutCalcRows();\n\t\t}\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.table.rowManager.getVisibleRows(true);\n\t\tvar otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\t\t\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t\t\n\t\tvisibleRows.forEach((row) =>{\n\t\t\tif(row.type === \"row\"){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutRow(row){\n\t\tif(this.table.options.layout === \"fitDataFill\" && this.rightColumns.length){\n\t\t\tthis.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\n\t\t}\n\t\t\n\t\tthis.leftColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutElement(element, column){\n\t\tvar position;\n\t\t\n\t\tif(column.modules.frozen && element){\n\t\t\telement.style.position = \"sticky\";\n\n\t\t\tif(this.table.rtl){\n\t\t\t\tposition = column.modules.frozen.position === \"left\" ? \"right\" : \"left\";\n\t\t\t}else {\n\t\t\t\tposition = column.modules.frozen.position;\n\t\t\t}\n\t\t\n\t\t\telement.style[position] = column.modules.frozen.margin;\n\n\t\t\telement.classList.add(\"tabulator-frozen\");\n\t\t\t\n\t\t\tif(column.modules.frozen.edge){\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustForScrollbar(width){\n\t\tif(this.rightColumns.length){\n\t\t\tthis.table.columnManager.getContentsElement().style.width = \"calc(100% - \" + width + \"px)\";\n\t\t}\n\t}\n\t\n\t_calcSpace(columns, index){\n\t\tvar width = 0;\n\t\t\n\t\tfor (let i = 0; i < index; i++){\n\t\t\tif(columns[i].visible){\n\t\t\t\twidth += columns[i].getWidth();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n}\n\nFrozenColumns.moduleName = \"frozenColumns\";\n\nclass FrozenRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.topElement = document.createElement(\"div\");\n\t\tthis.rows = [];\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\n\n\t\t//register table options\n\t\tthis.registerTableOption(\"frozenRowsField\", \"id\"); //field to choose frozen rows by\n\t\tthis.registerTableOption(\"frozenRows\", false); //holder for frozen row identifiers\n\t}\n\n\tinitialize(){\n\t\tthis.rows = [];\n\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\n\t\t// this.table.columnManager.element.append(this.topElement);\n\t\tthis.table.columnManager.getContentsElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\n\t\tthis.subscribe(\"row-deleting\", this.detachRow.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\n\t\tthis.registerDisplayHandler(this.getRows.bind(this), 10);\n\n\t\tif(this.table.options.frozenRows){\n\t\t\tthis.subscribe(\"data-processed\", this.initializeRows.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t}\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\tinitializeRows(){\n\t\tthis.table.rowManager.getRows().forEach((row) => {\n\t\t\tthis.initializeRow(row);\n\t\t});\n\t}\n\n\tinitializeRow(row){\n\t\tvar frozenRows = this.table.options.frozenRows,\n\t\trowType = typeof frozenRows;\n\n\t\tif(rowType === \"number\"){\n\t\t\tif(row.getPosition() && (row.getPosition() + this.rows.length) <= frozenRows){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(rowType === \"function\"){\n\t\t\tif(frozenRows.call(this.table, row.getComponent())){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(Array.isArray(frozenRows)){\n\t\t\tif(frozenRows.includes(row.data[this.options(\"frozenRowsField\")])){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowFrozen(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\treturn index > -1;\n\t}\n\n\tisFrozen(){\n\t\treturn !!this.rows.length;\n\t}\n\n\tvisibleRows(viewable, rows){\n\t\tthis.rows.forEach((row) => {\n\t\t\trows.push(row);\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\t//filter frozen rows out of display data\n\tgetRows(rows){\n\t\tvar output = rows.slice(0);\n\n\t\tthis.rows.forEach(function(row){\n\t\t\tvar index = output.indexOf(row);\n\n\t\t\tif(index > -1){\n\t\t\t\toutput.splice(index, 1);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tfreezeRow(row){\n\t\tif(!row.modules.frozen){\n\t\t\trow.modules.frozen = true;\n\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\trow.initialize();\n\t\t\trow.normalizeHeight();\n\t\t\n\t\t\tthis.rows.push(row);\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.styleRows();\n\n\t\t}else {\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t\t}\n\t}\n\n\tunfreezeRow(row){\n\t\tif(row.modules.frozen){\n\n\t\t\trow.modules.frozen = false;\n\n\t\t\tthis.detachRow(row);\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tif(this.rows.length){\n\t\t\t\tthis.styleRows();\n\t\t\t}\n\n\t\t}else {\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t\t}\n\t}\n\n\tdetachRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t}\n\n\tstyleRows(row){\n\t\tthis.rows.forEach((row, i) => {\n\t\t\tthis.table.rowManager.styleRow(row, i);\n\t\t});\n\t}\n}\n\nFrozenRows.moduleName = \"frozenRows\";\n\n//public group object\nclass GroupComponent {\n\tconstructor (group){\n\t\tthis._group = group;\n\t\tthis.type = \"GroupComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else {\n\t\t\t\t\treturn target._group.groupManager.table.componentFunctionBinder.handle(\"group\", target._group, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetKey(){\n\t\treturn this._group.key;\n\t}\n\n\tgetField(){\n\t\treturn this._group.field;\n\t}\n\n\tgetElement(){\n\t\treturn this._group.element;\n\t}\n\n\tgetRows(){\n\t\treturn this._group.getRows(true);\n\t}\n\n\tgetSubGroups(){\n\t\treturn this._group.getSubGroups(true);\n\t}\n\n\tgetParentGroup(){\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\n\t}\n\n\tisVisible(){\n\t\treturn this._group.visible;\n\t}\n\n\tshow(){\n\t\tthis._group.show();\n\t}\n\n\thide(){\n\t\tthis._group.hide();\n\t}\n\n\ttoggle(){\n\t\tthis._group.toggleVisibility();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._group.groupManager.table.rowManager.scrollToRow(this._group, position, ifVisible);\n\t}\n\n\t_getSelf(){\n\t\treturn this._group;\n\t}\n\n\tgetTable(){\n\t\treturn this._group.groupManager.table;\n\t}\n}\n\n//Group functions\nclass Group{\n\t\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\n\t\tthis.groupManager = groupManager;\n\t\tthis.parent = parent;\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.field = field;\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\t\tthis.type = \"group\"; //type of element\n\t\tthis.old = oldGroup;\n\t\tthis.rows = [];\n\t\tthis.groups = [];\n\t\tthis.groupList = [];\n\t\tthis.generator = generator;\n\t\tthis.element = false;\n\t\tthis.elementContents = false;\n\t\tthis.height = 0;\n\t\tthis.outerHeight = 0;\n\t\tthis.initialized = false;\n\t\tthis.calcs = {};\n\t\tthis.initialized = false;\n\t\tthis.modules = {};\n\t\tthis.arrowElement = false;\n\t\t\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.createElements();\n\t\tthis.addBindings();\n\t\t\n\t\tthis.createValueGroups();\n\t}\n\t\n\twipe(elementsOnly){\n\t\tif(!elementsOnly){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\tgroup.wipe();\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tif(row.modules){\n\t\t\t\t\t\tdelete row.modules.group;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.arrowElement = false;\n\t\tthis.elementContents = false;\n\t}\n\t\n\tcreateElements(){\n\t\tvar arrow = document.createElement(\"div\");\n\t\tarrow.classList.add(\"tabulator-arrow\");\n\t\t\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-row\");\n\t\tthis.element.classList.add(\"tabulator-group\");\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tthis.arrowElement = document.createElement(\"div\");\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\t\tthis.arrowElement.appendChild(arrow);\n\t\t\n\t\t//setup movable rows\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t\t}\n\t}\n\t\n\tcreateValueGroups(){\n\t\tvar level = this.level + 1;\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\n\t\t\t\tthis._createGroup(value, level);\n\t\t\t});\n\t\t}\n\t}\n\t\n\taddBindings(){\n\t\tvar toggleElement;\n\t\t\n\t\tif(this.groupManager.table.options.groupToggleElement){\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\n\t\t\t\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\n\t\t\t\tif(this.groupManager.table.options.groupToggleElement === \"arrow\"){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t}\n\n\t\t\t\t//allow click event to propagate before toggling visibility\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.toggleVisibility();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\t\n\t_createGroup(groupID, level){\n\t\tvar groupKey = level + \"_\" + groupID;\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\t_addRowToGroup(row){\n\t\t\n\t\tvar level = this.level + 1;\n\t\t\n\t\tif(this.hasSubGroups){\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t\tgroupKey = level + \"_\" + groupID;\n\t\t\t\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\t\tif(this.groups[groupKey]){\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(!this.groups[groupKey]){\n\t\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_addRow(row){\n\t\tthis.rows.push(row);\n\t\trow.modules.group = this;\n\t}\n\t\n\tinsertRow(row, to, after){\n\t\tvar data = this.conformRowData({});\n\t\t\n\t\trow.updateData(data);\n\t\t\n\t\tvar toIndex = this.rows.indexOf(to);\n\t\t\n\t\tif(toIndex > -1){\n\t\t\tif(after){\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\n\t\t\t}else {\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t\t}\n\t\t}else {\n\t\t\tif(after){\n\t\t\t\tthis.rows.push(row);\n\t\t\t}else {\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\trow.modules.group = this;\n\t\t\n\t\t// this.generateGroupHeaderContents();\n\t\t\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\t\t\n\t\tthis.groupManager.updateGroupRows(true);\n\t}\n\t\n\tscrollHeader(left){\n\t\tif(this.arrowElement){\n\t\t\tthis.arrowElement.style.marginLeft = left;\n\t\t\t\n\t\t\tthis.groupList.forEach(function(child){\n\t\t\t\tchild.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tgetRowIndex(row){}\n\t\n\t//update row data to match grouping constraints\n\tconformRowData(data){\n\t\tif(this.field){\n\t\t\tdata[this.field] = this.key;\n\t\t}else {\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t\t}\n\t\t\n\t\tif(this.parent){\n\t\t\tdata = this.parent.conformRowData(data);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\tremoveRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\tvar el = row.getElement();\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t}else {\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\t\t\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else {\n\t\t\t\n\t\t\tif(el.parentNode){\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupManager.blockRedraw){\n\t\t\t\tthis.generateGroupHeaderContents();\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupList.length){\n\t\t\t\tif(this.parent){\n\t\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t\t}else {\n\t\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetHeadersAndRows(){\n\t\tvar output = [];\n\t\t\n\t\toutput.push(this);\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\t\n\t\tif(this.calcs.top){\n\t\t\tthis.calcs.top.detachElement();\n\t\t\tthis.calcs.top.deleteCells();\n\t\t}\n\t\t\n\t\tif(this.calcs.bottom){\n\t\t\tthis.calcs.bottom.detachElement();\n\t\t\tthis.calcs.bottom.deleteCells();\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tif(this.visible){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\toutput = output.concat(this.rows);\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetData(visible, transform){\n\t\tvar output = [];\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(!visible || (visible && this.visible)){\n\t\t\tthis.rows.forEach((row) => {\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRowCount(){\n\t\tvar count = 0;\n\t\t\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tcount += group.getRowCount();\n\t\t\t});\n\t\t}else {\n\t\t\tcount = this.rows.length;\n\t\t}\n\t\treturn count;\n\t}\n\n\t\n\ttoggleVisibility(){\n\t\tif(this.visible){\n\t\t\tthis.hide();\n\t\t}else {\n\t\t\tthis.show();\n\t\t}\n\t}\n\t\n\thide(){\n\t\tthis.visible = false;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\t\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\trow.detachElement();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else {\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\n\t}\n\t\n\tshow(){\n\t\tthis.visible = true;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tvar prev = this.generateElement();\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\t\trow.initialize();\n\t\t\t\t\t\tprev = rowEl;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}else {\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\n\t}\n\t\n\t_visSet(){\n\t\tvar data = [];\n\t\t\n\t\tif(typeof this.visible == \"function\"){\n\t\t\t\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\tdata.push(row.getData());\n\t\t\t});\n\t\t\t\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t\t}\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\t\n\t\t\t\tif(result){\n\t\t\t\t\tmatch = result;\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\tif(this.rows.find(function(item){\n\t\t\t\treturn item === row;\n\t\t\t})){\n\t\t\t\tmatch = this;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetSubGroups(component){\n\t\tvar output = [];\n\t\t\n\t\tthis.groupList.forEach(function(child){\n\t\t\toutput.push(component ? child.getComponent() : child);\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRows(component, includeChildren){\n\t\tvar output = [];\n\t\t\n\t\tif(includeChildren && this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getRows(component, includeChildren));\n\t\t\t});\n\t\t}else {\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\toutput.push(component ? row.getComponent() : row);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgenerateGroupHeaderContents(){\n\t\tvar data = [];\n\t\t\n\t\tvar rows = this.getRows(false, true);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(typeof this.elementContents === \"string\"){\n\t\t\tthis.element.innerHTML = this.elementContents;\n\t\t}else {\n\t\t\tthis.element.appendChild(this.elementContents);\n\t\t}\n\t\t\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n\t}\n\t\n\tgetPath(path = []) {\n\t\tpath.unshift(this.key);\n\t\tif(this.parent) {\n\t\t\tthis.parent.getPath(path);\n\t\t}\n\t\treturn path;\n\t}\n\t\n\t////////////// Standard Row Functions //////////////\n\t\n\tgetElement(){\n\t\treturn this.elementContents ? this.element : this.generateElement();\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.addBindings = false;\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(this.visible){\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t}else {\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t\t}\n\t\t\n\t\tthis.generateGroupHeaderContents();\n\t\t\n\t\t// this.addBindings();\n\t\t\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(){\n\t\tthis.setHeight(this.element.clientHeight);\n\t}\n\t\n\tinitialize(force){\n\t\tif(!this.initialized || force){\n\t\t\tthis.normalizeHeight();\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\treinitialize(){\n\t\tthis.initialized = false;\n\t\tthis.height = 0;\n\t\t\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.initialize(true);\n\t\t}\n\t}\n\t\n\tsetHeight(height){\n\t\tif(this.height != height){\n\t\t\tthis.height = height;\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\tgetGroup(){\n\t\treturn this;\n\t}\n\t\n\treinitializeHeight(){}\n\t\n\tcalcHeight(){}\n\t\n\tsetCellHeight(){}\n\t\n\tclearCellHeight(){}\n\t\n\tdeinitializeHeight(){}\n\n\trendered(){}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new GroupComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n\nclass GroupRows extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\tthis.groupList = []; //ordered list of groups\n\t\tthis.allowedValues = false;\n\t\tthis.groups = {}; //hold row groups\n\t\t\n\t\tthis.displayHandler = this.getRows.bind(this);\n\n\t\tthis.blockRedraw = false;\n\t\t\n\t\t//register table options\n\t\tthis.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\n\t\tthis.registerTableOption(\"groupStartOpen\", true); //starting state of group\n\t\tthis.registerTableOption(\"groupValues\", false);\n\t\tthis.registerTableOption(\"groupUpdateOnCellEdit\", false);\n\t\tthis.registerTableOption(\"groupHeader\", false); //header generation function\n\t\tthis.registerTableOption(\"groupHeaderPrint\", null);\n\t\tthis.registerTableOption(\"groupHeaderClipboard\", null);\n\t\tthis.registerTableOption(\"groupHeaderHtmlOutput\", null);\n\t\tthis.registerTableOption(\"groupHeaderDownload\", null);\n\t\tthis.registerTableOption(\"groupToggleElement\", \"arrow\");\n\t\tthis.registerTableOption(\"groupClosedShowCalcs\", false);\n\t\t\n\t\t//register table functions\n\t\tthis.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\n\t\tthis.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\n\t\tthis.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\n\t\tthis.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\n\t\tthis.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\n\t\tthis.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n\t}\n\t\n\t//initialize group configuration\n\tinitialize(){\n\t\tthis.subscribe(\"table-destroy\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wipe\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wiped\", this._restore_redrawing.bind(this));\n\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.groupUpdateOnCellEdit){\n\t\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.wipe.bind(this));\n\t\t\tthis.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-moving\", this.rowMoving.bind(this));\n\t\t\tthis.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"rows-sample\", this.rowSample.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.displayHandler, 20);\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t_blockRedrawing(){\n\t\tthis.blockRedraw = true;\n\t}\n\n\t_restore_redrawing(){\n\t\tthis.blockRedraw = false;\n\t}\n\n\tconfigureGroupSetup(){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar groupBy = this.table.options.groupBy,\n\t\t\tstartOpen = this.table.options.groupStartOpen,\n\t\t\tgroupHeader = this.table.options.groupHeader;\n\t\t\t\n\t\t\tthis.allowedValues = this.table.options.groupValues;\n\t\t\t\n\t\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\n\t\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\t\t\n\t\t\tthis.langBind(\"groups|item\", (langValue, lang) => {\n\t\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\n\t\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\n\t\t\t\t};\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupIDLookups = [];\n\t\t\t\n\t\t\tif(groupBy){\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\n\t\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\t\n\t\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\t\t\t\t\t\n\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\tif(col.definition.topCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(col.definition.bottomCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(!Array.isArray(groupBy)){\n\t\t\t\tgroupBy = [groupBy];\n\t\t\t}\n\t\t\t\n\t\t\tgroupBy.forEach((group, i) => {\n\t\t\t\tvar lookupFunc, column;\n\t\t\t\t\n\t\t\t\tif(typeof group == \"function\"){\n\t\t\t\t\tlookupFunc = group;\n\t\t\t\t}else {\n\t\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\n\t\t\t\t\t\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t\t\t};\n\t\t\t\t\t}else {\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn data[group];\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groupIDLookups.push({\n\t\t\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\t\t\tfunc:lookupFunc,\n\t\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tif(startOpen){\n\t\t\t\tif(!Array.isArray(startOpen)){\n\t\t\t\t\tstartOpen = [startOpen];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tstartOpen.forEach((level) => {\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.startOpen = startOpen;\n\t\t\t}\n\t\t\t\n\t\t\tif(groupHeader){\n\t\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t\t\t}\n\t\t}else {\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\trowSample(rows, prevValue){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar group = this.getGroups(false)[0];\n\t\t\t\n\t\t\tprevValue.push(group.getRows(false)[0]);\n\t\t}\n\t\t\n\t\treturn prevValue;\n\t}\n\t\n\tvirtualRenderFill(){\n\t\tvar el = this.table.rowManager.tableElement;\n\t\tvar rows = this.table.rowManager.getVisibleRows();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\trows = rows.filter((row) => {\n\t\t\t\treturn row.type !== \"group\";\n\t\t\t});\n\t\t\t\n\t\t\tel.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\n\t\t}else {\n\t\t\treturn rows;\n\t\t}\n\t}\n\t\n\trowAddingIndex(row, index, top){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.assignRowToGroup(row);\n\t\t\t\n\t\t\tvar groupRows = row.modules.group.rows;\n\t\t\t\n\t\t\tif(groupRows.length > 1){\n\t\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\n\t\t\t\t\tif(top){\n\t\t\t\t\t\tif(groupRows[0] !== row){\n\t\t\t\t\t\t\tindex = groupRows[0];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn index;\n\t\t}\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"group-changed\");\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tsetGroupBy(groups){\n\t\tthis.table.options.groupBy = groups;\n\t\t\n\t\tif(!this.initialized){\n\t\t\tthis.initialize();\n\t\t}\n\t\t\n\t\tthis.configureGroupSetup();\n\n\t\tif(!groups && this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs === true){\n\t\t\tthis.table.modules.columnCalcs.reinitializeCalcs();\n\t\t}\n\t\t\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupValues(groupValues){\n\t\tthis.table.options.groupValues = groupValues;\n\t\tthis.configureGroupSetup();\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupStartOpen(values){\n\t\tthis.table.options.groupStartOpen = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else {\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tsetGroupHeader(values){\n\t\tthis.table.options.groupHeader = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else {\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tuserGetGroups(values){\n\t\treturn this.getGroups(true);\n\t}\n\t\n\t// get grouped table data in the same format as getData()\n\tuserGetGroupedData(){\n\t\treturn this.table.options.groupBy ? this.getGroupedData() : this.getData();\n\t}\n\t\n\t\n\t///////////////////////////////////////\n\t///////// Component Functions /////////\n\t///////////////////////////////////////\n\t\n\trowGetGroup(row){\n\t\treturn row.modules.group ? row.modules.group.getComponent() : false;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\trowMoving(from, to, after){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(!after && to instanceof Group){\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t\t}\n\t\t\t\n\t\t\tvar toGroup = to instanceof Group ? to : to.modules.group;\n\t\t\tvar fromGroup = from instanceof Group ? from : from.modules.group;\n\t\t\t\n\t\t\tif(toGroup === fromGroup){\n\t\t\t\tthis.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\n\t\t\t}else {\n\t\t\t\tif(fromGroup){\n\t\t\t\t\tfromGroup.removeRow(from);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttoGroup.insertRow(from, to, after);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\trowDeleting(row){\n\t\t//remove from group\n\t\tif(this.table.options.groupBy && row.modules.group){\n\t\t\trow.modules.group.removeRow(row);\n\t\t}\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.updateGroupRows(true);\n\t\t}\t\n\t}\n\t\n\tcellUpdated(cell){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.reassignRowToGroup(cell.row);\n\t\t}\n\t}\n\t\n\t//return appropriate rows with group headers\n\tgetRows(rows){\n\t\tif(this.table.options.groupBy && this.groupIDLookups.length){\n\t\t\t\n\t\t\tthis.dispatchExternal(\"dataGrouping\");\n\t\t\t\n\t\t\tthis.generateGroups(rows);\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataGrouped\")){\n\t\t\t\tthis.dispatchExternal(\"dataGrouped\", this.getGroups(true));\n\t\t\t}\n\t\t\t\n\t\t\treturn this.updateGroupRows();\n\t\t\t\n\t\t}else {\n\t\t\treturn rows.slice(0);\n\t\t}\n\t}\n\t\n\tgetGroups(component){\n\t\tvar groupComponents = [];\n\t\t\n\t\tthis.groupList.forEach(function(group){\n\t\t\tgroupComponents.push(component ? group.getComponent() : group);\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\tgetChildGroups(group){\n\t\tvar groupComponents = [];\n\t\t\n\t\tif(!group){\n\t\t\tgroup = this;\n\t\t}\n\t\t\n\t\tgroup.groupList.forEach((child) => {\n\t\t\tif(child.groupList.length){\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\n\t\t\t}else {\n\t\t\t\tgroupComponents.push(child);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\twipe(){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tgroup.wipe();\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\tpullGroupListData(groupList) {\n\t\tvar groupListData = [];\n\t\t\n\t\tgroupList.forEach((group) => {\n\t\t\tvar groupHeader = {};\n\t\t\tgroupHeader.level = 0;\n\t\t\tgroupHeader.rowCount = 0;\n\t\t\tgroupHeader.headerContent = \"\";\n\t\t\tvar childData = [];\n\t\t\t\n\t\t\tif (group.hasSubGroups) {\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\n\t\t\t\t\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\tgroupListData = groupListData.concat(childData);\n\t\t\t}\n\t\t\t\n\t\t\telse {\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\t\n\t\t\t\tgroup.getRows().forEach((row) => {\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupListData;\n\t}\n\t\n\tgetGroupedData(){\n\t\t\n\t\treturn this.pullGroupListData(this.groupList);\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\t\n\t\tif(this.options(\"dataTree\")){\n\t\t\trow = this.table.modules.dataTree.getTreeParentRoot(row);\n\t\t}\n\t\t\n\t\tthis.groupList.forEach((group) => {\n\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\n\t\t\tif(result){\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tcountGroups(){\n\t\treturn this.groupList.length;\n\t}\n\t\n\tgenerateGroups(rows){\n\t\tvar oldGroups = this.groups;\n\t\t\n\t\tthis.groups = {};\n\t\tthis.groupList = [];\n\t\t\n\t\tif(this.allowedValues && this.allowedValues[0]){\n\t\t\tthis.allowedValues[0].forEach((value) => {\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\n\t\t\t});\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\n\t\t\t});\n\t\t}else {\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\n\t\t\t});\n\t\t}\n\t\t\n\t\tObject.values(oldGroups).forEach((group) => {\n\t\t\tgroup.wipe(true);\n\t\t});\t\n\t}\n\t\n\t\n\tcreateGroup(groupID, level, oldGroups){\n\t\tvar groupKey = level + \"_\" + groupID,\n\t\tgroup;\n\t\t\n\t\toldGroups = oldGroups || [];\n\t\t\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\tassignRowToExistingGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tgroupKey = \"0_\" + groupID;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t}\n\t\n\tassignRowToGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\n\t\t\n\t\tif(newGroupNeeded){\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\n\t\t}\n\t\t\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\n\t\t\n\t\treturn !newGroupNeeded;\n\t}\n\t\n\treassignRowToGroup(row){\n\t\tif(row.type === \"row\"){\n\t\t\tvar oldRowGroup = row.modules.group,\n\t\t\toldGroupPath = oldRowGroup.getPath(),\n\t\t\tnewGroupPath = this.getExpectedPath(row),\n\t\t\tsamePath;\n\t\t\t\n\t\t\t// figure out if new group path is the same as old group path\n\t\t\tsamePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\n\t\t\t\treturn element === newGroupPath[index];\n\t\t\t});\n\t\t\t\n\t\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n\t\t\tif(!samePath) {\n\t\t\t\toldRowGroup.removeRow(row);\n\t\t\t\tthis.assignRowToGroup(row, this.groups);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetExpectedPath(row) {\n\t\tvar groupPath = [], rowData = row.getData();\n\t\t\n\t\tthis.groupIDLookups.forEach((groupId) => {\n\t\t\tgroupPath.push(groupId.func(rowData));\n\t\t});\n\t\t\n\t\treturn groupPath;\n\t}\n\t\n\tupdateGroupRows(force){\n\t\tvar output = [];\n\n\t\tif(!this.blockRedraw){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tscrollHeaders(left){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleft -= this.table.columnManager.renderer.vDomPadLeft;\n\t\t\t}\n\t\t\t\n\t\t\tleft = left + \"px\";\n\t\t\t\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tgroup.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcheckBasicModeGroupHeaderWidth(){\n\t\tvar element = this.table.rowManager.tableElement,\n\t\tonlyGroupHeaders = true;\n\t\t\n\t\tthis.table.rowManager.getDisplayRows().forEach((row, index) =>{\n\t\t\tthis.table.rowManager.styleRow(row, index);\n\t\t\telement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\t\t\t\n\t\t\tif(row.type !== \"group\"){\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else {\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n}\n\nGroupRows.moduleName = \"groupRows\";\n\nvar defaultUndoers = {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.oldValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\taction.component.deleteActual();\n\t},\n\n\trowDelete: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowMove: function(action){\n\t\tvar after = (action.data.posFrom  - action.data.posTo) > 0;\n\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posFrom), after);\n\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};\n\nvar defaultRedoers = {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.newValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowDelete:function(action){\n\t\taction.component.deleteActual();\n\t},\n\n\trowMove: function(action){\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posTo), action.data.after);\n\t\t\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};\n\nclass History extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\n\t\tthis.registerTableOption(\"history\", false); //enable edit history\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.history){\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\n\t\t\tthis.subscribe(\"row-delete\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clear.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowAdded.bind(this));\n\t\t\tthis.subscribe(\"row-move\", this.rowMoved.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"undo\", this.undo.bind(this));\n\t\tthis.registerTableFunction(\"redo\", this.redo.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\n\t\tthis.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n\t}\n\n\trowMoved(from, to, after){\n\t\tthis.action(\"rowMove\", from, {posFrom:from.getPosition(), posTo:to.getPosition(), to:to, after:after});\n\t}\n\n\trowAdded(row, data, pos, index){\n\t\tthis.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\n\t}\n\n\trowDeleted(row){\n\t\tvar index, rows;\n\n\t\tif(this.table.options.groupBy){\n\n\t\t\trows = row.getComponent().getGroup()._getSelf().rows;\n\t\t\tindex = rows.indexOf(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = rows[index-1];\n\t\t\t}\n\t\t}else {\n\t\t\tindex = row.table.rowManager.getRowIndex(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = row.table.rowManager.rows[index-1];\n\t\t\t}\n\t\t}\n\n\t\tthis.action(\"rowDelete\", row, {data:row.getData(), pos:!index, index:index});\n\t}\n\n\tcellUpdated(cell){\n\t\tthis.action(\"cellEdit\", cell, {oldValue:cell.oldValue, newValue:cell.value});\n\t}\n\n\tclear(){\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t}\n\n\taction(type, component, data){\n\t\tthis.history = this.history.slice(0, this.index + 1);\n\n\t\tthis.history.push({\n\t\t\ttype:type,\n\t\t\tcomponent:component,\n\t\t\tdata:data,\n\t\t});\n\n\t\tthis.index ++;\n\t}\n\n\tgetHistoryUndoSize(){\n\t\treturn this.index + 1;\n\t}\n\n\tgetHistoryRedoSize(){\n\t\treturn this.history.length - (this.index + 1);\n\t}\n\n\tclearComponentHistory(component){\n\t\tvar index = this.history.findIndex(function(item){\n\t\t\treturn item.component === component;\n\t\t});\n\n\t\tif(index > -1){\n\t\t\tthis.history.splice(index, 1);\n\t\t\tif(index <= this.index){\n\t\t\t\tthis.index--;\n\t\t\t}\n\n\t\t\tthis.clearComponentHistory(component);\n\t\t}\n\t}\n\n\tundo(){\n\t\tif(this.index > -1){\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.undoers[action.type].call(this, action);\n\n\t\t\tthis.index--;\n\n\t\t\tthis.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else {\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tredo(){\n\t\tif(this.history.length-1 > this.index){\n\n\t\t\tthis.index++;\n\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.redoers[action.type].call(this, action);\n\n\t\t\tthis.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else {\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//rebind rows to new element after deletion\n\t_rebindRow(oldRow, newRow){\n\t\tthis.history.forEach(function(action){\n\t\t\tif(action.component instanceof Row){\n\t\t\t\tif(action.component === oldRow){\n\t\t\t\t\taction.component = newRow;\n\t\t\t\t}\n\t\t\t}else if(action.component instanceof Cell){\n\t\t\t\tif(action.component.row === oldRow){\n\t\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\t\tif(field){\n\t\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nHistory.moduleName = \"history\";\n\n//load defaults\nHistory.undoers = defaultUndoers;\nHistory.redoers = defaultRedoers;\n\nclass HtmlTableImport extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.fieldIndex = [];\n\t\tthis.hasIndex = false;\n\t}\n\n\tinitialize(){\n\t\tthis.tableElementCheck();\n\t}\n\n\ttableElementCheck(){\n\t\tif(this.table.originalElement && this.table.originalElement.tagName === \"TABLE\"){\n\t\t\tif(this.table.originalElement.childNodes.length){\n\t\t\t\tthis.parseTable();\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\n\t\t\t}\n\t\t}\n\t}\n\n\tparseTable(){\n\t\tvar element = this.table.originalElement,\n\t\toptions = this.table.options,\n\t\theaders = element.getElementsByTagName(\"th\"),\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\n\t\tdata = [];\n\n\t\tthis.hasIndex = false;\n\n\t\tthis.dispatchExternal(\"htmlImporting\");\n\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t\t//check for Tabulator inline options\n\t\tthis._extractOptions(element, options);\n\n\t\tif(headers.length){\n\t\t\tthis._extractHeaders(headers, rows);\n\t\t}else {\n\t\t\tthis._generateBlankHeaders(headers, rows);\n\t\t}\n\n\t\t//iterate through table rows and build data set\n\t\tfor(var index = 0; index < rows.length; index++){\n\t\t\tvar row = rows[index],\n\t\t\tcells = row.getElementsByTagName(\"td\"),\n\t\t\titem = {};\n\n\t\t\t//create index if the don't exist in table\n\t\t\tif(!this.hasIndex){\n\t\t\t\titem[options.index] = index;\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\t\tvar cell = cells[i];\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//add row data to item\n\t\t\tdata.push(item);\n\t\t}\n\n\t\toptions.data = data;\n\n\t\tthis.dispatchExternal(\"htmlImported\");\n\t}\n\n\t//extract tabulator attribute options\n\t_extractOptions(element, options, defaultOptions){\n\t\tvar attributes = element.attributes;\n\t\tvar optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\n\t\tvar optionsList = {};\n\n\t\toptionsArr.forEach((item) => {\n\t\t\toptionsList[item.toLowerCase()] = item;\n\t\t});\n\n\t\tfor(var index in attributes){\n\t\t\tvar attrib = attributes[index];\n\t\t\tvar name;\n\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//get value of attribute\n\t_attribValue(value){\n\t\tif(value === \"true\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(value === \"false\"){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t//find column if it has already been defined\n\t_findCol(title){\n\t\tvar match = this.table.options.columns.find((column) => {\n\t\t\treturn column.title === title;\n\t\t});\n\n\t\treturn match || false;\n\t}\n\n\t//extract column from headers\n\t_extractHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\texists = false,\n\t\t\tcol = this._findCol(header.textContent),\n\t\t\twidth;\n\n\t\t\tif(col){\n\t\t\t\texists = true;\n\t\t\t}else {\n\t\t\t\tcol = {title:header.textContent.trim()};\n\t\t\t}\n\n\t\t\tif(!col.field) {\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replaceAll(\" \", \"_\");\n\t\t\t}\n\n\t\t\twidth = header.getAttribute(\"width\");\n\n\t\t\tif(width && !col.width)\t{\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\t//check for Tabulator inline options\n\t\t\tthis._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tif(col.field == this.table.options.index){\n\t\t\t\tthis.hasIndex = true;\n\t\t\t}\n\n\t\t\tif(!exists){\n\t\t\t\tthis.table.options.columns.push(col);\n\t\t\t}\n\n\t\t}\n\t}\n\n\t//generate blank headers\n\t_generateBlankHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\tcol = {title:\"\", field:\"col\" + index};\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tvar width = header.getAttribute(\"width\");\n\n\t\t\tif(width){\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t}\n}\n\nHtmlTableImport.moduleName = \"htmlTableImport\";\n\nfunction csvImporter(input){\n\tvar data = [],\n\trow = 0, \n\tcol = 0,\n\tinQuote = false;\n    \n\t//Iterate over each character\n\tfor (let index = 0; index < input.length; index++) {\n\t\tlet char = input[index], \n\t\tnextChar = input[index+1];      \n        \n\t\t//Initialize empty row\n\t\tif(!data[row]){\n\t\t\tdata[row] = [];\n\t\t}\n\n\t\t//Initialize empty column\n\t\tif(!data[row][col]){\n\t\t\tdata[row][col] = \"\";\n\t\t}\n        \n\t\t//Handle quotation mark inside string\n\t\tif (char == '\"' && inQuote && nextChar == '\"') { \n\t\t\tdata[row][col] += char; \n\t\t\tindex++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//Begin / End Quote\n\t\tif (char == '\"') { \n\t\t\tinQuote = !inQuote;\n\t\t\tcontinue;\n\t\t}\n        \n\t\t//Next column (if not in quote)\n\t\tif (char == ',' && !inQuote) { \n\t\t\tcol++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CRLF) \n\t\tif (char == '\\r' && nextChar == '\\n' && !inQuote) { \n\t\t\tcol = 0; \n\t\t\trow++; \n\t\t\tindex++; \n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CR or LF) \n\t\tif ((char == '\\r' || char == '\\n') && !inQuote) { \n\t\t\tcol = 0;\n\t\t\trow++;\n\t\t\tcontinue; \n\t\t}\n\n\t\t//Normal Character, append to column\n\t\tdata[row][col] += char;\n\t}\n\n\treturn data;\n}\n\nfunction json$1(input){\n\ttry {\n\t\treturn JSON.parse(input);\n\t} catch(e) {\n\t\tconsole.warn(\"JSON Import Error - File contents is invalid JSON\", e);\n\t\treturn Promise.reject();\n\t}\n}\n\nfunction arrayImporter(input){\n\treturn input;\n}\n\nvar defaultImporters = {\n\tcsv:csvImporter,\n\tjson:json$1,\n\tarray:arrayImporter,\n};\n\nclass Import extends Module{\n    \n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.registerTableOption(\"importFormat\");\n\t\tthis.registerTableOption(\"importReader\", \"text\");\n\t}\n    \n\tinitialize(){\n\t\tthis.registerTableFunction(\"import\", this.importFromFile.bind(this));\n\n\t\tif(this.table.options.importFormat){\n\t\t\tthis.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\n\t\t\tthis.subscribe(\"data-load\", this.loadData.bind(this), 10);\n\t\t}\n\t}\n\n\tloadDataCheck(data){\n\t\treturn this.table.options.importFormat && (typeof data === \"string\" || (Array.isArray(data) && data.length && Array.isArray(data)));\n\t}\n\n\tloadData(data, params, config, silent, previousData){\n\t\treturn this.importData(this.lookupImporter(), data)\n\t\t\t.then(this.structureData.bind(this))\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import data\");\n\t\t\t\treturn Promise.reject(err);\n\t\t\t});\n\t}\n\n\tlookupImporter(importFormat){\n\t\tvar importer;\n        \n\t\tif(!importFormat){\n\t\t\timportFormat = this.table.options.importFormat;\n\t\t}\n        \n\t\tif(typeof importFormat === \"string\"){\n\t\t\timporter = Import.importers[importFormat];\n\t\t}else {\n\t\t\timporter = importFormat;\n\t\t}\n\n\t\tif(!importer){\n\t\t\tconsole.error(\"Import Error - Importer not found:\", importFormat);\n\t\t}\n        \n\t\treturn importer;\n\t}\n    \n\timportFromFile(importFormat, extension){\n\t\tvar importer = this.lookupImporter(importFormat);\n        \n\t\tif(importer){\n\t\t\treturn this.pickFile(extension)\n\t\t\t\t.then(this.importData.bind(this, importer))\n\t\t\t\t.then(this.structureData.bind(this))\n\t\t\t\t.then(this.setData.bind(this))\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import file\");\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t});\n\t\t}\n\t}\n    \n\tpickFile(extensions){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.type = \"file\";\n\t\t\tinput.accept = extensions;\n            \n\t\t\tinput.addEventListener(\"change\", (e) => {\n\t\t\t\tvar file = input.files[0],\n\t\t\t\treader = new FileReader();\n                \n\t\t\t\tswitch(this.table.options.importReader){\n\t\t\t\t\tcase \"buffer\":\n\t\t\t\t\t\treader.readAsArrayBuffer(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"binary\":\n\t\t\t\t\t\treader.readAsBinaryString(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"url\":\n\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treader.readAsText(file);\n\t\t\t\t}\n                  \n\t\t\t\treader.onload = (e) => {\n\t\t\t\t\tresolve(reader.result);\n\t\t\t\t};\n                \n\t\t\t\treader.onerror = (e) => {\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t});\n            \n\t\t\tinput.click();\n\t\t});\n\t}\n    \n\timportData(importer, fileContents){\n\t\tvar data = importer.call(this.table, fileContents);\n        \n\t\tif(data instanceof Promise){\n\t\t\treturn data;\n\t\t}else {\n\t\t\treturn data ? Promise.resolve(data) : Promise.reject();\n\t\t}\n\t}\n\n\tstructureData(parsedData){\n\t\tvar data = [];\n        \n\t\tif(Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])){\n\t\t\tif(this.table.options.autoColumns){\n\t\t\t\tdata = this.structureArrayToObject(parsedData);\n\t\t\t}else {\n\t\t\t\tdata = this.structureArrayToColumns(parsedData);\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}else {\n\t\t\treturn parsedData;\n\t\t}\n\t}\n\n\tstructureArrayToObject(parsedData){\n\t\tvar columns = parsedData.shift();\n\n\t\tvar data = parsedData.map((values) => {\n\t\t\tvar row = {};\n\n\t\t\tcolumns.forEach((key, i) => {\n\t\t\t\trow[key] = values[i];\n\t\t\t});\n\n\t\t\treturn row;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tstructureArrayToColumns(parsedData){\n\t\tvar data = [],\n\t\tcolumns = this.table.getColumns();\n\n\t\t//remove first row if it is the column names\n\t\tif(columns[0] && parsedData[0][0]){\n\t\t\tif(columns[0].getDefinition().title === parsedData[0][0]){\n\t\t\t\tparsedData.shift();\n\t\t\t}\n\t\t}\n        \n\t\t//convert row arrays to objects\n\t\tparsedData.forEach((rowData) => {\n\t\t\tvar row = {};\n\n\t\t\trowData.forEach((value, index) => {\n\t\t\t\tvar column = columns[index];\n\n\t\t\t\tif(column){\n\t\t\t\t\trow[column.getField()] = value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdata.push(row);\n\t\t});\n\n\t\treturn data;\n\t}\n    \n\tsetData(data){\n\t\treturn this.table.setData(data);\n\t}\n}\n\nImport.moduleName = \"import\";\n\n//load defaults\nImport.importers = defaultImporters;\n\nclass Interaction extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.eventMap = {\n\t\t\t//row events\n\t\t\trowClick:\"row-click\",\n\t\t\trowDblClick:\"row-dblclick\",\n\t\t\trowContext:\"row-contextmenu\",\n\t\t\trowMouseEnter:\"row-mouseenter\",\n\t\t\trowMouseLeave:\"row-mouseleave\",\n\t\t\trowMouseOver:\"row-mouseover\",\n\t\t\trowMouseOut:\"row-mouseout\",\n\t\t\trowMouseMove:\"row-mousemove\",\n\t\t\trowMouseDown:\"row-mousedown\",\n\t\t\trowMouseUp:\"row-mouseup\",\n\t\t\trowTap:\"row\",\n\t\t\trowDblTap:\"row\",\n\t\t\trowTapHold:\"row\",\n\n\t\t\t//cell events\n\t\t\tcellClick:\"cell-click\",\n\t\t\tcellDblClick:\"cell-dblclick\",\n\t\t\tcellContext:\"cell-contextmenu\",\n\t\t\tcellMouseEnter:\"cell-mouseenter\",\n\t\t\tcellMouseLeave:\"cell-mouseleave\",\n\t\t\tcellMouseOver:\"cell-mouseover\",\n\t\t\tcellMouseOut:\"cell-mouseout\",\n\t\t\tcellMouseMove:\"cell-mousemove\",\n\t\t\tcellMouseDown:\"cell-mousedown\",\n\t\t\tcellMouseUp:\"cell-mouseup\",\n\t\t\tcellTap:\"cell\",\n\t\t\tcellDblTap:\"cell\",\n\t\t\tcellTapHold:\"cell\",\n\n\t\t\t//column header events\n\t\t\theaderClick:\"column-click\",\n\t\t\theaderDblClick:\"column-dblclick\",\n\t\t\theaderContext:\"column-contextmenu\",\n\t\t\theaderMouseEnter:\"column-mouseenter\",\n\t\t\theaderMouseLeave:\"column-mouseleave\",\n\t\t\theaderMouseOver:\"column-mouseover\",\n\t\t\theaderMouseOut:\"column-mouseout\",\n\t\t\theaderMouseMove:\"column-mousemove\",\n\t\t\theaderMouseDown:\"column-mousedown\",\n\t\t\theaderMouseUp:\"column-mouseup\",\n\t\t\theaderTap:\"column\",\n\t\t\theaderDblTap:\"column\",\n\t\t\theaderTapHold:\"column\",\n\n\t\t\t//group header\n\t\t\tgroupClick:\"group-click\",\n\t\t\tgroupDblClick:\"group-dblclick\",\n\t\t\tgroupContext:\"group-contextmenu\",\n\t\t\tgroupMouseEnter:\"group-mouseenter\",\n\t\t\tgroupMouseLeave:\"group-mouseleave\",\n\t\t\tgroupMouseOver:\"group-mouseover\",\n\t\t\tgroupMouseOut:\"group-mouseout\",\n\t\t\tgroupMouseMove:\"group-mousemove\",\n\t\t\tgroupMouseDown:\"group-mousedown\",\n\t\t\tgroupMouseUp:\"group-mouseup\",\n\t\t\tgroupTap:\"group\",\n\t\t\tgroupDblTap:\"group\",\n\t\t\tgroupTapHold:\"group\",\n\t\t};\n\n\t\tthis.subscribers = {};\n\n\t\tthis.touchSubscribers = {};\n\n\t\tthis.columnSubscribers = {};\n\n\t\tthis.touchWatchers = {\n\t\t\trow:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcell:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcolumn:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tgroup:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t}\n\t\t};\n\n\t\tthis.registerColumnOption(\"headerClick\");\n\t\tthis.registerColumnOption(\"headerDblClick\");\n\t\tthis.registerColumnOption(\"headerContext\");\n\t\tthis.registerColumnOption(\"headerMouseEnter\");\n\t\tthis.registerColumnOption(\"headerMouseLeave\");\n\t\tthis.registerColumnOption(\"headerMouseOver\");\n\t\tthis.registerColumnOption(\"headerMouseOut\");\n\t\tthis.registerColumnOption(\"headerMouseMove\");\n\t\tthis.registerColumnOption(\"headerMouseDown\");\n\t\tthis.registerColumnOption(\"headerMouseUp\");\n\t\tthis.registerColumnOption(\"headerTap\");\n\t\tthis.registerColumnOption(\"headerDblTap\");\n\t\tthis.registerColumnOption(\"headerTapHold\");\n\n\t\tthis.registerColumnOption(\"cellClick\");\n\t\tthis.registerColumnOption(\"cellDblClick\");\n\t\tthis.registerColumnOption(\"cellContext\");\n\t\tthis.registerColumnOption(\"cellMouseEnter\");\n\t\tthis.registerColumnOption(\"cellMouseLeave\");\n\t\tthis.registerColumnOption(\"cellMouseOver\");\n\t\tthis.registerColumnOption(\"cellMouseOut\");\n\t\tthis.registerColumnOption(\"cellMouseMove\");\n\t\tthis.registerColumnOption(\"cellMouseDown\");\n\t\tthis.registerColumnOption(\"cellMouseUp\");\n\t\tthis.registerColumnOption(\"cellTap\");\n\t\tthis.registerColumnOption(\"cellDblTap\");\n\t\tthis.registerColumnOption(\"cellTapHold\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.initializeExternalEvents();\n\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.clearTouchWatchers.bind(this));\n\t\tthis.subscribe(\"scroll-vertical\", this.clearTouchWatchers.bind(this));\n\t}\n\n\tclearTouchWatchers(){\n\t\tvar types = Object.values(this.touchWatchers);\n\n\t\ttypes.forEach((type) => {\n\t\t\tfor(let key in type){\n\t\t\t\ttype[key] = null;\n\t\t\t}\n\t\t});\n\t}\n\t\t\n\tcellContentsSelectionFixer(e, cell){\n\t\tvar range;\n\n\t\tif(this.table.modExists(\"edit\")){\n\t\t\tif (this.table.modules.edit.currentCell === cell){\n\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t}\n\t\t}\n\n\t\te.preventDefault();\n\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\trange = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(cell.getElement());\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNode(cell.getElement());\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\n\tinitializeExternalEvents(){\n\t\tfor(let key in this.eventMap){\n\t\t\tthis.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key));\n\t\t}\n\t}\n\n\tsubscriptionChanged(key, added){\n\t\tif(added){\n\t\t\tif(!this.subscribers[key]){\n\t\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\t\tthis.subscribers[key] = this.handle.bind(this, key);\n\t\t\t\t\tthis.subscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t}else {\n\t\t\t\t\tthis.subscribeTouchEvents(key);\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\tif(this.subscribers[key] && !this.columnSubscribers[key]  && !this.subscribedExternal(key)){\n\t\t\t\t\tthis.unsubscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t\tdelete this.subscribers[key];\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.unsubscribeTouchEvents(key);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tsubscribeTouchEvents(key){\n\t\tvar type = this.eventMap[key];\n\n\t\tif(!this.touchSubscribers[type + \"-touchstart\"]){\n\t\t\tthis.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\n\t\t\tthis.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\n\n\t\t\tthis.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\tthis.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\t\t}\n\n\t\tthis.subscribers[key] = true;\n\t}\n\n\tunsubscribeTouchEvents(key){\n\t\tvar noTouch = true,\n\t\ttype = this.eventMap[key];\n\n\t\tif(this.subscribers[key] && !this.subscribedExternal(key)){\n\t\t\tdelete this.subscribers[key];\n\n\t\t\tfor(let i in this.eventMap){\n\t\t\t\tif(this.eventMap[i] === type){\n\t\t\t\t\tif(this.subscribers[i]){\n\t\t\t\t\t\tnoTouch = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(noTouch){\n\t\t\t\tthis.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\t\tthis.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchstart\"];\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchend\"];\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\n\t\tfor(let key in this.eventMap){\n\t\t\tif(def[key]){\n\t\t\t\tthis.subscriptionChanged(key, true);\n\n\t\t\t\tif(!this.columnSubscribers[key]){\n\t\t\t\t\tthis.columnSubscribers[key] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.columnSubscribers[key].push(column);\n\t\t\t}\n\t\t}\n\t}\n\n\thandle(action, e, component){\n\t\tthis.dispatchEvent(action, e, component);\n\t}\n\n\thandleTouch(type, action, e, component){\n\t\tvar watchers = this.touchWatchers[type];\n\n\t\tif(type === \"column\"){\n\t\t\ttype = \"header\";\n\t\t}\n\n\t\tswitch(action){\n\t\t\tcase \"start\":\n\t\t\t\twatchers.tap = true;\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\n\t\t\t\twatchers.tapHold = setTimeout(() => {\n\t\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\t\twatchers.tapHold = null;\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"TapHold\", e,  component);\n\t\t\t\t}, 1000);\n\t\t\t\tbreak;\n\n\t\t\tcase \"end\":\n\t\t\t\tif(watchers.tap){\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tthis.dispatchEvent(type + \"Tap\", e,  component);\n\t\t\t\t}\n\n\t\t\t\tif(watchers.tapDbl){\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"DblTap\", e,  component);\n\t\t\t\t}else {\n\t\t\t\t\twatchers.tapDbl = setTimeout(() => {\n\t\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\t\twatchers.tapDbl = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\twatchers.tapHold = null;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tdispatchEvent(action, e, component){\n\t\tvar componentObj = component.getComponent(),\n\t\tcallback;\n\n\t\tif(this.columnSubscribers[action]){\n\n\t\t\tif(component instanceof Cell){\n\t\t\t\tcallback = component.column.definition[action];\n\t\t\t}else if(component instanceof Column){\n\t\t\t\tcallback = component.definition[action];\n\t\t\t}\n\n\t\t\tif(callback){\n\t\t\t\tcallback(e, componentObj);\n\t\t\t}\n\t\t}\n\n\t\tthis.dispatchExternal(action, e, componentObj);\n\t}\n}\n\nInteraction.moduleName = \"interaction\";\n\nvar defaultBindings = {\n\tnavPrev:\"shift + 9\",\n\tnavNext:9,\n\tnavUp:38,\n\tnavDown:40,\n\tscrollPageUp:33,\n\tscrollPageDown:34,\n\tscrollToStart:36,\n\tscrollToEnd:35,\n\tundo:[\"ctrl + 90\", \"meta + 90\"],\n\tredo:[\"ctrl + 89\", \"meta + 89\"],\n\tcopyToClipboard:[\"ctrl + 67\", \"meta + 67\"],\n};\n\nvar defaultActions = {\n\tkeyBlock:function(e){\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t},\n\tscrollPageUp:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop - rowManager.element.clientHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos >= 0){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else {\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollPageDown:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop + rowManager.element.clientHeight,\n\t\tscrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos <= scrollMax){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else {\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\n\t},\n\tscrollToStart:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollToEnd:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tnavPrev:function(e){\n\t\tthis.dispatch(\"keybinding-nav-prev\", e);\n\t},\n\n\tnavNext:function(e){\n\t\tthis.dispatch(\"keybinding-nav-next\", e);\n\t},\n\n\tnavLeft:function(e){\n\t\tthis.dispatch(\"keybinding-nav-left\", e);\n\t},\n\n\tnavRight:function(e){\n\t\tthis.dispatch(\"keybinding-nav-right\", e);\n\t},\n\n\tnavUp:function(e){\n\t\tthis.dispatch(\"keybinding-nav-up\", e);\n\t},\n\n\tnavDown:function(e){\n\t\tthis.dispatch(\"keybinding-nav-down\", e);\n\t},\n\n\tundo:function(e){\n\t\tvar cell = false;\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif(!cell){\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.undo();\n\t\t\t}\n\t\t}\n\t},\n\n\tredo:function(e){\n\t\tvar cell = false;\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif(!cell){\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.redo();\n\t\t\t}\n\t\t}\n\t},\n\n\tcopyToClipboard:function(e){\n\t\tif(!this.table.modules.edit.currentCell){\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\n\t\t\t}\n\t\t}\n\t},\n};\n\nclass Keybindings extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.watchKeys = null;\n\t\tthis.pressedKeys = null;\n\t\tthis.keyupBinding = false;\n\t\tthis.keydownBinding = false;\n\n\t\tthis.registerTableOption(\"keybindings\", {}); //array for keybindings\n\t\tthis.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\n\t}\n\n\tinitialize(){\n\t\tvar bindings = this.table.options.keybindings,\n\t\tmergedBindings = {};\n\n\t\tthis.watchKeys = {};\n\t\tthis.pressedKeys = [];\n\n\t\tif(bindings !== false){\n\t\t\tObject.assign(mergedBindings, Keybindings.bindings);\n\t\t\tObject.assign(mergedBindings, bindings);\n\n\t\t\tthis.mapBindings(mergedBindings);\n\t\t\tthis.bindEvents();\n\t\t}\n\n\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t}\n\n\tmapBindings(bindings){\n\t\tfor(let key in bindings){\n\t\t\tif(Keybindings.actions[key]){\n\t\t\t\tif(bindings[key]){\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindings[key].forEach((binding) => {\n\t\t\t\t\t\tvar bindingList = Array.isArray(binding) ?  binding : [binding];\n\t\t\t\t\t\t\n\t\t\t\t\t\tbindingList.forEach((item) => {\n\t\t\t\t\t\t\tthis.mapBinding(key, item);\n\t\t\t\t\t\t});\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t\t}\n\t\t}\n\t}\n\n\tmapBinding(action, symbolsList){\n\t\tvar binding = {\n\t\t\taction: Keybindings.actions[action],\n\t\t\tkeys: [],\n\t\t\tctrl: false,\n\t\t\tshift: false,\n\t\t\tmeta: false,\n\t\t};\n\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\t\tsymbols.forEach((symbol) => {\n\t\t\tswitch(symbol){\n\t\t\t\tcase \"ctrl\":\n\t\t\t\t\tbinding.ctrl = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"shift\":\n\t\t\t\t\tbinding.shift = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"meta\":\n\t\t\t\t\tbinding.meta = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsymbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\n\t\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\t\tif(!this.watchKeys[symbol]){\n\t\t\t\t\t\tthis.watchKeys[symbol] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.watchKeys[symbol].push(binding);\n\t\t\t}\n\t\t});\n\t}\n\n\tbindEvents(){\n\t\tvar self = this;\n\n\t\tthis.keyupBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tself.pressedKeys.push(code);\n\n\t\t\t\tbindings.forEach(function(binding){\n\t\t\t\t\tself.checkBinding(e, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.keydownBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n\t}\n\n\tclearBindings(){\n\t\tif(this.keyupBinding){\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t\t}\n\n\t\tif(this.keydownBinding){\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t\t}\n\t}\n\n\tcheckBinding(e, binding){\n\t\tvar match = true;\n\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\n\t\t\tbinding.keys.forEach((key) => {\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\n\n\t\t\t\tif(index == -1){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tbinding.action.call(this, e);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nKeybindings.moduleName = \"keybindings\";\n\n//load defaults\nKeybindings.bindings = defaultBindings;\nKeybindings.actions = defaultActions;\n\nclass Menu extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.menuContainer = null;\n\t\tthis.nestedMenuBlock = false;\n\t\t\n\t\tthis.currentComponent = null;\n\t\tthis.rootPopup = null;\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"menuContainer\", undefined); //deprecated\n\t\t\n\t\tthis.registerTableOption(\"rowContextMenu\", false);\n\t\tthis.registerTableOption(\"rowClickMenu\", false);\n\t\tthis.registerTableOption(\"rowDblClickMenu\", false);\n\t\tthis.registerTableOption(\"groupContextMenu\", false);\n\t\tthis.registerTableOption(\"groupClickMenu\", false);\n\t\tthis.registerTableOption(\"groupDblClickMenu\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextMenu\");\n\t\tthis.registerColumnOption(\"headerClickMenu\");\n\t\tthis.registerColumnOption(\"headerDblClickMenu\");\n\t\tthis.registerColumnOption(\"headerMenu\");\n\t\tthis.registerColumnOption(\"headerMenuIcon\");\n\t\tthis.registerColumnOption(\"contextMenu\");\n\t\tthis.registerColumnOption(\"clickMenu\");\n\t\tthis.registerColumnOption(\"dblClickMenu\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\tif(!this.deprecationCheck(\"menuContainer\", \"popupContainer\")){\n\t\t\tthis.table.options.popupContainer = this.table.options.menuContainer;\n\t\t}\n\t}\t\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextMenu){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickMenu){\n\t\t\tthis.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowDblClickMenu){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextMenu){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickMenu){\n\t\t\tthis.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupDblClickMenu){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar\tdef = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextMenu && !this.columnSubscribers.headerContextMenu){\n\t\t\tthis.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickMenu && !this.columnSubscribers.headerClickMenu){\n\t\t\tthis.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu){\n\t\t\tthis.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerDblClickMenu\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerMenu){\n\t\t\tthis.initializeColumnHeaderMenu(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextMenu && !this.columnSubscribers.contextMenu){\n\t\t\tthis.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.clickMenu && !this.columnSubscribers.clickMenu){\n\t\t\tthis.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\n\t\t}\n\t\t\n\t\tif(def.dblClickMenu && !this.columnSubscribers.dblClickMenu){\n\t\t\tthis.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, \"dblClickMenu\");\n\t\t\tthis.subscribe(\"cell-dblclick\", this.columnSubscribers.dblClickMenu);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderMenu(column){\n\t\tvar icon = column.definition.headerMenuIcon,\n\t\theaderMenuEl;\n\t\t\n\t\theaderMenuEl = document.createElement(\"span\");\n\t\theaderMenuEl.classList.add(\"tabulator-header-popup-button\");\n\t\t\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderMenuEl.appendChild(icon);\n\t\t\t}else {\n\t\t\t\theaderMenuEl.innerHTML = icon;\n\t\t\t}\n\t\t}else {\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderMenuEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadMenuEvent(column.definition.headerMenu, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadMenuTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadMenuEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadMenuTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadMenuEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadMenuEvent(menu, e, component){\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\n\t\t\n\t\tthis.loadMenu(e, component, menu);\n\t}\n\t\n\tloadMenu(e, component, menu, parentEl, parentPopup){\n\t\tvar touch = !(e instanceof MouseEvent),\t\t\n\t\tmenuEl = document.createElement(\"div\"),\n\t\tpopup;\n\t\t\n\t\tmenuEl.classList.add(\"tabulator-menu\");\n\t\t\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\t//abort if no menu set\n\t\tif(!menu || !menu.length){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!parentEl){\n\t\t\tif(this.nestedMenuBlock){\n\t\t\t\t//abort if child menu already open\n\t\t\t\tif(this.rootPopup){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\n\t\t\t\t\tthis.nestedMenuBlock = false;\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.rootPopup = popup = this.popup(menuEl);\n\t\t\t\n\t\t}else {\n\t\t\tpopup = parentPopup.child(menuEl);\n\t\t}\n\t\t\n\t\tmenu.forEach((item) => {\n\t\t\tvar itemEl = document.createElement(\"div\"),\n\t\t\tlabel = item.label,\n\t\t\tdisabled = item.disabled;\n\t\t\t\n\t\t\tif(item.separator){\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t\t}else {\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\t\t\t\t\n\t\t\t\tif(typeof label == \"function\"){\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(label instanceof Node){\n\t\t\t\t\titemEl.appendChild(label);\n\t\t\t\t}else {\n\t\t\t\t\titemEl.innerHTML = label;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(typeof disabled == \"function\"){\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(disabled){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl, popup);\n\t\t\t\t\t\t});\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(item.action){\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tmenuEl.appendChild(itemEl);\n\t\t});\n\t\t\n\t\tmenuEl.addEventListener(\"click\", (e) => {\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\n\t\t\t}\n\t\t});\n\t\t\n\t\tpopup.show(parentEl || e);\n\t\t\n\t\tif(popup === this.rootPopup){\n\t\t\tthis.rootPopup.hideOnBlur(() => {\n\t\t\t\tthis.rootPopup = null;\n\t\t\t\t\n\t\t\t\tif(this.currentComponent){\n\t\t\t\t\tthis.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\n\t\t\t\t\tthis.currentComponent = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.currentComponent = component;\n\t\t\t\n\t\t\tthis.dispatchExternal(\"menuOpened\", component.getComponent());\n\t\t}\n\t}\n}\n\nMenu.moduleName = \"menu\";\n\nclass MoveColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating column header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving column\n\t\tthis.toCol = false; //destination column\n\t\tthis.toColAfter = false; //position of moving column relative to the destination column\n\t\tthis.startX = 0; //starting position within header element\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\n\t\tthis.touchMove = false;\n\t\t\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"movableColumns\", false); //enable movable columns\n\t}\n\t\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.classList.add(\"tabulator-col-placeholder\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.movableColumns){\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\tcolEl;\n\t\t\n\t\tif(!column.modules.frozen && !column.isGroup){\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tconfig.mousemove = function(e){\n\t\t\t\tif(column.parent === self.moving.parent){\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.contentsElement.scrollLeft) > (column.getWidth() / 2)){\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(self);\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tself.touchMove = false;\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tself.bindTouchEvents(column);\n\t\t}\n\t\t\n\t\tcolumn.modules.moveColumn = config;\n\t}\n\t\n\tbindTouchEvents(column){\n\t\tvar colEl = column.getElement(),\n\t\tstartXMove = false, //shifting center position of the cell\n\t\tnextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\n\t\t\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextCol = column.nextColumn();\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\n\t\t\t\tprevCol = column.prevColumn();\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\n\t\t\t\tnextColWidthLast = 0;\n\t\t\t\tprevColWidthLast = 0;\n\t\t\t\tstartXMove = false;\n\t\t\t\t\n\t\t\t\tthis.startMove(e, column);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\n\t\t\tvar diff, moveToCol;\n\t\t\t\n\t\t\tif(this.moving){\n\t\t\t\tthis.moveHover(e);\n\t\t\t\t\n\t\t\t\tif(!startXMove){\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\n\t\t\t\t\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\n\t\t\t\t\t\tmoveToCol = nextCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\n\t\t\t\t\t\tmoveToCol = prevCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(moveToCol){\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstartMove(e, column){\n\t\tvar element = column.getElement(),\n\t\theaderElement = this.table.columnManager.getContentsElement(),\n\t\theadersElement = this.table.columnManager.getHeadersElement();\n\t\t\n\t\tthis.moving = column;\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\n\t\t\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\t\t\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\t\t\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\t\t\n\t\theaderElement.appendChild(this.hoverElement);\n\t\t\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.bottom = (headerElement.clientHeight - headersElement.offsetHeight) + \"px\";\n\t\t\n\t\tif(!this.touchMove){\n\t\t\tthis._bindMouseMove();\n\t\t\t\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t\t}\n\t\t\n\t\tthis.moveHover(e);\n\t}\n\t\n\t_bindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_unbindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tmoveColumn(column, after){\n\t\tvar movingCells = this.moving.getCells();\n\t\t\n\t\tthis.toCol = column;\n\t\tthis.toColAfter = after;\n\t\t\n\t\tif(after){\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tendMove(e){\n\t\tif(e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\t\t\t\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\t\t\t\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(this.toCol){\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t\t}\n\t\t\t\n\t\t\tthis.moving = false;\n\t\t\tthis.toCol = false;\n\t\t\tthis.toColAfter = false;\n\t\t\t\n\t\t\tif(!this.touchMove){\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmoveHover(e){\n\t\tvar columnHolder = this.table.columnManager.getContentsElement(),\n\t\tscrollLeft = columnHolder.scrollLeft,\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\n\t\tscrollPos;\n\t\t\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\n\t\t\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nMoveColumns.moduleName = \"moveColumn\";\n\nclass MoveRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating row header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving row\n\t\tthis.toRow = false; //destination row\n\t\tthis.toRowAfter = false; //position of moving row relative to the destination row\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\n\t\tthis.startY = 0; //starting Y position within header element\n\t\tthis.startX = 0; //starting X position within header element\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\tthis.tableRowDropEvent = false;\n\n\t\tthis.touchMove = false;\n\n\t\tthis.connection = false;\n\t\tthis.connectionSelectorsTables = false;\n\t\tthis.connectionSelectorsElements = false;\n\t\tthis.connectionElements = [];\n\t\tthis.connections = [];\n\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\n\t\tthis.registerTableOption(\"movableRows\", false); //enable movable rows\n\t\tthis.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsSender\", false);\n\t\tthis.registerTableOption(\"movableRowsReceiver\", \"insert\");\n\n\t\tthis.registerColumnOption(\"rowHandle\");\n\t}\n\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.classList.add(\"tabulator-row-placeholder\");\n\n\t\treturn el;\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.movableRows){\n\t\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n\t\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n\n\t\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n\n\t\t\tthis.subscribe(\"cell-init\", this.initializeCell.bind(this));\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeGroupHeader(group){\n\t\tvar self = this,\n\t\tconfig = {};\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, group);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl;\n\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(group, true);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\tif(rowEl.previousSibling){\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tgroup.modules.moveRow = config;\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\trowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(row, true);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(row, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\n\t\tif(!this.hasHandle){\n\n\t\t\trowEl = row.getElement();\n\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(row, row.getElement());\n\t\t}\n\n\t\trow.modules.moveRow = config;\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tthis.hasHandle = true;\n\t\t}\n\t}\n\n\tinitializeCell(cell){\n\t\tif(cell.column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tvar self = this,\n\t\t\tcellEl = cell.getElement(true);\n\n\t\t\tcellEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, cell.row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcellEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(cell.row, cellEl);\n\t\t}\n\t}\n\n\tbindTouchEvents(row, element){\n\t\tvar startYMove = false, //shifting center position of the cell\n\t\tnextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\n\n\t\telement.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextRow = row.nextRow();\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\n\t\t\t\tprevRow = row.prevRow();\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\n\t\t\t\tnextRowHeightLast = 0;\n\t\t\t\tprevRowHeightLast = 0;\n\t\t\t\tstartYMove = false;\n\n\t\t\t\tthis.startMove(e, row);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\tthis.moving, this.toRow, this.toRowAfter;\n\t\telement.addEventListener(\"touchmove\", (e) => {\n\n\t\t\tvar diff, moveToRow;\n\n\t\t\tif(this.moving){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.moveHover(e);\n\n\t\t\t\tif(!startYMove){\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\n\t\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\n\t\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(moveToRow){\n\t\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t\tthis.touchMove = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t_bindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\t_unbindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\tstartMove(e, row){\n\t\tvar element = row.getElement();\n\n\t\tthis.setStartPosition(e, row);\n\n\t\tthis.moving = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\t\tif(!this.connection){\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\t\telement.parentNode.removeChild(element);\n\t\t}else {\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\t\tthis.connectToTables(row);\n\t\t}\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tif(this.connection){\n\t\t\tdocument.body.appendChild(this.hoverElement);\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t\t}else {\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\n\t\t\tthis._bindMouseMove();\n\t\t}\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\t\tthis.dispatchExternal(\"rowMoving\", row.getComponent());\n\n\t\tthis.moveHover(e);\n\t}\n\n\tsetStartPosition(e, row){\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t\telement, position;\n\n\t\telement = row.getElement();\n\t\tif(this.connection){\n\t\t\tposition = element.getBoundingClientRect();\n\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t\t}else {\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\n\t\t}\n\t}\n\n\tendMove(e){\n\t\tif(!e || e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tif(!this.connection){\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\t}\n\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif(this.toRow){\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t\t}else {\n\t\t\t\tthis.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toRow = false;\n\t\t\tthis.toRowAfter = false;\n\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\t\tif(this.connection){\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\t\tthis.disconnectFromTables();\n\t\t\t}\n\t\t}\n\t}\n\n\tmoveRow(row, after){\n\t\tthis.toRow = row;\n\t\tthis.toRowAfter = after;\n\t}\n\n\tmoveHover(e){\n\t\tif(this.connection){\n\t\t\tthis.moveHoverConnections.call(this, e);\n\t\t}else {\n\t\t\tthis.moveHoverTable.call(this, e);\n\t\t}\n\t}\n\n\tmoveHoverTable(e){\n\t\tvar rowHolder = this.table.rowManager.getElement(),\n\t\tscrollTop = rowHolder.scrollTop,\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop;\n\t\t\n\t\tthis.hoverElement.style.top = Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\n\t}\n\n\tmoveHoverConnections(e){\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\n\t}\n\n\telementRowDrop(e, element, row){\n\t\tthis.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\n\t}\n\n\t//establish connection with other tables\n\tconnectToTables(row){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n\t\t\t\trow:row,\n\t\t\t});\n\t\t}\n\n\t\tif(this.connectionSelectorsElements){\n\n\t\t\tthis.connectionElements = [];\n\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\n\t\t\t}\n\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\n\t\t\t\tif(typeof query === \"string\"){\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n\t\t\t\t}else {\n\t\t\t\t\tthis.connectionElements.push(query);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.connectionElements.forEach((element) => {\n\t\t\t\tvar dropEvent = (e) => {\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\n\t\t\t\t};\n\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\n\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\n\t\t\t});\n\t\t}\n\t}\n\n\t//disconnect from other tables\n\tdisconnectFromTables(){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n\t\t}\n\n\t\tthis.connectionElements.forEach((element) => {\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n\t\t\tdelete element.tabulatorElementDropEvent;\n\t\t});\n\t}\n\n\t//accept incomming connection\n\tconnect(table, row){\n\t\tif(!this.connectedTable){\n\t\t\tthis.connectedTable = table;\n\t\t\tthis.connectedRow = row;\n\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\n\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStart\", row, table);\n\n\t\t\treturn true;\n\t\t}else {\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//close incoming connection\n\tdisconnect(table){\n\t\tif(table === this.connectedTable){\n\t\t\tthis.connectedTable = false;\n\t\t\tthis.connectedRow = false;\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStop\", table);\n\t\t}else {\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\n\t\t}\n\t}\n\n\tdropComplete(table, row, success){\n\t\tvar sender = false;\n\n\t\tif(success){\n\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(sender){\n\t\t\t\tsender.call(this, this.moving ? this.moving.getComponent() : undefined, row ? row.getComponent() : undefined, table);\n\t\t\t}else {\n\t\t\t\tif(this.table.options.movableRowsSender){\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}else {\n\t\t\tthis.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}\n\n\t\tthis.endMove();\n\t}\n\n\ttableRowDrop(e, row){\n\t\tvar receiver = false,\n\t\tsuccess = false;\n\n\t\te.stopImmediatePropagation();\n\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\n\t\t\tcase \"string\":\n\t\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(receiver){\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else {\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n\t\t}\n\n\t\tif(success){\n\t\t\tthis.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else {\n\t\t\tthis.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}\n\n\t\tthis.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\t\trow:row,\n\t\t\tsuccess:success,\n\t\t});\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"connect\":\n\t\t\t\treturn this.connect(table, data.row);\n\n\t\t\tcase \"disconnect\":\n\t\t\t\treturn this.disconnect(table);\n\n\t\t\tcase \"dropcomplete\":\n\t\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t}\n\t}\n}\n\nMoveRows.prototype.receivers = {\n\tinsert:function(fromRow, toRow, fromTable){\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\treturn true;\n\t},\n\n\tadd:function(fromRow, toRow, fromTable){\n\t\tthis.table.addRow(fromRow.getData());\n\t\treturn true;\n\t},\n\n\tupdate:function(fromRow, toRow, fromTable){\n\t\tif(toRow){\n\t\t\ttoRow.update(fromRow.getData());\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\treplace:function(fromRow, toRow, fromTable){\n\t\tif(toRow){\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\t\ttoRow.delete();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n};\n\nMoveRows.prototype.senders = {\n\tdelete:function(fromRow, toRow, toTable){\n\t\tfromRow.delete();\n\t}\n};\n\nMoveRows.moduleName = \"moveRow\";\n\nvar defaultMutators = {};\n\nclass Mutator extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of mutation types\n\t\tthis.enabled = true;\n\n\t\tthis.registerColumnOption(\"mutator\");\n\t\tthis.registerColumnOption(\"mutatorParams\");\n\t\tthis.registerColumnOption(\"mutatorData\");\n\t\tthis.registerColumnOption(\"mutatorDataParams\");\n\t\tthis.registerColumnOption(\"mutatorEdit\");\n\t\tthis.registerColumnOption(\"mutatorEditParams\");\n\t\tthis.registerColumnOption(\"mutatorClipboard\");\n\t\tthis.registerColumnOption(\"mutatorClipboardParams\");\n\t\tthis.registerColumnOption(\"mutateLink\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\n\t\tthis.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n\t}\n\n\trowDataChanged(row, tempData, updatedData){\n\t\treturn this.transformRow(tempData, \"data\", updatedData);\n\t}\n\n\t//initialize column mutator\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\tmutator;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\n\n\t\t\t\tif(mutator){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\tmutator:mutator,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.mutate = config;\n\t\t}\n\t}\n\n\tlookupMutator(value){\n\t\tvar mutator = false;\n\n\t\t//set column mutator\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Mutator.mutators[value]){\n\t\t\t\t\tmutator = Mutator.mutators[value];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tmutator = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn mutator;\n\t}\n\n\t//apply mutator to row\n\ttransformRow(data, type, updatedData){\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\tvalue;\n\n\t\tif(this.enabled){\n\n\t\t\tthis.table.columnManager.traverse((column) => {\n\t\t\t\tvar mutator, params, component;\n\n\t\t\t\tif(column.modules.mutate){\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\t\tif(mutator){\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\t\tif((type == \"data\" && !updatedData)|| typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//apply mutator to new cell value\n\ttransformCell(cell, value){\n\t\tif(cell.column.modules.mutate){\n\t\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t\t\ttempData = {};\n\n\t\t\tif(mutator){\n\t\t\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\t\t\tcell.column.setFieldValue(tempData, value);\n\t\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tmutateLink(cell){\n\t\tvar links = cell.column.definition.mutateLink;\n\n\t\tif(links){\n\t\t\tif(!Array.isArray(links)){\n\t\t\t\tlinks = [links];\n\t\t\t}\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\tvar linkCell = cell.row.getCell(link);\n\n\t\t\t\tif(linkCell){\n\t\t\t\t\tlinkCell.setValue(linkCell.getValue(), true, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tenable(){\n\t\tthis.enabled = true;\n\t}\n\n\tdisable(){\n\t\tthis.enabled = false;\n\t}\n}\n\nMutator.moduleName = \"mutator\";\n\n//load defaults\nMutator.mutators = defaultMutators;\n\nfunction rows(pageSize, currentRow, currentPage, totalRows, totalPages){\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|rows\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\n\tif(totalRows){\n\t\tvalueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min((currentRow + pageSize - 1), totalRows) + \" \";\n\t\t\n\t\ttotalEl.innerHTML = \" \" + totalRows + \" \";\n\t\t\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(ofEl);\n\t\tel.appendChild(totalEl);\n\t\tel.appendChild(rowsEl);\n\t}else {\n\t\tvalueEl.innerHTML = \" 0 \";\n\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(rowsEl);\n\t}\n\t\n\treturn el;\n}\n\nfunction pages(pageSize, currentRow, currentPage, totalRows, totalPages){\n\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\t\n\tvalueEl.innerHTML = \" \" + currentPage + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\t\n\ttotalEl.innerHTML = \" \" + totalPages + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|pages\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\t\n\tel.appendChild(showingEl);\n\tel.appendChild(valueEl);\n\tel.appendChild(ofEl);\n\tel.appendChild(totalEl);\n\tel.appendChild(rowsEl);\n\t\n\treturn el;\n}\n\nvar defaultPageCounters = {\n\trows:rows,\n\tpages:pages,\n};\n\nclass Page extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.mode = \"local\";\n\t\tthis.progressiveLoad = false;\n\t\t\n\t\tthis.element = null;\n\t\tthis.pageCounterElement = null;\n\t\tthis.pageCounter = null;\n\t\t\n\t\tthis.size = 0;\n\t\tthis.page = 1;\n\t\tthis.count = 5;\n\t\tthis.max = 1;\n\n\t\tthis.remoteRowCountEstimate = null;\n\t\t\n\t\tthis.initialLoad = true;\n\t\tthis.dataChanging = false; //flag to check if data is being changed by this module\n\t\t\n\t\tthis.pageSizes = [];\n\t\t\n\t\tthis.registerTableOption(\"pagination\", false); //set pagination type\n\t\tthis.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\n\t\tthis.registerTableOption(\"paginationSize\", false); //set number of rows to a page\n\t\tthis.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\n\t\tthis.registerTableOption(\"paginationCounter\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationCounterElement\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationButtonCount\", 5);  // set count of page button\n\t\tthis.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\n\t\tthis.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\n\t\t// this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\n\t\t// this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\n\t\tthis.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\n\t\t\n\t\tthis.registerTableOption(\"progressiveLoad\", false); //progressive loading\n\t\tthis.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\n\t\tthis.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\n\t\t\n\t\tthis.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\n\t\tthis.registerTableFunction(\"setPage\", this.setPage.bind(this));\n\t\tthis.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\n\t\tthis.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\n\t\tthis.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\n\t\tthis.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\n\t\tthis.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\n\t\tthis.registerTableFunction(\"getPage\", this.getPage.bind(this));\n\t\tthis.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\n\n\t\t\tif(this.table.options.paginationAddRow == \"page\"){\n\t\t\t\tthis.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.paginationMode === \"remote\"){\n\t\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad){\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 50);\n\t\t\t\n\t\t\tthis.createElements();\n\t\t\tthis.initializePageCounter();\n\t\t\tthis.initializePaginator();\n\t\t}else if(this.table.options.progressiveLoad){\n\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\t\n\t\t\tthis.initializeProgressive(this.table.options.progressiveLoad);\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad === \"scroll\"){\n\t\t\t\tthis.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowAddingPosition(row, top){\n\t\tvar rowManager = this.table.rowManager,\n\t\tdisplayRows = rowManager.getDisplayRows(),\n\t\tindex;\n\t\t\n\t\tif(top){\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[0];\n\t\t\t}else {\n\t\t\t\tif(rowManager.activeRows.length){\n\t\t\t\t\tindex = rowManager.activeRows[rowManager.activeRows.length-1];\n\t\t\t\t\ttop = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[displayRows.length - 1];\n\t\t\t\ttop = displayRows.length < this.size ? false : true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn {index, top};\n\t}\n\t\n\tcalculatePageSizes(){\n\t\tvar testElRow, testElCell;\n\t\t\n\t\tif(this.table.options.paginationSize){\n\t\t\tthis.size = this.table.options.paginationSize;\n\t\t}else {\n\t\t\ttestElRow = document.createElement(\"div\");\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\t\ttestElRow.style.visibility = \"hidden\";\n\t\t\t\n\t\t\ttestElCell = document.createElement(\"div\");\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\n\t\t\t\n\t\t\ttestElRow.appendChild(testElCell);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\n\t\t\t\n\t\t\tthis.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\n\t\t}\n\n\t\tthis.dispatchExternal(\"pageSizeChanged\", this.size);\n\t\t\n\t\tthis.generatePageSizeSelectList();\n\t}\n\t\n\tinitialLoadComplete(){\n\t\tthis.initialLoad = false;\n\t}\n\t\n\tremotePageParams(data, config, silent, params){\n\t\tif(!this.initialLoad){\n\t\t\tif((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)){\n\t\t\t\tthis.reset(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//configure request params\n\t\tparams.page = this.page;\n\t\t\n\t\t//set page size if defined\n\t\tif(this.size){\n\t\t\tparams.size = this.size;\n\t\t}\n\t\t\n\t\treturn params;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetPageToRow(row){\n\t\tif(this.table.options.pagination){\n\t\t\trow = this.rowManager.findRow(row);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\treturn this.setPageToRow(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Promise.reject();\n\t}\n\t\n\tuserSetPageSize(size){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.setPageSize(size);\n\t\t\treturn this.setPage(1);\n\t\t}else {\n\t\t\treturn false;\n\t\t}\n\t}\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tscrollVertical(top, dir){\n\t\tvar element, diff, margin;\n\t\tif(!dir && !this.table.dataLoader.loading){\n\t\t\telement = this.table.rowManager.getElement();\n\t\t\tdiff = element.scrollHeight - element.clientHeight - top;\n\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (element.clientHeight * 2);\n\t\t\t\n\t\t\tif(diff < margin){\n\t\t\t\tthis.nextPage()\n\t\t\t\t\t.catch(() => {}); //consume the exception thrown when on the last page\n\t\t\t}\n\t\t}\n\t}\n\t\n\trestOnRenderBefore(rows, renderInPosition){\n\t\tif(!renderInPosition){\n\t\t\tif(this.mode === \"local\"){\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(){\n\t\tthis.refreshData(true, \"all\");\n\t}\n\t\n\tcreateElements(){\n\t\tvar button;\n\t\t\n\t\tthis.element = document.createElement(\"span\");\n\t\tthis.element.classList.add(\"tabulator-paginator\");\n\t\t\n\t\tthis.pagesElement = document.createElement(\"span\");\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\t\t\n\t\tbutton = document.createElement(\"button\");\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"\");\n\t\tbutton.setAttribute(\"title\", \"\");\n\t\t\n\t\tthis.firstBut = button.cloneNode(true);\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\t\t\n\t\tthis.prevBut = button.cloneNode(true);\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\t\t\n\t\tthis.nextBut = button.cloneNode(true);\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\t\t\n\t\tthis.lastBut = button.cloneNode(true);\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\t\t\n\t\tif(this.table.options.paginationSizeSelector){\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t\t}\n\t}\n\t\n\tgeneratePageSizeSelectList(){\n\t\tvar pageSizes = [];\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes = [];\n\t\t\t\t\t\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\n\t\t\t\t\t\tpageSizes.push(this.size * i);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t}else {\n\t\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t\t\n\t\t\tpageSizes.forEach((item) => {\n\t\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\t\titemEl.value = item;\n\t\t\t\t\n\t\t\t\tif(item === true){\n\t\t\t\t\tthis.langBind(\"pagination|all\", function(value){\n\t\t\t\t\t\titemEl.innerHTML = value;\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\titemEl.innerHTML = item;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\n\t\t\t});\n\t\t\t\n\t\t\tthis.pageSizeSelect.value = this.size;\n\t\t}\n\t}\n\t\n\tinitializePageCounter(){\n\t\tvar counter = this.table.options.paginationCounter,\n\t\tpageCounter = null;\n\t\t\n\t\tif(counter){\n\t\t\tif(typeof counter === \"function\"){\n\t\t\t\tpageCounter = counter;\n\t\t\t}else {\n\t\t\t\tpageCounter = Page.pageCounters[counter];\n\t\t\t}\n\t\t\t\n\t\t\tif(pageCounter){\n\t\t\t\tthis.pageCounter = pageCounter;\n\t\t\t\t\n\t\t\t\tthis.pageCounterElement = document.createElement(\"span\");\n\t\t\t\tthis.pageCounterElement.classList.add(\"tabulator-page-counter\");\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Pagination Error - No such page counter found: \", counter);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup pagination\n\tinitializePaginator(hidden){\n\t\tvar pageSelectLabel, paginationCounterHolder;\n\t\t\n\t\tif(!hidden){\n\t\t\t//build pagination element\n\t\t\t\n\t\t\t//bind localizations\n\t\t\tthis.langBind(\"pagination|first\", (value) => {\n\t\t\t\tthis.firstBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|first_title\", (value) => {\n\t\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.firstBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev\", (value) => {\n\t\t\t\tthis.prevBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev_title\", (value) => {\n\t\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.prevBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next\", (value) => {\n\t\t\t\tthis.nextBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next_title\", (value) => {\n\t\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.nextBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last\", (value) => {\n\t\t\t\tthis.lastBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last_title\", (value) => {\n\t\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.lastBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\t//click bindings\n\t\t\tthis.firstBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(1);\n\t\t\t});\n\t\t\t\n\t\t\tthis.prevBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.previousPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.nextBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.nextPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.lastBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(this.max);\n\t\t\t});\n\t\t\t\n\t\t\tif(this.table.options.paginationElement){\n\t\t\t\tthis.element = this.table.options.paginationElement;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.pageSizeSelect){\n\t\t\t\tpageSelectLabel = document.createElement(\"label\");\n\t\t\t\t\n\t\t\t\tthis.langBind(\"pagination|page_size\", (value) => {\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\t\t\tpageSelectLabel.innerHTML = value;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.element.appendChild(pageSelectLabel);\n\t\t\t\tthis.element.appendChild(this.pageSizeSelect);\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\n\t\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\n\t\t\t\t\tthis.setPage(1);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//append to DOM\n\t\t\tthis.element.appendChild(this.firstBut);\n\t\t\tthis.element.appendChild(this.prevBut);\n\t\t\tthis.element.appendChild(this.pagesElement);\n\t\t\tthis.element.appendChild(this.nextBut);\n\t\t\tthis.element.appendChild(this.lastBut);\n\t\t\t\n\t\t\tif(!this.table.options.paginationElement){\n\t\t\t\tif(this.table.options.paginationCounter){\n\n\t\t\t\t\tif(this.table.options.paginationCounterElement){\n\t\t\t\t\t\tif(this.table.options.paginationCounterElement instanceof HTMLElement){\n\t\t\t\t\t\t\tthis.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t}else if(typeof this.table.options.paginationCounterElement === \"string\"){\n\t\t\t\t\t\t\tpaginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(paginationCounterHolder){\n\t\t\t\t\t\t\t\tpaginationCounterHolder.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tconsole.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.footerAppend(this.pageCounterElement);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.footerAppend(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.page = this.table.options.paginationInitialPage;\n\t\t\tthis.count = this.table.options.paginationButtonCount;\n\t\t}\n\t\t\n\t\t//set default values\n\t\tthis.mode = this.table.options.paginationMode;\n\t}\n\t\n\tinitializeProgressive(mode){\n\t\tthis.initializePaginator(true);\n\t\tthis.mode = \"progressive_\" + mode;\n\t\tthis.progressiveLoad = true;\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"page-changed\");\n\t}\n\t\n\t//calculate maximum page from number of rows\n\tsetMaxRows(rowCount){\n\t\tif(!rowCount){\n\t\t\tthis.max = 1;\n\t\t}else {\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\n\t\t}\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t}\n\t}\n\t\n\t//reset to first page without triggering action\n\treset(force){\n\t\tif(!this.initialLoad){\n\t\t\tif(this.mode == \"local\" || force){\n\t\t\t\tthis.page = 1;\n\t\t\t\tthis.trackChanges();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//set the maximum page\n\tsetMaxPage(max){\n\t\t\n\t\tmax = parseInt(max);\n\t\t\n\t\tthis.max = max || 1;\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t\tthis.trigger();\n\t\t}\n\t}\n\t\n\t//set current page number\n\tsetPage(page){\n\t\tswitch(page){\n\t\t\tcase \"first\":\n\t\t\t\treturn this.setPage(1);\n\t\n\t\t\tcase \"prev\":\n\t\t\t\treturn this.previousPage();\n\t\t\t\n\t\t\tcase \"next\":\n\t\t\t\treturn this.nextPage();\n\t\t\t\n\t\t\tcase \"last\":\n\t\t\t\treturn this.setPage(this.max);\n\t\t}\n\t\t\n\t\tpage = parseInt(page);\n\t\t\n\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\n\t\t\tthis.page = page;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t}else {\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageToRow(row){\n\t\tvar rows = this.displayRows(-1);\n\t\tvar index = rows.indexOf(row);\n\t\n\t\tif(index > -1){\n\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\n\t\t\t\n\t\t\treturn this.setPage(page);\n\t\t}else {\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageSize(size){\n\t\tif(size !== true){\n\t\t\tsize = parseInt(size);\n\t\t}\n\n\t\tif(size > 0){\n\t\t\tthis.size = size;\n\t\t\tthis.dispatchExternal(\"pageSizeChanged\", size);\n\t\t}\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t// this.pageSizeSelect.value = size;\n\t\t\tthis.generatePageSizeSelectList();\n\t\t}\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\t_setPageCounter(totalRows, size, currentRow){\n\t\tvar content;\n\t\t\n\t\tif(this.pageCounter){\n\n\t\t\tif(this.mode === \"remote\"){\n\t\t\t\tsize = this.size;\n\t\t\t\tcurrentRow = ((this.page - 1) * this.size) + 1;\n\t\t\t\ttotalRows = this.remoteRowCountEstimate;\n\t\t\t}\n\n\t\t\tcontent = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\n\t\t\t\n\t\t\tswitch(typeof content){\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif(content instanceof Node){\n\t\t\t\t\t\n\t\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\t\twhile(this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.pageCounterElement.appendChild(content);\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\t\n\t\t\t\t\t\tif(content != null){\n\t\t\t\t\t\t\tconsole.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.pageCounterElement.innerHTML = content;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup the pagination buttons\n\t_setPageButtons(){\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\n\t\t\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\n\t\t\n\t\tif(this.page == 1){\n\t\t\tthis.firstBut.disabled = true;\n\t\t\tthis.prevBut.disabled = true;\n\t\t}else {\n\t\t\tthis.firstBut.disabled = false;\n\t\t\tthis.prevBut.disabled = false;\n\t\t}\n\t\t\n\t\tif(this.page == this.max){\n\t\t\tthis.lastBut.disabled = true;\n\t\t\tthis.nextBut.disabled = true;\n\t\t}else {\n\t\t\tthis.lastBut.disabled = false;\n\t\t\tthis.nextBut.disabled = false;\n\t\t}\n\t\t\n\t\tfor(let i = min; i <= max; i++){\n\t\t\tif(i>0 && i <= this.max){\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.footerRedraw();\n\t}\n\t\n\t_generatePageButton(page){\n\t\tvar button = document.createElement(\"button\");\n\t\t\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tif(page == this.page){\n\t\t\tbutton.classList.add(\"active\");\n\t\t}\n\t\t\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\t\n\t\tthis.langBind(\"pagination|page_title\", (value) => {\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\n\t\t});\n\t\t\n\t\tbutton.setAttribute(\"data-page\", page);\n\t\tbutton.textContent = page;\n\t\t\n\t\tbutton.addEventListener(\"click\", (e) => {\n\t\t\tthis.setPage(page);\n\t\t});\n\t\t\n\t\treturn button;\n\t}\n\t\n\t//previous page\n\tpreviousPage(){\n\t\tif(this.page > 1){\n\t\t\tthis.page--;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else {\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//next page\n\tnextPage(){\n\t\tif(this.page < this.max){\n\t\t\tthis.page++;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else {\n\t\t\tif(!this.progressiveLoad){\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\n\t\t\t}\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//return current page number\n\tgetPage(){\n\t\treturn this.page;\n\t}\n\t\n\t//return max page number\n\tgetPageMax(){\n\t\treturn this.max;\n\t}\n\t\n\tgetPageSize(size){\n\t\treturn this.size;\n\t}\n\t\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\t\n\t//return appropriate rows for current page\n\tgetRows(data){\n\t\tvar actualRowPageSize = 0,\n\t\toutput, start, end, actualStartRow;\n\n\t\tvar actualRows = data.filter((row) => {\n\t\t\treturn row.type === \"row\";\n\t\t});\n\t\t\n\t\tif(this.mode == \"local\"){\n\t\t\toutput = [];\n\t\t\t\n\t\t\tthis.setMaxRows(data.length);\n\t\t\t\n\t\t\tif(this.size === true){\n\t\t\t\tstart = 0;\n\t\t\t\tend = data.length;\n\t\t\t}else {\n\t\t\t\tstart = this.size * (this.page - 1);\n\t\t\t\tend = start + parseInt(this.size);\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageButtons();\n\t\t\t\n\t\t\tfor(let i = start; i < end; i++){\n\t\t\t\tlet row = data[i];\n\n\t\t\t\tif(row){\n\t\t\t\t\toutput.push(row);\n\n\t\t\t\t\tif(row.type === \"row\"){\n\t\t\t\t\t\tif(!actualStartRow){\n\t\t\t\t\t\t\tactualStartRow = row;\n\t\t\t\t\t\t}\t\n\n\t\t\t\t\t\tactualRowPageSize++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? (actualRows.indexOf(actualStartRow) + 1) : 0);\n\t\t\t\n\t\t\treturn output;\n\t\t}else {\n\t\t\tthis._setPageButtons();\n\t\t\tthis._setPageCounter(actualRows.length);\n\t\t\t\n\t\t\treturn data.slice(0);\n\t\t}\n\t}\n\t\n\ttrigger(){\n\t\tvar left;\n\t\t\n\t\tswitch(this.mode){\n\t\t\tcase \"local\":\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\n\t\t\t\n\t\t\t\tthis.refreshData();\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\", this.getPage());\n\t\t\t\n\t\t\t\treturn Promise.resolve();\n\t\t\t\n\t\t\tcase \"remote\":\n\t\t\t\tthis.dataChanging = true;\n\t\t\t\treturn this.reloadData(null)\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.dataChanging = false;\n\t\t\t\t\t});\n\t\t\t\n\t\t\tcase \"progressive_load\":\n\t\t\tcase \"progressive_scroll\":\n\t\t\t\treturn this.reloadData(null, true);\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\n\t\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t_parseRemoteData(data){\n\t\tvar margin;\n\t\t\n\t\tif(typeof data.last_page === \"undefined\"){\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\n\t\t}\n\t\t\n\t\tif(data.data){\n\t\t\tthis.max = parseInt(data.last_page) || 1;\n\n\t\t\tthis.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : (data.last_page * this.size - (this.page == data.last_page ? (this.size - data.data.length) : 0));\n\t\t\t\n\t\t\tif(this.progressiveLoad){\n\t\t\t\tswitch(this.mode){\n\t\t\t\t\tcase \"progressive_load\":\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page == 1){\n\t\t\t\t\t\t\tthis.table.rowManager.setData(data.data, false, this.page == 1);\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tthis.table.rowManager.addRows(data.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t}, this.table.options.progressiveLoadDelay);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t\tdata = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.table.rowManager.setData(data, this.page !== 1, this.page == 1);\n\t\t\t\t\t\n\t\t\t\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\n\t\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t}else {\n\t\t\t\t// left = this.table.rowManager.scrollLeft;\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\",  this.getPage());\n\t\t\t\t// this.table.rowManager.scrollHorizontal(left);\n\t\t\t\t// this.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t\t\n\t\t}else {\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n\t\t}\n\t\t\n\t\treturn data.data;\n\t}\n\t\n\t//handle the footer element being redrawn\n\tfooterRedraw(){\n\t\tvar footer = this.table.footerManager.containerElement;\n\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t}else {\n\t\t\tthis.pagesElement.style.display = '';\n\t\t\t\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\t\tthis.pagesElement.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}\n\nPage.moduleName = \"page\";\n\n//load defaults\nPage.pageCounters = defaultPageCounters;\n\n// read persistance information from storage\nvar defaultReaders = {\n\tlocal:function(id, type){\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\treturn data ? JSON.parse(data) : false;\n\t},\n\tcookie:function(id, type){\n\t\tvar cookie = document.cookie,\n\t\tkey = id + \"-\" + type,\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\n\t\tend, data;\n\n\t\t//if cookie exists, decode and load column data into tabulator\n\t\tif(cookiePos > -1){\n\t\t\tcookie = cookie.slice(cookiePos);\n\n\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\tif(end > -1){\n\t\t\t\tcookie = cookie.slice(0, end);\n\t\t\t}\n\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t}\n\n\t\treturn data ? JSON.parse(data) : false;\n\t}\n};\n\n//write persistence information to storage\nvar defaultWriters = {\n\tlocal:function(id, type, data){\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t},\n\tcookie:function(id, type, data){\n\t\tvar expireDate = new Date();\n\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t}\n};\n\nclass Persistence extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = \"\";\n\t\tthis.id = \"\";\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\t\tthis.defWatcherBlock = false;\n\t\tthis.config = {};\n\t\tthis.readFunc = false;\n\t\tthis.writeFunc = false;\n\n\t\tthis.registerTableOption(\"persistence\", false);\n\t\tthis.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\n\t\tthis.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\n\t\tthis.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\n\t\tthis.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\n\t}\n\n\t// Test for whether localStorage is available for use.\n\tlocalStorageTest() {\n\t\tvar  testKey =  \"_tabulator_test\";\n\n\t\ttry {\n\t\t\twindow.localStorage.setItem( testKey, testKey);\n\t\t\twindow.localStorage.removeItem( testKey );\n\t\t\treturn true;\n\t\t} catch(e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//setup parameters\n\tinitialize(){\n\t\tif(this.table.options.persistence){\n\t\t\t//determine persistent layout storage type\n\t\t\tvar mode = this.table.options.persistenceMode,\n\t\t\tid = this.table.options.persistenceID,\n\t\t\tretrievedData;\n\n\t\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\n\n\t\t\tif(this.table.options.persistenceReaderFunc){\n\t\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\n\t\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t\t\t}else {\n\t\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\n\t\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(Persistence.readers[this.mode]){\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.table.options.persistenceWriterFunc){\n\t\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\n\t\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t\t\t}else {\n\t\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\n\t\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(Persistence.writers[this.mode]){\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//set storage tag\n\t\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\n\n\t\t\tthis.config = {\n\t\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\t\t\theaderFilter:this.table.options.persistence === true || this.table.options.persistence.headerFilter,\n\t\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\n\t\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\n\t\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\n\t\t\t};\n\n\t\t\t//load pagination data if needed\n\t\t\tif(this.config.page){\n\t\t\t\tretrievedData = this.retrieveData(\"page\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\n\t\t\t\t\t\tthis.table.options.paginationSize = retrievedData.paginationSize;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof retrievedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\n\t\t\t\t\t\tthis.table.options.paginationInitialPage = retrievedData.paginationInitialPage;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//load group data if needed\n\t\t\tif(this.config.group){\n\t\t\t\tretrievedData = this.retrieveData(\"group\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\n\t\t\t\t\t\tthis.table.options.groupBy = retrievedData.groupBy;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\n\t\t\t\t\t\tthis.table.options.groupStartOpen = retrievedData.groupStartOpen;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\n\t\t\t\t\t\tthis.table.options.groupHeader = retrievedData.groupHeader;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.config.columns){\n\t\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\n\t\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\t\tthis.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\n\t\t\t}\n\n\t\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\n\n\t\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"headerFilter\"));\n\t\t\tthis.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\n\t\t\tthis.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\n\t\t\tthis.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\n\t\t\tthis.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"column-width\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n\t\t}\n\n\t\tthis.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\n\t\tthis.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n\t}\n\n\teventSave(type){\n\t\tif(this.config[type]){\n\t\t\tthis.save(type);\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tvar sorters, filters, headerFilters;\n\n\t\tif(this.config.sort){\n\t\t\tsorters = this.load(\"sort\");\n\n\t\t\tif(!sorters === false){\n\t\t\t\tthis.table.options.initialSort = sorters;\n\t\t\t}\n\t\t}\n\n\t\tif(this.config.filter){\n\t\t\tfilters = this.load(\"filter\");\n\n\t\t\tif(!filters === false){\n\t\t\t\tthis.table.options.initialFilter = filters;\n\t\t\t}\n\t\t}\n\t\tif(this.config.headerFilter){\n\t\t\theaderFilters = this.load(\"headerFilter\");\n\n\t\t\tif(!headerFilters === false){\n\t\t\t\tthis.table.options.initialHeaderFilter = headerFilters;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\n\ttableRedraw(force){\n\t\tif(force && this.config.columns){\n\t\t\tthis.save(\"columns\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tgetColumnLayout(){\n\t\treturn this.parseColumns(this.table.columnManager.getColumns());\n\t}\n\n\tsetColumnLayout(layout){\n\t\tthis.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout));\n\t\treturn true;\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumn(column){\n\t\tvar def, keys;\n\n\t\tif(this.config.columns){\n\t\t\tthis.defWatcherBlock = true;\n\n\t\t\tdef = column.getDefinition();\n\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\t\tkeys.forEach((key)=>{\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\t\tvar value = def[key];\n\n\t\t\t\tif(props){\n\t\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\t\tset: (newValue) => {\n\t\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(props.set){\n\t\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget:() => {\n\t\t\t\t\t\t\tif(props.get){\n\t\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.defWatcherBlock = false;\n\t\t}\n\t}\n\n\t//load saved definitions\n\tload(type, current){\n\t\tvar data = this.retrieveData(type);\n\n\t\tif(current){\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//retrieve data from memory\n\tretrieveData(type){\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n\t}\n\n\t//merge old and new column definitions\n\tmergeDefinition(oldCols, newCols){\n\t\tvar output = [];\n\n\t\tnewCols = newCols || [];\n\n\t\tnewCols.forEach((column, to) => {\n\t\t\tvar from = this._findColumn(oldCols, column),\n\t\t\tkeys;\n\n\t\t\tif(from){\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(from);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t}else {\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\n\t\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(from.columns){\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\n\t\t\t\t}\n\n\t\t\t\toutput.push(from);\n\t\t\t}\n\t\t});\n\n\t\toldCols.forEach((column, i) => {\n\t\t\tvar from = this._findColumn(newCols, column);\n\n\t\t\tif (!from) {\n\t\t\t\tif(output.length>i){\n\t\t\t\t\toutput.splice(i, 0, column);\n\t\t\t\t}else {\n\t\t\t\t\toutput.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//find matching columns\n\t_findColumn(columns, subject){\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\n\n\t\treturn columns.find(function(col){\n\t\t\tswitch(type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\n\t\t\t\tcase \"field\":\n\t\t\t\t\treturn col.field === subject.field;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\treturn col === subject;\n\t\t\t}\n\t\t});\n\t}\n\n\t//save data\n\tsave(type){\n\t\tvar data = {};\n\n\t\tswitch(type){\n\t\t\tcase \"columns\":\n\t\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\n\t\t\t\tbreak;\n\n\t\t\tcase \"filter\":\n\t\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"headerFilter\":\n\t\t\t\tdata = this.table.modules.filter.getHeaderFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"sort\":\n\t\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tdata = this.getGroupConfig();\n\t\t\t\tbreak;\n\n\t\t\tcase \"page\":\n\t\t\t\tdata = this.getPageConfig();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(this.writeFunc){\n\t\t\tthis.writeFunc(this.id, type, data);\n\t\t}\n\n\t}\n\n\t//ensure sorters contain no function data\n\tvalidateSorters(data){\n\t\tdata.forEach(function(item){\n\t\t\titem.column = item.field;\n\t\t\tdelete item.field;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tgetGroupConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.group){\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tgetPageConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.page){\n\t\t\tif(this.config.page === true || this.config.page.size){\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t\t}\n\n\t\t\tif(this.config.page === true || this.config.page.page){\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\n\t//parse columns for data to store\n\tparseColumns(columns){\n\t\tvar definitions = [],\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n\n\t\tcolumns.forEach((column) => {\n\t\t\tvar defStore = {},\n\t\t\tcolDef = column.getDefinition(),\n\t\t\tkeys;\n\n\t\t\tif(column.isGroup){\n\t\t\t\tdefStore.title = colDef.title;\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\n\t\t\t}else {\n\t\t\t\tdefStore.field = column.getField();\n\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(colDef);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t\tkeys.push(\"visible\");\n\t\t\t\t}else {\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tswitch(key){\n\t\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\n\t\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdefinitions.push(defStore);\n\t\t});\n\n\t\treturn definitions;\n\t}\n}\n\nPersistence.moduleName = \"persistence\";\n\nPersistence.moduleInitOrder = -10;\n\n//load defaults\nPersistence.readers = defaultReaders;\nPersistence.writers = defaultWriters;\n\nclass Popup$1 extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"rowContextPopup\", false);\n\t\tthis.registerTableOption(\"rowClickPopup\", false);\n\t\tthis.registerTableOption(\"rowDblClickPopup\", false);\n\t\tthis.registerTableOption(\"groupContextPopup\", false);\n\t\tthis.registerTableOption(\"groupClickPopup\", false);\n\t\tthis.registerTableOption(\"groupDblClickPopup\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextPopup\");\n\t\tthis.registerColumnOption(\"headerClickPopup\");\n\t\tthis.registerColumnOption(\"headerDblClickPopup\");\n\t\tthis.registerColumnOption(\"headerPopup\");\n\t\tthis.registerColumnOption(\"headerPopupIcon\");\n\t\tthis.registerColumnOption(\"contextPopup\");\n\t\tthis.registerColumnOption(\"clickPopup\");\n\t\tthis.registerColumnOption(\"dblClickPopup\");\n\n\t\tthis.registerComponentFunction(\"cell\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"group\", \"popup\", this._componentPopupCall.bind(this));\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\t_componentPopupCall(component, contents, position){\n\t\tthis.loadPopupEvent(contents, null, component, position);\n\t}\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextPopup){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickPopup){\n\t\t\tthis.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\n\t\t}\n\n\t\tif(this.table.options.rowDblClickPopup){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextPopup){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickPopup){\n\t\t\tthis.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\n\t\t}\n\n\t\tif(this.table.options.groupDblClickPopup){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextPopup && !this.columnSubscribers.headerContextPopup){\n\t\t\tthis.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickPopup && !this.columnSubscribers.headerClickPopup){\n\t\t\tthis.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\n\t\t\n\t\t\n\t\t}if(def.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup){\n\t\t\tthis.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerDblClickPopup\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickPopup);\n\t\t}\n\t\t\n\t\tif(def.headerPopup){\n\t\t\tthis.initializeColumnHeaderPopup(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextPopup && !this.columnSubscribers.contextPopup){\n\t\t\tthis.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.clickPopup && !this.columnSubscribers.clickPopup){\n\t\t\tthis.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\n\t\t}\n\n\t\tif(def.dblClickPopup && !this.columnSubscribers.dblClickPopup){\n\t\t\tthis.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, \"dblClickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.dblClickPopup);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderPopup(column){\n\t\tvar icon = column.definition.headerPopupIcon,\n\t\theaderPopupEl;\n\t\t\n\t\theaderPopupEl = document.createElement(\"span\");\n\t\theaderPopupEl.classList.add(\"tabulator-header-popup-button\");\n\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderPopupEl.appendChild(icon);\n\t\t\t}else {\n\t\t\t\theaderPopupEl.innerHTML = icon;\n\t\t\t}\n\t\t}else {\n\t\t\theaderPopupEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderPopupEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadPopupEvent(column.definition.headerPopup, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadPopupTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadPopupEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadPopupTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadPopupEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadPopupEvent(contents, e, component, position){\n\t\tvar renderedCallback;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tcontents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(),  onRendered) : contents;\n\t\t\n\t\tthis.loadPopup(e, component, contents, renderedCallback, position);\n\t}\n\t\n\tloadPopup(e, component, contents, renderedCallback, position){\n\t\tvar touch = !(e instanceof MouseEvent),\n\t\tcontentsEl, popup;\n\t\t\n\t\tif(contents instanceof HTMLElement){\n\t\t\tcontentsEl = contents;\n\t\t}else {\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\tcontentsEl.innerHTML = contents;\n\t\t}\n\t\t\n\t\tcontentsEl.classList.add(\"tabulator-popup\");\n\n\t\tcontentsEl.addEventListener(\"click\", (e) =>{\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\tpopup = this.popup(contentsEl);\n\n\t\tif(typeof renderedCallback === \"function\"){\n\t\t\tpopup.renderCallback(renderedCallback);\n\t\t}\n\n\t\tif(e){\n\t\t\tpopup.show(e);\n\t\t}else {\n\t\t\tpopup.show(component.getElement(), position || \"center\");\n\t\t}\n\n\t\t\n\t\tpopup.hideOnBlur(() => {\n\t\t\tthis.dispatchExternal(\"popupClosed\", component.getComponent());\n\t\t});\n\n\n\n\t\tthis.dispatchExternal(\"popupOpened\", component.getComponent());\n\t}\n}\n\nPopup$1.moduleName = \"popup\";\n\nclass Print extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.element = false;\n\t\tthis.manualBlock = false;\n\t\tthis.beforeprintEventHandler = null;\n\t\tthis.afterprintEventHandler = null;\n\n\t\tthis.registerTableOption(\"printAsHtml\", false); //enable print as html\n\t\tthis.registerTableOption(\"printFormatter\", false); //printing page formatter\n\t\tthis.registerTableOption(\"printHeader\", false); //page header contents\n\t\tthis.registerTableOption(\"printFooter\", false); //page footer contents\n\t\tthis.registerTableOption(\"printStyled\", true); //enable print as html styling\n\t\tthis.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\n\t\tthis.registerTableOption(\"printConfig\", {}); //print config options\n\n\t\tthis.registerColumnOption(\"print\");\n\t\tthis.registerColumnOption(\"titlePrint\");\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\tthis.beforeprintEventHandler = this.replaceTable.bind(this);\n\t\t\tthis.afterprintEventHandler = this.cleanup.bind(this);\n\n\t\t\twindow.addEventListener(\"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.addEventListener(\"afterprint\", this.afterprintEventHandler);\n\t\t\tthis.subscribe(\"table-destroy\", this.destroy.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n\t}\n\n\tdestroy(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\twindow.removeEventListener( \"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.removeEventListener( \"afterprint\", this.afterprintEventHandler );\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\treplaceTable(){\n\t\tif(!this.manualBlock){\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\t\tthis.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\t\tthis.table.element.style.display = \"none\";\n\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t\t}\n\t}\n\n\tcleanup(){\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\t\tif(this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\tthis.table.element.style.display = \"\";\n\t\t}\n\t}\n\n\tprintFullscreen(visible, style, config){\n\t\tvar scrollX = window.scrollX,\n\t\tscrollY = window.scrollY,\n\t\theaderEl = document.createElement(\"div\"),\n\t\tfooterEl = document.createElement(\"div\"),\n\t\ttableEl = this.table.modules.export.generateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\n\t\theaderContent, footerContent;\n\n\t\tthis.manualBlock = true;\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\t\tif(this.table.options.printHeader){\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\t\tif(typeof headerContent == \"string\"){\n\t\t\t\theaderEl.innerHTML = headerContent;\n\t\t\t}else {\n\t\t\t\theaderEl.appendChild(headerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(headerEl);\n\t\t}\n\n\t\tthis.element.appendChild(tableEl);\n\n\t\tif(this.table.options.printFooter){\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\n\t\t\tif(typeof footerContent == \"string\"){\n\t\t\t\tfooterEl.innerHTML = footerContent;\n\t\t\t}else {\n\t\t\t\tfooterEl.appendChild(footerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(footerEl);\n\t\t}\n\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\t\tdocument.body.appendChild(this.element);\n\n\t\tif(this.table.options.printFormatter){\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t\t}\n\n\t\twindow.print();\n\n\t\tthis.cleanup();\n\n\t\twindow.scrollTo(scrollX, scrollY);\n\n\t\tthis.manualBlock = false;\n\t}\n}\n\nPrint.moduleName = \"print\";\n\nclass ReactiveData extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.data = false;\n\t\tthis.blocked = false; //block reactivity while performing update\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\t\tthis.currentVersion = 0;\n\t\t\n\t\tthis.registerTableOption(\"reactiveData\", false); //enable data reactivity\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.reactiveData){\n\t\t\tthis.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\n\t\t\tthis.subscribe(\"data-processing\", this.watchData.bind(this));\n\t\t\tthis.subscribe(\"table-destroy\", this.unwatchData.bind(this));\n\t\t}\n\t}\n\t\n\twatchData(data){\n\t\tvar self = this,\n\t\tversion;\n\t\t\n\t\tthis.currentVersion ++;\n\t\t\n\t\tversion = this.currentVersion;\n\t\t\n\t\tthis.unwatchData();\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\t//override array push function\n\t\tthis.origFuncs.push = data.push;\n\t\t\n\t\tObject.defineProperty(this.data, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\t\n\t\t\t\t\tself.block(\"data-push\");\n\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.push.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-push\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array unshift function\n\t\tthis.origFuncs.unshift = data.unshift;\n\t\t\n\t\tObject.defineProperty(this.data, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-unshift\");\n\t\t\t\t\t\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.unshift.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-unshift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array shift function\n\t\tthis.origFuncs.shift = data.shift;\n\t\t\n\t\tObject.defineProperty(this.data, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-shift\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.shift.call(data);\n\n\t\t\t\t\tself.unblock(\"data-shift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array pop function\n\t\tthis.origFuncs.pop = data.pop;\n\t\t\n\t\tObject.defineProperty(this.data, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-pop\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.pop.call(data);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-pop\");\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array splice function\n\t\tthis.origFuncs.splice = data.splice;\n\t\t\n\t\tObject.defineProperty(this.data, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t\tend = args[1],\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\n\t\t\t\tstartRow, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-splice\");\n\t\t\t\t\t//add new rows\n\t\t\t\t\tif(newRows){\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(startRow){\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//delete removed rows\n\t\t\t\t\tif(end !== 0){\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\t\t\t\t\t\t\n\t\t\t\t\t\toldRows.forEach((rowData, i) => {\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(newRows || end !== 0){\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.splice.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-splice\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result ;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchData(){\n\t\tif(this.data !== false){\n\t\t\tfor(var key in this.origFuncs){\n\t\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable:true,\n\t\t\t\t\twritable:true,\n\t\t\t\t\tvalue: this.origFuncs.key,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\twatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tthis.watchKey(row, data, key);\n\t\t}\n\t\t\n\t\tif(this.table.options.dataTree){\n\t\t\tthis.watchTreeChildren(row);\n\t\t}\n\t}\n\t\n\twatchTreeChildren (row){\n\t\tvar self = this,\n\t\tchildField = row.getData()[this.table.options.dataTreeChildField],\n\t\torigFuncs = {};\n\t\t\n\t\tif(childField){\n\t\t\t\n\t\t\torigFuncs.push = childField.push;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"push\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-push\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-push\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.unshift = childField.unshift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"unshift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-unshift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-unshift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.shift = childField.shift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"shift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-shift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-shift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.pop = childField.pop;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"pop\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-pop\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-pop\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.splice = childField.splice;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"splice\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-splice\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-splice\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\trebuildTree(row){\n\t\tthis.table.modules.dataTree.initializeRow(row);\n\t\tthis.table.modules.dataTree.layoutRow(row);\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t}\n\t\n\twatchKey(row, data, key){\n\t\tvar self = this,\n\t\tprops = Object.getOwnPropertyDescriptor(data, key),\n\t\tvalue = data[key],\n\t\tversion = this.currentVersion;\n\t\t\n\t\tObject.defineProperty(data, key, {\n\t\t\tset: (newValue) => {\n\t\t\t\tvalue = newValue;\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"key\");\n\t\t\t\t\t\n\t\t\t\t\tvar update = {};\n\t\t\t\t\tupdate[key] = newValue;\n\t\t\t\t\trow.updateData(update);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"key\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(props.set){\n\t\t\t\t\tprops.set(newValue);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget:() => {\n\t\t\t\t\n\t\t\t\tif(props.get){\n\t\t\t\t\tprops.get();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tObject.defineProperty(data, key, {\n\t\t\t\tvalue:data[key],\n\t\t\t});\n\t\t}\n\t}\n\t\n\tblock(key){\n\t\tif(!this.blocked){\n\t\t\tthis.blocked = key;\n\t\t}\n\t}\n\t\n\tunblock(key){\n\t\tif(this.blocked === key){\n\t\t\tthis.blocked = false;\n\t\t}\n\t}\n}\n\nReactiveData.moduleName = \"reactiveData\";\n\nclass ResizeColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.startColumn = false;\n\t\tthis.startX = false;\n\t\tthis.startWidth = false;\n\t\tthis.latestX = false;\n\t\tthis.handle = null;\n\t\tthis.initialNextColumn = null;\n\t\tthis.nextColumn = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.registerColumnOption(\"resizable\", true);\n\t\tthis.registerTableOption(\"resizableColumnFit\", false);\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n\t}\n\t\n\tinitializeEventWatchers(){\n\t\tif(!this.initialized){\n\t\t\t\n\t\t\tthis.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"cell-height\", this.resizeHandle.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\n\t\t\tthis.subscribe(\"column-width\", this.columnWidthUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\n\t\t\tthis.subscribe(\"column-height\", this.resizeHandle.bind(this));\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t\n\tlayoutCellHandles(cell){\n\t\tif(cell.row.type === \"row\"){\n\t\t\tthis.deInitializeComponent(cell);\n\t\t\tthis.initializeColumn(\"cell\", cell, cell.column, cell.element);\n\t\t}\n\t}\n\t\n\tlayoutColumnHeader(column){\n\t\tif(column.definition.resizable){\n\t\t\tthis.initializeEventWatchers();\n\t\t\tthis.deInitializeComponent(column);\n\t\t\tthis.initializeColumn(\"header\", column, column, column.element);\n\t\t}\n\t}\n\t\n\tcolumnLayoutUpdated(column){\n\t\tvar prev = column.prevColumn();\n\t\t\n\t\tthis.reinitializeColumn(column);\n\t\t\n\t\tif(prev){\n\t\t\tthis.reinitializeColumn(prev);\n\t\t}\n\t}\n\t\n\tcolumnWidthUpdated(column){\n\t\tif(column.modules.frozen){\n\t\t\tif(this.table.modules.frozenColumns.leftColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}else if(this.table.modules.frozenColumns.rightColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfrozenColumnOffset(column){\n\t\tvar offset = false;\n\n\t\tif(column.modules.frozen){\n\t\t\toffset = column.modules.frozen.marginValue; \n\n\t\t\tif(column.modules.frozen.position === \"left\"){\n\t\t\t\toffset += column.getWidth() - 3;\n\t\t\t}else {\n\t\t\t\tif(offset){\n\t\t\t\t\toffset -= 3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn offset !== false ? offset + \"px\" : false;\n\t}\n\t\n\treinitializeColumn(column){\n\t\tvar frozenOffset = this.frozenColumnOffset(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(cell.modules.resize && cell.modules.resize.handleEl){\n\t\t\t\tif(frozenOffset){\n\t\t\t\t\tcell.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t\t\tcell.modules.resize.handleEl.style[\"z-index\"] = 11;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.element.after(cell.modules.resize.handleEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(column.modules.resize && column.modules.resize.handleEl){\n\t\t\tif(frozenOffset){\n\t\t\t\tcolumn.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.element.after(column.modules.resize.handleEl);\n\t\t}\n\t}\n\t\n\tinitializeColumn(type, component, column, element){\n\t\tvar self = this,\n\t\tvariableHeight = false,\n\t\tmode = column.definition.resizable,\n\t\tconfig = {},\n\t\tnearestColumn = column.getLastColumn();\n\t\t\n\t\t//set column resize mode\n\t\tif(type === \"header\"){\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\t\tconfig = {variableHeight:variableHeight};\n\t\t}\n\t\t\n\t\tif((mode === true || mode == type) && this._checkResizability(nearestColumn)){\n\t\t\t\n\t\t\tvar handle = document.createElement('span');\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\n\t\t\t\n\t\t\thandle.addEventListener(\"click\", function(e){\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\tvar handleDown = function(e){\n\t\t\t\tself.startColumn = column;\n\t\t\t\tself.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\n\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t};\n\t\t\t\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\t\t\t\n\t\t\t//resize column on  double click\n\t\t\thandle.addEventListener(\"dblclick\", (e) => {\n\t\t\t\tvar oldWidth = nearestColumn.getWidth();\n\t\t\t\t\n\t\t\t\te.stopPropagation();\n\t\t\t\tnearestColumn.reinitializeWidth(true);\n\t\t\t\t\n\t\t\t\tif(oldWidth !== nearestColumn.getWidth()){\n\t\t\t\t\tself.dispatch(\"column-resized\", nearestColumn);\n\t\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", nearestColumn.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(column.modules.frozen){\n\t\t\t\thandle.style.position = \"sticky\";\n\t\t\t\thandle.style[column.modules.frozen.position] = this.frozenColumnOffset(column);\n\t\t\t}\n\t\t\t\n\t\t\tconfig.handleEl = handle;\n\t\t\t\n\t\t\tif(element.parentNode && column.visible){\n\t\t\t\telement.after(handle);\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tcomponent.modules.resize = config;\n\t}\n\t\n\tdeInitializeColumn(column){\n\t\tthis.deInitializeComponent(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tthis.deInitializeComponent(cell);\n\t\t});\n\t}\n\t\n\tdeInitializeComponent(component){\n\t\tvar handleEl;\n\t\t\n\t\tif(component.modules.resize){\n\t\t\thandleEl = component.modules.resize.handleEl;\n\t\t\t\n\t\t\tif(handleEl && handleEl.parentElement){\n\t\t\t\thandleEl.parentElement.removeChild(handleEl);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tresizeHandle(component, height){\n\t\tif(component.modules.resize && component.modules.resize.handleEl){\n\t\t\tcomponent.modules.resize.handleEl.style.height = height;\n\t\t}\n\t}\n\t\n\t_checkResizability(column){\n\t\treturn column.definition.resizable;\n\t}\n\t\n\t_mouseDown(e, column, handle){\n\t\tvar self = this;\n\t\t\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tfunction mouseMove(e){\n\t\t\tvar x = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX,\n\t\t\tstartDiff = x - self.startX,\n\t\t\tmoveDiff = x - self.latestX,\n\t\t\tblockedBefore, blockedAfter;\n\t\t\t\n\t\t\tself.latestX = x;\n\t\t\t\n\t\t\tif(self.table.rtl){\n\t\t\t\tstartDiff = -startDiff;\n\t\t\t\tmoveDiff = -moveDiff;\n\t\t\t}\n\t\t\t\n\t\t\tblockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\n\t\t\t\n\t\t\tcolumn.setWidth(self.startWidth + startDiff);\n\t\t\t\n\t\t\tblockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\n\t\t\t\n\t\t\tif(moveDiff < 0){\n\t\t\t\tself.nextColumn = self.initialNextColumn;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.options.resizableColumnFit && self.nextColumn && !(blockedBefore && blockedAfter)){\n\t\t\t\tlet colWidth = self.nextColumn.getWidth();\n\t\t\t\t\n\t\t\t\tif(moveDiff > 0){\n\t\t\t\t\tif(colWidth <= self.nextColumn.minWidth){\n\t\t\t\t\t\tself.nextColumn = self.nextColumn.nextColumn();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(self.nextColumn){\n\t\t\t\t\tself.nextColumn.setWidth(self.nextColumn.getWidth() - moveDiff);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself.table.columnManager.rerenderColumns(true);\n\t\t\t\n\t\t\tif(!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction mouseUp(e){\n\t\t\t\n\t\t\t//block editor from taking action while resizing is taking place\n\t\t\tif(self.startColumn.modules.edit){\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\t\t\t\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(self.startWidth !== column.getWidth()){\n\t\t\t\tself.table.columnManager.verticalAlignHeaders();\n\n\t\t\t\tself.dispatch(\"column-resized\", column);\n\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", column.getComponent());\n\t\t\t}\n\t\t}\n\t\t\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\t\t\n\t\t//block editor from taking action while resizing is taking place\n\t\tif(self.startColumn.modules.edit){\n\t\t\tself.startColumn.modules.edit.blocked = true;\n\t\t}\n\t\t\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n\t\tself.latestX = self.startX;\n\t\tself.startWidth = column.getWidth();\n\t\t\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}\n\nResizeColumns.moduleName = \"resizeColumns\";\n\nclass ResizeRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.startColumn = false;\n\t\tthis.startY = false;\n\t\tthis.startHeight = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\n\t\tthis.registerTableOption(\"resizableRows\", false); //resizable rows\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.resizableRows){\n\t\t\tthis.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\trowEl = row.getElement();\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-row-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function(e){\n\t\t\tself.startRow = row;\n\t\t\tself._mouseDown(e, row, handle);\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\n\t\tprevHandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown =  function(e){\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\t\tif(prevRow){\n\t\t\t\tself.startRow = prevRow;\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\n\n\t\trowEl.appendChild(handle);\n\t\trowEl.appendChild(prevHandle);\n\t}\n\n\t_mouseDown(e, row, handle){\n\t\tvar self = this;\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n\t\t}\n\n\t\tfunction mouseUp(e){\n\n\t\t\t// //block editor from taking action while resizing is taking place\n\t\t\t// if(self.startColumn.modules.edit){\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t\t// }\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tself.dispatchExternal(\"rowResized\", row.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = true;\n\t\t// }\n\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\t\tself.startHeight = row.getHeight();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}\n\nResizeRows.moduleName = \"resizeRows\";\n\nclass ResizeTable extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.binding = false;\n\t\tthis.visibilityObserver = false;\n\t\tthis.resizeObserver = false;\n\t\tthis.containerObserver = false;\n\t\t\n\t\tthis.tableHeight = 0;\n\t\tthis.tableWidth = 0;\n\t\tthis.containerHeight = 0;\n\t\tthis.containerWidth = 0;\n\t\t\n\t\tthis.autoResize = false;\n\t\t\n\t\tthis.visible = false;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.initialRedraw = false;\n\t\t\n\t\tthis.registerTableOption(\"autoResize\", true); //auto resize table\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.autoResize){\n\t\t\tvar table = this.table,\n\t\t\ttableStyle;\n\t\t\t\n\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\n\t\t\tif(table.element.parentNode){\n\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof IntersectionObserver !== \"undefined\" && typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\n\t\t\t\t\n\t\t\t\tthis.initializeVisibilityObserver();\n\t\t\t\t\n\t\t\t\tthis.autoResize = true;\n\t\t\t\t\n\t\t\t\tthis.resizeObserver = new ResizeObserver((entry) => {\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\n\t\t\t\t\t\t\tthis.tableHeight = nodeHeight;\n\t\t\t\t\t\t\tthis.tableWidth = nodeWidth;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(table.element.parentNode){\n\t\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.resizeObserver.observe(table.element);\n\t\t\t\t\n\t\t\t\ttableStyle = window.getComputedStyle(table.element);\n\t\t\t\t\n\t\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\n\t\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\n\t\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\n\t\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.subscribe(\"table-resize\", this.tableResized.bind(this));\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tthis.binding = function(){\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && !table.modules.edit.currentCell)){\n\t\t\t\t\t\ttable.columnManager.rerenderColumns(true);\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\twindow.addEventListener(\"resize\", this.binding);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeVisibilityObserver(){\n\t\tthis.visibilityObserver = new IntersectionObserver((entries) => {\n\t\t\tthis.visible = entries[0].isIntersecting;\n\t\t\t\n\t\t\tif(!this.initialized){\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.initialRedraw = !this.visible;\n\t\t\t}else {\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.redrawTable(this.initialRedraw);\n\t\t\t\t\tthis.initialRedraw = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.visibilityObserver.observe(this.table.element);\n\t}\n\t\n\tredrawTable(force){\n\t\tif(this.initialized && this.visible){\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\t\t\tthis.table.redraw(force);\n\t\t}\n\t}\n\t\n\ttableResized(){\n\t\tthis.table.rowManager.redraw();\n\t}\n\t\n\tclearBindings(){\n\t\tif(this.binding){\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\n\t\t}\n\t\t\n\t\tif(this.resizeObserver){\n\t\t\tthis.resizeObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.visibilityObserver){\n\t\t\tthis.visibilityObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.containerObserver){\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t\t}\n\t}\n}\n\nResizeTable.moduleName = \"resizeTable\";\n\nclass ResponsiveLayout extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.columns = [];\n\t\tthis.hiddenColumns = [];\n\t\tthis.mode = \"\";\n\t\tthis.index = 0;\n\t\tthis.collapseFormatter = [];\n\t\tthis.collapseStartOpen = true;\n\t\tthis.collapseHandleColumn = false;\n\n\t\tthis.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\n\n\t\tthis.registerColumnOption(\"responsive\");\n\t}\n\n\t//generate responsive columns list\n\tinitialize(){\n\t\tif(this.table.options.responsiveLayout){\n\t\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\n\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\"){\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this));\n\t\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\t\tthis.subscribe(\"row-layout\", this.layoutRow.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\ttableRedraw(force){\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1){\n\t\t\tif(!force){\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeResponsivity(){\n\t\tvar columns = [];\n\n\t\tthis.mode = this.table.options.responsiveLayout;\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\t\tthis.hiddenColumns = [];\n\n\t\t//determine level of responsivity for each column\n\t\tthis.table.columnManager.columnsByIndex.forEach((column, i) => {\n\t\t\tif(column.modules.responsive){\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\n\t\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\t\tcolumns.push(column);\n\n\t\t\t\t\tif(!column.visible && this.mode === \"collapse\"){\n\t\t\t\t\t\tthis.hiddenColumns.push(column);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//sort list by responsivity\n\t\tcolumns = columns.reverse();\n\t\tcolumns = columns.sort((a, b) => {\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\n\t\t});\n\n\t\tthis.columns = columns;\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.generateCollapsedContent();\n\t\t}\n\n\t\t//assign collapse column\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\n\t\t\t\tthis.collapseHandleColumn = col;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(this.collapseHandleColumn){\n\t\t\tif(this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}else {\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//define layout information\n\tinitializeColumn(column){\n\t\tvar def = column.getDefinition();\n\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\n\t}\n\n\tinitializeRow(row){\n\t\tvar el;\n\n\t\tif(row.type !== \"calc\"){\n\t\t\tel = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\t\trow.modules.responsiveLayout = {\n\t\t\t\telement:el,\n\t\t\t\topen:this.collapseStartOpen,\n\t\t\t};\n\n\t\t\tif(!this.collapseStartOpen){\n\t\t\t\tel.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tlayoutRow(row){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t}\n\t}\n\n\t//update column visibility\n\tupdateColumnVisibility(column, responsiveToggle){\n\t\tif(!responsiveToggle && column.modules.responsive){\n\t\t\tcolumn.modules.responsive.visible = column.visible;\n\t\t\tthis.initializeResponsivity();\n\t\t}\n\t}\n\n\thideColumn(column){\n\t\tvar colCount = this.hiddenColumns.length;\n\n\t\tcolumn.hide(false, true);\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.hiddenColumns.unshift(column);\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !colCount){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tshowColumn(column){\n\t\tvar index;\n\n\t\tcolumn.show(false, true);\n\t\t//set column width to prevent calculation loops on uninitialized columns\n\t\tcolumn.setWidth(column.getWidth());\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//redraw columns to fit space\n\tupdate(){\n\t\tvar working = true;\n\n\t\twhile(working){\n\n\t\t\tlet width = this.table.modules.layout.getMode() == \"fitColumns\" ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth();\n\n\t\t\tlet diff = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - width;\n\n\t\t\tif(diff < 0){\n\t\t\t\t//table is too wide\n\t\t\t\tlet column = this.columns[this.index];\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.hideColumn(column);\n\t\t\t\t\tthis.index ++;\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else {\n\n\t\t\t\t//table has spare space\n\t\t\t\tlet column = this.columns[this.index -1];\n\n\t\t\t\tif(column){\n\t\t\t\t\tif(diff > 0){\n\t\t\t\t\t\tif(diff >= column.getWidth()){\n\t\t\t\t\t\t\tthis.showColumn(column);\n\t\t\t\t\t\t\tthis.index --;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tworking = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!this.table.rowManager.activeRowsCount){\n\t\t\t\tthis.table.rowManager.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedContent(){\n\t\tvar rows = this.table.rowManager.getDisplayRows();\n\n\t\trows.forEach((row) => {\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t});\n\t}\n\n\tgenerateCollapsedRowContent(row){\n\t\tvar el, contents;\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\tel = row.modules.responsiveLayout.element;\n\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\n\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\t\tif(contents){\n\t\t\t\tel.appendChild(contents);\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedRowData(row){\n\t\tvar data = row.getData(),\n\t\toutput = [],\n\t\tmockCellComponent;\n\n\t\tthis.hiddenColumns.forEach((column) => {\n\t\t\tvar value = column.getFieldValue(data);\n\n\t\t\tif(column.definition.title && column.field){\n\t\t\t\tif(column.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters){\n\n\t\t\t\t\tmockCellComponent = {\n\t\t\t\t\t\tvalue:false,\n\t\t\t\t\t\tdata:{},\n\t\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction onRendered(callback){\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(this.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tformatCollapsedData(data){\n\t\tvar list = document.createElement(\"table\");\n\n\t\tdata.forEach(function(item){\n\t\t\tvar row = document.createElement(\"tr\");\n\t\t\tvar titleData = document.createElement(\"td\");\n\t\t\tvar valueData = document.createElement(\"td\");\n\t\t\tvar node_content;\n\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\n\t\t\ttitleData.appendChild(titleHighlight);\n\t\t\tthis.langBind(\"columns|\" + item.field, function(text){\n\t\t\t\ttitleHighlight.innerHTML = text || item.title;\n\t\t\t});\n\n\t\t\tif(item.value instanceof Node){\n\t\t\t\tnode_content = document.createElement(\"div\");\n\t\t\t\tnode_content.appendChild(item.value);\n\t\t\t\tvalueData.appendChild(node_content);\n\t\t\t}else {\n\t\t\t\tvalueData.innerHTML = item.value;\n\t\t\t}\n\n\t\t\trow.appendChild(titleData);\n\t\t\trow.appendChild(valueData);\n\t\t\tlist.appendChild(row);\n\t\t}, this);\n\n\t\treturn Object.keys(data).length ? list : \"\";\n\t}\n}\n\nResponsiveLayout.moduleName = \"responsiveLayout\";\n\nclass SelectRow extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = false; //flag selecting in progress\n\t\tthis.lastClickedRow = false; //last clicked row\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\t\tthis.selectedRows = []; //hold selected rows\n\t\tthis.headerCheckboxElement = null; // hold header select element\n\t\t\n\t\tthis.registerTableOption(\"selectable\", \"highlight\"); //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRangeMode\", \"drag\");  //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\n\t\tthis.registerTableOption(\"selectablePersistence\", true); // maintain selection when table view is updated\n\t\tthis.registerTableOption(\"selectableCheck\", function(data, row){return true;}); //check whether row is selectable\n\t\t\n\t\tthis.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\n\t\tthis.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\n\t\tthis.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.selectable !== false){\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\n\t\t\tthis.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.selectable && !this.table.options.selectablePersistence){\n\t\t\t\tthis.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowRetrieve(type, prevValue){\n\t\treturn type === \"selected\" ? this.selectedRows : prevValue;\n\t}\n\t\n\trowDeleted(row){\n\t\tthis._deselectRow(row, true);\n\t}\n\t\n\tclearSelectionData(silent){\n\t\tvar prevSelected = this.selectedRows.length;\n\n\t\tthis.selecting = false;\n\t\tthis.lastClickedRow = false;\n\t\tthis.selectPrev = [];\n\t\tthis.selectedRows = [];\n\t\t\n\t\tif(prevSelected && silent !== true){\n\t\t\tthis._rowSelectionChanged();\n\t\t}\n\t}\n\t\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\telement = row.getElement();\n\t\t\n\t\t// trigger end of row selection\n\t\tvar endSelect = function(){\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tself.selecting = false;\n\t\t\t}, 50);\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t\t};\n\t\t\n\t\trow.modules.select = {selected:false};\n\t\t\n\t\t//set row selection class\n\t\tif(self.checkRowSelectability(row)){\n\t\t\telement.classList.add(\"tabulator-selectable\");\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\n\t\t\t\n\t\t\tif(self.table.options.selectable && self.table.options.selectable != \"highlight\"){\n\t\t\t\tif(self.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\telement.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\n\t\t\t\t}else {\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!self.selecting){\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\t\t\tif(e.shiftKey){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selecting = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selectPrev = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}else {\n\t\t\telement.classList.add(\"tabulator-unselectable\");\n\t\t\telement.classList.remove(\"tabulator-selectable\");\n\t\t}\n\t}\n\t\n\thandleComplexRowClick(row, e){\n\t\tif(e.shiftKey){\n\t\t\tthis.table._clearSelection();\n\t\t\tthis.lastClickedRow = this.lastClickedRow || row;\n\t\t\t\n\t\t\tvar lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\n\t\t\tvar rowIdx = this.table.rowManager.getDisplayRowIndex(row);\n\t\t\t\n\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\n\t\t\tvar rows = this.table.rowManager.getDisplayRows().slice(0);\n\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\t\t\t\n\t\t\tif(e.ctrlKey || e.metaKey){\n\t\t\t\ttoggledRows.forEach((toggledRow)=>{\n\t\t\t\t\tif(toggledRow !== this.lastClickedRow){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.options.selectable !== true && !this.isRowSelected(row)){\n\t\t\t\t\t\t\tif(this.selectedRows.length < this.table.options.selectable){\n\t\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.lastClickedRow = row;\n\t\t\t}else {\n\t\t\t\tthis.deselectRows(undefined, true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.selectable !== true){\n\t\t\t\t\tif(toggledRows.length > this.table.options.selectable){\n\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, this.table.options.selectable);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectRows(toggledRows);\n\t\t\t}\n\t\t\tthis.table._clearSelection();\n\t\t}\n\t\telse if(e.ctrlKey || e.metaKey){\n\t\t\tthis.toggleRow(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}else {\n\t\t\tthis.deselectRows(undefined, true);\n\t\t\tthis.selectRows(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}\n\t}\n\n\tcheckRowSelectability(row){\n\t\tif(row && row.type === \"row\"){\n\t\t\treturn this.table.options.selectableCheck.call(this.table, row.getComponent());\n\t\t}\n\n\t\treturn false;\n\t}\n\t\n\t//toggle row selection\n\ttoggleRow(row){\n\t\tif(this.checkRowSelectability(row)){\n\t\t\tif(row.modules.select && row.modules.select.selected){\n\t\t\t\tthis._deselectRow(row);\n\t\t\t}else {\n\t\t\t\tthis._selectRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//select a number of rows\n\tselectRows(rows){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = this.table.rowManager.rows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._selectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(false, changes);\n\t\t\t}\n\t\t}else {\n\t\t\tif(rowMatch){\n\t\t\t\tthis._selectRow(rowMatch, false, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//select an individual row\n\t_selectRow(rowInfo, silent, force){\n\t\t//handle max row count\n\t\tif(!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force){\n\t\t\tif(this.selectedRows.length >= this.table.options.selectable){\n\t\t\t\tif(this.table.options.selectableRollingSelection){\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t\t}else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\n\t\t\n\t\tif(row){\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = true;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectedRows.push(row);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowSelected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tthis._rowSelectionChanged(silent, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else {\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisRowSelected(row){\n\t\treturn this.selectedRows.indexOf(row) !== -1;\n\t}\n\t\n\t//deselect a number of rows\n\tdeselectRows(rows, silent){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = Object.assign([], this.selectedRows);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._deselectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(silent, [], changes);\n\t\t\t}\n\t\t}else {\n\t\t\tif(rowMatch){\n\t\t\t\tthis._deselectRow(rowMatch, silent, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//deselect an individual row\n\t_deselectRow(rowInfo, silent){\n\t\tvar self = this,\n\t\trow = self.table.rowManager.findRow(rowInfo),\n\t\tindex, element;\n\t\t\n\t\tif(row){\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\n\t\t\t\treturn selectedRow == row;\n\t\t\t});\n\t\t\t\n\t\t\tif(index > -1){\n\n\t\t\t\telement = row.getElement();\n\t\t\t\t\n\t\t\t\tif(element){\n\t\t\t\t\telement.classList.remove(\"tabulator-selected\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = false;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t\t}\n\t\t\t\tself.selectedRows.splice(index, 1);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowDeselected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tself._rowSelectionChanged(silent, undefined, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else {\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetSelectedData(){\n\t\tvar data = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetSelectedRows(){\n\t\tvar rows = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\trows.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t_rowSelectionChanged(silent, selected = [], deselected = []){\n\t\tif(this.headerCheckboxElement){\n\t\t\tif(this.selectedRows.length === 0){\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\n\t\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else {\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(!silent){\n\t\t\tif(!Array.isArray(selected)){\n\t\t\t\tselected = [selected];\n\t\t\t}\n\n\t\t\tselected = selected.map(row => row.getComponent());\n\n\t\t\tif(!Array.isArray(deselected)){\n\t\t\t\tdeselected = [deselected];\n\t\t\t}\n\n\t\t\tdeselected = deselected.map(row => row.getComponent());\n\n\t\t\tthis.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows(), selected, deselected);\n\t\t}\n\t}\n\t\n\tregisterRowSelectCheckbox (row, element) {\n\t\tif(!row._row.modules.select){\n\t\t\trow._row.modules.select = {};\n\t\t}\n\t\t\n\t\trow._row.modules.select.checkboxEl = element;\n\t}\n\t\n\tregisterHeaderSelectCheckbox (element) {\n\t\tthis.headerCheckboxElement = element;\n\t}\n\t\n\tchildRowSelection(row, select){\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true);\n\t\t\n\t\tif(select){\n\t\t\tfor(let child of children){\n\t\t\t\tthis._selectRow(child, true);\n\t\t\t}\n\t\t}else {\n\t\t\tfor(let child of children){\n\t\t\t\tthis._deselectRow(child, true);\n\t\t\t}\n\t\t}\n\t}\n}\n\nSelectRow.moduleName = \"selectRow\";\n\n//sort numbers\nfunction number$1(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar decimal = params.decimalSeparator;\n\tvar thousand = params.thousandSeparator;\n\tvar emptyAlign = 0;\n\n\ta = String(a);\n\tb = String(b);\n\n\tif(thousand){\n\t\ta = a.split(thousand).join(\"\");\n\t\tb = b.split(thousand).join(\"\");\n\t}\n\n\tif(decimal){\n\t\ta = a.split(decimal).join(\".\");\n\t\tb = b.split(decimal).join(\".\");\n\t}\n\n\ta = parseFloat(a);\n\tb = parseFloat(b);\n\n\t//handle non numeric values\n\tif(isNaN(a)){\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\n\t}else if(isNaN(b)){\n\t\temptyAlign =  1;\n\t}else {\n\t\t//compare valid values\n\t\treturn a - b;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}\n\n//sort strings\nfunction string(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\tvar locale;\n\n\t//handle empty values\n\tif(!a){\n\t\temptyAlign =  !b ? 0 : -1;\n\t}else if(!b){\n\t\temptyAlign =  1;\n\t}else {\n\t\t//compare valid values\n\t\tswitch(typeof params.locale){\n\t\t\tcase \"boolean\":\n\t\t\t\tif(params.locale){\n\t\t\t\t\tlocale = this.langLocale();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"string\":\n\t\t\t\tlocale = params.locale;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}\n\n//sort datetime\nfunction datetime$2(a, b, aRow, bRow, column, dir, params){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar format = params.format || \"dd/MM/yyyy HH:mm:ss\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tif(typeof DT != \"undefined\"){\n\t\tif(!DT.isDateTime(a)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\ta = DT.fromISO(String(a));\n\t\t\t}else {\n\t\t\t\ta = DT.fromFormat(String(a), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!DT.isDateTime(b)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\tb = DT.fromISO(String(b));\n\t\t\t}else {\n\t\t\t\tb = DT.fromFormat(String(b), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!a.isValid){\n\t\t\temptyAlign = !b.isValid ? 0 : -1;\n\t\t}else if(!b.isValid){\n\t\t\temptyAlign =  1;\n\t\t}else {\n\t\t\t//compare valid values\n\t\t\treturn a - b;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\n\t}else {\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n\t}\n}\n\n//sort date\nfunction date$1(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"dd/MM/yyyy\";\n\t}\n\n\treturn datetime$2.call(this, a, b, aRow, bRow, column, dir, params);\n}\n\n//sort times\nfunction time$1(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"HH:mm\";\n\t}\n\n\treturn datetime$2.call(this, a, b, aRow, bRow, column, dir, params);\n}\n\n//sort booleans\nfunction boolean(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\treturn el1 - el2;\n}\n\n//sort if element contains any data\nfunction array(a, b, aRow, bRow, column, dir, params){\n\tvar type = params.type || \"length\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tfunction calc(value){\n\t\tvar result;\n\n\t\tswitch(type){\n\t\t\tcase \"length\":\n\t\t\t\tresult = value.length;\n\t\t\t\tbreak;\n\n\t\t\tcase \"sum\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"max\":\n\t\t\t\tresult = Math.max.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"min\":\n\t\t\t\tresult = Math.min.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"avg\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t}) / value.length;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t//handle non array values\n\tif(!Array.isArray(a)){\n\t\temptyAlign = !Array.isArray(b) ? 0 : -1;\n\t}else if(!Array.isArray(b)){\n\t\temptyAlign = 1;\n\t}else {\n\t\treturn calc(b) - calc(a);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}\n\n//sort if element contains any data\nfunction exists(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\treturn el1 - el2;\n}\n\n//sort alpha numeric strings\nfunction alphanum(as, bs, aRow, bRow, column, dir, params){\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\n\t//handle empty values\n\tif(!as && as!== 0){\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t}else if(!bs && bs!== 0){\n\t\temptyAlign =  1;\n\t}else {\n\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\ta = String(as).toLowerCase();\n\t\tb = String(bs).toLowerCase();\n\t\tif(a === b) return 0;\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\ta = a.match(rx);\n\t\tb = b.match(rx);\n\t\tL = a.length > b.length ? b.length : a.length;\n\t\twhile(i < L){\n\t\t\ta1= a[i];\n\t\t\tb1= b[i++];\n\t\t\tif(a1 !== b1){\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\treturn a1 - b1;\n\t\t\t\t}\n\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t}\n\t\t}\n\n\t\treturn a.length > b.length;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}\n\nvar defaultSorters = {\n\tnumber:number$1,\n\tstring:string,\n\tdate:date$1,\n\ttime:time$1,\n\tdatetime:datetime$2,\n\tboolean:boolean,\n\tarray:array,\n\texists:exists,\n\talphanum:alphanum\n};\n\nclass Sort extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.sortList = []; //holder current sort\n\t\tthis.changed = false; //has the sort changed since last render\n\n\t\tthis.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\n\n\t\tthis.registerTableOption(\"initialSort\", false); //initial sorting criteria\n\t\tthis.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\n\t\tthis.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\n\t\tthis.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\n\t\tthis.registerTableOption(\"headerSortClickElement\", \"header\"); //element which triggers sort when clicked\n\n\t\tthis.registerColumnOption(\"sorter\");\n\t\tthis.registerColumnOption(\"sorterParams\");\n\n\t\tthis.registerColumnOption(\"headerSort\", true);\n\t\tthis.registerColumnOption(\"headerSortStartingDir\");\n\t\tthis.registerColumnOption(\"headerSortTristate\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.registerDataHandler(this.sort.bind(this), 20);\n\n\t\tthis.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\n\t\tthis.registerTableFunction(\"getSorters\", this.getSort.bind(this));\n\t\tthis.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\n\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialSort){\n\t\t\tthis.setSort(this.table.options.initialSort);\n\t\t}\n\t}\n\n\tremoteSortParams(data, config, silent, params){\n\t\tvar sorters = this.getSort();\n\n\t\tsorters.forEach((item) => {\n\t\t\tdelete item.column;\n\t\t});\n\n\t\tparams.sort = sorters;\n\n\t\treturn params;\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tuserSetSort(sortList, dir){\n\t\tthis.setSort(sortList, dir);\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\n\tclearSort(){\n\t\tthis.clear();\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//initialize column header for sorting\n\tinitializeColumn(column){\n\t\tvar sorter = false,\n\t\tcolEl,\n\t\tarrowEl;\n\n\t\tswitch(typeof column.definition.sorter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Sort.sorters[column.definition.sorter]){\n\t\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tsorter = column.definition.sorter;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tcolumn.modules.sort = {\n\t\t\tsorter:sorter, dir:\"none\",\n\t\t\tparams:column.definition.sorterParams || {},\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\n\t\t\ttristate: column.definition.headerSortTristate,\n\t\t};\n\n\t\tif(column.definition.headerSort !== false){\n\n\t\t\tcolEl = column.getElement();\n\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\n\n\t\t\tarrowEl = document.createElement(\"div\");\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\n\n\t\t\tswitch(this.table.options.headerSortClickElement){\n\t\t\t\tcase \"icon\":\n\t\t\t\t\tarrowEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"header\":\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch(this.table.options.headerSortElement){\n\t\t\t\tcase \"function\":\n\t\t\t\t\t//do nothing\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\n\t\t\t}\n\n\t\t\t//create sorter arrow\n\t\t\tcolumn.titleHolderElement.appendChild(arrowEl);\n\n\t\t\tcolumn.modules.sort.element = arrowEl;\n\n\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\n\t\t\t//sort on click\n\t\t\t(this.table.options.headerSortClickElement === \"icon\" ? arrowEl : colEl).addEventListener(\"click\", (e) => {\n\t\t\t\tvar dir = \"\",\n\t\t\t\tsorters=[],\n\t\t\t\tmatch = false;\n\n\t\t\t\tif(column.modules.sort){\n\t\t\t\t\tif(column.modules.sort.tristate){\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\n\t\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\t\tsorters = this.getSort();\n\n\t\t\t\t\t\tmatch = sorters.findIndex((sorter) => {\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif(match > -1){\n\t\t\t\t\t\t\tsorters[match].dir = dir;\n\n\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//add to existing sort\n\t\t\t\t\t\tthis.setSort(sorters);\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(dir == \"none\"){\n\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\t\tthis.setSort(column, dir);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// this.table.rowManager.sorterRefresh(!this.sortList.length);\n\t\t\t\t\tthis.refreshSort();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trefreshSort(){\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.reloadData(null, false, false);\n\t\t}else {\n\t\t\tthis.refreshData(true);\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the sorters have changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//return current sorters\n\tgetSort(){\n\t\tvar self = this,\n\t\tsorters = [];\n\n\t\tself.sortList.forEach(function(item){\n\t\t\tif(item.column){\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\n\t\t\t}\n\t\t});\n\n\t\treturn sorters;\n\t}\n\n\t//change sort list and trigger sort\n\tsetSort(sortList, dir){\n\t\tvar self = this,\n\t\tnewSortList = [];\n\n\t\tif(!Array.isArray(sortList)){\n\t\t\tsortList = [{column: sortList, dir:dir}];\n\t\t}\n\n\t\tsortList.forEach(function(item){\n\t\t\tvar column;\n\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\n\t\t\tif(column){\n\t\t\t\titem.column = column;\n\t\t\t\tnewSortList.push(item);\n\t\t\t\tself.changed = true;\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t\t}\n\n\t\t});\n\n\t\tself.sortList = newSortList;\n\n\t\tthis.dispatch(\"sort-changed\");\n\t}\n\n\t//clear sorters\n\tclear(){\n\t\tthis.setSort([]);\n\t}\n\n\t//find appropriate sorter for column\n\tfindSorter(column){\n\t\tvar row = this.table.rowManager.activeRows[0],\n\t\tsorter = \"string\",\n\t\tfield, value;\n\n\t\tif(row){\n\t\t\trow = row.getData();\n\t\t\tfield = column.getField();\n\n\t\t\tif(field){\n\n\t\t\t\tvalue = column.getFieldValue(row);\n\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Sort.sorters[sorter];\n\t}\n\n\t//work through sort list sorting data\n\tsort(data){\n\t\tvar self = this,\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t\tsortListActual = [],\n\t\trowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataSorting\")){\n\t\t\tthis.dispatchExternal(\"dataSorting\", self.getSort());\n\t\t}\n\n\t\tself.clearColumnHeaders();\n\n\t\tif(this.table.options.sortMode !== \"remote\"){\n\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tvar sortObj;\n\n\t\t\t\tif(item.column){\n\t\t\t\t\tsortObj = item.column.modules.sort;\n\n\t\t\t\t\tif(sortObj){\n\n\t\t\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\t\t\tif(!sortObj.sorter){\n\t\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\n\t\t\t\t\t\tsortListActual.push(item);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//sort data\n\t\t\tif (sortListActual.length) {\n\t\t\t\tself._sortItems(data, sortListActual);\n\t\t\t}\n\n\t\t}else {\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataSorted\")){\n\t\t\tdata.forEach((row) => {\n\t\t\t\trowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//clear sort arrows on columns\n\tclearColumnHeaders(){\n\t\tthis.table.columnManager.getRealColumns().forEach((column) => {\n\t\t\tif(column.modules.sort){\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\t\t\t}\n\t\t});\n\t}\n\n\t//set the column header sort direction\n\tsetColumnHeader(column, dir){\n\t\tcolumn.modules.sort.dir = dir;\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir === \"asc\" ? \"ascending\" : \"descending\");\n\t\tthis.setColumnHeaderSortIcon(column, dir);\n\t}\n\n\tsetColumnHeaderSortIcon(column, dir){\n\t\tvar sortEl = column.modules.sort.element,\n\t\tarrowEl;\n\n\t\tif(column.definition.headerSort && typeof this.table.options.headerSortElement === \"function\"){\n\t\t\twhile(sortEl.firstChild) sortEl.removeChild(sortEl.firstChild);\n\n\t\t\tarrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir);\n\t\t\t\n\t\t\tif(typeof arrowEl === \"object\"){\n\t\t\t\tsortEl.appendChild(arrowEl);\n\t\t\t}else {\n\t\t\t\tsortEl.innerHTML = arrowEl;\n\t\t\t}\n\t\t}\n\t}\n\n\t//sort each item in sort list\n\t_sortItems(data, sortList){\n\t\tvar sorterCount = sortList.length - 1;\n\n\t\tdata.sort((a, b) => {\n\t\t\tvar result;\n\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\n\t\t\t\tlet sortItem = sortList[i];\n\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n\t\t\t\tif(result !== 0){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\t//process individual rows for a sort function on active data\n\t_sortRow(a, b, column, dir, params){\n\t\tvar el1Comp, el2Comp;\n\n\t\t//switch elements depending on search direction\n\t\tvar el1 = dir == \"asc\" ? a : b;\n\t\tvar el2 = dir == \"asc\" ? b : a;\n\n\t\ta = column.getFieldValue(el1.getData());\n\t\tb = column.getFieldValue(el2.getData());\n\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\n\n\t\tel1Comp = el1.getComponent();\n\t\tel2Comp = el2.getComponent();\n\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n\t}\n}\n\nSort.moduleName = \"sort\";\n\n//load defaults\nSort.sorters = defaultSorters;\n\nclass Tooltip extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.tooltipSubscriber = null,\n\t\tthis.headerSubscriber = null,\n\t\t\n\t\tthis.timeout = null;\n\t\tthis.popupInstance = null;\n\t\t\n\t\tthis.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\n\t\tthis.registerTableOption(\"tooltipDelay\", 300); \n\t\t\n\t\tthis.registerColumnOption(\"tooltip\");\n\t\tthis.registerColumnOption(\"headerTooltip\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\tthis.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\n\t}\t\n\t\n\tinitializeColumn(column){\n\t\tif(column.definition.headerTooltip && !this.headerSubscriber){\n\t\t\tthis.headerSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\n\t\t\tthis.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\n\t\t}\n\t\t\n\t\tif(column.definition.tooltip && !this.tooltipSubscriber){\n\t\t\tthis.tooltipSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\n\t\t\tthis.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\n\t\t}\n\t}\n\t\n\tmousemoveCheck(action, e, component){\n\t\tvar tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\n\t\t\n\t\tif(tooltip){\n\t\t\tthis.clearPopup();\n\t\t\tthis.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\n\t\t}\n\t}\n\n\tmouseoutCheck(action, e, component){\n\t\tif(!this.popupInstance){\n\t\t\tthis.clearPopup();\n\t\t}\n\t}\n\t\n\tclearPopup(action, e, component){\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = null;\n\t\t\n\t\tif(this.popupInstance){\n\t\t\tthis.popupInstance.hide();\n\t\t}\n\t}\n\t\n\tloadTooltip(e, component, tooltip){\n\t\tvar contentsEl, renderedCallback, coords;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(typeof tooltip === \"function\"){\n\t\t\ttooltip = tooltip(e, component.getComponent(), onRendered);\n\t\t}\n\t\t\n\t\tif(tooltip instanceof HTMLElement){\n\t\t\tcontentsEl = tooltip;\n\t\t}else {\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\t\n\t\t\tif(tooltip === true){\n\t\t\t\tif(component instanceof Cell){\n\t\t\t\t\ttooltip = component.value;\n\t\t\t\t}else {\n\t\t\t\t\tif(component.definition.field){\n\t\t\t\t\t\tthis.langBind(\"columns|\" + component.definition.field, (value) => {\n\t\t\t\t\t\t\tcontentsEl.innerHTML = tooltip = value || component.definition.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t}else {\n\t\t\t\t\t\ttooltip = component.definition.title;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcontentsEl.innerHTML = tooltip;\n\t\t}\n\t\t\n\t\tif(tooltip || tooltip === 0 || tooltip === false){\n\t\t\tcontentsEl.classList.add(\"tabulator-tooltip\");\n\n\t\t\tcontentsEl.addEventListener(\"mousemove\", e => e.preventDefault());\n\t\t\t\n\t\t\tthis.popupInstance = this.popup(contentsEl);\n\t\t\t\n\t\t\tif(typeof renderedCallback === \"function\"){\n\t\t\t\tthis.popupInstance.renderCallback(renderedCallback);\n\t\t\t}\n\n\t\t\tcoords = this.popupInstance.containerEventCoords(e);\n\t\t\t\n\t\t\tthis.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\n\t\t\t\tthis.dispatchExternal(\"TooltipClosed\", component.getComponent());\n\t\t\t\tthis.popupInstance = null;\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"TooltipOpened\", component.getComponent());\n\t\t}\n\t}\n}\n\nTooltip.moduleName = \"tooltip\";\n\nvar defaultValidators = {\n\t//is integer\n\tinteger: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && Math.floor(value) === value;\n\t},\n\n\t//is float\n\tfloat: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && value % 1 !== 0;\n\t},\n\n\t//must be a number\n\tnumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn !isNaN(value);\n\t},\n\n\t//must be a string\n\tstring: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn isNaN(value);\n\t},\n\n\t//maximum value\n\tmax: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) <= parameters;\n\t},\n\n\t//minimum value\n\tmin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) >= parameters;\n\t},\n\n\t//starts with  value\n\tstarts: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n\t},\n\n\t//ends with  value\n\tends: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n\t},\n\n\n\t//minimum string length\n\tminLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length >= parameters;\n\t},\n\n\t//maximum string length\n\tmaxLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length <= parameters;\n\t},\n\n\t//in provided value list\n\tin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(typeof parameters == \"string\"){\n\t\t\tparameters = parameters.split(\"|\");\n\t\t}\n\n\t\treturn parameters.indexOf(value) > -1;\n\t},\n\n\t//must match provided regex\n\tregex: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar reg = new RegExp(parameters);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//value must be unique in this column\n\tunique: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar unique = true;\n\n\t\tvar cellData = cell.getData();\n\t\tvar column = cell.getColumn()._getSelf();\n\n\t\tthis.table.rowManager.rows.forEach(function(row){\n\t\t\tvar data = row.getData();\n\n\t\t\tif(data !== cellData){\n\t\t\t\tif(value == column.getFieldValue(data)){\n\t\t\t\t\tunique = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn unique;\n\t},\n\n\t//must have a value\n\trequired:function(cell, value, parameters){\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t},\n};\n\nclass Validate extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.invalidCells = [];\n\t\t\n\t\tthis.registerTableOption(\"validationMode\", \"blocking\");\n\t\t\n\t\tthis.registerColumnOption(\"validator\");\n\t\t\n\t\tthis.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\n\t\tthis.registerTableFunction(\"validate\", this.userValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n\t}\n\t\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-delete\", this.clearValidation.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-success\", this.editValidate.bind(this));\n\t\tthis.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\n\t\tthis.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Event Handling //////////\n\t///////////////////////////////////\n\t\n\teditValidate(cell, value, previousValue){\n\t\tvar valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\n\t\t\n\t\t// allow time for editor to make render changes then style cell\n\t\tif(valid !== true){\n\t\t\tsetTimeout(() => {\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t\tthis.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn valid;\n\t}\n\t\n\teditorClear(cell, cancelled){\n\t\tif(cancelled){\n\t\t\tif(cell.column.modules.validate){\n\t\t\t\tthis.cellValidate(cell);\n\t\t\t}\n\t\t}\n\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t}\n\t\n\teditedClear(cell){\n\t\tif(cell.modules.validate){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Cell Functions /////////\n\t///////////////////////////////////\n\t\n\tcellIsValid(cell){\n\t\treturn cell.modules.validate ? (cell.modules.validate.invalid || true) : true;\n\t}\n\t\n\tcellValidate(cell){\n\t\treturn this.validate(cell.column.modules.validate, cell, cell.getValue());\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Column Functions ////////\n\t///////////////////////////////////\n\t\n\tcolumnValidate(column){\n\t\tvar invalid = [];\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Row Functions //////////\n\t///////////////////////////////////\n\t\n\trowValidate(row){\n\t\tvar invalid = [];\n\t\t\n\t\trow.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\tuserClearCellValidation(cells){\n\t\tif(!cells){\n\t\t\tcells = this.getInvalidCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.clearValidation(cell._getSelf());\n\t\t});\n\t}\n\t\n\tuserValidate(cells){\n\t\tvar output = [];\n\t\t\n\t\t//clear row data\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trow = row.getComponent();\n\t\t\t\n\t\t\tvar valid = row.validate();\n\t\t\t\n\t\t\tif(valid !== true){\n\t\t\t\toutput = output.concat(valid);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output.length ? output : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.validator !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//validate\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = [],\n\t\tvalidator;\n\t\t\n\t\tif(column.definition.validator){\n\t\t\t\n\t\t\tif(Array.isArray(column.definition.validator)){\n\t\t\t\tcolumn.definition.validator.forEach((item) => {\n\t\t\t\t\tvalidator = self._extractValidator(item);\n\t\t\t\t\t\n\t\t\t\t\tif(validator){\n\t\t\t\t\t\tconfig.push(validator);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\t\t\t\t\n\t\t\t\tif(validator){\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.validate = config.length ? config : false;\n\t\t}\n\t}\n\t\n\t_extractValidator(value){\n\t\tvar type, params, pos;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tpos = value.indexOf(':');\n\t\t\t\n\t\t\t\tif(pos > -1){\n\t\t\t\t\ttype = value.substring(0,pos);\n\t\t\t\t\tparams = value.substring(pos+1);\n\t\t\t\t}else {\n\t\t\t\t\ttype = value;\n\t\t\t\t}\n\t\t\t\n\t\t\t\treturn this._buildValidator(type, params);\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\treturn this._buildValidator(value);\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t}\n\t}\n\t\n\t_buildValidator(type, params){\n\t\t\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\n\t\t\n\t\tif(!func){\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\t\treturn false;\n\t\t}else {\n\t\t\treturn {\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\n\t\t\t\tfunc:func,\n\t\t\t\tparams:params,\n\t\t\t};\n\t\t}\n\t}\n\t\n\tvalidate(validators, cell, value){\n\t\tvar self = this,\n\t\tfailedValidators = [],\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\n\t\tif(validators){\n\t\t\tvalidators.forEach((item) => {\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\n\t\t\t\t\tfailedValidators.push({\n\t\t\t\t\t\ttype:item.type,\n\t\t\t\t\t\tparameters:item.params\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(!cell.modules.validate){\n\t\t\tcell.modules.validate = {};\n\t\t}\n\t\t\n\t\tif(!failedValidators.length){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}else {\n\t\t\tcell.modules.validate.invalid = failedValidators;\n\t\t\t\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t}\n\t\t\t\n\t\t\tif(invalidIndex == -1){\n\t\t\t\tthis.invalidCells.push(cell);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn failedValidators.length ? failedValidators : true;\n\t}\n\t\n\tgetInvalidCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.invalidCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearValidation(cell){\n\t\tvar invalidIndex;\n\t\t\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\n\t\t\t\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\t\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nValidate.moduleName = \"validate\";\n\n//load defaults\nValidate.validators = defaultValidators;\n\nvar modules = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tAccessorModule: Accessor,\n\tAjaxModule: Ajax,\n\tClipboardModule: Clipboard,\n\tColumnCalcsModule: ColumnCalcs,\n\tDataTreeModule: DataTree,\n\tDownloadModule: Download,\n\tEditModule: Edit$1,\n\tExportModule: Export,\n\tFilterModule: Filter,\n\tFormatModule: Format,\n\tFrozenColumnsModule: FrozenColumns,\n\tFrozenRowsModule: FrozenRows,\n\tGroupRowsModule: GroupRows,\n\tHistoryModule: History,\n\tHtmlTableImportModule: HtmlTableImport,\n\tImportModule: Import,\n\tInteractionModule: Interaction,\n\tKeybindingsModule: Keybindings,\n\tMenuModule: Menu,\n\tMoveColumnsModule: MoveColumns,\n\tMoveRowsModule: MoveRows,\n\tMutatorModule: Mutator,\n\tPageModule: Page,\n\tPersistenceModule: Persistence,\n\tPopupModule: Popup$1,\n\tPrintModule: Print,\n\tReactiveDataModule: ReactiveData,\n\tResizeColumnsModule: ResizeColumns,\n\tResizeRowsModule: ResizeRows,\n\tResizeTableModule: ResizeTable,\n\tResponsiveLayoutModule: ResponsiveLayout,\n\tSelectRowModule: SelectRow,\n\tSortModule: Sort,\n\tTooltipModule: Tooltip,\n\tValidateModule: Validate\n});\n\nvar defaultOptions = {\n\n\tdebugEventsExternal:false, //flag to console log events\n\tdebugEventsInternal:false, //flag to console log events\n\tdebugInvalidOptions:true, //allow toggling of invalid option warnings\n\tdebugInvalidComponentFuncs:true, //allow toggling of invalid component warnings\n\tdebugInitialization:true, //allow toggling of pre initialization function call warnings\n\tdebugDeprecation:true, //allow toggling of deprecation warnings\n\n\theight:false, //height of tabulator\n\tminHeight:false, //minimum height of tabulator\n\tmaxHeight:false, //maximum height of tabulator\n\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\n\n\tpopupContainer:false,\n\n\tcolumns:[],//store for colum header info\n\tcolumnDefaults:{}, //store column default props\n\n\tdata:false, //default starting data\n\n\tautoColumns:false, //build columns from data row structure\n\tautoColumnsDefinitions:false,\n\n\tnestedFieldSeparator:\".\", //separator for nested data\n\n\tfooterElement:false, //hold footer element\n\n\tindex:\"id\", //filed for row index\n\n\ttextDirection:\"auto\",\n\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\n\n\theaderVisible:true, //hide header\n\n\trenderVertical:\"virtual\",\n\trenderHorizontal:\"basic\",\n\trenderVerticalBuffer:0, // set virtual DOM buffer size\n\n\tscrollToRowPosition:\"top\",\n\tscrollToRowIfVisible:true,\n\n\tscrollToColumnPosition:\"left\",\n\tscrollToColumnIfVisible:true,\n\n\trowFormatter:false,\n\trowFormatterPrint:null,\n\trowFormatterClipboard:null,\n\trowFormatterHtmlOutput:null,\n\n\trowHeight:null,\n\n\tplaceholder:false,\n\n\tdataLoader:true,\n\tdataLoaderLoading:false,\n\tdataLoaderError:false,\n\tdataLoaderErrorTimeout:3000,\n\n\tdataSendParams:{},\n\n\tdataReceiveParams:{},\n};\n\nclass OptionsList {\n\tconstructor(table, msgType, defaults = {}){\n\t\tthis.table = table;\n\t\tthis.msgType = msgType;\n\t\tthis.registeredDefaults = Object.assign({}, defaults);\n\t}\n\t\n\tregister(option, value){\n\t\tthis.registeredDefaults[option] = value;\n\t}\n\t\n\tgenerate(defaultOptions, userOptions = {}){\n\t\tvar output = Object.assign({}, this.registeredDefaults),\n\t\twarn = this.table.options.debugInvalidOptions || userOptions.debugInvalidOptions === true;\n\t\t\n\t\tObject.assign(output, defaultOptions);\n\t\t\n\t\tfor (let key in userOptions){\n\t\t\tif(!output.hasOwnProperty(key)){\n\t\t\t\tif(warn){\n\t\t\t\t\tconsole.warn(\"Invalid \" + this.msgType + \" option:\", key);\n\t\t\t\t}\n\n\t\t\t\toutput[key] = userOptions.key;\n\t\t\t}\n\t\t}\n\t\n\t\t\n\t\tfor (let key in output){\n\t\t\tif(key in userOptions){\n\t\t\t\toutput[key] = userOptions[key];\n\t\t\t}else {\n\t\t\t\tif(Array.isArray(output[key])){\n\t\t\t\t\toutput[key] = Object.assign([], output[key]);\n\t\t\t\t}else if(typeof output[key] === \"object\" && output[key] !== null){\n\t\t\t\t\toutput[key] = Object.assign({}, output[key]);\n\t\t\t\t}else if (typeof output[key] === \"undefined\"){\n\t\t\t\t\tdelete output[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n}\n\nclass Renderer extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.elementVertical = table.rowManager.element;\n\t\tthis.elementHorizontal = table.columnManager.element;\n\t\tthis.tableElement =  table.rowManager.tableElement;\n\n\t\tthis.verticalFillMode = \"fit\"; // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\n\t}\n\n\n\t///////////////////////////////////\n\t/////// Internal Bindings /////////\n\t///////////////////////////////////\n\n\tinitialize(){\n\t\t//initialize core functionality\n\t}\n\n\tclearRows(){\n\t\t//clear down existing rows layout\n\t}\n\n\tclearColumns(){\n\t\t//clear down existing columns layout\n\t}\n\n\n\treinitializeColumnWidths(columns){\n\t\t//resize columns to fit data\n\t}\n\n\n\trenderRows(){\n\t\t//render rows from a clean slate\n\t}\n\n\trenderColumns(){\n\t\t//render columns from a clean slate\n\t}\n\n\trerenderRows(callback){\n\t\t// rerender rows and keep position\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t}\n\n\trerenderColumns(update, blockRedraw){\n\t\t//rerender columns\n\t}\n\n\trenderRowCells(row){\n\t\t//render the cells in a row\n\t}\n\n\trerenderRowCells(row, force){\n\t\t//rerender the cells in a row\n\t}\n\n\tscrollColumns(left, dir){\n\t\t//handle horizontal scrolling\n\t}\n\n\tscrollRows(top, dir){\n\t\t//handle vertical scrolling\n\t}\n\n\tresize(){\n\t\t//container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\n\t}\n\n\tscrollToRow(row){\n\t\t//scroll to a specific row\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\t//determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\t//return the visible rows\n\t\treturn [];\n\t}\n\n\t///////////////////////////////////\n\t//////// Helper Functions /////////\n\t///////////////////////////////////\n\n\trows(){\n\t\treturn this.table.rowManager.getDisplayRows();\n\t}\n\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else {\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t/////// External Triggers /////////\n\t/////// (DO NOT OVERRIDE) /////////\n\t///////////////////////////////////\n\n\tclear(){\n\t\t//clear down existing layout\n\t\tthis.clearRows();\n\t\tthis.clearColumns();\n\t}\n\n\trender(){\n\t\t//render from a clean slate\n\t\tthis.renderRows();\n\t\tthis.renderColumns();\n\t}\n\n\trerender(callback){\n\t\t// rerender and keep position\n\t\tthis.rerenderRows();\n\t\tthis.rerenderColumns();\n\t}\n\n\tscrollToRowPosition(row, position, ifVisible){\n\t\tvar rowIndex = this.rows().indexOf(row),\n\t\trowEl = row.getElement(),\n\t\toffset = 0;\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(rowIndex > -1){\n\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\n\t\t\t\t}\n\n\t\t\t\t//check row visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight){\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\n\t\t\t\t}\n\n\t\t\t\tif(position === \"nearest\"){\n\t\t\t\t\tposition = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\";\n\t\t\t\t}\n\n\t\t\t\t//scroll to row\n\t\t\t\tthis.scrollToRow(row);\n\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - ((this.elementVertical.scrollHeight - rowEl.offsetTop) / 2);\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.clientHeight / 2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"top\":\n\t\t\t\t\t\tthis.elementVertical.scrollTop = rowEl.offsetTop;\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\t\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass BasicHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\trenderRowCells(row, inFragment) {\n\t\tconst rowFrag = document.createDocumentFragment();\n\t\trow.cells.forEach((cell) => {\n\t\t\trowFrag.appendChild(cell.getElement());\n\t\t});\n\t\trow.element.appendChild(rowFrag);\n\t\t\n\t\tif(!inFragment){\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tcolumns.forEach(function(column){\n\t\t\tcolumn.reinitializeWidth();\n\t\t});\n\t}\n}\n\nclass VirtualDomHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftCol = 0;\n\t\tthis.rightCol = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\t\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t\t\n\t\tthis.fitDataColAvg = 0;\n\t\t\n\t\tthis.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\n\t\t\n\t\tthis.visibleRows = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.isFitData = false;\n\t\t\n\t\tthis.columns = [];\n\t}\n\t\n\tinitialize(){\n\t\tthis.compatibilityCheck();\n\t\tthis.layoutCheck();\n\t\tthis.vertScrollListen();\n\t}\n\t\n\tcompatibilityCheck(){\t\t\n\t\tif(this.options(\"layout\") == \"fitDataTable\"){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\n\t\t}\n\t\t\n\t\tif(this.options(\"responsiveLayout\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\n\t\t}\n\t\t\n\t\tif(this.options(\"rtl\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n\t\t}\n\t}\n\t\n\tlayoutCheck(){\n\t\tthis.isFitData = this.options(\"layout\").startsWith('fitData');\n\t}\n\t\n\tvertScrollListen(){\n\t\tthis.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n\t}\n\t\n\tclearVisRowCache(){\n\t\tthis.visibleRows = null;\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\t\n\trenderColumns(row, force){\n\t\tthis.dataChange();\n\t}\n\t\n\t\n\tscrollColumns(left, dir){\n\t\tif(this.scrollLeft != left){\n\t\t\tthis.scrollLeft = left;\n\t\t\t\n\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\n\t\t}\n\t}\n\t\n\tcalcWindowBuffer(){\n\t\tvar buffer = this.elementVertical.clientWidth;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\tvar width = column.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > buffer){\n\t\t\t\t\tbuffer = width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.windowBuffer = buffer * 2;\n\t}\n\t\n\trerenderColumns(update, blockRedraw){\t\t\n\t\tvar old = {\n\t\t\tcols:this.columns,\n\t\t\tleftCol:this.leftCol,\n\t\t\trightCol:this.rightCol,\n\t\t},\n\t\tcolPos = 0;\n\t\t\n\t\tif(update && !this.initialized){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.clear();\n\t\t\n\t\tthis.calcWindowBuffer();\n\t\t\n\t\tthis.scrollLeft = this.elementVertical.scrollLeft;\n\t\t\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tvar config = {},\n\t\t\twidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tif(!column.modules.frozen){\t\t\t\n\t\t\t\t\twidth = column.getWidth();\n\n\t\t\t\t\tconfig.leftPos = colPos;\n\t\t\t\t\tconfig.rightPos = colPos + width;\n\t\t\t\t\t\n\t\t\t\t\tconfig.width = width;\n\t\t\t\t\t\n\t\t\t\t\tif (this.isFitData) {\n\t\t\t\t\t\tconfig.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\n\t\t\t\t\t\t//column is visible\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.leftCol == -1){\n\t\t\t\t\t\t\tthis.leftCol = this.columns.length;\n\t\t\t\t\t\t\tthis.vDomPadLeft = colPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.rightCol = this.columns.length;\n\t\t\t\t\t}else {\n\t\t\t\t\t\t// column is hidden\n\t\t\t\t\t\tif(this.leftCol !== -1){\n\t\t\t\t\t\t\tthis.vDomPadRight += width;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.columns.push(column);\n\t\t\t\t\t\n\t\t\t\t\tcolumn.modules.vdomHoz = config;\n\t\t\t\t\t\n\t\t\t\t\tcolPos += width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tif(!update || this.reinitChanged(old)){\n\t\t\t\tthis.reinitializeRows();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.elementVertical.scrollLeft = this.scrollLeft;\n\t}\n\t\n\trenderRowCells(row){\n\t\tif(this.initialized){\n\t\t\tthis.initializeRow(row);\n\t\t}else {\n\t\t\tconst rowFrag = document.createDocumentFragment();\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\trowFrag.appendChild(cell.getElement());\n\t\t\t});\n\t\t\trow.element.appendChild(rowFrag);\n\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\trerenderRowCells(row, force){\n\t\tthis.reinitializeRow(row, force);\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\tthis.columns[i].reinitializeWidth();\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\t\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tclear(){\n\t\tthis.columns = [];\n\t\t\n\t\tthis.leftCol = -1;\n\t\tthis.rightCol = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t}\n\t\n\tdataChange(){\n\t\tvar change = false,\n\t\trow, rowEl;\n\t\t\n\t\tif(this.isFitData){\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif(!column.definition.width && column.visible){\n\t\t\t\t\tchange = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\n\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\t\t\n\t\t\t\trow = this.chain(\"rows-sample\", [1], [], () => {\n\t\t\t\t\treturn this.table.rowManager.getDisplayRows();\n\t\t\t\t})[0];\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trowEl = row.getElement();\n\t\t\t\t\t\n\t\t\t\t\trow.generateCells();\n\t\t\t\t\t\n\t\t\t\t\tthis.tableElement.appendChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tfor(let colEnd = 0; colEnd < row.cells.length; colEnd++){\n\t\t\t\t\t\tlet cell = row.cells[colEnd];\n\t\t\t\t\t\trowEl.appendChild(cell.getElement());\n\t\t\t\t\t\t\n\t\t\t\t\t\tcell.column.reinitializeWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tif(this.options(\"layout\") === \"fitColumns\"){\n\t\t\t\tthis.layoutRefresh();\n\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treinitChanged(old){\n\t\tvar match = true;\n\t\t\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\told.cols.forEach((col, i) => {\n\t\t\tif(col !== this.columns[i]){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn !match;\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.getVisibleRows(),\n\t\totherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\n\t\tvisibleRows.forEach((row) => {\n\t\t\tthis.reinitializeRow(row, true);\n\t\t});\n\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t}\n\t\n\tgetVisibleRows(){\n\t\tif (!this.visibleRows){\n\t\t\tthis.visibleRows = this.table.rowManager.getVisibleRows();\n\t\t}\n\t\t\n\t\treturn this.visibleRows;\t\n\t}\n\t\n\tscroll(diff){\n\t\tthis.vDomScrollPosLeft += diff;\n\t\tthis.vDomScrollPosRight += diff;\n\t\t\n\t\tif(Math.abs(diff) > (this.windowBuffer / 2)){\n\t\t\tthis.rerenderColumns();\n\t\t}else {\n\t\t\tif(diff > 0){\n\t\t\t\t//scroll right\n\t\t\t\tthis.addColRight();\n\t\t\t\tthis.removeColLeft();\n\t\t\t}else {\n\t\t\t\t//scroll left\n\t\t\t\tthis.addColLeft();\n\t\t\t\tthis.removeColRight();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcolPositionAdjust (start, end, diff){\n\t\tfor(let i = start; i < end; i++){\n\t\t\tlet column = this.columns[i];\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\n\t\t}\n\t}\n\t\n\taddColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\n\t\t\tlet column = this.columns[this.rightCol + 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.rightCol]).getElement().nextSibling);\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tthis.rightCol++; // Don't move this below the >= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.rightCol >= (this.columns.length - 1)){\n\t\t\t\t\t\tthis.vDomPadRight = 0;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.vDomPadRight -= column.getWidth();\n\t\t\t\t\t}\t\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\taddColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol - 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.leftCol]).getElement());\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.leftCol--; // don't move this below the <= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.leftCol <= 0){ // replicating logic in addColRight\n\t\t\t\t\t\tthis.vDomPadLeft = 0;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.vDomPadLeft -= column.getWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet diff = this.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tif(diff){\n\t\t\t\t\t\tthis.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\n\t\t\t\t\t\tthis.vDomPadRight -= diff;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.rightCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColRight\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadRight += column.getWidth();\n\t\t\t\t\tthis.rightCol --;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\t\t\t\t\t\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColLeft\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadLeft += column.getWidth();\n\t\t\t\t\tthis.leftCol ++;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tfitDataColActualWidthCheck(column){\n\t\tvar newWidth, widthDiff;\n\t\t\n\t\tif(column.modules.vdomHoz.fitDataCheck){\n\t\t\tcolumn.reinitializeWidth();\n\t\t\t\n\t\t\tnewWidth = column.getWidth();\n\t\t\twidthDiff = newWidth - column.modules.vdomHoz.width;\n\t\t\t\n\t\t\tif(widthDiff){\n\t\t\t\tcolumn.modules.vdomHoz.rightPos += widthDiff;\n\t\t\t\tcolumn.modules.vdomHoz.width = newWidth;\n\t\t\t\tthis.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.fitDataCheck = false;\n\t\t}\n\t\t\n\t\treturn widthDiff;\n\t}\n\t\n\tinitializeRow(row){\n\t\tif(row.type !== \"group\"){\n\t\t\trow.modules.vdomHoz = {\n\t\t\t\tleftCol:this.leftCol,\n\t\t\t\trightCol:this.rightCol,\n\t\t\t};\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\t\tthis.appendCell(row, this.columns[i]);\n\t\t\t}\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tappendCell(row, column){\n\t\tif(column && column.visible){\n\t\t\tlet cell = row.getCell(column);\n\t\t\t\n\t\t\trow.getElement().appendChild(cell.getElement());\n\t\t\tcell.cellRendered();\n\t\t}\n\t}\n\t\n\treinitializeRow(row, force){\n\t\tif(row.type !== \"group\"){\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\n\t\t\t\t\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\n\n\t\t\t\tthis.initializeRow(row);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass ColumnManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.blockHozScrollEvent = false;\n\t\tthis.headersElement = null;\n\t\tthis.contentsElement = null;\n\t\tthis.element = null ; //containing element\n\t\tthis.columns = []; // column definition object\n\t\tthis.columnsByIndex = []; //columns by index\n\t\tthis.columnsByField = {}; //columns by field\n\t\tthis.scrollLeft = 0;\n\t\tthis.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockUpdate = null; //store latest redraw update only status\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t////////////// Setup Functions /////////////////\n\t\n\tinitialize(){\n\t\tthis.initializeRenderer();\n\t\t\n\t\tthis.headersElement = this.createHeadersElement();\n\t\tthis.contentsElement = this.createHeaderContentsElement();\n\t\tthis.element = this.createHeaderElement();\n\t\t\n\t\tthis.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild);\n\t\tthis.element.insertBefore(this.contentsElement, this.element.firstChild);\n\n\t\tthis.initializeScrollWheelWatcher();\n\t\t\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.padVerticalScrollbar.bind(this));\n\t}\n\n\tpadVerticalScrollbar(width){\n\t\tif(this.table.rtl){\n\t\t\tthis.headersElement.style.marginLeft = width + \"px\";\n\t\t}else {\n\t\t\tthis.headersElement.style.marginRight = width + \"px\";\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": VirtualDomHorizontal,\n\t\t\t\"basic\": BasicHorizontal,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderHorizontal === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderHorizontal];\n\t\t}else {\n\t\t\trenderClass = this.table.options.renderHorizontal;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t}else {\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\n\t\t}\n\t}\n\t\n\t\n\tcreateHeadersElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-headers\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\treturn el;\n\t}\n\n\tcreateHeaderContentsElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header-contents\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateHeaderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tif(!this.table.options.headerVisible){\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\n\t\t}\n\t\t\n\t\treturn el;\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\t//return containing contents element\n\tgetContentsElement(){\n\t\treturn this.contentsElement;\n\t}\n\t\n\t\n\t//return header containing element\n\tgetHeadersElement(){\n\t\treturn this.headersElement;\n\t}\n\t\n\t//scroll horizontally to match table body\n\tscrollHorizontal(left){\n\t\tthis.contentsElement.scrollLeft = left;\n\n\t\tthis.scrollLeft = left;\n\t\t\n\t\tthis.renderer.scrollColumns(left);\n\t}\n\n\tinitializeScrollWheelWatcher(){\n\t\tthis.contentsElement.addEventListener(\"wheel\", (e) => {\n\t\t\tvar left;\n\n\t\t\tif(e.deltaX){\n\t\t\t\tleft = this.contentsElement.scrollLeft + e.deltaX;\n\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t///////////// Column Setup Functions /////////////\n\tgenerateColumnsFromRowData(data){\n\t\tvar cols = [],\n\t\tdefinitions = this.table.options.autoColumnsDefinitions,\n\t\trow, sorter;\n\t\t\n\t\tif(data && data.length){\n\t\t\t\n\t\t\trow = data[0];\n\t\t\t\n\t\t\tfor(var key in row){\n\t\t\t\tlet col = {\n\t\t\t\t\tfield:key,\n\t\t\t\t\ttitle:key,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tlet value = row[key];\n\t\t\t\t\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(value)){\n\t\t\t\t\t\t\tsorter = \"array\";\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcol.sorter = sorter;\n\t\t\t\t\n\t\t\t\tcols.push(col);\n\t\t\t}\n\t\t\t\n\t\t\tif(definitions){\n\t\t\t\t\n\t\t\t\tswitch(typeof definitions){\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(definitions)){\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tvar match = definitions.find((def) => {\n\t\t\t\t\t\t\t\t\treturn def.field === col.field;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\t\t\tObject.assign(col, match);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tif(definitions[col.field]){\n\t\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.table.options.columns = cols;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.table.options.columns = cols;\n\t\t\t}\n\t\t\t\n\t\t\tthis.setColumns(this.table.options.columns);\n\t\t}\n\t}\n\t\n\tsetColumns(cols, row){\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\n\t\t\n\t\tthis.columns = [];\n\t\tthis.columnsByIndex = [];\n\t\tthis.columnsByField = {};\n\t\t\n\t\tthis.dispatch(\"columns-loading\");\n\t\t\n\t\tcols.forEach((def, i) => {\n\t\t\tthis._addColumn(def);\n\t\t});\n\t\t\n\t\tthis._reIndexColumns();\n\t\t\n\t\tthis.dispatch(\"columns-loaded\");\n\t\t\n\t\tthis.rerenderColumns(false, true);\n\t\t\n\t\tthis.redraw(true);\n\t}\n\t\n\t_addColumn(definition, before, nextToColumn){\n\t\tvar column = new Column(definition, this),\n\t\tcolEl = column.getElement(),\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\t\t\n\t\tif(nextToColumn && index > -1){\n\t\t\tvar topColumn = nextToColumn.getTopColumn();\n\t\t\tvar parentIndex = this.columns.indexOf(topColumn);\n\t\t\tvar nextEl = topColumn.getElement();\n\t\t\t\n\t\t\tif(before){\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t\t}else {\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t\t}\n\t\t}else {\n\t\t\tif(before){\n\t\t\t\tthis.columns.unshift(column);\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t\t}else {\n\t\t\t\tthis.columns.push(column);\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t\t}\n\t\t}\n\t\t\n\t\tcolumn.columnRendered();\n\t\t\n\t\treturn column;\n\t}\n\t\n\tregisterColumnField(col){\n\t\tif(col.definition.field){\n\t\t\tthis.columnsByField[col.definition.field] = col;\n\t\t}\n\t}\n\t\n\tregisterColumnPosition(col){\n\t\tthis.columnsByIndex.push(col);\n\t}\n\t\n\t_reIndexColumns(){\n\t\tthis.columnsByIndex = [];\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t}\n\t\n\t//ensure column headers take up the correct amount of space in column groups\n\tverticalAlignHeaders(){\n\t\tvar minHeight = 0;\n\t\t\n\t\tif(!this.redrawBlock){\n\n\t\t\tthis.headersElement.style.height=\"\";\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.clearVerticalAlign();\n\t\t\t});\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tvar height = column.getHeight();\n\t\t\t\t\n\t\t\t\tif(height > minHeight){\n\t\t\t\t\tminHeight = height;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.headersElement.style.height = minHeight + \"px\";\n\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\n\t\t\t});\n\t\t\t\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\t//////////////// Column Details /////////////////\n\tfindColumn(subject){\n\t\tvar columns;\n\n\t\tif(typeof subject == \"object\"){\n\t\t\t\n\t\t\tif(subject instanceof Column){\n\t\t\t\t//subject is column element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof ColumnComponent){\n\t\t\t\t//subject is public column component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\n\t\t\t\tcolumns = [];\n\n\t\t\t\tthis.columns.forEach((column) => {\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t\t});\n\n\t\t\t\t//subject is a HTML element of the column header\n\t\t\t\tlet match = columns.find((column) => {\n\t\t\t\t\treturn column.element === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t\t\n\t\t}else {\n\t\t\t//subject should be treated as the field name of the column\n\t\t\treturn this.columnsByField[subject] || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetColumnByField(field){\n\t\treturn this.columnsByField[field];\n\t}\n\t\n\tgetColumnsByFieldRoot(root){\n\t\tvar matches = [];\n\t\t\n\t\tObject.keys(this.columnsByField).forEach((field) => {\n\t\t\tvar fieldRoot = field.split(\".\")[0];\n\t\t\tif(fieldRoot === root){\n\t\t\t\tmatches.push(this.columnsByField[field]);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn matches;\n\t}\n\t\n\tgetColumnByIndex(index){\n\t\treturn this.columnsByIndex[index];\n\t}\n\t\n\tgetFirstVisibleColumn(){\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\n\t\t\treturn col.visible;\n\t\t});\n\t\t\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\n\t}\n\t\n\tgetColumns(){\n\t\treturn this.columns;\n\t}\n\t\n\tfindColumnIndex(column){\n\t\treturn this.columnsByIndex.findIndex((col) => {\n\t\t\treturn column === col;\n\t\t});\n\t}\n\t\n\t//return all columns that are not groups\n\tgetRealColumns(){\n\t\treturn this.columnsByIndex;\n\t}\n\t\n\t//traverse across columns and call action\n\ttraverse(callback){\n\t\tthis.columnsByIndex.forEach((column,i) =>{\n\t\t\tcallback(column, i);\n\t\t});\n\t}\n\t\n\t//get definitions of actual columns\n\tgetDefinitions(active){\n\t\tvar output = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(!active || (active && column.visible)){\n\t\t\t\toutput.push(column.getDefinition());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\t//get full nested definition tree\n\tgetDefinitionTree(){\n\t\tvar output = [];\n\t\t\n\t\tthis.columns.forEach((column) => {\n\t\t\toutput.push(column.getDefinition(true));\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(structured){\n\t\tvar output = [],\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetWidth(){\n\t\tvar width = 0;\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn width;\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\n\t\t\n\t\tif(after){\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t\t}\n\t\t\n\t\tthis.moveColumnActual(from, to, after);\n\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.table.rowManager.reinitialize();\n\t}\n\t\n\tmoveColumnActual(from, to, after){\n\t\tif(from.parent.isGroup){\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t\t}else {\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t\t}\n\t\t\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\t\t\n\t\tthis.rerenderColumns(true);\n\t\t\n\t\tthis.dispatch(\"column-moved\", from, to, after);\n\t\t\n\t\tif(this.subscribedExternal(\"columnMoved\")){\n\t\t\tthis.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\n\t\t}\n\t}\n\t\n\t_moveColumnInArray(columns, from, to, after, updateRows){\n\t\tvar\tfromIndex = columns.indexOf(from),\n\t\ttoIndex, rows = [];\n\t\t\n\t\tif (fromIndex > -1) {\n\t\t\t\n\t\t\tcolumns.splice(fromIndex, 1);\n\t\t\t\n\t\t\ttoIndex = columns.indexOf(to);\n\t\t\t\n\t\t\tif (toIndex > -1) {\n\t\t\t\t\n\t\t\t\tif(after){\n\t\t\t\t\ttoIndex = toIndex+1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\ttoIndex = fromIndex;\n\t\t\t}\n\t\t\t\n\t\t\tcolumns.splice(toIndex, 0, from);\n\t\t\t\n\t\t\tif(updateRows){\n\t\t\t\t\n\t\t\t\trows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\n\t\t\t\t\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\n\t\t\t\t\n\t\t\t\trows.forEach(function(row){\n\t\t\t\t\tif(row.cells.length){\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\tscrollToColumn(column, position, ifVisible){\n\t\tvar left = 0,\n\t\toffset = column.getLeftOffset(),\n\t\tadjust = 0,\n\t\tcolEl = column.getElement();\n\t\t\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\tadjust = -this.element.clientWidth / 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//check column visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//calculate scroll position\n\t\t\t\tleft = offset + adjust;\n\t\t\t\t\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t\t\n\t\t\t\tresolve();\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\t\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tgenerateCells(row){\n\t\tvar cells = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tcells.push(column.generateCell(row));\n\t\t});\n\t\t\n\t\treturn cells;\n\t}\n\t\n\t//////////////// Column Management /////////////////\n\tgetFlexBaseWidth(){\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\n\t\tfixedWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar if present\n\t\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t}\n\t\t\n\t\tthis.columnsByIndex.forEach(function(column){\n\t\t\tvar width, minWidth, colWidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\twidth = column.definition.width || 0;\n\t\t\t\t\n\t\t\t\tminWidth = parseInt(column.minWidth);\n\t\t\t\t\n\t\t\t\tif(typeof(width) == \"string\"){\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn fixedWidth;\n\t}\n\t\n\taddColumn(definition, before, nextToColumn){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\n\t\t\t\n\t\t\tthis._reIndexColumns();\n\t\t\t\n\t\t\tthis.dispatch(\"column-add\", definition, before, nextToColumn);\n\t\t\t\n\t\t\tif(this.layoutMode() != \"fitColumns\"){\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\t\t\t\n\t\t\tthis.redraw(true);\n\t\t\t\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t\t\n\t\t\tthis.rerenderColumns();\n\t\t\t\n\t\t\tresolve(column);\n\t\t});\n\t}\n\t\n\t//remove column from system\n\tderegisterColumn(column){\n\t\tvar field = column.getField(),\n\t\tindex;\n\t\t\n\t\t//remove from field list\n\t\tif(field){\n\t\t\tdelete this.columnsByField[field];\n\t\t}\n\t\t\n\t\t//remove from index list\n\t\tindex = this.columnsByIndex.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columnsByIndex.splice(index, 1);\n\t\t}\n\t\t\n\t\t//remove from column list\n\t\tindex = this.columns.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\t\t\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.redraw();\n\t}\n\t\n\trerenderColumns(update, silent){\n\t\tif(!this.redrawBlock){\n\t\t\tthis.renderer.rerenderColumns(update, silent);\n\t\t}else {\n\t\t\tif(update === false || (update === true && this.redrawBlockUpdate === null)){\n\t\t\t\tthis.redrawBlockUpdate = update;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockUpdate = null;\n\t}\n\t\n\trestoreRedraw(){\n\t\tthis.redrawBlock = false;\n\t\tthis.verticalAlignHeaders();\n\t\tthis.renderer.rerenderColumns(this.redrawBlockUpdate);\n\t\t\n\t}\n\t\n\t//redraw columns\n\tredraw(force){\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.verticalAlignHeaders();\n\t\t}\n\t\t\n\t\tif(force){\n\t\t\tthis.table.rowManager.resetScroll();\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t}\n\t\t\n\t\tif(!this.confirm(\"table-redrawing\", force)){\n\t\t\tthis.layoutRefresh(force);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-redraw\", force);\n\t\t\n\t\tthis.table.footerManager.redraw();\n\t}\n}\n\nclass BasicVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.verticalFillMode = \"fill\";\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\t\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\t\t\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\telement.scrollTop = 0;\n\t\telement.scrollLeft = 0;\n\t\t\n\t\telement.style.minWidth = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\t}\n\t\n\trenderRows() {\n\t\tvar element = this.tableElement,\n\t\tonlyGroupHeaders = true,\n\t\ttableFrag = document.createDocumentFragment(),\n\t\trows = this.rows();\n\t\t\n\t\trows.forEach((row, index) => {\n\t\t\tthis.styleRow(row, index);\n\t\t\trow.initialize(false, true);\n\t\t\t\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t\t\n\t\t\ttableFrag.appendChild(row.getElement());\n\t\t});\n\t\t\n\t\telement.appendChild(tableFrag);\n\t\t\n\t\trows.forEach((row) => {\n\t\t\trow.rendered();\n\t\t\t\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.calcHeight(true);\n\t\t\t}\n\t\t});\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.setCellHeight();\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else {\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n\t\n\trerenderRows(callback){\t\n\t\tthis.clearRows();\n\t\t\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t\t\n\t\tthis.renderRows();\n\t}\n\t\n\tscrollToRowNearestTop(row){\n\t\tvar rowTop = Helpers.elOffset(row.getElement()).top;\n\t\t\n\t\treturn !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\n\t}\n\t\n\tscrollToRow(row){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tthis.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n\t}\n\t\n\tvisibleRows(includingBuffer){\n\t\treturn this.rows();\n\t}\n\t\n}\n\nclass VirtualDomVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.verticalFillMode = \"fill\";\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\t\tthis.vDomBottom = 0; //hold position for last rendered row in the virtual DOM\n\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\t}\n\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\telement.style.paddingTop = \"\";\n\t\telement.style.paddingBottom = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\n\t\tthis.elementVertical.scrollTop = 0;\n\t\tthis.elementVertical.scrollLeft = 0;\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomTop = 0;\n\t\tthis.vDomBottom = 0;\n\t\tthis.vDomTopPad = 0;\n\t\tthis.vDomBottomPad = 0;\n\t\tthis.vDomScrollPosTop = 0;\n\t\tthis.vDomScrollPosBottom = 0;\n\t}\n\n\trenderRows(){\n\t\tthis._virtualRenderFill();\n\t}\n\n\trerenderRows(callback){\n\t\tvar scrollTop = this.elementVertical.scrollTop;\n\t\tvar topRow = false;\n\t\tvar topOffset = false;\n\n\t\tvar left = this.table.rowManager.scrollLeft;\n\n\t\tvar rows = this.rows();\n\n\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\n\t\t\tif(rows[i]){\n\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\n\t\t\t\t\ttopOffset = diff;\n\t\t\t\t\ttopRow = i;\n\t\t\t\t}else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trows.forEach((row) => {\n\t\t\trow.deinitializeHeight();\n\t\t});\n\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\n\t\tif(this.rows().length){\n\t\t\tthis._virtualRenderFill((topRow === false ? this.rows.length - 1 : topRow), true, topOffset || 0);\n\t\t}else {\n\t\t\tthis.clear();\n\t\t\tthis.table.rowManager.tableEmpty();\n\t\t}\n\n\t\tthis.scrollColumns(left);\n\t}\n\n\tscrollColumns(left){\n\t\tthis.table.rowManager.scrollHorizontal(left);\n\t}\n\n\tscrollRows(top, dir){\n\t\tvar topDiff = top - this.vDomScrollPosTop;\n\t\tvar bottomDiff = top - this.vDomScrollPosBottom;\n\t\tvar margin = this.vDomWindowBuffer * 2;\n\t\tvar rows = this.rows();\n\n\t\tthis.scrollTop = top;\n\n\t\tif(-topDiff > margin || bottomDiff > margin){\n\t\t\t//if big scroll redraw table;\n\t\t\tvar left = this.table.rowManager.scrollLeft;\n\t\t\tthis._virtualRenderFill(Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length));\n\t\t\tthis.scrollColumns(left);\n\t\t}else {\n\n\t\t\tif(dir){\n\t\t\t\t//scrolling up\n\t\t\t\tif(topDiff < 0){\n\t\t\t\t\tthis._addTopRow(rows, -topDiff);\n\t\t\t\t}\n\n\t\t\t\tif(bottomDiff < 0){\n\t\t\t\t\t//hide bottom row if needed\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeBottomRow(rows, -bottomDiff);\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else {\n\n\t\t\t\tif(bottomDiff >= 0){\n\t\t\t\t\tthis._addBottomRow(rows, bottomDiff);\n\t\t\t\t}\n\n\t\t\t\t//scrolling down\n\t\t\t\tif(topDiff >= 0){\n\t\t\t\t\t//hide top row if needed\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeTopRow(rows, topDiff);\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(){\n\t\tthis.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\tvar rowIndex = this.rows().indexOf(row);\n\n\t\treturn !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\n\t}\n\n\tscrollToRow(row){\n\t\tvar index = this.rows().indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tthis._virtualRenderFill(index, true);\n\t\t}\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\tvar topEdge = this.elementVertical.scrollTop,\n\t\tbottomEdge = this.elementVertical.clientHeight + topEdge,\n\t\ttopFound = false,\n\t\ttopRow = 0,\n\t\tbottomRow = 0,\n\t\trows = this.rows();\n\n\t\tif(includingBuffer){\n\t\t\ttopRow = this.vDomTop;\n\t\t\tbottomRow = this.vDomBottom;\n\t\t}else {\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\t\t\t\tif(rows[i]){\n\t\t\t\t\tif(!topFound){\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rows.slice(topRow, bottomRow + 1);\n\t}\n\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\n\t//full virtual render\n\t_virtualRenderFill(position, forceMove, offset) {\n\t\tvar\telement = this.tableElement,\n\t\tholder = this.elementVertical,\n\t\ttopPad = 0,\n\t\trowsHeight = 0,\n\t\trowHeight = 0,\n\t\theightOccupied = 0,\n\t\ttopPadHeight = 0,\n\t\ti = 0,\n\t\trows = this.rows(),\n\t\trowsCount = rows.length,\n\t\tindex = 0,\n\t\trow,\n\t\trowFragment,\n\t\trenderedRows = [],\n\t\ttotalRowsRendered = 0,\n\t\trowsToRender = 0,\n\t\tfixedHeight = this.table.rowManager.fixedHeight,\n\t\tcontainerHeight = this.elementVertical.clientHeight, \n\t\tavgRowHeight = this.table.options.rowHeight, \n\t\tresized = true;\n\n\t\tposition = position || 0;\n\n\t\toffset = offset || 0;\n\n\t\tif(!position){\n\t\t\tthis.clear();\n\t\t}else {\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\t\t//check if position is too close to bottom of table\n\t\t\theightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\n\n\t\t\tif(heightOccupied < containerHeight){\n\t\t\t\tposition -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\n\t\t\t\tif(position < 0){\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate initial pad\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\n\t\t\tposition -= topPad;\n\t\t}\n\n\t\tif(rowsCount && Helpers.elVisible(this.elementVertical)){\n\t\t\tthis.vDomTop = position;\n\t\t\tthis.vDomBottom = position -1;\n\n\t\t\tif(fixedHeight || this.table.options.maxHeight) {\n\t\t\t\tif(avgRowHeight) {\n\t\t\t\t\trowsToRender = (containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight);\n\t\t\t\t}\n\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil(rowsToRender));\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowsToRender = rowsCount;\n\t\t\t}\n\n\t\t\twhile(((rowsToRender == rowsCount || rowsHeight <= containerHeight + this.vDomWindowBuffer) || totalRowsRendered < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount -1) {\n\t\t\t\trenderedRows = [];\n\t\t\t\trowFragment = document.createDocumentFragment();\n\n\t\t\t\ti = 0;\n\n\t\t\t\twhile ((i < rowsToRender) && this.vDomBottom < rowsCount -1) {\t\n\t\t\t\t\tindex = this.vDomBottom + 1,\n\t\t\t\t\trow = rows[index];\n\n\t\t\t\t\tthis.styleRow(row, index);\n\n\t\t\t\t\trow.initialize(false, true);\n\t\t\t\t\tif(!row.heightInitialized && !this.table.options.rowHeight){\n\t\t\t\t\t\trow.clearCellHeight();\n\t\t\t\t\t}\n\n\t\t\t\t\trowFragment.appendChild(row.getElement());\n\t\t\t\t\trenderedRows.push(row);\n\t\t\t\t\tthis.vDomBottom ++;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t\tif(!renderedRows.length){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telement.appendChild(rowFragment);\n\t\t\t\t\n\t\t\t\t// NOTE: The next 3 loops are separate on purpose\n\t\t\t\t// This is to batch up the dom writes and reads which drastically improves performance \n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trow.rendered();\n\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.calcHeight(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.setCellHeight();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trowHeight = row.getHeight();\n\t\t\t\t\t\n\t\t\t\t\tif(totalRowsRendered < topPad){\n\t\t\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t\t\t}else {\n\t\t\t\t\t\trowsHeight += rowHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t}\n\t\t\t\t\ttotalRowsRendered++;\n\t\t\t\t});\n\n\t\t\t\tresized = this.table.rowManager.adjustTableSize();\n\t\t\t\tcontainerHeight = this.elementVertical.clientHeight;\n\t\t\t\tif(resized && (fixedHeight || this.table.options.maxHeight))\n\t\t\t\t{\n\t\t\t\t\tavgRowHeight = rowsHeight / totalRowsRendered;\n\t\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil((containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight)));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!position){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t\t//adjust row height to match average of rendered elements\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / totalRowsRendered);\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom -1);\n\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\n\t\t\t}else {\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == rowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t\t}\n\t\t\t\n\t\t\telement.style.paddingTop = this.vDomTopPad+\"px\";\n\t\t\telement.style.paddingBottom = this.vDomBottomPad+\"px\";\n\n\t\t\tif(forceMove){\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\n\t\t\t}\n\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\n\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\t\t\tif(this.elementVertical.scrollWidth > this.elementVertical.clientWidth && forceMove){\n\t\t\t\tthis.scrollTop += this.elementVertical.offsetHeight - containerHeight;\n\t\t\t}\n\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\t\tholder.scrollTop = this.scrollTop;\n\n\t\t\tthis.dispatch(\"render-virtual-fill\");\n\t\t}\n\t}\n\n\t_addTopRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomTop -1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tif(this.vDomTop){\n\t\t\t\tlet row = rows[index],\n\t\t\t\trowHeight, initialized;\n\n\t\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\t\ttable.insertBefore(row.getElement(), table.firstChild);\n\n\t\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.initialize();\n\n\t\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\t\tthis.vDomTop--;\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t\ti++;\n\n\t\t\t\t\t}else {\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad -= paddingAdjust;\n\n\t\t\tif(this.vDomTopPad < 0){\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t}\n\n\t\t\tif(index < 1){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop -= paddingAdjust;\n\t\t}\n\t}\n\n\t_removeTopRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomTop],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomTop++;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad += paddingAdjust;\n\t\t\tthis.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\n\t\t}\n\t}\n\n\t_addBottomRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomBottom + 1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[index],\n\t\t\trowHeight, initialized;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\ttable.appendChild(row.getElement());\n\n\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.initialize();\n\n\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tthis.vDomBottom++;\n\t\t\t\t\tindex++;\n\t\t\t\t\ti++;\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad -= paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0 || index == rows.length -1){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom += paddingAdjust;\n\t\t}\n\t}\n\n\t_removeBottomRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomBottom],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomBottom --;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad += paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\tthis.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom -= paddingAdjust;\n\t\t}\n\t}\n\n\t_quickNormalizeRowHeight(rows){\n\t\tfor(let row of rows){\n\t\t\trow.calcHeight();\n\t\t}\n\n\t\tfor(let row of rows){\n\t\t\trow.setCellHeight();\n\t\t}\n\t}\n}\n\nclass RowManager extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = this.createHolderElement(); //containing element\n\t\tthis.tableElement = this.createTableElement(); //table element\n\t\tthis.heightFixer = this.createTableElement(); //table element\n\t\tthis.placeholder = null; //placeholder element\n\t\tthis.placeholderContents = null; //placeholder element\n\t\t\n\t\tthis.firstRender = false; //handle first render\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\n\t\tthis.fixedHeight = false; //current rendering mode\n\t\t\n\t\tthis.rows = []; //hold row data objects\n\t\tthis.activeRowsPipeline = []; //hold calculation of active rows\n\t\tthis.activeRows = []; //rows currently available to on display in the table\n\t\tthis.activeRowsCount = 0; //count of active rows\n\t\t\n\t\tthis.displayRows = []; //rows currently on display in the table\n\t\tthis.displayRowsCount = 0; //count of display rows\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\t\tthis.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\n\t\t\n\t\tthis.dataPipeline = []; //hold data pipeline tasks\n\t\tthis.displayPipeline = []; //hold data display pipeline tasks\n\t\t\n\t\tthis.scrollbarWidth = 0;\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t//////////////// Setup Functions /////////////////\n\t\n\tcreateHolderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-tableholder\");\n\t\tel.setAttribute(\"tabindex\", 0);\n\t\t// el.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateTableElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-table\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitializePlaceholder(){\n\t\tvar placeholder = this.table.options.placeholder;\n\t\t\n\t\tif(typeof placeholder === \"function\"){\n\t\t\tplaceholder = placeholder.call(this.table);\n\t\t}\n\t\t\n\t\tplaceholder = this.chain(\"placeholder\", [placeholder], placeholder, placeholder) || placeholder;\n\t\t\n\t\t//configure placeholder element\n\t\tif(placeholder){\t\n\t\t\tlet el = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-placeholder\");\n\t\t\t\n\t\t\tif(typeof placeholder == \"string\"){\n\t\t\t\tlet contents = document.createElement(\"div\");\n\t\t\t\tcontents.classList.add(\"tabulator-placeholder-contents\");\n\t\t\t\tcontents.innerHTML = placeholder;\n\t\t\t\t\n\t\t\t\tel.appendChild(contents);\n\t\t\t\t\n\t\t\t\tthis.placeholderContents = contents;\n\t\t\t\t\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && placeholder instanceof HTMLElement){\n\t\t\t\t\n\t\t\t\tel.appendChild(placeholder);\n\t\t\t\tthis.placeholderContents = placeholder;\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Invalid placeholder provided, must be string or HTML Element\", placeholder);\n\t\t\t\t\n\t\t\t\tthis.el = null;\n\t\t\t}\n\t\t\t\n\t\t\tthis.placeholder = el;\n\t\t}\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return table element\n\tgetTableElement(){\n\t\treturn this.tableElement;\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializePlaceholder();\n\t\tthis.initializeRenderer();\n\t\t\n\t\t//initialize manager\n\t\tthis.element.appendChild(this.tableElement);\n\t\t\n\t\tthis.firstRender = true;\n\t\t\n\t\t//scroll header along with table body\n\t\tthis.element.addEventListener(\"scroll\", () => {\n\t\t\tvar left = this.element.scrollLeft,\n\t\t\tleftDir = this.scrollLeft > left,\n\t\t\ttop = this.element.scrollTop,\n\t\t\ttopDir = this.scrollTop > top;\n\t\t\t\n\t\t\t//handle horizontal scrolling\n\t\t\tif(this.scrollLeft != left){\n\t\t\t\tthis.scrollLeft = left;\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-horizontal\", left, leftDir);\n\t\t\t\tthis.dispatchExternal(\"scrollHorizontal\", left, leftDir);\n\t\t\t\t\n\t\t\t\tthis._positionPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\t//handle vertical scrolling\n\t\t\tif(this.scrollTop != top){\n\t\t\t\tthis.scrollTop = top;\n\t\t\t\t\n\t\t\t\tthis.renderer.scrollRows(top, topDir);\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-vertical\", top, topDir);\n\t\t\t\tthis.dispatchExternal(\"scrollVertical\", top, topDir);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t////////////////// Row Manipulation //////////////////\n\tfindRow(subject){\n\t\tif(typeof subject == \"object\"){\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t//subject is a HTML element of the row\n\t\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\t\treturn row.getElement() === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}else if(subject === null){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\treturn false;\n\t\t}else {\n\t\t\t//subject should be treated as the index of the row\n\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t\t\n\t\t\treturn match || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetRowFromDataObject(data){\n\t\tvar match = this.rows.find((row) => {\n\t\t\treturn row.data === data;\n\t\t});\n\t\t\n\t\treturn match || false;\n\t}\n\t\n\tgetRowFromPosition(position){\n\t\treturn this.getDisplayRows().find((row) => {\n\t\t\treturn row.getPosition() === position && row.isDisplayed();\n\t\t});\n\t}\n\t\n\tscrollToRow(row, position, ifVisible){\n\t\treturn this.renderer.scrollToRowPosition(row, position, ifVisible);\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\tsetData(data, renderInPosition, columnsChanged){\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\n\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\tthis._setDataActual(data, true);\n\t\t\t\t}else {\n\t\t\t\t\tthis.reRenderInPosition(() => {\n\t\t\t\t\t\tthis._setDataActual(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged && this.table.initialized){\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t\t}\n\t\t\t\tthis.resetScroll();\n\t\t\t\t\n\t\t\t\tthis._setDataActual(data);\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\t_setDataActual(data, renderInPosition){\n\t\tthis.dispatchExternal(\"dataProcessing\", data);\n\t\t\n\t\tthis._wipeElements();\n\t\t\n\t\tif(Array.isArray(data)){\n\t\t\tthis.dispatch(\"data-processing\", data);\n\t\t\t\n\t\t\tdata.forEach((def, i) => {\n\t\t\t\tif(def && typeof def === \"object\"){\n\t\t\t\t\tvar row = new Row(def, this);\n\t\t\t\t\tthis.rows.push(row);\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\n\t\t\t\n\t\t\tthis.dispatch(\"data-processed\", data);\n\t\t\tthis.dispatchExternal(\"dataProcessed\", data);\n\t\t}else {\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n\t\t}\n\t}\n\t\n\t_wipeElements(){\n\t\tthis.dispatch(\"rows-wipe\");\n\t\t\n\t\tthis.destroy();\n\t\t\n\t\tthis.adjustTableSize();\n\t\t\n\t\tthis.dispatch(\"rows-wiped\");\n\t}\n\t\n\tdestroy(){\n\t\tthis.rows.forEach((row) => {\n\t\t\trow.wipe();\n\t\t});\n\t\t\n\t\tthis.rows = [];\n\t\tthis.activeRows = [];\n\t\tthis.activeRowsPipeline = [];\n\t\tthis.activeRowsCount = 0;\n\t\tthis.displayRows = [];\n\t\tthis.displayRowsCount = 0;\n\t}\n\t\n\tdeleteRow(row, blockRedraw){\n\t\tvar allIndex = this.rows.indexOf(row),\n\t\tactiveIndex = this.activeRows.indexOf(row);\n\t\t\n\t\tif(activeIndex > -1){\n\t\t\tthis.activeRows.splice(activeIndex, 1);\n\t\t}\n\t\t\n\t\tif(allIndex > -1){\n\t\t\tthis.rows.splice(allIndex, 1);\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tvar displayIndex = rows.indexOf(row);\n\t\t\t\n\t\t\tif(displayIndex > -1){\n\t\t\t\trows.splice(displayIndex, 1);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatchExternal(\"rowDeleted\", row.getComponent());\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis.tableEmpty();\n\t\t}\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.getData());\n\t\t}\n\t}\n\t\n\taddRow(data, pos, index, blockRedraw){\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\t\treturn row;\n\t}\n\t\n\t//add multiple rows\n\taddRows(data, pos, index, refreshDisplayOnly){\n\t\tvar rows = [];\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tpos = this.findAddRowPos(pos);\n\t\t\t\n\t\t\tif(!Array.isArray(data)){\n\t\t\t\tdata = [data];\n\t\t\t}\n\t\t\t\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\n\t\t\t\tdata.reverse();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach((item, i) => {\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\n\t\t\t\trows.push(row);\n\t\t\t\tthis.dispatch(\"row-added\", row, item, pos, index);\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(refreshDisplayOnly ? \"displayPipeline\" : false, false, true);\n\t\t\t\n\t\t\tthis.regenerateRowPositions();\n\t\t\t\n\t\t\tif(rows.length){\n\t\t\t\tthis._clearPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\tresolve(rows);\n\t\t});\n\t}\n\t\n\tfindAddRowPos(pos){\n\t\tif(typeof pos === \"undefined\"){\n\t\t\tpos = this.table.options.addRowPos;\n\t\t}\n\t\t\n\t\tif(pos === \"pos\"){\n\t\t\tpos = true;\n\t\t}\n\t\t\n\t\tif(pos === \"bottom\"){\n\t\t\tpos = false;\n\t\t}\n\t\t\n\t\treturn pos;\n\t}\n\t\n\taddRowActual(data, pos, index, blockRedraw){\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t\ttop = this.findAddRowPos(pos),\n\t\tallIndex = -1,\n\t\tactiveIndex, chainResult;\n\t\t\n\t\tif(!index){\n\t\t\tchainResult = this.chain(\"row-adding-position\", [row, top], null, {index, top});\n\t\t\t\n\t\t\tindex = chainResult.index;\n\t\t\ttop = chainResult.top;\n\t\t}\n\t\t\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tindex = this.findRow(index);\n\t\t}\n\t\t\n\t\tindex = this.chain(\"row-adding-index\", [row, index, top], null, index);\n\t\t\n\t\tif(index){\n\t\t\tallIndex = this.rows.indexOf(index);\n\t\t}\n\t\t\n\t\tif(index && allIndex > -1){\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\n\t\t\t\n\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\tvar displayIndex = rows.indexOf(index);\n\t\t\t\t\n\t\t\t\tif(displayIndex > -1){\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(activeIndex > -1){\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\n\t\t\t}\n\t\t\t\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\n\t\t\t\n\t\t}else {\n\t\t\t\n\t\t\tif(top){\n\t\t\t\t\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.unshift(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.unshift(row);\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}else {\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.push(row);\n\t\t\t\tthis.rows.push(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.dispatchExternal(\"rowAdded\", row.getComponent());\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t}\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\treturn row;\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tthis.dispatch(\"row-move\", from, to, after);\n\t\t\n\t\tthis.moveRowActual(from, to, after);\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatch(\"row-moved\", from, to, after);\n\t\tthis.dispatchExternal(\"rowMoved\", from.getComponent());\n\t}\n\t\n\tmoveRowActual(from, to, after){\n\t\tthis.moveRowInArray(this.rows, from, to, after);\n\t\tthis.moveRowInArray(this.activeRows, from, to, after);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tthis.moveRowInArray(rows, from, to, after);\n\t\t});\n\t\t\n\t\tthis.dispatch(\"row-moving\", from, to, after);\n\t}\n\t\n\tmoveRowInArray(rows, from, to, after){\n\t\tvar\tfromIndex, toIndex, start, end;\n\t\t\n\t\tif(from !== to){\n\t\t\t\n\t\t\tfromIndex = rows.indexOf(from);\n\t\t\t\n\t\t\tif (fromIndex > -1) {\n\t\t\t\t\n\t\t\t\trows.splice(fromIndex, 1);\n\t\t\t\t\n\t\t\t\ttoIndex = rows.indexOf(to);\n\t\t\t\t\n\t\t\t\tif (toIndex > -1) {\n\t\t\t\t\t\n\t\t\t\t\tif(after){\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\n\t\t\t\t\t}else {\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else {\n\t\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//restyle rows\n\t\t\tif(rows === this.getDisplayRows()){\n\t\t\t\t\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\n\t\t\t\t\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tif(rows[i]){\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearData(){\n\t\tthis.setData([]);\n\t}\n\t\n\tgetRowIndex(row){\n\t\treturn this.findRowIndex(row, this.rows);\n\t}\n\t\n\tgetDisplayRowIndex(row){\n\t\tvar index = this.getDisplayRows().indexOf(row);\n\t\treturn index > -1 ? index : false;\n\t}\n\t\n\tnextDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tnextRow = false;\n\t\t\n\t\t\n\t\tif(index !== false && index < this.displayRowsCount -1){\n\t\t\tnextRow = this.getDisplayRows()[index+1];\n\t\t}\n\t\t\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn nextRow;\n\t}\n\t\n\tprevDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tprevRow = false;\n\t\t\n\t\tif(index){\n\t\t\tprevRow = this.getDisplayRows()[index-1];\n\t\t}\n\t\t\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn prevRow;\n\t}\n\t\n\tfindRowIndex(row, list){\n\t\tvar rowIndex;\n\t\t\n\t\trow = this.findRow(row);\n\t\t\n\t\tif(row){\n\t\t\trowIndex = list.indexOf(row);\n\t\t\t\n\t\t\tif(rowIndex > -1){\n\t\t\t\treturn rowIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tgetData(active, transform){\n\t\tvar output = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tif(row.type == \"row\"){\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(active){\n\t\tvar\toutput = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\toutput.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetDataCount(active){\n\t\tvar rows = this.getRows(active);\n\t\t\n\t\treturn rows.length;\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tthis.scrollLeft = left;\n\t\tthis.element.scrollLeft = left;\n\t\t\n\t\tthis.dispatch(\"scroll-horizontal\", left);\n\t}\n\t\n\tregisterDataPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.dataPipeline.push({handler, priority});\n\t\t\tthis.dataPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else {\n\t\t\tconsole.error(\"Data pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\tregisterDisplayPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.displayPipeline.push({handler, priority});\n\t\t\tthis.displayPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else {\n\t\t\tconsole.error(\"Display pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\t//set active data set\n\trefreshActiveData(handler, skipStage, renderInPosition){\n\t\tvar table = this.table,\n\t\tstage = \"\",\n\t\tindex = 0,\n\t\tcascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\n\t\t\n\t\tif(!this.table.destroyed){\n\t\t\tif(typeof handler === \"function\"){\n\t\t\t\tindex = this.dataPipeline.findIndex((item) => {\n\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(index > -1){\n\t\t\t\t\tstage = \"dataPipeline\";\n\t\t\t\t\t\n\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\tif(index == this.dataPipeline.length - 1){\n\t\t\t\t\t\t\tstage = \"display\";\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tindex = this.displayPipeline.findIndex((item) => {\n\t\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(index > -1){\n\t\t\t\t\t\tstage = \"displayPipeline\";\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\t\tif(index == this.displayPipeline.length - 1){\n\t\t\t\t\t\t\t\tstage = \"end\";\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.error(\"Unable to refresh data, invalid handler provided\", handler);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tstage = handler || \"all\";\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.redrawBlock){\n\t\t\t\tif(!this.redrawBlockRestoreConfig || (this.redrawBlockRestoreConfig && ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))))){\n\t\t\t\t\tthis.redrawBlockRestoreConfig = {\n\t\t\t\t\t\thandler: handler,\n\t\t\t\t\t\tskipStage: skipStage,\n\t\t\t\t\t\trenderInPosition: renderInPosition,\n\t\t\t\t\t\tstage:stage,\n\t\t\t\t\t\tindex:index,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t}else {\n\t\t\t\tif(Helpers.elVisible(this.element)){\n\t\t\t\t\tif(renderInPosition){\n\t\t\t\t\t\tthis.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!handler){\n\t\t\t\t\t\t\tthis.table.columnManager.renderer.renderColumns();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.renderTable();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\n\t\t\t\t\t\t\tthis.table.columnManager.redraw(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"data-refreshed\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\trefreshPipelines(handler, stage, index, renderInPosition){\n\t\tthis.dispatch(\"data-refreshing\");\n\t\t\n\t\tif(!handler){\n\t\t\tthis.activeRowsPipeline[0] = this.rows.slice(0);\n\t\t}\n\t\t\n\t\t//cascade through data refresh stages\n\t\tswitch(stage){\n\t\t\tcase \"all\":\n\t\t\t//handle case where all data needs refreshing\n\t\t\t\n\t\t\tcase \"dataPipeline\":\n\t\t\t\n\t\t\t\tfor(let i = index; i < this.dataPipeline.length; i++){\n\t\t\t\t\tlet result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\n\t\t\t\t\n\t\t\t\t\tthis.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\n\t\t\t\t}\n\t\t\t\n\t\t\t\tthis.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\tindex = 0;\n\t\t\t\tthis.resetDisplayRows();\n\t\t\t\n\t\t\tcase \"displayPipeline\":\n\t\t\t\tfor(let i = index; i < this.displayPipeline.length; i++){\n\t\t\t\t\tlet result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\n\t\t\t\t\n\t\t\t\t\tthis.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"end\":\n\t\t\t//case to handle scenario when trying to skip past end stage\n\t\t\t\tthis.regenerateRowPositions();\n\t\t}\n\t\t\n\t\tif(this.getDisplayRows().length){\n\t\t\tthis._clearPlaceholder();\n\t\t}\n\t}\n\t\n\t//regenerate row positions\n\tregenerateRowPositions(){\n\t\tvar rows = this.getDisplayRows();\n\t\tvar index = 1;\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif (row.type === \"row\"){\n\t\t\t\trow.setPosition(index);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tsetActiveRows(activeRows){\n\t\tthis.activeRows = this.activeRows = Object.assign([], activeRows);\n\t\tthis.activeRowsCount = this.activeRows.length;\n\t}\n\t\n\t//reset display rows array\n\tresetDisplayRows(){\n\t\tthis.displayRows = [];\n\t\t\n\t\tthis.displayRows.push(this.activeRows.slice(0));\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[0].length;\n\t}\n\t\n\t//set display row pipeline data\n\tsetDisplayRows(displayRows, index){\n\t\tthis.displayRows[index] = displayRows;\n\t\t\n\t\tif(index == this.displayRows.length -1){\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t\t}\n\t}\n\t\n\tgetDisplayRows(index){\n\t\tif(typeof index == \"undefined\"){\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\n\t\t}else {\n\t\t\treturn this.displayRows[index] || [];\n\t\t}\n\t}\n\t\n\tgetVisibleRows(chain, viewable){\n\t\tvar rows =  Object.assign([], this.renderer.visibleRows(!viewable));\n\t\t\n\t\tif(chain){\n\t\t\trows = this.chain(\"rows-visible\", [viewable], rows, rows);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t//repeat action across display rows\n\tdisplayRowIterator(callback){\n\t\tthis.activeRowsPipeline.forEach(callback);\n\t\tthis.displayRows.forEach(callback);\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t}\n\t\n\t//return only actual rows (not group headers etc)\n\tgetRows(type){\n\t\tvar rows = [];\n\t\t\n\t\tswitch(type){\n\t\t\tcase \"active\":\n\t\t\t\trows = this.activeRows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"visible\":\n\t\t\t\trows = this.getVisibleRows(false, true);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t///////////////// Table Rendering /////////////////\n\t//trigger rerender of table in current position\n\treRenderInPosition(callback){\n\t\tif(this.redrawBlock){\n\t\t\tif(callback){\n\t\t\t\tcallback();\n\t\t\t}else {\n\t\t\t\tthis.redrawBlockRenderInPosition = true;\n\t\t\t}\n\t\t}else {\n\t\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\t\n\t\t\tthis.renderer.rerenderRows(callback);\n\t\t\t\n\t\t\tif(!this.fixedHeight){\n\t\t\t\tthis.adjustTableSize();\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"renderComplete\");\n\t\t}\n\t}\n\t\n\tscrollBarCheck(){\n\t\tvar scrollbarWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar moving table when present\n\t\tif(this.element.scrollHeight > this.element.clientHeight){\n\t\t\tscrollbarWidth = this.element.offsetWidth - this.element.clientWidth;\n\t\t}\n\t\t\n\t\tif(scrollbarWidth !== this.scrollbarWidth){\n\t\t\tthis.scrollbarWidth = scrollbarWidth;\n\t\t\tthis.dispatch(\"scrollbar-vertical\", scrollbarWidth);\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": VirtualDomVertical,\n\t\t\t\"basic\": BasicVertical,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderVertical === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderVertical];\n\t\t}else {\n\t\t\trenderClass = this.table.options.renderVertical;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderMode = this.table.options.renderVertical;\n\t\t\t\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t\t\n\t\t\tif((this.table.element.clientHeight || this.table.options.height) && !(this.table.options.minHeight && this.table.options.maxHeight)){\n\t\t\t\tthis.fixedHeight = true;\n\t\t\t}else {\n\t\t\t\tthis.fixedHeight = false;\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\n\t\t}\n\t}\n\t\n\tgetRenderMode(){\n\t\treturn this.renderMode;\n\t}\n\t\n\trenderTable(){\n\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tthis._clearTable();\n\t\t\n\t\tif(this.displayRowsCount){\n\t\t\tthis.renderer.renderRows();\n\t\t\t\n\t\t\tif(this.firstRender){\n\t\t\t\tthis.firstRender = false;\n\t\t\t\t\n\t\t\t\tif(!this.fixedHeight){\n\t\t\t\t\tthis.adjustTableSize();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.layoutRefresh(true);\n\t\t\t}\n\t\t}else {\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t\t\n\t\tif(!this.fixedHeight){\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-layout\");\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis._showPlaceholder();\n\t\t}\n\t\t\n\t\tthis.scrollBarCheck();\n\t\t\n\t\tthis.dispatchExternal(\"renderComplete\");\n\t}\n\t\n\t//show scrollbars on empty table div\n\trenderEmptyScroll(){\n\t\tif(this.placeholder){\n\t\t\tthis.tableElement.style.display = \"none\";\n\t\t}else {\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t_clearTable(){\t\n\t\tthis._clearPlaceholder();\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.renderer.clearRows();\n\t}\n\t\n\ttableEmpty(){\n\t\tthis.renderEmptyScroll();\n\t\tthis._showPlaceholder();\n\t}\n\t\n\t_showPlaceholder(){\n\t\tif(this.placeholder){\n\t\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t\t}\n\t\t\t\n\t\t\tthis.initializePlaceholder();\n\t\t\t\n\t\t\tthis.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\t\t\t\n\t\t\tthis.getElement().appendChild(this.placeholder);\n\t\t\tthis._positionPlaceholder();\n\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t}\n\t\n\t_clearPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t}\n\t\t\n\t\t// clear empty table placeholder min\n\t\tthis.tableElement.style.minWidth = \"\";\n\t\tthis.tableElement.style.display = \"\";\n\t}\n\t\n\t_positionPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t\tthis.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\n\t\t\tthis.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\n\t\t}\n\t}\n\t\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else {\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\t\n\t//normalize height of active rows\n\tnormalizeHeight(){\n\t\tthis.activeRows.forEach(function(row){\n\t\t\trow.normalizeHeight();\n\t\t});\n\t}\n\t\n\t//adjust the height of the table holder to fit in the Tabulator element\n\tadjustTableSize(){\n\t\tlet initialHeight = this.element.clientHeight, minHeight;\n\t\tlet resized = false;\n\t\t\n\t\tif(this.renderer.verticalFillMode === \"fill\"){\n\t\t\tlet otherHeight =  Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n\t\t\t\n\t\t\tif(this.fixedHeight){\n\t\t\t\tminHeight = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\n\t\t\t\t\n\t\t\t\tconst height = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.minHeight = minHeight || \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.height = height;\n\t\t\t\tthis.element.style.maxHeight = height;\n\t\t\t} else {\n\t\t\t\tthis.element.style.height = \"\";\n\t\t\t\tthis.element.style.height =\n\t\t\t\tthis.table.element.clientHeight - otherHeight + \"px\";\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t\t}\n\t\t\t\n\t\t\tthis.renderer.resize();\n\t\t\t\n\t\t\t//check if the table has changed size when dealing with variable height tables\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\n\t\t\t\tresized = true;\n\t\t\t\tif(this.subscribed(\"table-resize\")){\n\t\t\t\t\tthis.dispatch(\"table-resize\");\n\t\t\t\t}else {\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t}\n\t\t\n\t\tthis._positionPlaceholder();\n\t\treturn resized;\n\t}\n\t\n\t//reinitialize all rows\n\treinitialize(){\n\t\tthis.rows.forEach(function(row){\n\t\t\trow.reinitialize(true);\n\t\t});\n\t}\n\t\n\t//prevent table from being redrawn\n\tblockRedraw (){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockRestoreConfig = false;\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw (){\n\t\tthis.redrawBlock = false;\n\t\t\n\t\tif(this.redrawBlockRestoreConfig){\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n\t\t\t\n\t\t\tthis.redrawBlockRestoreConfig = false;\n\t\t}else {\n\t\t\tif(this.redrawBlockRenderInPosition){\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.redrawBlockRenderInPosition = false;\n\t}\n\t\n\t//redraw table\n\tredraw (force){\n\t\tconst resized = this.adjustTableSize();\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\n\t\t\n\t\tif(!force){\n\t\t\tif(resized) {\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t\tthis.scrollHorizontal(this.scrollLeft);\n\t\t}else {\n\t\t\tthis.renderTable();\n\t\t}\n\t}\n\t\n\tresetScroll(){\n\t\tthis.element.scrollLeft = 0;\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tif(this.table.browser === \"ie\"){\n\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\tevent.initEvent(\"scroll\", false, true);\n\t\t\tthis.element.dispatchEvent(event);\n\t\t}else {\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t\t}\n\t}\n}\n\nclass FooterManager extends CoreFeature{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.active = false;\n\t\tthis.element = this.createElement(); //containing element\n\t\tthis.containerElement = this.createContainerElement(); //containing element\n\t\tthis.external = false;\n\t}\n\n\tinitialize(){\n\t\tthis.initializeElement();\n\t}\n\n\tcreateElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer\");\n\n\t\treturn el;\n\t}\n\n\t\n\tcreateContainerElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer-contents\");\n\n\t\tthis.element.appendChild(el);\n\n\t\treturn el;\n\t}\n\n\tinitializeElement(){\n\t\tif(this.table.options.footerElement){\n\n\t\t\tswitch(typeof this.table.options.footerElement){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\n\t\t\t\t\t\tthis.containerElement.innerHTML = this.table.options.footerElement;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.external = true;\n\t\t\t\t\t\tthis.containerElement = document.querySelector(this.table.options.footerElement);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.element = this.table.options.footerElement;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tappend(element){\n\t\tthis.activate();\n\n\t\tthis.containerElement.appendChild(element);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tprepend(element){\n\t\tthis.activate();\n\n\t\tthis.element.insertBefore(element, this.element.firstChild);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tremove(element){\n\t\telement.parentNode.removeChild(element);\n\t\tthis.deactivate();\n\t}\n\n\tdeactivate(force){\n\t\tif(!this.element.firstChild || force){\n\t\t\tif(!this.external){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\tthis.active = false;\n\t\t}\n\t}\n\n\tactivate(){\n\t\tif(!this.active){\n\t\t\tthis.active = true;\n\t\t\tif(!this.external){\n\t\t\t\tthis.table.element.appendChild(this.getElement());\n\t\t\t\tthis.table.element.style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(){\n\t\tthis.dispatch(\"footer-redraw\");\n\t}\n}\n\nclass InteractionManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.el = null;\n\t\t\n\t\tthis.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\n\t\t\n\t\tthis.previousTargets = {};\n\t\t\n\t\tthis.listeners = [\n\t\t\t\"click\",\n\t\t\t\"dblclick\",\n\t\t\t\"contextmenu\",\n\t\t\t\"mouseenter\",\n\t\t\t\"mouseleave\",\n\t\t\t\"mouseover\",\n\t\t\t\"mouseout\",\n\t\t\t\"mousemove\",\n\t\t\t\"mouseup\",\n\t\t\t\"mousedown\",\n\t\t\t\"touchstart\",\n\t\t\t\"touchend\",\n\t\t];\n\t\t\n\t\tthis.componentMap = {\n\t\t\t\"tabulator-cell\":\"cell\",\n\t\t\t\"tabulator-row\":\"row\",\n\t\t\t\"tabulator-group\":\"group\",\n\t\t\t\"tabulator-col\":\"column\",\n\t\t};\n\t\t\n\t\tthis.pseudoTrackers = {\n\t\t\t\"row\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"cell\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"group\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"column\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t};\n\t\t\n\t\tthis.pseudoTracking = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.el = this.table.element;\n\t\t\n\t\tthis.buildListenerMap();\n\t\tthis.bindSubscriptionWatchers();\n\t}\n\t\n\tbuildListenerMap(){\n\t\tvar listenerMap = {};\n\t\t\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistenerMap[listener] = {\n\t\t\t\thandler:null,\n\t\t\t\tcomponents:[],\n\t\t\t};\n\t\t});\n\t\t\n\t\tthis.listeners = listenerMap;\n\t}\n\t\n\tbindPseudoEvents(){\n\t\tObject.keys(this.pseudoTrackers).forEach((key) => {\n\t\t\tthis.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\n\t\t\tthis.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\n\t\t});\n\t\t\n\t\tthis.pseudoTracking = true;\n\t}\n\t\n\tpseudoMouseEnter(key, e, target){\n\t\tif(this.pseudoTrackers[key].target !== target){\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\n\t\t\t}\n\t\t\t\n\t\t\tthis.pseudoMouseLeave(key, e);\n\t\t\t\n\t\t\tthis.pseudoTrackers[key].target = target;\n\t\t\t\n\t\t\tthis.dispatch(key + \"-mouseenter\", e, target);\n\t\t}\n\t}\n\t\n\tpseudoMouseLeave(key, e){\n\t\tvar leaveList = Object.keys(this.pseudoTrackers),\n\t\tlinkedKeys = {\n\t\t\t\"row\":[\"cell\"],\n\t\t\t\"cell\":[\"row\"],\n\t\t};\n\t\t\n\t\tleaveList = leaveList.filter((item) => {\n\t\t\tvar links = linkedKeys[key];\n\t\t\treturn item !== key && (!links || (links && !links.includes(item)));\n\t\t});\n\t\t\n\t\t\n\t\tleaveList.forEach((key) => {\n\t\t\tvar target = this.pseudoTrackers[key].target;\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\n\t\t\t\t\n\t\t\t\tthis.pseudoTrackers[key].target = null;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t\n\tbindSubscriptionWatchers(){\n\t\tvar listeners = Object.keys(this.listeners),\n\t\tcomponents = Object.values(this.componentMap);\n\t\t\n\t\tfor(let comp of components){\n\t\t\tfor(let listener of listeners){\n\t\t\t\tlet key = comp + \"-\" + listener;\n\t\t\t\t\n\t\t\t\tthis.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\n\t}\n\t\n\tsubscriptionChanged(component, key, added){\n\t\tvar listener = this.listeners[key].components,\n\t\tindex = listener.indexOf(component),\n\t\tchanged = false;\n\t\t\n\t\tif(added){\n\t\t\tif(index === -1){\n\t\t\t\tlistener.push(component);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}else {\n\t\t\tif(!this.subscribed(component + \"-\" + key)){\n\t\t\t\tif(index > -1){\n\t\t\t\t\tlistener.splice(index, 1);\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking){\n\t\t\tthis.bindPseudoEvents();\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.updateEventListeners();\n\t\t}\n\t}\n\t\n\tupdateEventListeners(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.components.length){\n\t\t\t\tif(!listener.handler){\n\t\t\t\t\tlistener.handler = this.track.bind(this, key);\n\t\t\t\t\tthis.el.addEventListener(key, listener.handler);\n\t\t\t\t\t// this.el.addEventListener(key, listener.handler, {passive: true})\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(listener.handler){\n\t\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\t\tlistener.handler = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\ttrack(type, e){\n\t\tvar path = (e.composedPath && e.composedPath()) || e.path;\n\t\t\n\t\tvar targets = this.findTargets(path);\n\t\ttargets = this.bindComponents(type, targets);\n\t\t\n\t\tthis.triggerEvents(type, e, targets);\n\t\t\n\t\tif(this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length){\n\t\t\tthis.pseudoMouseLeave(\"none\", e);\n\t\t}\n\t}\n\t\n\tfindTargets(path){\n\t\tvar targets = {};\n\t\t\n\t\tlet componentMap = Object.keys(this.componentMap);\n\t\t\n\t\tfor (let el of path) {\n\t\t\tlet classList = el.classList ? [...el.classList] : [];\n\t\t\t\n\t\t\tlet abort = classList.filter((item) => {\n\t\t\t\treturn this.abortClasses.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tif(abort.length){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tlet elTargets = classList.filter((item) => {\n\t\t\t\treturn componentMap.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tfor (let target of elTargets) {\n\t\t\t\tif(!targets[this.componentMap[target]]){\n\t\t\t\t\ttargets[this.componentMap[target]] = el;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(targets.group && targets.group === targets.row){\n\t\t\tdelete targets.row;\n\t\t}\n\t\t\n\t\treturn targets;\n\t}\n\t\n\tbindComponents(type, targets){\n\t\t//ensure row component is looked up before cell\n\t\tvar keys = Object.keys(targets).reverse(),\n\t\tlistener = this.listeners[type],\n\t\tmatches = {},\n\t\ttargetMatches = {};\n\t\t\n\t\tfor(let key of keys){\n\t\t\tlet component,\n\t\t\ttarget = targets[key],\n\t\t\tpreviousTarget = this.previousTargets[key];\n\t\t\t\n\t\t\tif(previousTarget && previousTarget.target === target){\n\t\t\t\tcomponent = previousTarget.component;\n\t\t\t}else {\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\t\tif(listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")){\n\t\t\t\t\t\t\tlet rows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tcomponent = rows.find((row) => {\n\t\t\t\t\t\t\t\treturn row.getElement() === target;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")){\n\t\t\t\t\t\t\t\ttargets[key] = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"column\":\n\t\t\t\t\t\tif(listener.components.includes(\"column\")){\n\t\t\t\t\t\t\tcomponent = this.table.columnManager.findColumn(target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"cell\":\n\t\t\t\t\t\tif(listener.components.includes(\"cell\")){\n\t\t\t\t\t\t\tif(matches[\"row\"] instanceof Row){\n\t\t\t\t\t\t\t\tcomponent = matches[\"row\"].findCell(target);\n\t\t\t\t\t\t\t}else {\t\n\t\t\t\t\t\t\t\tif(targets[\"row\"]){\n\t\t\t\t\t\t\t\t\tconsole.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(component){\n\t\t\t\tmatches[key] = component;\n\t\t\t\ttargetMatches[key] = {\n\t\t\t\t\ttarget:target,\n\t\t\t\t\tcomponent:component,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.previousTargets = targetMatches;\n\t\t\n\t\treturn matches;\n\t}\n\t\n\ttriggerEvents(type, e, targets){\n\t\tvar listener = this.listeners[type];\n\n\t\tfor(let key in targets){\n\t\t\tif(targets[key] && listener.components.includes(key)){\n\t\t\t\tthis.dispatch(key + \"-\" + type, e, targets[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearWatchers(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.handler){\n\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\tlistener.handler = null;\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass ComponentFunctionBinder{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\n\t\tthis.bindings = {};\n\t}\n\n\tbind(type, funcName, handler){\n\t\tif(!this.bindings[type]){\n\t\t\tthis.bindings[type] = {};\n\t\t}\n\n\t\tif(this.bindings[type][funcName]){\n\t\t\tconsole.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler);\n\t\t}else {\n\t\t\tthis.bindings[type][funcName] = handler;\n\t\t}\n\t}\n\n\thandle(type, component, name){\n\t\tif(this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function'){\n\t\t\treturn this.bindings[type][name].bind(null, component);\n\t\t}else {\n\t\t\tif(name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")){\n\t\t\t\tif(this.table.options.debugInvalidComponentFuncs){\n\t\t\t\t\tconsole.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass DataLoader extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\n\t\tthis.loading = false;\n\t}\n\t\n\tinitialize(){}\n\t\n\tload(data, params, config, replace, silent, columnsChanged){\n\t\tvar requestNo = ++this.requestOrder;\n\n\t\tif(this.table.destroyed){\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\t\n\t\tthis.dispatchExternal(\"dataLoading\", data);\n\t\t\n\t\t//parse json data to array\n\t\tif (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(this.confirm(\"data-loading\", [data, params, config, silent])){\n\t\t\tthis.loading = true;\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.alertLoader();\n\t\t\t}\n\t\t\t\n\t\t\t//get params for request\n\t\t\tparams = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\n\t\t\t\n\t\t\tparams = this.mapParams(params, this.table.options.dataSendParams);\n\t\t\t\n\t\t\tvar result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\n\t\t\t\n\t\t\treturn result.then((response) => {\n\t\t\t\tif(!this.table.destroyed){\n\t\t\t\t\tif(!Array.isArray(response) && typeof response == \"object\"){\n\t\t\t\t\t\tresponse = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar rowData = this.chain(\"data-loaded\", response, null, response);\n\t\t\t\t\t\n\t\t\t\t\tif(requestNo == this.requestOrder){\n\t\t\t\t\t\tthis.clearAlert();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(rowData !== false){\n\t\t\t\t\t\t\tthis.dispatchExternal(\"dataLoaded\", rowData);\n\t\t\t\t\t\t\tthis.table.rowManager.setData(rowData,  replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - Table has been destroyed\");\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(\"Data Load Error: \", error);\n\t\t\t\tthis.dispatchExternal(\"dataLoadError\", error);\n\t\t\t\t\n\t\t\t\tif(!silent){\n\t\t\t\t\tthis.alertError();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.clearAlert();\n\t\t\t\t}, this.table.options.dataLoaderErrorTimeout);\n\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t}else {\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\n\t\t\t\n\t\t\tif(!data){\n\t\t\t\tdata = [];\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.rowManager.setData(data, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\t\n\tmapParams(params, map){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in params){\n\t\t\toutput[map.hasOwnProperty(key) ? map[key] : key] = params[key];\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tobjectInvert(obj){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in obj){\n\t\t\toutput[obj[key]] = key;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tblockActiveLoad(){\n\t\tthis.requestOrder++;\n\t}\n\t\n\talertLoader(){\n\t\tvar shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\n\t\t\n\t\tif(shouldLoad){\n\t\t\tthis.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n\t\t}\n\t}\n\t\n\talertError(){\n\t\tthis.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n\t}\n\t\n\tclearAlert(){\n\t\tthis.table.alertManager.clear();\n\t}\n}\n\nclass ExternalEventBus {\n\n\tconstructor(table, optionsList, debug){\n\t\tthis.table = table;\n\t\tthis.events = {};\n\t\tthis.optionsList = optionsList || {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push(callback);\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tdelete this.events[key];\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift(),\n\t\tresult;\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((callback, i) => {\n\t\t\t\tlet callResult = callback.apply(this.table, args);\n\n\t\t\t\tif(!i){\n\t\t\t\t\tresult = callResult;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"ExternalEvent:\" + args[0];\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n}\n\nclass InternalEventBus {\n\n\tconstructor(debug){\n\t\tthis.events = {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\n\t\tthis.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback, priority = 10000){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push({callback, priority});\n\n\t\tthis.events[key].sort((a, b) => {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item.callback === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_chain(key, args, initialValue, fallback){\n\t\tvar value = initialValue;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tvalue = subscriber.callback.apply(this, args.concat([value]));\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}else {\n\t\t\treturn typeof fallback === \"function\" ? fallback() : fallback;\n\t\t}\n\t}\n\n\t_confirm(key, args){\n\t\tvar confirmed = false;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tif(subscriber.callback.apply(this, args)){\n\t\t\t\t\tconfirmed = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn confirmed;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift();\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((subscriber) => {\n\t\t\t\tsubscriber.callback.apply(this, args);\n\t\t\t});\n\t\t}\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n\n\t_debugChain(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._chain(...arguments);\n\t}\n\n\t_debugConfirm(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._confirm(...arguments);\n\t}\n}\n\nclass DeprecationAdvisor extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\t_warnUser(){\n\t\tif(this.options(\"debugDeprecation\")){\n\t\t\tconsole.warn(...arguments);\n\t\t}\n\t}\n\t\n\tcheck(oldOption, newOption){\n\t\tvar msg = \"\";\n\t\t\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tmsg = \"Deprecated Setup Option - Use of the %c\" + oldOption + \"%c option is now deprecated\";\n\t\t\t\n\t\t\tif(newOption){\n\t\t\t\tmsg = msg + \", Please use the %c\" + newOption + \"%c option instead\";\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}else {\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t}else {\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tcheckMsg(oldOption, msg){\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tthis._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + oldOption + \" %c option is now deprecated, \" + msg, 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t\n\t\t\treturn false;\n\t\t}else {\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tmsg(msg){\n\t\tthis._warnUser(msg);\n\t}\n}\n\nclass TableRegistry {\n\n\tstatic register(table){\n\t\tTableRegistry.tables.push(table);\n\t}\n\n\tstatic deregister(table){\n\t\tvar index = TableRegistry.tables.indexOf(table);\n\n\t\tif(index > -1){\n\t\t\tTableRegistry.tables.splice(index, 1);\n\t\t}\n\t}\n\n\tstatic lookupTable(query, silent){\n\t\tvar results = [],\n\t\tmatches, match;\n\n\t\tif(typeof query === \"string\"){\n\t\t\tmatches = document.querySelectorAll(query);\n\n\t\t\tif(matches.length){\n\t\t\t\tfor(var i = 0; i < matches.length; i++){\n\t\t\t\t\tmatch = TableRegistry.matchElement(matches[i]);\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof Tabulator){\n\t\t\tmatch = TableRegistry.matchElement(query);\n\n\t\t\tif(match){\n\t\t\t\tresults.push(match);\n\t\t\t}\n\t\t}else if(Array.isArray(query)){\n\t\t\tquery.forEach(function(item){\n\t\t\t\tresults = results.concat(TableRegistry.lookupTable(item));\n\t\t\t});\n\t\t}else {\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tstatic matchElement(element){\n\t\treturn TableRegistry.tables.find(function(table){\n\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\n\t\t});\n\t}\n}\n\nTableRegistry.tables = [];\n\n//resize columns to fit data they contain\nfunction fitData(columns, forced){\n\tif(forced){\n\t\tthis.table.columnManager.renderer.reinitializeColumnWidths(columns);\n\t}\n\t\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}\n\n//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\nfunction fitDataGeneral(columns, forced){\n\tcolumns.forEach(function(column){\n\t\tcolumn.reinitializeWidth();\n\t});\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}\n\n//resize columns to fit data the contain and stretch last column to fill table\nfunction fitDataStretch(columns, forced){\n\tvar colsWidth = 0,\n\ttableWidth = this.table.rowManager.element.clientWidth,\n\tgap = 0,\n\tlastCol = false;\n\n\tcolumns.forEach((column, i) => {\n\t\tif(!column.widthFixed){\n\t\t\tcolumn.reinitializeWidth();\n\t\t}\n\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\n\t\t\tlastCol = column;\n\t\t}\n\n\t\tif(column.visible){\n\t\t\tcolsWidth += column.getWidth();\n\t\t}\n\t});\n\n\tif(lastCol){\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tlastCol.setWidth(0);\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\n\t\tif(gap > 0){\n\t\t\tlastCol.setWidth(gap);\n\t\t}else {\n\t\t\tlastCol.reinitializeWidth();\n\t\t}\n\t}else {\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t}\n}\n\n//resize columns to fit\nfunction fitColumns(columns, forced){\n\tvar totalWidth = this.table.rowManager.element.getBoundingClientRect().width; //table element width\n\tvar fixedWidth = 0; //total width of columns with a defined width\n\tvar flexWidth = 0; //total width available to flexible columns\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks across all columns\n\tvar flexColWidth = 0; //desired width of flexible columns\n\tvar flexColumns = []; //array of flexible width columns\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks across all columns\n\tvar overflowWidth = 0; //horizontal overflow width\n\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n\tfunction calcWidth(width){\n\t\tvar colWidth;\n\n\t\tif(typeof(width) == \"string\"){\n\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\n\t\t\t}else {\n\t\t\t\tcolWidth = parseInt(width);\n\t\t\t}\n\t\t}else {\n\t\t\tcolWidth = width;\n\t\t}\n\n\t\treturn colWidth;\n\t}\n\n\t//ensure columns resize to take up the correct amount of space\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\n\t\tvar oversizeCols = [],\n\t\toversizeSpace = 0,\n\t\tremainingSpace = 0,\n\t\tnextColWidth = 0,\n\t\tremainingFlexGrowUnits = flexGrowUnits,\n\t\tgap = 0,\n\t\tchangeUnits = 0,\n\t\tundersizeCols = [];\n\n\t\tfunction calcGrow(col){\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\n\t\t}\n\n\t\tfunction calcShrink(col){\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)));\n\t\t}\n\n\t\tcolumns.forEach(function(col, i){\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\t\t\tif(col.column.minWidth >= width){\n\t\t\t\toversizeCols.push(col);\n\t\t\t}else {\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\n\t\t\t\t\tcol.width = col.column.maxWidth;\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\n\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\n\t\t\t\t\tif(remainingFlexGrowUnits){\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tundersizeCols.push(col);\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(oversizeCols.length){\n\t\t\toversizeCols.forEach(function(col){\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\n\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t});\n\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\n\n\t\t\tgap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t}else {\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\n\n\t\t\tundersizeCols.forEach(function(column){\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t});\n\t\t}\n\n\t\treturn gap;\n\t}\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n\n\t//adjust for vertical scrollbar if present\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t}\n\n\tcolumns.forEach(function(column){\n\t\tvar width, minWidth, colWidth;\n\n\t\tif(column.visible){\n\n\t\t\twidth = column.definition.width;\n\t\t\tminWidth =  parseInt(column.minWidth);\n\n\t\t\tif(width){\n\n\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\tif(column.definition.widthShrink){\n\t\t\t\t\tfixedShrinkColumns.push({\n\t\t\t\t\t\tcolumn:column,\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\n\t\t\t\t\t});\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t}\n\n\t\t\t}else {\n\t\t\t\tflexColumns.push({\n\t\t\t\t\tcolumn:column,\n\t\t\t\t\twidth:0,\n\t\t\t\t});\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t}\n\t\t}\n\t});\n\n\t//calculate available space\n\tflexWidth = totalWidth - fixedWidth;\n\n\t//calculate correct column size\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n\t//generate column widths\n\tgapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t//increase width of last column to account for rounding errors\n\tif(flexColumns.length && gapFill > 0){\n\t\tflexColumns[flexColumns.length-1].width += gapFill;\n\t}\n\n\t//calculate space for columns to be shrunk into\n\tflexColumns.forEach(function(col){\n\t\tflexWidth -= col.width;\n\t});\n\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t//shrink oversize columns if there is no available space\n\tif(overflowWidth > 0 && flexShrinkUnits){\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t}\n\n\t//decrease width of last column to account for rounding errors\n\tif(gapFill && fixedShrinkColumns.length){\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\n\t}\n\n\tflexColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n\n\tfixedShrinkColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n}\n\nvar defaultModes = {\n\tfitData:fitData,\n\tfitDataFill:fitDataGeneral,\n\tfitDataTable:fitDataGeneral,\n\tfitDataStretch:fitDataStretch,\n\tfitColumns:fitColumns ,\n};\n\nclass Layout extends Module{\n\n\tconstructor(table){\n\t\tsuper(table, \"layout\");\n\n\t\tthis.mode = null;\n\n\t\tthis.registerTableOption(\"layout\", \"fitData\"); //layout type\n\t\tthis.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\n\n\t\tthis.registerColumnOption(\"widthGrow\");\n\t\tthis.registerColumnOption(\"widthShrink\");\n\t}\n\n\t//initialize layout system\n\tinitialize(){\n\t\tvar layout = this.table.options.layout;\n\n\t\tif(Layout.modes[layout]){\n\t\t\tthis.mode = layout;\n\t\t}else {\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\t\t\tthis.mode = 'fitData';\n\t\t}\n\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.widthGrow){\n\t\t\tcolumn.definition.widthGrow = Number(column.definition.widthGrow);\n\t\t}\n\t\tif(column.definition.widthShrink){\n\t\t\tcolumn.definition.widthShrink = Number(column.definition.widthShrink);\n\t\t}\n\t}\n\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\n\t//trigger table layout\n\tlayout(dataChanged){\n\t\tthis.dispatch(\"layout-refreshing\");\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged);\n\t\tthis.dispatch(\"layout-refreshed\");\n\t}\n}\n\nLayout.moduleName = \"layout\";\n\n//load defaults\nLayout.modes = defaultModes;\n\nvar defaultLangs = {\n\t\"default\":{ //hold default locale text\n\t\t\"groups\":{\n\t\t\t\"item\":\"item\",\n\t\t\t\"items\":\"items\",\n\t\t},\n\t\t\"columns\":{\n\t\t},\n\t\t\"data\":{\n\t\t\t\"loading\":\"Loading\",\n\t\t\t\"error\":\"Error\",\n\t\t},\n\t\t\"pagination\":{\n\t\t\t\"page_size\":\"Page Size\",\n\t\t\t\"page_title\":\"Show Page\",\n\t\t\t\"first\":\"First\",\n\t\t\t\"first_title\":\"First Page\",\n\t\t\t\"last\":\"Last\",\n\t\t\t\"last_title\":\"Last Page\",\n\t\t\t\"prev\":\"Prev\",\n\t\t\t\"prev_title\":\"Prev Page\",\n\t\t\t\"next\":\"Next\",\n\t\t\t\"next_title\":\"Next Page\",\n\t\t\t\"all\":\"All\",\n\t\t\t\"counter\":{\n\t\t\t\t\"showing\": \"Showing\",\n\t\t\t\t\"of\": \"of\",\n\t\t\t\t\"rows\": \"rows\",\n\t\t\t\t\"pages\": \"pages\",\n\t\t\t}\n\t\t},\n\t\t\"headerFilters\":{\n\t\t\t\"default\":\"filter column...\",\n\t\t\t\"columns\":{}\n\t\t}\n\t},\n};\n\nclass Localize extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.locale = \"default\"; //current locale\n\t\tthis.lang = false; //current language\n\t\tthis.bindings = {}; //update events to call when locale is changed\n\t\tthis.langList = {};\n\n\t\tthis.registerTableOption(\"locale\", false); //current system language\n\t\tthis.registerTableOption(\"langs\", {});\n\t}\n\n\tinitialize(){\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\n\n\t\tif(this.table.options.columnDefaults.headerFilterPlaceholder !== false){\n\t\t\tthis.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n\t\t}\n\n\t\tfor(let locale in this.table.options.langs){\n\t\t\tthis.installLang(locale, this.table.options.langs[locale]);\n\t\t}\n\n\t\tthis.setLocale(this.table.options.locale);\n\n\t\tthis.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLang\", this.getLang.bind(this));\n\t}\n\n\t//set header placeholder\n\tsetHeaderFilterPlaceholder(placeholder){\n\t\tthis.langList.default.headerFilters.default = placeholder;\n\t}\n\n\t//setup a lang description object\n\tinstallLang(locale, lang){\n\t\tif(this.langList[locale]){\n\t\t\tthis._setLangProp(this.langList[locale], lang);\n\t\t}else {\n\t\t\tthis.langList[locale] = lang;\n\t\t}\n\t}\n\n\t_setLangProp(lang, values){\n\t\tfor(let key in values){\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\n\t\t\t\tthis._setLangProp(lang[key], values[key]);\n\t\t\t}else {\n\t\t\t\tlang[key] = values[key];\n\t\t\t}\n\t\t}\n\t}\n\n\t//set current locale\n\tsetLocale(desiredLocale){\n\t\tdesiredLocale = desiredLocale || \"default\";\n\n\t\t//fill in any matching language values\n\t\tfunction traverseLang(trans, path){\n\t\t\tfor(var prop in trans){\n\t\t\t\tif(typeof trans[prop] == \"object\"){\n\t\t\t\t\tif(!path[prop]){\n\t\t\t\t\t\tpath[prop] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t\t}else {\n\t\t\t\t\tpath[prop] = trans[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//determining correct locale to load\n\t\tif(desiredLocale === true && navigator.language){\n\t\t\t//get local from system\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\n\t\t}\n\n\t\tif(desiredLocale){\n\t\t\t//if locale is not set, check for matching top level locale else use default\n\t\t\tif(!this.langList[desiredLocale]){\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\t\tif(this.langList[prefix]){\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\t\t\t\t\tdesiredLocale = prefix;\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\t\t\t\t\tdesiredLocale = \"default\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.locale = desiredLocale;\n\n\t\t//load default lang template\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\n\n\t\tif(desiredLocale != \"default\"){\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\n\t\t}\n\n\t\tthis.dispatchExternal(\"localized\", this.locale, this.lang);\n\n\t\tthis._executeBindings();\n\t}\n\n\t//get current locale\n\tgetLocale(locale){\n\t\treturn this.locale;\n\t}\n\n\t//get lang object for given local or current if none provided\n\tgetLang(locale){\n\t\treturn locale ? this.langList[locale] : this.lang;\n\t}\n\n\t//get text for current locale\n\tgetText(path, value){\n\t\tvar fillPath = value ? path + \"|\" + value : path,\n\t\tpathArray = fillPath.split(\"|\"),\n\t\ttext = this._getLangElement(pathArray, this.locale);\n\n\t\t// if(text === false){\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\t\t// }\n\n\t\treturn text || \"\";\n\t}\n\n\t//traverse langs object and find localized copy\n\t_getLangElement(path, locale){\n\t\tvar root = this.lang;\n\n\t\tpath.forEach(function(level){\n\t\t\tvar rootPath;\n\n\t\t\tif(root){\n\t\t\t\trootPath = root[level];\n\n\t\t\t\tif(typeof rootPath != \"undefined\"){\n\t\t\t\t\troot = rootPath;\n\t\t\t\t}else {\n\t\t\t\t\troot = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn root;\n\t}\n\n\t//set update binding\n\tbind(path, callback){\n\t\tif(!this.bindings[path]){\n\t\t\tthis.bindings[path] = [];\n\t\t}\n\n\t\tthis.bindings[path].push(callback);\n\n\t\tcallback(this.getText(path), this.lang);\n\t}\n\n\t//iterate through bindings and trigger updates\n\t_executeBindings(){\n\t\tfor(let path in this.bindings){\n\t\t\tthis.bindings[path].forEach((binding) => {\n\t\t\t\tbinding(this.getText(path), this.lang);\n\t\t\t});\n\t\t}\n\t}\n}\n\nLocalize.moduleName = \"localize\";\n\n//load defaults\nLocalize.langs = defaultLangs;\n\nclass Comms extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\n\tinitialize(){\n\t\tthis.registerTableFunction(\"tableComms\", this.receive.bind(this));\n\t}\n\n\tgetConnections(selectors){\n\t\tvar connections = [],\n\t\tconnection;\n\n\t\tconnection = TableRegistry.lookupTable(selectors);\n\n\t\tconnection.forEach((con) =>{\n\t\t\tif(this.table !== con){\n\t\t\t\tconnections.push(con);\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsend(selectors, module, action, data){\n\t\tvar connections = this.getConnections(selectors);\n\n\t\tconnections.forEach((connection) => {\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\n\t\t});\n\n\t\tif(!connections.length && selectors){\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t\t}\n\t}\n\n\treceive(table, module, action, data){\n\t\tif(this.table.modExists(module)){\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t\t}else {\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t\t}\n\t}\n}\n\nComms.moduleName = \"comms\";\n\nvar coreModules = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tLayoutModule: Layout,\n\tLocalizeModule: Localize,\n\tCommsModule: Comms\n});\n\nclass ModuleBinder {\n\t\n\tconstructor(tabulator, modules){\n\t\tthis.bindStaticFunctionality(tabulator);\n\t\tthis.bindModules(tabulator, coreModules, true);\n\t\t\n\t\tif(modules){\n\t\t\tthis.bindModules(tabulator, modules);\n\t\t}\n\t}\n\t\n\tbindStaticFunctionality(tabulator){\n\t\ttabulator.moduleBindings = {};\n\t\t\n\t\ttabulator.extendModule = function(name, property, values){\n\t\t\tif(tabulator.moduleBindings[name]){\n\t\t\t\tvar source = tabulator.moduleBindings[name][property];\n\t\t\t\t\n\t\t\t\tif(source){\n\t\t\t\t\tif(typeof values == \"object\"){\n\t\t\t\t\t\tfor(let key in values){\n\t\t\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t\t\t}\n\t\t};\n\t\t\n\t\ttabulator.registerModule = function(modules){\n\t\t\tif(!Array.isArray(modules)){\n\t\t\t\tmodules = [modules];\n\t\t\t}\n\t\t\t\n\t\t\tmodules.forEach((mod) => {\n\t\t\t\ttabulator.registerModuleBinding(mod);\n\t\t\t});\n\t\t};\n\t\t\n\t\ttabulator.registerModuleBinding = function(mod){\n\t\t\ttabulator.moduleBindings[mod.moduleName] = mod;\n\t\t};\n\t\t\n\t\ttabulator.findTable = function(query){\n\t\t\tvar results = TableRegistry.lookupTable(query, true);\n\t\t\treturn Array.isArray(results) && !results.length ? false : results;\n\t\t};\n\t\t\n\t\t//ensure that module are bound to instantiated function\n\t\ttabulator.prototype.bindModules = function(){\n\t\t\tvar orderedStartMods = [],\n\t\t\torderedEndMods = [],\n\t\t\tunOrderedMods = [];\n\t\t\t\n\t\t\tthis.modules = {};\n\t\t\t\n\t\t\tfor(var name in tabulator.moduleBindings){\n\t\t\t\tlet mod = tabulator.moduleBindings[name];\n\t\t\t\tlet module = new mod(this);\n\t\t\t\t\n\t\t\t\tthis.modules[name] = module;\n\t\t\t\t\n\t\t\t\tif(mod.prototype.moduleCore){\n\t\t\t\t\tthis.modulesCore.push(module);\n\t\t\t\t}else {\n\t\t\t\t\tif(mod.moduleInitOrder){\n\t\t\t\t\t\tif(mod.moduleInitOrder < 0){\n\t\t\t\t\t\t\torderedStartMods.push(module);\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\torderedEndMods.push(module);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}else {\n\t\t\t\t\t\tunOrderedMods.push(module);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\torderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\torderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\t\n\t\t\tthis.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\n\t\t};\n\t}\n\t\n\tbindModules(tabulator, modules, core){\n\t\tvar mods = Object.values(modules);\n\t\t\n\t\tif(core){\n\t\t\tmods.forEach((mod) => {\n\t\t\t\tmod.prototype.moduleCore = true;\n\t\t\t});\n\t\t}\n\t\t\n\t\ttabulator.registerModule(mods);\n\t}\n}\n\nclass Alert extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.element = this._createAlertElement();\n\t\tthis.msgElement = this._createMsgElement();\n\t\tthis.type = null;\n        \n\t\tthis.element.appendChild(this.msgElement);\n\t}\n    \n\t_createAlertElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert\");\n\t\treturn el;\n\t}\n    \n\t_createMsgElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert-msg\");\n\t\tel.setAttribute(\"role\", \"alert\");\n\t\treturn el;\n\t}\n    \n\t_typeClass(){\n\t\treturn \"tabulator-alert-state-\" + this.type;\n\t}\n    \n\talert(content, type = \"msg\"){\n\t\tif(content){\n\t\t\tthis.clear();\n            \n\t\t\tthis.type = type;\n            \n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\n            \n\t\t\tthis.msgElement.classList.add(this._typeClass());\n            \n\t\t\tif(typeof content === \"function\"){\n\t\t\t\tcontent = content();\n\t\t\t}\n            \n\t\t\tif(content instanceof HTMLElement){\n\t\t\t\tthis.msgElement.appendChild(content);\n\t\t\t}else {\n\t\t\t\tthis.msgElement.innerHTML = content;\n\t\t\t}\n            \n\t\t\tthis.table.element.appendChild(this.element);\n\t\t}\n\t}\n    \n\tclear(){\n\t\tif(this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n        \n\t\tthis.msgElement.classList.remove(this._typeClass());\n\t}\n}\n\nclass Tabulator {\n\t\n\tconstructor(element, options){\n\t\t\n\t\tthis.options = {};\n\t\t\n\t\tthis.columnManager = null; // hold Column Manager\n\t\tthis.rowManager = null; //hold Row Manager\n\t\tthis.footerManager = null; //holder Footer Manager\n\t\tthis.alertManager = null; //hold Alert Manager\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\n\t\tthis.externalEvents = null; //handle external event messaging\n\t\tthis.eventBus = null; //handle internal event messaging\n\t\tthis.interactionMonitor = false; //track user interaction\n\t\tthis.browser = \"\"; //hold current browser type\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\t\tthis.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\n\t\tthis.rtl = false; //check if the table is in RTL mode\n\t\tthis.originalElement = null; //hold original table element if it has been replaced\n\t\t\n\t\tthis.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\n\t\tthis.dataLoader = false; //bind component functions\n\t\t\n\t\tthis.modules = {}; //hold all modules bound to this table\n\t\tthis.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\n\t\tthis.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\n\t\t\n\t\tthis.deprecationAdvisor = new DeprecationAdvisor(this);\n\t\tthis.optionsList = new OptionsList(this, \"table constructor\");\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.destroyed = false;\n\t\t\n\t\tif(this.initializeElement(element)){\n\t\t\t\n\t\t\tthis.initializeCoreSystems(options);\n\t\t\t\n\t\t\t//delay table creation to allow event bindings immediately after the constructor\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._create();\n\t\t\t});\n\t\t}\n\t\t\n\t\tTableRegistry.register(this); //register table for inter-device communication\n\t}\n\t\n\tinitializeElement(element){\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\n\t\t\tthis.element = element;\n\t\t\treturn true;\n\t\t}else if(typeof element === \"string\"){\n\t\t\tthis.element = document.querySelector(element);\n\t\t\t\n\t\t\tif(this.element){\n\t\t\t\treturn true;\n\t\t\t}else {\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tinitializeCoreSystems(options){\n\t\tthis.columnManager = new ColumnManager(this);\n\t\tthis.rowManager = new RowManager(this);\n\t\tthis.footerManager = new FooterManager(this);\n\t\tthis.dataLoader = new DataLoader(this);\n\t\tthis.alertManager = new Alert(this);\n\t\t\n\t\tthis.bindModules();\n\t\t\n\t\tthis.options = this.optionsList.generate(Tabulator.defaultOptions, options);\n\t\t\n\t\tthis._clearObjectPointers();\n\t\t\n\t\tthis._mapDeprecatedFunctionality();\n\t\t\n\t\tthis.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\n\t\tthis.eventBus = new InternalEventBus(this.options.debugEventsInternal);\n\t\t\n\t\tthis.interactionMonitor = new InteractionManager(this);\n\t\t\n\t\tthis.dataLoader.initialize();\n\t\t// this.columnManager.initialize();\n\t\t// this.rowManager.initialize();\n\t\tthis.footerManager.initialize();\n\t}\n\t\n\t//convert deprecated functionality to new functions\n\t_mapDeprecatedFunctionality(){\n\t\t//all previously deprecated functionality removed in the 5.0 release\n\t}\n\t\n\t_clearSelection(){\n\t\t\n\t\tthis.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tif (window.getSelection) {\n\t\t\tif (window.getSelection().empty) {  // Chrome\n\t\t\t\twindow.getSelection().empty();\n\t\t\t} else if (window.getSelection().removeAllRanges) {  // Firefox\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t} else if (document.selection) {  // IE?\n\t\t\tdocument.selection.empty();\n\t\t}\n\t\t\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\n\t}\n\t\n\t//create table\n\t_create(){\n\t\tthis.externalEvents.dispatch(\"tableBuilding\");\n\t\tthis.eventBus.dispatch(\"table-building\");\n\t\t\n\t\tthis._rtlCheck();\n\t\t\n\t\tthis._buildElement();\n\t\t\n\t\tthis._initializeTable();\n\t\t\n\t\tthis._loadInitialData();\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tthis.externalEvents.dispatch(\"tableBuilt\");\n\t}\n\t\n\t_rtlCheck(){\n\t\tvar style = window.getComputedStyle(this.element);\n\t\t\n\t\tswitch(this.options.textDirection){\n\t\t\tcase\"auto\":\n\t\t\t\tif(style.direction !== \"rtl\"){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"rtl\":\n\t\t\t\tthis.element.classList.add(\"tabulator-rtl\");\n\t\t\t\tthis.rtl = true;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"ltr\":\n\t\t\t\tthis.element.classList.add(\"tabulator-ltr\");\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis.rtl = false;\n\t\t}\n\t}\n\t\n\t//clear pointers to objects in default config object\n\t_clearObjectPointers(){\n\t\tthis.options.columns = this.options.columns.slice(0);\n\t\t\n\t\tif(Array.isArray(this.options.data) && !this.options.reactiveData){\n\t\t\tthis.options.data = this.options.data.slice(0);\n\t\t}\n\t}\n\t\n\t//build tabulator element\n\t_buildElement(){\n\t\tvar element = this.element,\n\t\toptions = this.options,\n\t\tnewElement;\n\t\t\n\t\tif(element.tagName === \"TABLE\"){\n\t\t\tthis.originalElement = this.element;\n\t\t\tnewElement = document.createElement(\"div\");\n\t\t\t\n\t\t\t//transfer attributes to new element\n\t\t\tvar attributes = element.attributes;\n\t\t\t\n\t\t\t// loop through attributes and apply them on div\n\t\t\tfor(var i in attributes){\n\t\t\t\tif(typeof attributes[i] == \"object\"){\n\t\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// replace table with div element\n\t\t\telement.parentNode.replaceChild(newElement, element);\n\t\t\t\n\t\t\tthis.element = element = newElement;\n\t\t}\n\t\t\n\t\telement.classList.add(\"tabulator\");\n\t\telement.setAttribute(\"role\", \"grid\");\n\t\t\n\t\t//empty element\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\t//set table height\n\t\tif(options.height){\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\t\t\telement.style.height = options.height;\n\t\t}\n\t\t\n\t\t//set table min height\n\t\tif(options.minHeight !== false){\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\t\t\telement.style.minHeight = options.minHeight;\n\t\t}\n\t\t\n\t\t//set table maxHeight\n\t\tif(options.maxHeight !== false){\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\t\t\telement.style.maxHeight = options.maxHeight;\n\t\t}\n\t}\n\t\n\t//initialize core systems and modules\n\t_initializeTable(){\n\t\tvar element = this.element,\n\t\toptions = this.options;\n\t\t\n\t\tthis.interactionMonitor.initialize();\n\t\t\n\t\tthis.columnManager.initialize();\n\t\tthis.rowManager.initialize();\n\t\t\n\t\tthis._detectBrowser();\n\t\t\n\t\t//initialize core modules\n\t\tthis.modulesCore.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\t//build table elements\n\t\telement.appendChild(this.columnManager.getElement());\n\t\telement.appendChild(this.rowManager.getElement());\n\t\t\n\t\tif(options.footerElement){\n\t\t\tthis.footerManager.activate();\n\t\t}\n\t\t\n\t\tif(options.autoColumns && options.data){\n\t\t\t\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t\t}\n\t\t\n\t\t//initialize regular modules\n\t\tthis.modulesRegular.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\tthis.columnManager.setColumns(options.columns);\n\t\t\n\t\tthis.eventBus.dispatch(\"table-built\");\n\t}\n\t\n\t_loadInitialData(){\n\t\tthis.dataLoader.load(this.options.data);\n\t}\n\t\n\t//deconstructor\n\tdestroy(){\n\t\tvar element = this.element;\n\t\t\n\t\tthis.destroyed = true;\n\t\t\n\t\tTableRegistry.deregister(this); //deregister table from inter-device communication\n\t\t\n\t\tthis.eventBus.dispatch(\"table-destroy\");\n\t\t\n\t\t//clear row data\n\t\tthis.rowManager.destroy();\n\t\t\n\t\t//clear DOM\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\telement.classList.remove(\"tabulator\");\n\n\t\tthis.externalEvents.dispatch(\"tableDestroyed\");\n\t}\n\t\n\t_detectBrowser(){\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\n\t\t\n\t\tif(ua.indexOf(\"Trident\") > -1){\n\t\t\tthis.browser = \"ie\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\n\t\t\tthis.browser = \"edge\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\n\t\t\tthis.browser = \"firefox\";\n\t\t\tthis.browserSlow = false;\n\t\t}else if(ua.indexOf(\"Mac OS\") > -1){\n\t\t\tthis.browser = \"safari\";\n\t\t\tthis.browserSlow = false;\n\t\t}else {\n\t\t\tthis.browser = \"other\";\n\t\t\tthis.browserSlow = false;\n\t\t}\n\t\t\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(ua.slice(0,4));\n\t}\n\t\n\tinitGuard(func, msg){\n\t\tvar stack, line;\n\t\t\n\t\tif(this.options.debugInitialization && !this.initialized){\n\t\t\tif(!func){\n\t\t\t\tstack = new Error().stack.split(\"\\n\");\n\t\t\t\t\n\t\t\t\tline = stack[0] == \"Error\" ? stack[2] : stack[1];\n\t\t\t\t\n\t\t\t\tif(line[0] == \" \"){\n\t\t\t\t\tfunc = line.trim().split(\" \")[1].split(\".\")[1];\n\t\t\t\t}else {\n\t\t\t\t\tfunc = line.trim().split(\"@\")[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\n\t\t}\n\t\t\n\t\treturn this.initialized;\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\t//block table redrawing\n\tblockRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocking\");\n\t\t\n\t\tthis.rowManager.blockRedraw();\n\t\tthis.columnManager.blockRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocked\");\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-restoring\");\n\n\t\tthis.rowManager.restoreRedraw();\n\t\tthis.columnManager.restoreRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-restored\");\n\t}\n\t\n\t//load data\n\tsetData(data, params, config){\n\t\tthis.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, false);\n\t}\n\t\n\t//clear data\n\tclearData(){\n\t\tthis.initGuard();\n\t\t\n\t\tthis.dataLoader.blockActiveLoad();\n\t\tthis.rowManager.clearData();\n\t}\n\t\n\t//get table data array\n\tgetData(active){\n\t\treturn this.rowManager.getData(active);\n\t}\n\t\n\t//get table data array count\n\tgetDataCount(active){\n\t\treturn this.rowManager.getDataCount(active);\n\t}\n\t\n\t//replace data, keeping table in position with same sort\n\treplaceData(data, params, config){\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, true, true);\n\t}\n\t\n\t//update table data\n\tupdateData(data){\n\t\tvar responses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\tresponses++;\n\t\t\t\t\t\t\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\t\t\treject(\"Update Error - Unable to update row\", item, e);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else {\n\t\t\t\t\t\treject(\"Update Error - Unable to find row\", item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\taddData(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data){\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\n\t\t\t\t\t.then((rows) => {\n\t\t\t\t\t\tvar output = [];\n\t\t\t\t\t\n\t\t\t\t\t\trows.forEach(function(row){\n\t\t\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t\tresolve(output);\n\t\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//update table data\n\tupdateOrAddData(data){\n\t\tvar rows = [],\n\t\tresponses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tresponses++;\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(row.getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.rowManager.addRows(item)\n\t\t\t\t\t\t\t.then((newRows)=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//get row object\n\tgetRow(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else {\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//get row object\n\tgetRowFromPosition(position){\n\t\tvar row = this.rowManager.getRowFromPosition(position);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else {\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//delete row from table\n\tdeleteRow(index){\n\t\tvar foundRows = [];\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(!Array.isArray(index)){\n\t\t\tindex = [index];\n\t\t}\n\t\t\n\t\t//find matching rows\n\t\tfor(let item of index){\n\t\t\tlet row = this.rowManager.findRow(item, true);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\tfoundRows.push(row);\n\t\t\t}else {\n\t\t\t\tconsole.error(\"Delete Error - No matching row found:\", item);\n\t\t\t\treturn Promise.reject(\"Delete Error - No matching row found\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//sort rows into correct order to ensure smooth delete from table\n\t\tfoundRows.sort((a, b) => {\n\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t});\n\t\t\n\t\t//delete rows\n\t\tfoundRows.forEach((row) =>{\n\t\t\trow.delete();\n\t\t});\n\t\t\n\t\tthis.rowManager.reRenderInPosition();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\t//add row to table\n\taddRow(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\treturn this.rowManager.addRows(data, pos, index, true)\n\t\t\t.then((rows)=>{\n\t\t\t\treturn rows[0].getComponent();\n\t\t\t});\n\t}\n\t\n\t//update a row if it exists otherwise create it\n\tupdateOrAddRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn row.getComponent();\n\t\t\t\t});\n\t\t}else {\n\t\t\treturn this.rowManager.addRows(data)\n\t\t\t\t.then((rows)=>{\n\t\t\t\t\treturn rows[0].getComponent();\n\t\t\t\t});\n\t\t}\n\t}\n\t\n\t//update row data\n\tupdateRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn Promise.resolve(row.getComponent());\n\t\t\t\t});\n\t\t}else {\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Update Error - No matching row found\");\n\t\t}\n\t}\n\t\n\t//scroll to row in DOM\n\tscrollToRow(index, position, ifVisible){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn this.rowManager.scrollToRow(row, position, ifVisible);\n\t\t}else {\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Scroll Error - No matching row found\");\n\t\t}\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tvar fromRow = this.rowManager.findRow(from);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromRow){\n\t\t\tfromRow.moveToRow(to, after);\n\t\t}else {\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t\t}\n\t}\n\t\n\tgetRows(active){\n\t\treturn this.rowManager.getComponents(active);\t\n\t}\n\t\n\t//get position of row in table\n\tgetRowPosition(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getPosition();\n\t\t}else {\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t/////////////// Column Functions  ///////////////\n\tsetColumns(definition){\n\t\tthis.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\n\t\t\n\t\tthis.columnManager.setColumns(definition);\n\t}\n\t\n\tgetColumns(structured){\n\t\treturn this.columnManager.getComponents(structured);\n\t}\n\t\n\tgetColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tif(column){\n\t\t\treturn column.getComponent();\n\t\t}else {\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetColumnDefinitions(){\n\t\treturn this.columnManager.getDefinitionTree();\n\t}\n\t\n\tshowColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.show();\n\t\t}else {\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\thideColumn(field){\n\t\tvar column = this.columnManager.findColumn(field); \n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.hide();\n\t\t}else {\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\ttoggleColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tif(column.visible){\n\t\t\t\tcolumn.hide();\n\t\t\t}else {\n\t\t\t\tcolumn.show();\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\taddColumn(definition, before, field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.columnManager.addColumn(definition, before, column)\n\t\t\t.then((column) => {\n\t\t\t\treturn column.getComponent();\n\t\t\t});\n\t}\n\t\n\tdeleteColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.delete();\n\t\t}else {\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tupdateColumnDefinition(field, definition){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.updateDefinition(definition);\n\t\t}else {\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tvar fromColumn = this.columnManager.findColumn(from),\n\t\ttoColumn = this.columnManager.findColumn(to);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromColumn){\n\t\t\tif(toColumn){\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t\t}\n\t}\n\t\n\t//scroll to column in DOM\n\tscrollToColumn(field, position, ifVisible){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this.columnManager.findColumn(field);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\treturn this.columnManager.scrollToColumn(column, position, ifVisible);\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\t\t\t\treturn Promise.reject(\"Scroll Error - No matching column found\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//////////// General Public Functions ////////////\n\t//redraw list without updating data\n\tredraw(force){\n\t\tthis.initGuard();\n\n\t\tthis.columnManager.redraw(force);\n\t\tthis.rowManager.redraw(force);\n\t}\n\t\n\tsetHeight(height){\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\t\tthis.element.style.height = this.options.height;\n\t\tthis.rowManager.initializeRenderer();\n\t\tthis.rowManager.redraw();\n\t}\n\t\n\t//////////////////// Event Bus ///////////////////\n\t\n\ton(key, callback){\n\t\tthis.externalEvents.subscribe(key, callback);\n\t}\n\t\n\toff(key, callback){\n\t\tthis.externalEvents.unsubscribe(key, callback);\n\t}\n\t\n\tdispatchEvent(){\n\t\tvar args = Array.from(arguments);\n\t\targs.shift();\n\t\t\n\t\tthis.externalEvents.dispatch(...arguments);\n\t}\n\n\t//////////////////// Alerts ///////////////////\n\n\talert(contents, type){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.alert(contents, type);\n\t}\n\n\tclearAlert(){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.clear();\n\t}\n\t\n\t////////////// Extension Management //////////////\n\tmodExists(plugin, required){\n\t\tif(this.modules[plugin]){\n\t\t\treturn true;\n\t\t}else {\n\t\t\tif(required){\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule(key){\n\t\tvar mod = this.modules[key];\n\t\t\n\t\tif(!mod){\n\t\t\tconsole.error(\"Tabulator module not installed: \" + key);\n\t\t}\n\t\t\n\t\treturn mod;\n\t}\n}\n\n//default setup options\nTabulator.defaultOptions = defaultOptions;\n\n//bind modules and static functionality\nnew ModuleBinder(Tabulator);\n\n//tabulator with all modules installed\n\nclass TabulatorFull extends Tabulator {}\n\n//bind modules and static functionality\nnew ModuleBinder(TabulatorFull, modules);\n\nclass PseudoRow {\n\n\tconstructor (type){\n\t\tthis.type = type;\n\t\tthis.element = this._createElement();\n\t}\n\n\t_createElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-row\");\n\t\treturn el;\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tgetComponent(){\n\t\treturn false;\n\t}\n\n\tgetData(){\n\t\treturn {};\n\t}\n\n\tgetHeight(){\n\t\treturn this.element.outerHeight;\n\t}\n\n\tinitialize(){}\n\n\treinitialize(){}\n\n\tnormalizeHeight(){}\n\n\tgenerateCells(){}\n\n\treinitializeHeight(){}\n\n\tcalcHeight(){}\n\n\tsetCellHeight(){}\n\n\tclearCellHeight(){}\n}\n\nexport { Accessor as AccessorModule, Ajax as AjaxModule, CalcComponent, CellComponent, Clipboard as ClipboardModule, ColumnCalcs as ColumnCalcsModule, ColumnComponent, DataTree as DataTreeModule, Download as DownloadModule, Edit$1 as EditModule, Export as ExportModule, Filter as FilterModule, Format as FormatModule, FrozenColumns as FrozenColumnsModule, FrozenRows as FrozenRowsModule, GroupComponent, GroupRows as GroupRowsModule, History as HistoryModule, HtmlTableImport as HtmlTableImportModule, Import as ImportModule, Interaction as InteractionModule, Keybindings as KeybindingsModule, Menu as MenuModule, Module, MoveColumns as MoveColumnsModule, MoveRows as MoveRowsModule, Mutator as MutatorModule, Page as PageModule, Persistence as PersistenceModule, Popup$1 as PopupModule, Print as PrintModule, PseudoRow, ReactiveData as ReactiveDataModule, Renderer, ResizeColumns as ResizeColumnsModule, ResizeRows as ResizeRowsModule, ResizeTable as ResizeTableModule, ResponsiveLayout as ResponsiveLayoutModule, RowComponent, SelectRow as SelectRowModule, Sort as SortModule, Tabulator, TabulatorFull, Tooltip as TooltipModule, Validate as ValidateModule };\n//# sourceMappingURL=tabulator_esm.js.map\n","import {TabulatorFull as Tabulator, Module, ScrollToRowPosition, Options, RowComponent} from 'tabulator-tables';\n\nimport {IRow, IModule} from './innerTypes';\n\n//region Interfaces\nexport interface IActiveSelectionTabulator extends Tabulator {\n    options: Options & {\n        /** if true, use native tabulator selections rules without using active selection module */\n        selectionMode?: boolean;\n\n        /** Allow multi select rows (default true) */\n        multiSelect?: boolean;\n    };\n\n    /** Get active row by row node */\n    setActiveRow: (row: RowComponent | undefined | null, clearSelection?: boolean, scrollPosition?: ScrollToRowPosition) => void;\n\n    /** Get active row by key */\n    setActiveRowByKey: (key: string | number | undefined | null, clearSelection?: boolean, scrollPosition?: ScrollToRowPosition) => void;\n\n    /** Get active row key */\n    getActiveRowKey: () => string | number | undefined;\n\n    /** Get active row node */\n    getActiveRow: () => RowComponent | undefined;\n\n    /** Get active row data */\n    getActiveRowData: () => Record<string, unknown> | undefined;\n\n    /** Get first node row */\n    getFirstRow: () => RowComponent | undefined;\n\n    /** Get last node row */\n    getLastRow: () => RowComponent | undefined;\n\n    /** Set the table holder (table body) focus */\n    setTableBodyFocus: () => void;\n}\n\nexport interface IActiveSelectionModuleTableEvents {\n    activeRowChanged?: (row: RowComponent) => void;\n    keyUp?: (e: KeyboardEvent) => void | boolean;\n    keyDown?: (e: KeyboardEvent) => void | boolean;\n}\n\nexport interface IActiveSelectionModuleRow {\n    isActive: () => boolean;\n    setActive: (clearSelection?: boolean, scrollPosition?: ScrollToRowPosition) => void;\n}\n\nexport interface IRowComponent extends RowComponent, IActiveSelectionModuleRow {\n    _row: IRow;\n}\n\ntype ISelectMode = 'select' | 'deselect' | 'invert';\n\n//endregion\n\nexport class ActiveSelectionModule extends Module {\n    public table: IActiveSelectionTabulator;\n    private activeRow: RowComponent | undefined = undefined;\n\n    constructor(table: Tabulator) {\n        super(table);\n        this.table = table as IActiveSelectionTabulator;\n        const _this = this as unknown as IModule;\n        _this.registerTableOption('multiSelect', true);\n        _this.registerTableOption('selectionMode', false);\n        _this.registerTableFunction('getFirstRow', this.getFirstRow.bind(this));\n        _this.registerTableFunction('getLastRow', this.getLastRow.bind(this));\n        _this.registerTableFunction('setActiveRow', this.setActiveRow.bind(this));\n        _this.registerTableFunction('setActiveRowByKey', this.setActiveRowByKey.bind(this));\n        _this.registerTableFunction('getActiveRowKey', this.getActiveRowKey.bind(this));\n        _this.registerTableFunction('getActiveRow', this.getActiveRow.bind(this));\n        _this.registerTableFunction('getActiveRowData', this.getActiveRowData.bind(this));\n        _this.registerTableFunction('setTableBodyFocus', this.setTableBodyFocus.bind(this));\n\n        _this.registerComponentFunction('row', 'isActive', this.isRowActive.bind(this));\n        _this.registerComponentFunction('row', 'setActive', this.setRowActive.bind(this));\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    initialize() {\n        const _this = this as unknown as IModule;\n        _this.subscribe('row-click', this.rowClickHandler.bind(this));\n\n        this.bindEvents();\n        _this.subscribe('table-destroy', this.unbindEvents.bind(this));\n    }\n\n    rowClickHandler(e: PointerEvent, row: IRow) {\n        const options = this.table.options;\n        if (options.selectionMode) return;\n\n        const rowNode = row.getComponent();\n\n        if (!rowNode) return;\n\n        if (!options.multiSelect || (!e.ctrlKey && !e.shiftKey)) {\n            e.preventDefault();\n            this.setActiveRow(rowNode, true, 'nearest');\n            return;\n        }\n        if (e.ctrlKey && !e.shiftKey) {\n            e.preventDefault();\n            if (rowNode === this.getActiveRow()) {\n                const newNode = this.findNewActiveRowInSelection(rowNode);\n                rowNode.deselect();\n                this.setActiveRow(newNode, false);\n            } else if (rowNode.isSelected()) {\n                rowNode.deselect();\n            } else {\n                this.setActiveRow(rowNode, false);\n            }\n        } else if (!e.ctrlKey && e.shiftKey) {\n            e.preventDefault();\n            const curActiveRow = this.getActiveRow();\n            if (curActiveRow) this.selectRowsFromTo(curActiveRow, rowNode, 'select');\n            this.setActiveRow(rowNode, false);\n        }\n    }\n\n    public setActiveRow(row: RowComponent | undefined | null | false, clearSelection?: boolean, scrollPosition?: ScrollToRowPosition) {\n        const _this = this as unknown as IModule;\n        const prevActiveRow = this.activeRow;\n        this.activeRow = row || undefined;\n\n        if (prevActiveRow !== this.activeRow) {\n            if (clearSelection || !row) this.table.deselectRow();\n            prevActiveRow?.reformat();\n            if (row !==false) {\n                row?.reformat();\n                row?.select();\n                row?.getElement()?.classList?.add('tabulator-active');\n            }\n            prevActiveRow?.getElement()?.classList?.remove('tabulator-active');\n            _this.dispatchExternal('activeRowChanged', row);\n        }\n\n        if (scrollPosition && row && !row.isFrozen()) this.table.scrollToRow(row, scrollPosition, false).then();\n    }\n\n    public setActiveRowByKey(key: string | number | undefined | null, clearSelection?: boolean, scrollPosition?: ScrollToRowPosition) {\n        const row = key ? this.table.getRow(key) : undefined;\n        this.setActiveRow(row, clearSelection, scrollPosition);\n    }\n\n    public getActiveRowKey() {\n        return this.activeRow?.getIndex();\n    }\n\n    public getActiveRow() {\n        return this.activeRow;\n    }\n\n    public getActiveRowData() {\n        return this.getActiveRow()?.getData();\n    }\n\n    public isRowActive(row: RowComponent) {\n        return row === this.activeRow;\n    }\n\n    public setRowActive(row: RowComponent, clearSelection?: boolean, scrollPosition?: ScrollToRowPosition) {\n        this.setActiveRow(row, clearSelection, scrollPosition);\n    }\n\n    public getFirstRow() {\n        const rows = this.table.getRows('active');\n        if (!rows || rows.length === 0) return undefined;\n        for (const row of rows) {\n            if (!row.isFrozen()) return row;\n        }\n        return undefined;\n    }\n\n    public getLastRow() {\n        const rows = this.table.getRows('active');\n        if (!rows || rows.length === 0) return undefined;\n        return rows[rows.length - 1];\n    }\n\n    public getNextPageRow(row: IRowComponent | false | undefined) {\n        if (!row) return this.getFirstRow();\n        let clientHeight = this.table.rowManager.element.clientHeight - row._row.getHeight();\n        let curRow: IRowComponent | false = row;\n        let rowCandidate: RowComponent = row;\n        while (clientHeight > 0 && curRow) {\n            curRow = curRow.getNextRow() as IRowComponent;\n            if (!curRow) break;\n            clientHeight = clientHeight - curRow._row.getHeight();\n            rowCandidate = curRow;\n        }\n        return rowCandidate;\n    }\n\n    public getPrevPageRow(row: IRowComponent | false | undefined) {\n        if (!row) return this.getFirstRow();\n        let clientHeight = this.table.rowManager.element.clientHeight - row._row.getHeight();\n        let curRow: IRowComponent | false = row;\n        let rowCandidate: RowComponent = row;\n        while (clientHeight > 0 && curRow) {\n            curRow = curRow.getPrevRow() as IRowComponent;\n            if (!curRow) break;\n            clientHeight = clientHeight - curRow._row.getHeight();\n            rowCandidate = curRow;\n        }\n        return rowCandidate;\n    }\n\n    /** We find among the selected rows the one that will become active when the current rows is deactivated */\n    private findNewActiveRowInSelection(row: RowComponent) {\n        const selectedRows = this.table.getSelectedRows();\n        if (selectedRows.length === 1) return undefined;\n\n        let newRow: RowComponent | undefined = undefined;\n        let activeReached = false;\n        for (const curRow of selectedRows) {\n            if (curRow === row) {\n                activeReached = true;\n                continue;\n            }\n\n            newRow = curRow;\n            if (activeReached && newRow) break;\n        }\n\n        return newRow;\n    }\n\n    /** Select rows from startRow to endRow */\n    private selectRowsFromTo(rowStart?: RowComponent | false, rowEnd?: RowComponent | false, mode?: ISelectMode) {\n        mode = mode ?? 'select';\n        if (!rowStart || !rowEnd) return;\n        if (rowStart === rowEnd) {\n            rowStart.select();\n            return;\n        }\n\n        const rowNodes = this.table.getRows('active');\n        this.recursiveSelectNode(rowStart, rowEnd, rowNodes, undefined, mode, this.table.options.dataTree);\n    }\n\n    private recursiveSelectNode(\n        rowStart: RowComponent | false,\n        rowEnd: RowComponent | false,\n        nodes: RowComponent[],\n        inProcess: boolean | undefined,\n        mode: ISelectMode,\n        recursive?: boolean\n    ) {\n        for (const node of nodes) {\n            if (node === rowStart || node === rowEnd) {\n                if (typeof inProcess === 'undefined') {\n                    inProcess = true;\n                } else {\n                    this.selectNode(node, mode);\n                    inProcess = false;\n                }\n            }\n\n            if (inProcess) this.selectNode(node, mode);\n            if (inProcess === false) return false;\n\n            if (recursive) inProcess = this.recursiveSelectNode(rowStart, rowEnd, node.getTreeChildren(), inProcess, mode, recursive);\n        }\n\n        return inProcess;\n    }\n\n    private selectNode(node: RowComponent, mode: ISelectMode) {\n        if (mode === 'select' || (mode === 'invert' && !node.isSelected())) node.select();\n        else if (mode === 'deselect' || (mode === 'invert' && node.isSelected())) node.deselect();\n    }\n\n    //region Keyboard events\n    private bindEvents() {\n        this.table.element.addEventListener('keydown', this.onKeyDownHandler.bind(this));\n        this.table.element.addEventListener('keyup', this.onKeyUpHandler.bind(this));\n    }\n\n    private unbindEvents() {\n        this.table.element.removeEventListener('keydown', this.onKeyDownHandler.bind(this));\n        this.table.element.removeEventListener('keyup', this.onKeyUpHandler.bind(this));\n    }\n\n    private onKeyDownHandler(e: KeyboardEvent) {\n        const options = this.table.options;\n        if (options.selectionMode) return;\n\n        const _this = this as unknown as IModule;\n        _this.dispatchExternal('keyDown', e);\n\n        switch (e.key) {\n            case 'Shift':\n                return this.onShiftKeyDown();\n            case 'ArrowUp':\n                return this.onKeyPressArrowUp(e);\n            case 'ArrowDown':\n                return this.onKeyPressArrowDown(e);\n            case 'ArrowRight':\n                return this.onKeyPressArrowRight(e);\n            case 'ArrowLeft':\n                return this.onKeyPressArrowLeft(e);\n            case 'PageDown':\n                return this.onKeyPressPageDown(e);\n            case 'PageUp':\n                return this.onKeyPressPageUp(e);\n            case 'Home':\n                return this.onKeyPressHome(e);\n            case 'End':\n                return this.onKeyPressEnd(e);\n            case 'a':\n            case 'A':\n            case 'ф':\n            case 'Ф':\n                return this.onKeyPressA(e);\n        }\n    }\n\n    private onKeyUpHandler(e: KeyboardEvent) {\n        const options = this.table.options;\n        if (options.selectionMode) return;\n\n        const _this = this as unknown as IModule;\n        _this.dispatchExternal('keyUp', e);\n\n        if (e.key === 'Shift') this.onShiftKeyUp();\n    }\n\n    private onKeyPressArrowUp(e: KeyboardEvent) {\n        if (e.ctrlKey) {\n            this.onKeyPressHome(e);\n            return;\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        let nextRow: RowComponent | false | undefined;\n        const prevRow = this.getActiveRow();\n        if (prevRow) nextRow = prevRow.getPrevRow() || this.getFirstRow();\n        else nextRow = this.getFirstRow();\n\n        const multiSelect = this.table.options.multiSelect;\n\n        if (!multiSelect || !e.shiftKey) this.setActiveRow(nextRow, true, 'top');\n        else {\n            if (prevRow !== nextRow && nextRow?.isSelected()) prevRow?.deselect();\n            this.setActiveRow(nextRow, false, 'top');\n        }\n    }\n\n    private onKeyPressArrowDown(e: KeyboardEvent) {\n        if (e.ctrlKey) {\n            this.onKeyPressEnd(e);\n            return;\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        let nextRow: RowComponent | false | undefined;\n        const prevRow = this.getActiveRow();\n        if (prevRow) nextRow = prevRow.getNextRow() || this.getLastRow();\n        else nextRow = this.getFirstRow();\n\n        const multiSelect = this.table.options.multiSelect;\n\n        if (!multiSelect || !e.shiftKey) this.setActiveRow(nextRow, true, 'bottom');\n        else {\n            if (prevRow !== nextRow && nextRow?.isSelected()) prevRow?.deselect();\n            this.setActiveRow(nextRow, false, 'bottom');\n        }\n    }\n\n    private onKeyPressArrowLeft(e: KeyboardEvent) {\n        if (!this.table.options.dataTree) return;\n        e.preventDefault();\n        e.stopPropagation();\n\n        const curRow = this.getActiveRow();\n        if (!curRow) return;\n        if (curRow.isTreeExpanded()) curRow.treeCollapse();\n    }\n\n    private onKeyPressArrowRight(e: KeyboardEvent) {\n        if (!this.table.options.dataTree) return;\n        e.preventDefault();\n        e.stopPropagation();\n\n        const curRow = this.getActiveRow();\n        if (!curRow) return;\n        if (!curRow.isTreeExpanded()) curRow?.treeExpand();\n    }\n\n    private onKeyPressPageDown(e: KeyboardEvent) {\n        e.preventDefault();\n        e.stopPropagation();\n        const prevRow = this.getActiveRow() ?? this.getLastRow();\n        const nextRow = this.getNextPageRow(prevRow as IRowComponent);\n\n        const multiSelect = this.table.options.multiSelect;\n\n        if (!multiSelect || !e.shiftKey) this.setActiveRow(nextRow, true, 'bottom');\n        else {\n            this.selectRowsFromTo(prevRow, nextRow, 'select');\n            this.setActiveRow(nextRow, false, 'bottom');\n        }\n    }\n\n    private onKeyPressPageUp(e: KeyboardEvent) {\n        e.preventDefault();\n        e.stopPropagation();\n        const prevRow = this.getActiveRow() ?? this.getFirstRow();\n        const nextRow = this.getPrevPageRow(prevRow as IRowComponent);\n\n        const multiSelect = this.table.options.multiSelect;\n\n        if (!multiSelect || !e.shiftKey) this.setActiveRow(nextRow, true, 'top');\n        else {\n            this.selectRowsFromTo(prevRow, nextRow, 'select');\n            this.setActiveRow(nextRow, false, 'top');\n        }\n    }\n\n    private onKeyPressHome(e: KeyboardEvent) {\n        e.preventDefault();\n        e.stopPropagation();\n        const prevRow = this.getActiveRow() ?? this.getFirstRow();\n        const nextRow = this.getFirstRow();\n\n        const multiSelect = this.table.options.multiSelect;\n\n        if (!multiSelect || !e.shiftKey) this.setActiveRow(nextRow, true, 'top');\n        else {\n            this.selectRowsFromTo(prevRow, nextRow, 'select');\n            this.setActiveRow(nextRow, false, 'top');\n        }\n    }\n\n    private onKeyPressEnd(e: KeyboardEvent) {\n        e.preventDefault();\n        e.stopPropagation();\n        const prevRow = this.getActiveRow() ?? this.getLastRow();\n        const nextRow = this.getLastRow();\n\n        const multiSelect = this.table.options.multiSelect;\n\n        if (!multiSelect || !e.shiftKey) this.setActiveRow(nextRow, true, 'bottom');\n        else {\n            this.selectRowsFromTo(prevRow, nextRow, 'select');\n            this.setActiveRow(nextRow, false, 'bottom');\n        }\n    }\n\n    private onKeyPressA(e: KeyboardEvent) {\n        const multiSelect = this.table.options.multiSelect;\n\n        if (!multiSelect || !e.ctrlKey) return;\n        e.preventDefault();\n        e.stopPropagation();\n        this.selectRowsFromTo(this.getFirstRow(), this.getLastRow(), 'select');\n    }\n\n    private onShiftKeyDown() {\n        this.table.element.style.userSelect = 'none';\n    }\n\n    private onShiftKeyUp() {\n        this.table.element.style.userSelect = 'initial';\n    }\n\n    //endregion\n\n    public setTableBodyFocus() {\n        const body = this.table.element.querySelector('.tabulator-tableholder') as HTMLDivElement;\n        if (!body) return;\n        setTimeout(() => {\n            body.focus({preventScroll: true});\n        }, 300);\n    }\n}\n\nActiveSelectionModule.moduleName = 'activeSelection';\n","import {TabulatorFull as Tabulator, Module, Options, ColumnDefinition} from 'tabulator-tables';\r\nimport {IModule} from './innerTypes';\r\nimport {AnyType} from \"@krinopotam/service-types\";\r\nimport {ITabulatorFilterFunc} from \"@src/tabulatorBase\";\r\n\r\n//region Interfaces\r\nexport interface IAdvancedHeaderFilterTabulator extends Tabulator {\r\n    options: Options & {\r\n        /** The parent key field name */\r\n        dataTreeParentField?: string | number;\r\n\r\n        /** Hide HeaderFilter when grid is initialized */\r\n        showHeaderFilter?: boolean\r\n    };\r\n\r\n    getBaseTreeDataFilter: (matchFunction: ITabulatorFilterFunc | undefined) => ITabulatorFilterFunc;\r\n\r\n    /** Show/hide inline filter */\r\n    toggleHeaderFilter: (show?: boolean) => boolean\r\n\r\n    /** Return header filter visible status */\r\n    isHeaderFilterVisible: () => boolean\r\n\r\n    /** Return header filter available (if there is at least one column with headerFilter) */\r\n    isHeaderFilterAvailable: () => boolean\r\n}\r\n\r\n//endregion\r\n\r\nexport class AdvancedHeaderFilterModule extends Module {\r\n    private table: IAdvancedHeaderFilterTabulator;\r\n\r\n    private headerFilterStatus: boolean = false;\r\n    private curHeaderFilterValues: Record<string, unknown> = {};\r\n    private filteredCacheMap: Record<string, Record<string | number, boolean>> = {};\r\n\r\n    /** The field that was last filtered by the user */\r\n    private lastFilteredField: string | undefined;\r\n\r\n    constructor(table: Tabulator) {\r\n        super(table);\r\n\r\n        this.table = table as IAdvancedHeaderFilterTabulator;\r\n        const _this = this as unknown as IModule;\r\n\r\n\r\n        /** for debug\r\n        const viewPort = document.createElement(\"button\");\r\n        viewPort.innerHTML = \"Toggle header\"\r\n        document.body.appendChild(viewPort);\r\n        viewPort.onclick = () => {\r\n            this.toggleHeaderFilter()\r\n        }\r\n        */\r\n\r\n        _this.registerTableOption('dataTreeParentField', undefined);\r\n        _this.registerTableOption('showHeaderFilter', undefined);\r\n        _this.registerTableFunction('getBaseTreeDataFilter', this.getBaseTreeDataFilter.bind(this));\r\n        _this.registerTableFunction('toggleHeaderFilter', this.toggleHeaderFilter.bind(this));\r\n        _this.registerTableFunction('isHeaderFilterVisible', this.isHeaderFilterVisible.bind(this));\r\n        _this.registerTableFunction('isHeaderFilterAvailable', this.isHeaderFilterAvailable.bind(this));\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    initialize() {\r\n        const _this = this as unknown as IModule;\r\n        _this.subscribe('filter-changed', this.onFilterChanged.bind(this));\r\n\r\n        if (this.table.options.dataTree) {\r\n            const filterFunctions = this.wrapDefaultFilters();\r\n            Tabulator.extendModule('filter', 'filters', filterFunctions);\r\n        }\r\n\r\n        this.table.on('tableBuilt', this.onTableBuiltHandler.bind(this))\r\n    }\r\n\r\n    public onTableBuiltHandler() {\r\n        if (this.table.options.dataTree) this.wrapUserFilters()\r\n\r\n        if (!this.table.options.showHeaderFilter) this.toggleHeaderFilter(false, true);\r\n        else this.headerFilterStatus = true;\r\n    }\r\n\r\n    /** Wrap default filters to treeData filter */\r\n    private wrapDefaultFilters() {\r\n        const newDefFilters: typeof defaultFilters = {};\r\n        for (const key in defaultFilters) {\r\n            newDefFilters[key] = this.getBaseTreeDataFilter(defaultFilters[key]);\r\n        }\r\n\r\n        return newDefFilters;\r\n    }\r\n\r\n    private wrapUserFilters() {\r\n        const filterColumns = this.table.modules.filter.headerFilterColumns\r\n        for (const column of filterColumns) {\r\n            if (typeof column.definition?.headerFilterFunc !== 'function') continue\r\n            column.definition.headerFilterFunc = this.getBaseTreeDataFilter(column.definition.headerFilterFunc)\r\n        }\r\n    }\r\n\r\n    public getBaseTreeDataFilter(matchFunction: ITabulatorFilterFunc | undefined) {\r\n        if (!matchFunction) return undefined;\r\n        const filter = (filterVal: AnyType, rowValue: AnyType, rowData: AnyType, filterParams: AnyType, force?: boolean) => {\r\n            const fieldName = this.getFilterFieldName(filterVal, rowValue, rowData, filterParams);\r\n            const indexField = this.table.options.index ?? 'id';\r\n            const childrenField = this.table.options.dataTreeChildField ?? 'children';\r\n\r\n            if (force === true) {\r\n                this.setFilterCache(fieldName, rowData[indexField], true);\r\n                for (const childRow of rowData[childrenField] || []) filter(filterVal, childRow[fieldName], childRow, filterParams, true);\r\n                return true;\r\n            }\r\n\r\n            // We check if we've already walked through that node (and therefore subtree).\r\n            if (this.getFilterCache(fieldName, rowData[indexField])) return true;\r\n\r\n            if (matchFunction(filterVal, rowValue, rowData, filterParams)) {\r\n                this.setFilterCache(fieldName, rowData[indexField], true);\r\n                //force set children visible if parent is visible\r\n                for (const childRow of rowData[childrenField] || []) filter(filterVal, childRow[fieldName], childRow, filterParams, true);\r\n                return true;\r\n            }\r\n\r\n            let anyChildMatch = false;\r\n            for (const childRow of rowData[childrenField] || []) {\r\n                // We walk down the tree recursively\r\n                const match = filter(filterVal, childRow[fieldName], childRow, filterParams);\r\n                if (match) anyChildMatch = true;\r\n            }\r\n\r\n            if (anyChildMatch) {\r\n                this.setFilterCache(fieldName, rowData[indexField], true);\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n        return filter;\r\n    }\r\n\r\n    /** Get field name by filter value and row value\r\n     * This is a workaround, because during filtering, Tabulator will not pass the name of the field that is currently being filtered, but you need to know it for correct filtering\r\n     */\r\n    private getFilterFieldName(filterVal: AnyType, rowValue: AnyType, rowData: AnyType, filterParams: AnyType): string {\r\n        if (filterParams?.fieldName) return filterParams?.fieldName;\r\n\r\n        const filters = this.table.getHeaderFilters();\r\n        for (const filter of filters) {\r\n            if (filterVal === filter.value && rowValue === rowData[filter.field]) return filter.field;\r\n        }\r\n\r\n        return this.getLastFilterField();\r\n    }\r\n\r\n    private getFilterCache(fieldName: string, key: string | number) {\r\n        return this.filteredCacheMap[fieldName]?.[key];\r\n    }\r\n\r\n    private setFilterCache(fieldName: string, key: string, val: boolean) {\r\n        let fieldMap = this.filteredCacheMap[fieldName];\r\n\r\n        if (!fieldMap) {\r\n            fieldMap = {};\r\n            this.filteredCacheMap[fieldName] = fieldMap;\r\n        }\r\n        fieldMap[key] = val;\r\n    }\r\n\r\n    private onFilterChanged() {\r\n        const headerFilters = this.table.getHeaderFilters();\r\n        const curHeaderFilterValues: Record<string, unknown> = {};\r\n        for (const filter of headerFilters) {\r\n            if (this.curHeaderFilterValues[filter.field] !== filter.value) {\r\n                //the filter value for this field has changed\r\n                this.filteredCacheMap[filter.field] = {}; //clear filtered cache\r\n                this.lastFilteredField = filter.field;\r\n            }\r\n\r\n            curHeaderFilterValues[filter.field] = filter.value;\r\n        }\r\n        this.curHeaderFilterValues = curHeaderFilterValues;\r\n    }\r\n\r\n    private getLastFilterField() {\r\n        return this.lastFilteredField ?? '';\r\n    }\r\n\r\n    /** Show/hide filters */\r\n    public toggleHeaderFilter(show?: boolean, firstInit?:boolean) {\r\n        // *Workaround:\r\n        // Tabulator allows to show/hide headerFilter only via updateColumnDefinition, which is very slow and leads to glitches and regenerates all columns.\r\n        // Let's use a workaround. We include headerFilter on grid initialization and hide it in CSS. When necessary, we display it, but this requires additional style calculations.\r\n\r\n        if (!show && !firstInit && this.table.getData()?.length) this.table.clearHeaderFilter();\r\n\r\n        const tableHolder = this.table.element.querySelector<HTMLElement>('.tabulator-tableholder');\r\n        const tabulatorHeader = this.table.element.querySelector<HTMLElement>('.tabulator-headers');\r\n        const headerElements = this.table.element.querySelectorAll<HTMLElement>('.tabulator-col');\r\n        const filterElements = this.table.element.querySelectorAll<HTMLElement>('.tabulator-header-filter');\r\n        if (!tableHolder || !tabulatorHeader || !headerElements || !filterElements) return this.headerFilterStatus;\r\n        const resizeElements = tabulatorHeader.querySelectorAll('.tabulator-col-resize-handle')\r\n\r\n        if (typeof show === 'undefined') show = !this.headerFilterStatus\r\n        this.headerFilterStatus = show;\r\n\r\n        let filterHeight = 0;\r\n        filterElements.forEach((elem) => {\r\n            if (filterHeight < elem.offsetHeight) filterHeight = elem.offsetHeight;\r\n            //elem.style.display = !show ? 'none' : 'block';\r\n            elem.style.visibility = !show ? 'hidden' : 'visible';\r\n        });\r\n\r\n        let headerHeight = 0;\r\n        headerElements.forEach((elem) => {\r\n            if (headerHeight < elem.offsetHeight) headerHeight = elem.offsetHeight;\r\n            elem.style.height = elem.offsetHeight + filterHeight * (show ? 1 : -1) + 'px';\r\n        });\r\n\r\n        resizeElements.forEach((elem) => {\r\n            (elem as HTMLElement).style.height = (elem as HTMLElement).offsetHeight + filterHeight * (show ? 1 : -1) + 'px';\r\n        });\r\n\r\n        tabulatorHeader.style.height = tabulatorHeader.offsetHeight + filterHeight * (show ? 1 : -1) + 'px'\r\n\r\n        const tableHolderHeight = this.parseHeight(tableHolder.style.height);\r\n        if (tableHolderHeight) {\r\n            tableHolder.style.minHeight = 'calc(100% - ' + (tableHolderHeight + filterHeight * (show ? 1 : -1)) + 'px)';\r\n            tableHolder.style.height = 'calc(100% - ' + (tableHolderHeight + filterHeight * (show ? 1 : -1)) + 'px)';\r\n            tableHolder.style.maxHeight = 'calc(100% - ' + (tableHolderHeight + filterHeight * (show ? 1 : -1)) + 'px)';\r\n            return this.headerFilterStatus\r\n        }\r\n\r\n        const tableHolderOffset = headerHeight + filterHeight * (show ? 1 : -1);\r\n        tableHolder.style.minHeight = 'calc(100% - ' + tableHolderOffset + 'px)';\r\n        tableHolder.style.height = 'calc(100% - ' + tableHolderOffset + 'px)';\r\n        tableHolder.style.maxHeight = 'calc(100% - ' + tableHolderOffset + 'px)';\r\n\r\n        return this.headerFilterStatus\r\n    }\r\n\r\n    private parseHeight(height: string) {\r\n        const parts = height.split('-')\r\n        if (!parts[1]) return 0;\r\n        const result = parseInt(parts[1].trim(), 10)\r\n        return isNaN(result) ? 0 : result;\r\n    }\r\n\r\n    public isHeaderFilterVisible() {\r\n        if (!this.isHeaderFilterAvailable()) return false;\r\n        return this.headerFilterStatus;\r\n    }\r\n\r\n    public isHeaderFilterAvailable() {\r\n        const filterCols = this.table.columnManager.columns.filter((column: { definition: ColumnDefinition }) => !!column?.definition?.headerFilter)\r\n        return filterCols.length > 0;\r\n    }\r\n}\r\n\r\nAdvancedHeaderFilterModule.moduleName = 'advancedHeaderFilter';\r\n\r\n\r\nconst defaultFilters: Record<string, ITabulatorFilterFunc | undefined> = {\r\n    //equal to\r\n    '=': function (filterVal, rowVal) {\r\n        return rowVal == filterVal;\r\n    },\r\n\r\n    //less than\r\n    '<': function (filterVal, rowVal) {\r\n        return rowVal < filterVal;\r\n    },\r\n\r\n    //less than or equal to\r\n    '<=': function (filterVal, rowVal) {\r\n        return rowVal <= filterVal;\r\n    },\r\n\r\n    //greater than\r\n    '>': function (filterVal, rowVal) {\r\n        return rowVal > filterVal;\r\n    },\r\n\r\n    //greater than or equal to\r\n    '>=': function (filterVal, rowVal) {\r\n        return rowVal >= filterVal;\r\n    },\r\n\r\n    //not equal to\r\n    '!=': function (filterVal, rowVal) {\r\n        return rowVal != filterVal;\r\n    },\r\n\r\n    regex: function (filterVal, rowVal) {\r\n        if (typeof filterVal == 'string') filterVal = new RegExp(filterVal);\r\n\r\n        return filterVal.test(rowVal);\r\n    },\r\n\r\n    //contains the string\r\n    like: function (filterVal, rowVal) {\r\n        if (filterVal === null || typeof filterVal === 'undefined') {\r\n            return rowVal === filterVal;\r\n        } else {\r\n            if (typeof rowVal !== 'undefined' && rowVal !== null) {\r\n                return String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n\r\n    //contains the keywords\r\n    keywords: function (filterVal, rowVal, _rowData, filterParams) {\r\n        const keywords = filterVal.toLowerCase().split(typeof filterParams.separator === 'undefined' ? ' ' : filterParams.separator),\r\n            value = String(rowVal === null || typeof rowVal === 'undefined' ? '' : rowVal).toLowerCase(),\r\n            matches = [];\r\n\r\n        keywords.forEach((keyword: string) => {\r\n            if (value.includes(keyword)) {\r\n                matches.push(true);\r\n            }\r\n        });\r\n\r\n        return filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\r\n    },\r\n\r\n    //starts with the string\r\n    starts: function (filterVal, rowVal) {\r\n        if (filterVal === null || typeof filterVal === 'undefined') {\r\n            return rowVal === filterVal;\r\n        } else {\r\n            if (typeof rowVal !== 'undefined' && rowVal !== null) {\r\n                return String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n\r\n    //ends with the string\r\n    ends: function (filterVal, rowVal) {\r\n        if (filterVal === null || typeof filterVal === 'undefined') {\r\n            return rowVal === filterVal;\r\n        } else {\r\n            if (typeof rowVal !== 'undefined' && rowVal !== null) {\r\n                return String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n\r\n    //in array\r\n    in: function (filterVal, rowVal) {\r\n        if (Array.isArray(filterVal)) {\r\n            return filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\r\n        } else {\r\n            console.warn('Filter Error - filter value is not an array:', filterVal);\r\n            return false;\r\n        }\r\n    },\r\n};","export const expandButton='<button type=\"button\" class=\"tree-row-button expand-button\" aria-label=\"Expand row\" aria-expanded=\"false\">+</button>';\r\nexport const collapseButton='<button type=\"button\" class=\"tree-row-button collapse-button\" aria-label=\"Expand row\" aria-expanded=\"false\">-</button>';","/** In Tabulator 5.5.2 scrollToRowPosition works incorrectly */\r\n\r\nconst elVisible = function (el) {\r\n    return !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\r\n};\r\n\r\nconst elOffset = function (el) {\r\n    var box = el.getBoundingClientRect();\r\n\r\n    return {\r\n        top: box.top + window.pageYOffset - document.documentElement.clientTop,\r\n        left: box.left + window.pageXOffset - document.documentElement.clientLeft,\r\n    };\r\n};\r\n\r\nconst scrollToRowPosition = function (row, position, ifVisible) {\r\n    let rowIndex = this.rows().indexOf(row),\r\n        rowEl = row.getElement(),\r\n        offset = 0;\r\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n    const _this = this;\r\n    return new Promise((resolve, reject) => {\r\n        if (rowIndex > -1) {\r\n            if (typeof ifVisible === 'undefined') {\r\n                ifVisible = _this.table.options.scrollToRowIfVisible;\r\n            }\r\n\r\n            //check row visibility\r\n            if (!ifVisible) {\r\n                if (elVisible(rowEl)) {\r\n                    offset = elOffset(rowEl).top - elOffset(_this.elementVertical).top;\r\n\r\n                    if (offset > 0 && offset < _this.elementVertical.clientHeight - rowEl.offsetHeight) {\r\n                        resolve();\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (typeof position === 'undefined') {\r\n                position = _this.table.options.scrollToRowPosition;\r\n            }\r\n\r\n            if (position === 'nearest') {\r\n                position = _this.scrollToRowNearestTop(row) ? 'top' : 'bottom';\r\n            }\r\n\r\n            //scroll to row\r\n            _this.scrollToRow(row);\r\n\r\n            //align to correct position\r\n            switch (position) {\r\n                case 'middle':\r\n                case 'center':\r\n                    //!TODO: Check if the developer fixed it. The condition did not work correctly due to a rounding error\r\n                    _this.elementVertical.scrollTop = rowEl.offsetTop - _this.elementVertical.clientHeight / 2 + rowEl.offsetHeight / 2;\r\n                    /*if(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){                       _this.elementVertical.scrollTop =\r\n                            _this.elementVertical.scrollTop +\r\n                            (rowEl.offsetTop - _this.elementVertical.scrollTop) -\r\n                            (_this.elementVertical.scrollHeight - rowEl.offsetTop) / 2;\r\n                    } else {\r\n                        _this.elementVertical.scrollTop = _this.elementVertical.scrollTop - _this.elementVertical.clientHeight / 2;\r\n                    }*/\r\n                    break;\r\n\r\n                case 'bottom':\r\n                    //!TODO: Check if the developer fixed it. The condition did not work correctly due to a rounding error\r\n                    _this.elementVertical.scrollTop = rowEl.offsetTop - _this.elementVertical.clientHeight + rowEl.offsetHeight;\r\n                    /*if(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\r\n                        _this.elementVertical.scrollTop =\r\n                            _this.elementVertical.scrollTop - (_this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\r\n                    } else {\r\n                        _this.elementVertical.scrollTop = _this.elementVertical.scrollTop - _this.elementVertical.clientHeight + rowEl.offsetHeight;\r\n                    }*/\r\n                    break;\r\n\r\n                case 'top':\r\n                    _this.elementVertical.scrollTop = rowEl.offsetTop;\r\n                    break;\r\n            }\r\n\r\n            resolve();\r\n        } else {\r\n            console.warn('Scroll Error - Row not visible');\r\n            reject('Scroll Error - Row not visible');\r\n        }\r\n    });\r\n};\r\n\r\nconst scrollToRowPatch = function (row, position, ifVisible) {\r\n    //return this.renderer.scrollToRowPosition(row, position, ifVisible);\r\n    return scrollToRowPosition.call(this.renderer, row, position, ifVisible);\r\n};\r\n\r\nexport const setScrollToRowPatch =(tableApi)=>{\r\n    tableApi.rowManager.scrollToRow = scrollToRowPatch.bind(tableApi.rowManager);\r\n}\r\n","/** In Tabulator 5.5.2 findRow looks for root rows only.\n * This patch corrects this behavior so that the function can also find the child row */\n\nlet oldFindRow;\nexport const setFindRowPatch = tableApi => {\n    oldFindRow = tableApi.rowManager.findRow;\n    tableApi.rowManager.findRow = findRowPatch;\n};\n\nexport const findRowPatch = function (subject) {\n    if (!this.table.options.dataTree || typeof subject == 'undefined' || typeof subject == 'object') return oldFindRow.call(this, subject);\n\n    return recursiveFindRow(this.table, this.rows, subject);\n};\n\nconst recursiveFindRow = (table, rows, key) => {\n    let result = undefined;\n    for (const row of rows) {\n        const rowComponent = getRowType(row) === 'rowComponent' ? row : row.getComponent();\n        if (rowComponent.getData()[table.options.index] === key) return rowComponent._getSelf();\n        const childRows = rowComponent.getTreeChildren();\n        if (childRows && childRows.length > 0) {\n            result = recursiveFindRow(table, childRows, key);\n            if (result) return result;\n        }\n    }\n\n    return false;\n};\n\nconst getRowType = row => {\n    if (!row) return undefined;\n    if (row._getSelf?.()?.type === 'row') return 'rowComponent';\n    if (row.type === 'row') return 'row';\n    return undefined;\n};\n","/** In Tabulator 5.5.2 we can disable loading overlay by setting dataLoader option to false, but can't disable error overlay */\r\n\r\nexport const setDisableErrorOverlayPatch = tableApi => {\r\n    tableApi.dataLoader.alertError = alertErrorPatch;\r\n};\r\n\r\nexport const alertErrorPatch = function () {\r\n        if(!this.table.options.dataLoader === false){\r\n            this.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\r\n        }\r\n};\r\n","/** In Tabulator 5.5.2 ajax request will be executed only if the dataSet is empty and the url for the request is specified,\n * or if the dataSet contains a url string instead of data\n * In this case, the ajaxRequestFunc property is ignored.\n * We need the request to be executed even if the ajaxRequestFunc property is specified\n */\n\nexport const setAjaxRequestDataCheckPatch = tableApi => {\n    tableApi.modules.ajax.requestDataCheck = requestDataCheck;\n};\n\nconst requestDataCheck = function (data) {\n    if (Array.isArray(data) && data.length>0) return false;\n    return !!((!data && this.url) || typeof data === \"string\" || this.table.options.ajaxRequestFunc);\n}","import {setScrollToRowPatch} from './scrollToRowPositionPatсh';\r\nimport {setFindRowPatch} from './findRowPatch';\r\nimport {setDisableErrorOverlayPatch} from \"@src/tabulatorBase/patches/disableErrorOverlay\";\r\nimport {setAjaxRequestDataCheckPatch} from \"@src/tabulatorBase/patches/ajaxRequestDataCheck\";\r\n\r\nexport const setPatches = (tableApi) => {\r\n    setScrollToRowPatch(tableApi);\r\n    setFindRowPatch(tableApi);\r\n    setDisableErrorOverlayPatch(tableApi)\r\n    setAjaxRequestDataCheckPatch(tableApi)\r\n};\r\n","import React, {useEffect} from \"react\";\r\n\r\nexport interface IBaseHocProps {\r\n    children: React.ReactNode\r\n    onEffect?: () => void\r\n}\r\n\r\nexport const BaseHOC = (props: IBaseHocProps): React.JSX.Element | null => {\r\n    useEffect(() => {\r\n        props.onEffect?.();\r\n    }, [props])\r\n\r\n    return (\r\n        <>{props.children}</>\r\n    );\r\n};\r\n","import React from 'react';\nimport {ColumnDefinition, EventCallBackMethods, TabulatorFull as Tabulator} from 'tabulator-tables';\nimport {createRoot} from 'react-dom/client';\nimport {ActiveSelectionModule} from '../modules/activeSelectionModule';\nimport {AdvancedHeaderFilterModule} from '../modules/advancedHeaderFilterModule';\nimport {collapseButton, expandButton} from '../parts/icons';\nimport {setPatches} from '../patches/setPatches';\nimport {BaseHOC} from '@src/tabulatorBase/parts/baseHOC';\nimport {IsDebugMode} from '@krinopotam/common-hooks';\nimport {ITabulator, ITabulatorColumn, ITabulatorProps} from \"@src/tabulatorBase\";\n\nexport const useInit = ({\n    props,\n    events,\n    containerRef,\n    tableRef,\n    onTableRef,\n}: {\n    props: ITabulatorProps;\n    events?: Partial<EventCallBackMethods>;\n    containerRef: React.RefObject<HTMLDivElement | null>;\n    tableRef: React.MutableRefObject<ITabulator | undefined>;\n    onTableRef?: (ref: React.MutableRefObject<ITabulator>) => void;\n}) => {\n    React.useEffect(() => {\n        initTabulator({props, events, containerRef, tableRef, onTableRef}).then();\n\n        return () => {\n            for (const eventName in events) {\n                const handler = events[eventName as keyof EventCallBackMethods];\n                // eslint-disable-next-line react-hooks/exhaustive-deps\n                tableRef.current?.off(eventName as keyof EventCallBackMethods, handler);\n            }\n\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            tableRef.current?.destroy();\n        };\n    }, [props, onTableRef, containerRef, tableRef, events]);\n};\n\nconst initTabulator = async ({\n    props,\n    events,\n    containerRef,\n    tableRef,\n    onTableRef,\n}: {\n    props: ITabulatorProps;\n    events?: Partial<EventCallBackMethods>;\n    containerRef: React.RefObject<HTMLDivElement | null>;\n    tableRef: React.MutableRefObject<ITabulator | undefined>;\n    onTableRef?: (ref: React.MutableRefObject<ITabulator>) => void;\n}) => {\n    const $container = containerRef.current as HTMLDivElement; // mounted DOM element\n    const propOptions = await propsToOptions(props);\n\n    //tableRef.current = await initTabulatorClass($container, tableRef, propOptions, props, events);\n    await initTabulatorClass($container, tableRef, onTableRef, propOptions, props, events);\n    //onTableRef?.(tableRef as React.MutableRefObject<ITabulator>);\n};\n\nconst syncRender = async (component: React.ReactNode, container: HTMLElement): Promise<HTMLElement> => {\n    return new Promise(resolve => {\n        const root = createRoot(container);\n        root.render(\n            <BaseHOC\n                onEffect={() => {\n                    resolve(container);\n                }}\n            >\n                {component}\n            </BaseHOC>\n        );\n    });\n};\n\nconst propsToOptions = async (props: ITabulatorProps) => {\n    const output = {...props} as ITabulator['options'];\n\n    const columns = (await columnPropsToOptions(props)) as ColumnDefinition[];\n\n    if (typeof props.footerElement === 'object') {\n        // convert from JSX to HTML string (tabulator's footerElement accepts string)\n        const el = await syncRender(props.footerElement, document.createElement('div'));\n        output.footerElement = el.innerHTML;\n    }\n\n    output.columnDefaults = props.columnDefaults ?? {};\n\n    output.data = props.data ?? []; //WORKAROUND: if dataSet is undefined dataSet must be []. Otherwise, problems may occur when adding rows\n\n    if (props.persistence && !props.id && !props.persistenceID && IsDebugMode())\n        console.warn('For Tabulator persistence to work correctly, you must specify an ID or persistenceID');\n\n\n    if (!props.dataTreeChildField) output.dataTreeChildField = 'children';\n    if (!props.dataTreeParentField) output.dataTreeParentField = 'parent';\n    if (!props.dataTreeChildIndent) output.dataTreeChildIndent = 22;\n    output.dataTreeBranchElement = false;\n\n    if (props.selectionMode) {\n        output.selectable = props.multiSelect === false ? 1 : true;\n        output.columns = [\n            {\n                title: '',\n                formatter: 'rowSelection',\n                titleFormatter: 'rowSelection',\n                titleFormatterParams: {\n                    rowRange: 'active', //only toggle the values of the active filtered rows\n                },\n                hozAlign: 'center',\n                headerSort: false,\n                width: 35,\n            },\n            ...columns,\n        ];\n    } else {\n        output.selectable = false; //We don't use built selectable mode. We use the custom selection algorithm\n        output.columns = columns;\n    }\n\n    output.selectableRangeMode = undefined;\n\n    output.dataTreeCollapseElement = props.dataTreeCollapseElement ?? collapseButton;\n    output.dataTreeExpandElement = props.dataTreeExpandElement ?? expandButton;\n    output.keybindings = {\n        navUp: false,\n        navDown: false,\n        scrollPageUp: false,\n        scrollPageDown: false,\n        scrollToStart: false,\n        scrollToEnd: false,\n    };\n    return output;\n};\nconst columnPropsToOptions = async (props: ITabulatorProps) => {\n    if (!props.columns) return undefined;\n\n    const recursive = async (columns: ITabulatorColumn[]) => {\n        const newColumns: ITabulatorColumn[] = [];\n        for (const column of columns) {\n            const newColumn: ITabulatorColumn = {...column};\n            if (React.isValidElement(newColumn.headerPopup)) {\n                // convert from JSX to HTML string (tabulator's element accepts string)\n                const el = await syncRender(newColumn.headerPopup, document.createElement('div'));\n                newColumn.headerPopup = el.innerHTML;\n            }\n\n            if (newColumn.columns?.length) newColumn.columns = await recursive(newColumn.columns)\n\n            newColumns.push(newColumn);\n        }\n\n        return newColumns;\n    };\n\n    return await recursive(props.columns);\n};\n\nconst initTabulatorClass = async (\n    $container: HTMLDivElement,\n    tableRef: React.MutableRefObject<ITabulator | undefined>,\n    onTableRef: ((ref: React.MutableRefObject<ITabulator>) => void) | undefined,\n    options: ITabulator['options'],\n    props: ITabulatorProps,\n    events?: Partial<EventCallBackMethods>\n): Promise<ITabulator> => {\n    Tabulator.registerModule(ActiveSelectionModule);\n    Tabulator.registerModule(AdvancedHeaderFilterModule);\n\n    return new Promise(resolve => {\n        const tableApi = new Tabulator($container, options) as ITabulator;\n\n        tableRef.current = tableApi;\n        onTableRef?.(tableRef as React.MutableRefObject<ITabulator>);\n\n        setPatches(tableApi); //TODO: Monkey patches. Check if the developer fixed it\n\n        if (!events) events = {};\n\n        for (const eventName in events) {\n            const handler = events[eventName as keyof EventCallBackMethods];\n            if (!handler) continue;\n            tableApi?.on(eventName as keyof EventCallBackMethods, handler);\n        }\n\n        tableApi?.on('tableBuilt', () => {\n            resolve(tableApi);\n        });\n    });\n};\n","import React from 'react';\r\nimport {createGlobalStyle} from 'styled-components';\r\nimport {GlobalToken, theme} from 'antd';\r\n\r\nconst {useToken} = theme;\r\n\r\ninterface IStyleType extends GlobalToken {\r\n    striped?: boolean\r\n}\r\n\r\nconst TabulatorCss = createGlobalStyle<IStyleType>`\r\n  .tabulator {\r\n    color: ${(props: GlobalToken) => props.colorText};\r\n    background-color: ${(props: GlobalToken) => props.colorBgContainer};\r\n    border-color: ${(props: GlobalToken) => props.colorBorder};\r\n    border-style: solid;\r\n    border-width: thin;\r\n    border-radius: ${(props: GlobalToken) => props.borderRadius}px;\r\n\r\n    .tabulator-header {\r\n      //background-color: transparent;\r\n      background-color: ${(props: GlobalToken) => props.colorBgLayout};\r\n      border-bottom-color: ${(props: GlobalToken) => props.colorBorder};\r\n\r\n      /** left frozen column header border */\r\n\r\n      .tabulator-calcs-holder {\r\n        border: 0;\r\n        border-top: 1px solid ${(props: GlobalToken) => props.colorBorder};\r\n        background-color: ${(props: GlobalToken) => props.colorBgLayout} !important;\r\n\r\n        .tabulator-calcs-top {\r\n          color: ${(props: GlobalToken) => props.colorText};\r\n          background-color: ${(props: GlobalToken) => props.colorBgLayout} !important;\r\n          border: 0;\r\n\r\n          .tabulator-cell {\r\n            border-right: 1px solid ${(props: GlobalToken) => props.colorBorder};\r\n          }\r\n        }\r\n\r\n        .tabulator-frozen.tabulator-frozen-left {\r\n          border-right: 2px solid ${(props: GlobalToken) => props.colorBorder};\r\n        }\r\n\r\n        .tabulator-frozen.tabulator-frozen-right {\r\n          border-left: 2px solid ${(props: GlobalToken) => props.colorBorder};\r\n        }\r\n      }\r\n\r\n      .tabulator-col-resize-handle {\r\n        transition: background-color 0.5s ease;\r\n\r\n        &:hover {\r\n          background-color: ${(props: GlobalToken) => props.colorPrimaryHover};\r\n        }\r\n      }\r\n\r\n      .tabulator-col {\r\n        background-color: ${(props: GlobalToken) => props.colorBgLayout};\r\n        border-right-color: ${(props: GlobalToken) => props.colorBorder};\r\n\r\n        &.tabulator-frozen.tabulator-frozen-left {\r\n          border-right: 2px solid ${(props: GlobalToken) => props.colorBorder};\r\n        }\r\n\r\n        &.tabulator-frozen.tabulator-frozen-right {\r\n          border-left: 2px solid ${(props: GlobalToken) => props.colorBorder};\r\n        }\r\n\r\n        &.tabulator-sortable {\r\n          &.tabulator-col-sorter-element:hover {\r\n            background-color: ${(props: GlobalToken) => props.colorFillQuaternary};\r\n          }\r\n        }\r\n\r\n        .tabulator-col-title {\r\n          color: ${(props: GlobalToken) => props.colorText};\r\n          font-size: ${(props: GlobalToken) => props.fontSize}px;\r\n        }\r\n\r\n        .tabulator-col-sorter {\r\n          color: ${(props: GlobalToken) => props.colorText};\r\n        }\r\n\r\n        &.tabulator-col-group .tabulator-col-group-cols {\r\n          border-top: 1px solid ${(props: GlobalToken) => props.colorBorder};\r\n        }\r\n\r\n        .tabulator-header-filter {\r\n          height: 27px;\r\n          max-height: 27px;\r\n\r\n          & input, textarea {\r\n            max-height: 27px;\r\n            color: ${(props: GlobalToken) => props.colorText};\r\n            font-size: ${(props: GlobalToken) => props.fontSize}px;\r\n            border-color: ${(props: GlobalToken) => props.colorBorder};\r\n            border-radius: ${(props: GlobalToken) => props.borderRadius}px;\r\n            background-color: ${(props: GlobalToken) => props.colorBgContainer};\r\n            padding-left: 11px !important;\r\n            padding-right: 11px !important;\r\n            border-style: solid;\r\n            border-width: 1px;\r\n\r\n            &:focus {\r\n              border-color: ${(props: GlobalToken) => props.colorPrimaryHover};\r\n              box-shadow: 0 0 0 2px ${(props: GlobalToken) => props.controlOutline};\r\n              border-inline-end-width: 1px;\r\n              outline: 0;\r\n            }\r\n\r\n            &:hover {\r\n              border-color: ${(props: GlobalToken) => props.colorPrimaryHover};\r\n            }\r\n          }\r\n        }\r\n\r\n\r\n      }\r\n    }\r\n\r\n    .tabulator-tableholder {\r\n      .tabulator-table {\r\n        background-color: transparent;\r\n        color: ${(props: GlobalToken) => props.colorText};\r\n        font-size: ${(props: GlobalToken) => props.fontSize}px;\r\n\r\n        .tabulator-row {\r\n          background-color: transparent;\r\n          border-bottom-color: ${(props: GlobalToken) => props.colorBorderSecondary};\r\n\r\n          &.tabulator-selectable:hover {\r\n            background-color: ${(props: GlobalToken) => props.colorFillQuaternary};\r\n          }\r\n\r\n          &:hover {\r\n              //background-color: ${(props: GlobalToken) => props.colorPrimaryBgHover};\r\n          }\r\n\r\n          &.tabulator-selected .tabulator-cell {\r\n            background-color: ${(props: GlobalToken) => props.colorPrimaryBg};\r\n          }\r\n\r\n          &.tabulator-selected.tabulator-row-even .tabulator-cell {\r\n            background-color: ${(props: GlobalToken) => props.colorPrimaryBg};\r\n          }\r\n\r\n          &.tabulator-selected:hover .tabulator-cell {\r\n              //background-color: ${(props: GlobalToken) => props.colorPrimaryBgHover};\r\n          }\r\n\r\n          &.tabulator-active .tabulator-cell {\r\n            background-color: ${(props: GlobalToken) => props.colorPrimaryBgHover};\r\n          }\r\n\r\n          &.tabulator-active.tabulator-row-even .tabulator-cell {\r\n            background-color: ${(props: GlobalToken) => props.colorPrimaryBgHover};\r\n          }\r\n\r\n          &.tabulator-row-odd .tabulator-cell {\r\n            //background-color: transparent;\r\n          }\r\n\r\n\r\n          &.tabulator-row-even .tabulator-cell {\r\n            background-color: ${(props) => {\r\n              return props.striped ? props.colorBgLayout : \"transparent\"\r\n            }};\r\n          }\r\n\r\n          /** Highlight row resize handler  */\r\n\r\n          .tabulator-row-resize-handle {\r\n            transition: background-color 0.5s ease;\r\n\r\n            &:hover {\r\n              background-color: ${(props: GlobalToken) => props.colorPrimaryHover};\r\n            }\r\n          }\r\n\r\n          .tabulator-cell {\r\n            background-color: ${(props: GlobalToken) => props.colorBgContainer};\r\n            border-right-color: ${(props: GlobalToken) => props.colorBorderSecondary};\r\n\r\n            &.tabulator-frozen.tabulator-frozen-left {\r\n              border-right: 2px solid ${(props: GlobalToken) => props.colorBorder};\r\n            }\r\n\r\n            &.tabulator-frozen.tabulator-frozen-right {\r\n              border-left: 2px solid ${(props: GlobalToken) => props.colorBorder};\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .tabulator-footer {\r\n      color: ${(props: GlobalToken) => props.colorText};\r\n      font-size: ${(props: GlobalToken) => props.fontSize}px;\r\n      background-color: ${(props: GlobalToken) => props.colorBgLayout};\r\n      border-top-color: ${(props: GlobalToken) => props.colorBorder};\r\n\r\n      .tabulator-calcs-holder {\r\n        background-color: ${(props: GlobalToken) => props.colorBgLayout} !important;\r\n        border: 0;\r\n        border-bottom: ${(props: GlobalToken) => props.colorBorder};\r\n        border-bottom-style: solid;\r\n        border-bottom-width: thin;\r\n\r\n        .tabulator-calcs-bottom {\r\n          border: 0;\r\n          background-color: ${(props: GlobalToken) => props.colorBgLayout} !important;\r\n\r\n          .tabulator-cell {\r\n            border-color: ${(props: GlobalToken) => props.colorBorder};\r\n          }\r\n\r\n          .tabulator-frozen.tabulator-frozen-left {\r\n            border-right: 2px solid ${(props: GlobalToken) => props.colorBorder};\r\n          }\r\n\r\n          .tabulator-frozen.tabulator-frozen-right {\r\n            border-left: 2px solid ${(props: GlobalToken) => props.colorBorder};\r\n          }\r\n        }\r\n      }\r\n\r\n      .tabulator-paginator {\r\n        color: ${(props: GlobalToken) => props.colorText};\r\n\r\n        button.tabulator-page {\r\n          color: ${(props: GlobalToken) => props.colorText};\r\n          transition: all 0.2s;\r\n          border-radius: ${(props: GlobalToken) => props.borderRadius}px;\r\n          padding: 0;\r\n          min-width: 32px;\r\n          height: 32px;\r\n          margin-inline-end: 8px;\r\n          text-align: center;\r\n          vertical-align: middle;\r\n          cursor: pointer;\r\n          user-select: none;\r\n          line-height: 30px;\r\n\r\n          &.active:not(:disabled) {\r\n            color: ${(props: GlobalToken) => props.colorText};\r\n            border: 1px solid ${(props: GlobalToken) => props.colorPrimary};\r\n            font-weight: 600;\r\n          }\r\n\r\n          &:not(:disabled) {\r\n            background-color: ${(props: GlobalToken) => props.colorBgLayout};\r\n            border-style: hidden;\r\n\r\n            &:hover {\r\n              background-color: ${(props: GlobalToken) => props.colorBgTextHover};\r\n            }\r\n          }\r\n\r\n          &:disabled {\r\n            border-style: hidden;\r\n            background-color: transparent;\r\n            color: ${(props: GlobalToken) => props.colorTextQuaternary};\r\n            opacity: 1;\r\n            cursor: not-allowed;\r\n          }\r\n        }\r\n\r\n        select.tabulator-page-size {\r\n          min-width: 32px;\r\n          height: 32px;\r\n          border-radius: ${(props: GlobalToken) => props.borderRadius}px;\r\n          border-color: ${(props: GlobalToken) => props.colorBorder};\r\n          color: ${(props: GlobalToken) => props.colorText};\r\n          background-color: ${(props: GlobalToken) => props.colorBgContainer};\r\n          border-style: solid;\r\n          border-width: 1px;\r\n\r\n          &:focus {\r\n            border-color: ${(props: GlobalToken) => props.colorPrimaryHover};\r\n            box-shadow: 0 0 0 2px ${(props: GlobalToken) => props.controlOutline};\r\n            border-inline-end-width: 1px;\r\n            outline: 0;\r\n          }\r\n\r\n\r\n          &:hover {\r\n            border: 1px solid ${(props: GlobalToken) => props.colorPrimaryHover};\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /** Collapse/expand button style */\r\n\r\n    .tree-row-button {\r\n      width: 17px;\r\n      height: 17px;\r\n      padding: 0;\r\n      margin-right: 5px;\r\n      font-size: ${(props: GlobalToken) => props.fontSize}px;\r\n      text-decoration: none;\r\n      outline: none;\r\n      cursor: pointer;\r\n      transition: all .3s;\r\n      box-sizing: border-box;\r\n      color: ${(props: GlobalToken) => props.colorText};\r\n      background-color: ${(props: GlobalToken) => props.colorBgContainer};\r\n      border-color: ${(props: GlobalToken) => props.colorBorder};\r\n      border-radius: ${(props: GlobalToken) => props.borderRadius}px;\r\n      border-style: solid;\r\n      border-width: 1px;\r\n      transform: scale(.9411764705882353);\r\n      user-select: none;\r\n      display: inline-flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n\r\n      &:hover {\r\n        color: ${(props: GlobalToken) => props.colorPrimaryHover};\r\n        border-color: ${(props: GlobalToken) => props.colorPrimaryHover};\r\n      }\r\n    }\r\n\r\n    .collapse-button button {\r\n    }\r\n\r\n    .expand-button button {\r\n    }\r\n  }\r\n`;\r\n\r\nexport const Stylization = ({striped}: { striped?: boolean }): React.JSX.Element => {\r\n    const {token} = useToken();\r\n    return <TabulatorCss striped={striped} {...token} />;\r\n};\r\n","import 'tabulator-tables/dist/css/tabulator_simple.css';\r\nimport React from 'react';\r\nimport {useInit} from './hooks/init';\r\nimport {GetUuid} from '@krinopotam/js-helpers';\r\nimport {Stylization} from '@src/tabulatorBase/stylization';\r\nimport {ITabulator, ITabulatorProps} from \"@src/tabulatorBase/types/tabulatorBaseTypes\";\r\n\r\nexport const TabulatorBase = ({onTableRef, events, containerClassName, width, minWidth, maxWidth, ...props}: ITabulatorProps): React.JSX.Element => {\r\n    const containerRef = React.useRef<HTMLDivElement>(null as unknown as HTMLDivElement);\r\n    const tableRef = React.useRef<ITabulator>();\r\n\r\n    const [newId] = React.useState(GetUuid());\r\n\r\n    useInit({props, events, containerRef, tableRef, onTableRef});\r\n\r\n    const containerStyle: React.CSSProperties = {\r\n        width: width,\r\n        maxWidth: maxWidth,\r\n        minWidth: minWidth,\r\n        userSelect: !props.allowTextSelection ? 'none' : undefined,\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Stylization striped={true} />\r\n            <div ref={containerRef} id={props.id ?? newId} data-instance={props.id ?? newId} className={containerClassName} style={containerStyle} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default TabulatorBase;\r\n"],"names":["IsDebugMode","CoreFeature","table","data","silent","columnsChanged","force","key","value","oldOption","newOption","msg","Helpers","el","box","obj","clone","list","objectProto","arrayProto","i","subject","match","copy","item","Popup","element","parent","container","callback","touch","x","y","parentOffset","position","offset","containerOffset","origin","parentEl","coords","e","scrollTop","Module","name","func","args","component","handler","priority","adjust","index","lookupIndex","renderInPosition","menuEl","menuContainer","content","type","defaultAccessors","Accessor","column","config","accessor","row","rowComponent","params","colComponent","defaultConfig","generateParamsList","prefix","output","serializeParams","encoded","urlBuilder","url","defaultLoaderPromise","contentType","resolve","reject","response","error","generateParamsList$1","defaultContentTypeFormatters","form","Ajax","ajaxParams","previousData","ajaxConfig","defaultPasteActions","rows","defaultPasteParsers","clipboard","headerFindSuccess","columns","columnMap","Clipboard","plain","html","rowData","col","range","internal","sel","textRange","action","parser","valid","CalcComponent","target","receiver","transform","cells","cell","CellComponent","mutate","Cell","field","vertAligns","hozAligns","classNames","className","val","containerOnly","changed","ColumnComponent","Column","ifVisible","to","after","toColumn","nextCol","prevCol","updates","width","result","defaultColumnOptions","def","newCol","defaults","contentElement","titleHolderElement","titleElement","text","title","contents","dataObj","structure","length","alignment","height","parentHeight","traverse","updateBranches","colDefs","visible","responsiveToggle","childWidth","child","minWidth","maxWidth","cellCount","setTo","definition","RowComponent","Row","inFragment","children","maxHeight","minHeight","updatedData","tempData","newRowData","attrname","findCell","before","toRow","blockRedraw","defaultCalculations","values","calcParams","precision","sum","unique","ColumnCalcs","viewable","left","groups","group","pos","calcs","paramKey","results","groupObj","subGroups","subGroupResults","subgroup","DataTree","dummyEl","options","firstCol","childArray","isArray","oldControl","allChildren","subChildren","sub","childData","childRow","childIndex","top","recurse","csv","setFileContents","delimiter","fileContents","headers","json","pdf","header","body","autoTableParams","rowGroupStyles","rowCalcStyles","jsPDFParams","parseRow","styles","doc","xlsx","self","sheetName","workbook","tableFeatures","compression","writeOptions","generateSheet","merges","worksheet","a","b","j","sheet","s2ab","s","buf","view","jsonLines","defaultDownloaders","Download","mimeType","filename","active","interceptCallback","downloadFunc","buildLink","mime","groupHeader","newTab","blob","maskInput","mask","maskLetter","maskNumber","maskWildcard","fillSymbols","symbol","char","input","onRendered","success","cancel","editorParams","cellValue","onChange","textarea","vertNav","scrollHeight","heightNow","number","blurFunc","date","inputFormat","DT","convertDate","newDatetime","luxDate","time","luxTime","datetime","luxDateTime","Edit","editor","initialValue","cellEl","clickStop","listEl","attribs","valueKeys","valueCheck","character","iteration","responseValues","placeholder","term","inputValues","option","level","sorter","as","bs","a1","b1","L","rx","rd","emptyAlign","filterFunc","matches","label","startVis","blur","select","autocomplete","star","maxStars","size","stars","starsHolder","starChange","buildStar","starHolder","nextStar","changeValue","progress","max","min","percent","handle","bar","mouseDrag","mouseDragWidth","updateValue","style","calcVal","tickCross","tristate","indetermValue","indetermState","trueValueSet","falseValueSet","setValue","checkedValue","defaultEditors","Edit$1","newRow","nextCell","prevRow","nextRow","prevCell","block","forceEdit","topEdge","bottomEdge","rowEl","leftEdge","rightEdge","check","allowEdit","rendered","cellEditor","editIndex","ExportRow","indent","ExportColumn","depth","Export","colVisProp","colData","maxDepth","groupData","subGroup","subGroupData","visProp","headerDepth","exportRows","parseColumnGroup","exportCols","headerEl","bodyEl","rowFormatter","setup","cellStyle","cellWrapper","formatComponent","holder","from","props","lookup","fromStyle","prop","defaultFilters","filterVal","rowVal","filterParams","keywords","keyword","Filter","all","filterType","filterChangeCheck","fieldVal","colVal","reinitialize","filterElement","editorElement","typingTimer","searchTrigger","onRenderedCallback","headerPos","filter","filters","ajax","filterList","searchType","activeRows","rowList","activeRowComponents","subFilter","plaintext","formatterParams","html$1","textarea$1","money","floatVal","sign","integer","decimal","rgx","decimalSym","thousandSym","negativeSign","link","urlPrefix","download","labelTraverse","path","image","src","tickCross$1","empty","truthy","tick","cross","datetime$1","outputFormat","invalid","datetimediff","suffix","unit","humanize","star$1","starActive","starInactive","traffic","colors","color","percentValue","progress$1","legendAlign","legend","legendColor","barEl","barContainer","legendEl","holderEl","buttonTick","buttonCross","rownum","responsiveCollapse","toggleList","isOpen","collapseEl","rowSelection","checkbox","blocked","defaultFormatters","Format","formatter","mockCell","entityMap","FrozenColumns","allCells","leftParents","leftMargin","rightMargin","visibleRows","otherRows","FrozenRows","frozenRows","rowType","GroupComponent","Group","groupManager","generator","oldGroup","elementsOnly","arrow","toggleElement","groupID","groupKey","toIndex","count","prev","includeChildren","GroupRows","groupBy","startOpen","langValue","lang","cols","lookupFunc","prevValue","groupRows","groupValues","toGroup","fromGroup","groupComponents","groupList","groupListData","oldGroups","newGroupNeeded","oldRowGroup","oldGroupPath","newGroupPath","samePath","groupPath","groupId","onlyGroupHeaders","defaultUndoers","defaultRedoers","History","oldRow","HtmlTableImport","defaultOptions","attributes","optionsArr","optionsList","attrib","exists","csvImporter","inQuote","nextChar","json$1","arrayImporter","defaultImporters","Import","err","importFormat","importer","extension","extensions","file","reader","parsedData","Interaction","types","added","noTouch","watchers","componentObj","defaultBindings","defaultActions","rowManager","newPos","scrollMax","Keybindings","bindings","mergedBindings","binding","bindingList","symbolsList","symbols","code","Menu","icon","headerMenuEl","menu","parentPopup","popup","itemEl","disabled","MoveColumns","colEl","startXMove","nextColWidth","prevColWidth","nextColWidthLast","prevColWidthLast","diff","moveToCol","headerElement","headersElement","movingCells","columnHolder","scrollLeft","xPos","scrollPos","MoveRows","startYMove","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","moveToRow","pageX","pageY","rowHolder","yPos","connectionTables","query","dropEvent","sender","fromRow","fromTable","toTable","defaultMutators","Mutator","mutator","links","linkCell","pageSize","currentRow","currentPage","totalRows","totalPages","showingEl","valueEl","ofEl","totalEl","rowsEl","pages","defaultPageCounters","Page","displayRows","testElRow","testElCell","dir","margin","button","pageSizes","counter","pageCounter","hidden","pageSelectLabel","paginationCounterHolder","mode","rowCount","page","leftSize","rightSize","actualRowPageSize","start","end","actualStartRow","actualRows","footer","defaultReaders","id","cookie","cookiePos","defaultWriters","expireDate","Persistence","testKey","retrievedData","sorters","headerFilters","layout","keys","newValue","current","oldCols","newCols","definitions","excludedKeys","defStore","colDef","Popup$1","headerPopupEl","renderedCallback","contentsEl","Print","scrollX","scrollY","footerEl","tableEl","headerContent","footerContent","ReactiveData","version","arg","newRows","startRow","oldRows","childField","origFuncs","update","ResizeColumns","frozenOffset","variableHeight","nearestColumn","handleDown","oldWidth","handleEl","mouseMove","startDiff","moveDiff","blockedBefore","blockedAfter","colWidth","mouseUp","ResizeRows","prevHandle","prevHandleDown","ResizeTable","tableStyle","entry","nodeHeight","nodeWidth","entries","ResponsiveLayout","colCount","working","mockCellComponent","titleData","valueData","node_content","titleHighlight","SelectRow","prevSelected","endSelect","lastClickedRowIdx","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","changes","rowMatch","change","rowInfo","selectedRow","selected","deselected","number$1","aRow","bRow","alignEmptyValues","thousand","string","locale","datetime$2","format","date$1","time$1","boolean","el1","el2","array","calc","c","d","alphanum","defaultSorters","Sort","sortList","arrowEl","newSortList","sortListActual","rowComponents","sortObj","sortEl","sorterCount","sortItem","el1Comp","el2Comp","Tooltip","tooltip","defaultValidators","parameters","reg","cellData","Validate","previousValue","cancelled","validator","validators","failedValidators","invalidIndex","modules","OptionsList","msgType","userOptions","warn","Renderer","includingBuffer","rowIndex","BasicHorizontal","rowFrag","VirtualDomHorizontal","buffer","old","colPos","colEnd","ex","newWidth","widthDiff","ColumnManager","renderClass","renderers","nextToColumn","topColumn","parentIndex","nextEl","root","fieldRoot","structured","updateRows","fromIndex","totalWidth","fixedWidth","BasicVertical","tableFrag","rowTop","VirtualDomVertical","topRow","topOffset","topDiff","bottomDiff","topFound","bottomRow","forceMove","topPad","rowsHeight","rowHeight","heightOccupied","topPadHeight","rowsCount","rowFragment","renderedRows","totalRowsRendered","rowsToRender","fixedHeight","containerHeight","avgRowHeight","resized","fillableSpace","addedRows","paddingAdjust","initialized","removableRows","RowManager","leftDir","topDir","allIndex","activeIndex","displayIndex","refreshDisplayOnly","chainResult","rowOnly","skipStage","stage","cascadeOrder","chain","scrollbarWidth","initialHeight","otherHeight","event","FooterManager","InteractionManager","listenerMap","listener","leaveList","linkedKeys","listeners","components","comp","targets","componentMap","classList","elTargets","targetMatches","previousTarget","ComponentFunctionBinder","funcName","DataLoader","replace","requestNo","map","shouldLoad","ExternalEventBus","debug","subscribed","notifiers","callResult","InternalEventBus","fallback","subscriber","confirmed","DeprecationAdvisor","TableRegistry","Tabulator","fitData","forced","fitDataGeneral","fitDataStretch","colsWidth","tableWidth","gap","lastCol","fitColumns","flexWidth","flexGrowUnits","flexColWidth","flexColumns","fixedShrinkColumns","flexShrinkUnits","overflowWidth","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","remainingFlexGrowUnits","changeUnits","undersizeCols","calcGrow","calcShrink","defaultModes","Layout","dataChanged","defaultLangs","Localize","desiredLocale","traverseLang","trans","fillPath","pathArray","rootPath","Comms","selectors","connections","connection","con","module","coreModules","ModuleBinder","tabulator","property","source","mod","orderedStartMods","orderedEndMods","unOrderedMods","core","mods","Alert","newElement","ua","stack","line","responses","foundRows","fromColumn","plugin","required","TabulatorFull","ActiveSelectionModule","__publicField","_this","rowNode","newNode","curActiveRow","clearSelection","scrollPosition","prevActiveRow","_b","_a","_d","_c","clientHeight","curRow","rowCandidate","selectedRows","activeReached","rowStart","rowEnd","rowNodes","nodes","inProcess","recursive","node","AdvancedHeaderFilterModule","filterFunctions","newDefFilters","filterColumns","matchFunction","rowValue","fieldName","indexField","childrenField","anyChildMatch","fieldMap","curHeaderFilterValues","show","firstInit","tableHolder","tabulatorHeader","headerElements","filterElements","resizeElements","filterHeight","elem","headerHeight","tableHolderHeight","tableHolderOffset","parts","_rowData","expandButton","collapseButton","elVisible","elOffset","scrollToRowPosition","scrollToRowPatch","setScrollToRowPatch","tableApi","oldFindRow","setFindRowPatch","findRowPatch","recursiveFindRow","getRowType","childRows","setDisableErrorOverlayPatch","alertErrorPatch","setAjaxRequestDataCheckPatch","requestDataCheck","setPatches","BaseHOC","useEffect","jsx","Fragment","useInit","events","containerRef","tableRef","onTableRef","React","initTabulator","eventName","$container","propOptions","propsToOptions","initTabulatorClass","syncRender","createRoot","columnPropsToOptions","newColumns","newColumn","useToken","theme","TabulatorCss","createGlobalStyle","Stylization","striped","token","TabulatorBase","containerClassName","newId","GetUuid","containerStyle","jsxs"],"mappings":"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","x_google_ignoreList":[0,1]}