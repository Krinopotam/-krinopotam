{"version":3,"file":"useGetActualProps.js","sources":["../src/useGetActualProps.ts"],"sourcesContent":["import {useRef, useState} from \"react\";\r\n\r\n/**\r\n * Returns actual props and setProps function. The props can be changed both by the parent component and setProps function\r\n * @param props\r\n * @returns\r\n */\r\n\r\nexport const useGetActualProps = <T, >(props: T): [T, (props: T | ((prevValue: T) => T)) => void] => {\r\n    const curPropsRef = useRef<T>(props); // props, changed by parent component\r\n    const curExtPropsRef = useRef<T>(props); // props, changed setProps function\r\n\r\n    const rerender = useGetRerender();\r\n    const setProps = (props: T | ((prevValue: T) => T)) => {\r\n        if (typeof props === 'function') curExtPropsRef.current = (props as (prevValue: T) => T)(curExtPropsRef.current);\r\n        else curExtPropsRef.current = props;\r\n\r\n        rerender();\r\n    };\r\n\r\n    if (curPropsRef.current !== props) {\r\n        //props changed by parent component\r\n        curPropsRef.current = props;\r\n        curExtPropsRef.current = props;\r\n        return [curPropsRef.current, setProps]; //returns props, changed by parent component\r\n    }\r\n\r\n    return [curExtPropsRef.current, setProps]; //returns props, changed by setProps\r\n};\r\n\r\n/** Get rerender modal form method */\r\nconst useGetRerender = () => {\r\n    const [, setUpdateComponent] = useState({});\r\n    return () => setUpdateComponent({});\r\n};"],"names":["useGetActualProps","props","curPropsRef","useRef","curExtPropsRef","rerender","useGetRerender","setProps","setUpdateComponent","useState"],"mappings":";AAQa,MAAAA,IAAoB,CAAMC,MAA8D;AAC3F,QAAAC,IAAcC,EAAUF,CAAK,GAC7BG,IAAiBD,EAAUF,CAAK,GAEhCI,IAAWC,EAAe,GAC1BC,IAAW,CAACN,MAAqC;AACnD,IAAI,OAAOA,KAAU,eAA2B,UAAWA,EAA8BG,EAAe,OAAO,MAC3F,UAAUH,GAErBI,EAAA;AAAA,EACb;AAEI,SAAAH,EAAY,YAAYD,KAExBC,EAAY,UAAUD,GACtBG,EAAe,UAAUH,GAClB,CAACC,EAAY,SAASK,CAAQ,KAGlC,CAACH,EAAe,SAASG,CAAQ;AAC5C,GAGMD,IAAiB,MAAM;AACzB,QAAM,GAAGE,CAAkB,IAAIC,EAAS,EAAE;AACnC,SAAA,MAAMD,EAAmB,EAAE;AACtC;"}